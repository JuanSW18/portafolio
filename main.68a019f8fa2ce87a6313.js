var jA=Object.defineProperty,$A=Object.defineProperties,HA=Object.getOwnPropertyDescriptors,Eb=Object.getOwnPropertySymbols,GA=Object.prototype.hasOwnProperty,WA=Object.prototype.propertyIsEnumerable,wb=(Ot,Ge,z)=>Ge in Ot?jA(Ot,Ge,{enumerable:!0,configurable:!0,writable:!0,value:z}):Ot[Ge]=z,Cb=(Ot,Ge)=>{for(var z in Ge||(Ge={}))GA.call(Ge,z)&&wb(Ot,z,Ge[z]);if(Eb)for(var z of Eb(Ge))WA.call(Ge,z)&&wb(Ot,z,Ge[z]);return Ot},bb=(Ot,Ge)=>$A(Ot,HA(Ge));(self.webpackChunkportafolio=self.webpackChunkportafolio||[]).push([[179],{8255:Ot=>{function Ge(z){return Promise.resolve().then(()=>{var T=new Error("Cannot find module '"+z+"'");throw T.code="MODULE_NOT_FOUND",T})}Ge.keys=()=>[],Ge.resolve=Ge,Ge.id=8255,Ot.exports=Ge},8583:(Ot,Ge,z)=>{"use strict";z.d(Ge,{mr:()=>Be,ez:()=>Zo,K0:()=>Me,Do:()=>_t,V_:()=>se,Ye:()=>Wt,S$:()=>Ct,mk:()=>Ts,sg:()=>Sn,O5:()=>wi,b0:()=>Ce,lw:()=>he,EM:()=>yr,JF:()=>Ss,PM:()=>co,w_:()=>de,bD:()=>Fs,q:()=>ie,Mx:()=>Pi,HT:()=>Ae});var T=z(7716);let U=null;function ie(){return U}function Ae(V){U||(U=V)}class de{}const Me=new T.OlP("DocumentToken");let he=(()=>{class V{historyGo(B){throw new Error("Not implemented")}}return V.\u0275fac=function(B){return new(B||V)},V.\u0275prov=(0,T.Yz7)({factory:we,token:V,providedIn:"platform"}),V})();function we(){return(0,T.LFG)(ce)}const se=new T.OlP("Location Initialized");let ce=(()=>{class V extends he{constructor(B){super(),this._doc=B,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ie().getBaseHref(this._doc)}onPopState(B){const te=ie().getGlobalEventTarget(this._doc,"window");return te.addEventListener("popstate",B,!1),()=>te.removeEventListener("popstate",B)}onHashChange(B){const te=ie().getGlobalEventTarget(this._doc,"window");return te.addEventListener("hashchange",B,!1),()=>te.removeEventListener("hashchange",B)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(B){this.location.pathname=B}pushState(B,te,me){pe()?this._history.pushState(B,te,me):this.location.hash=me}replaceState(B,te,me){pe()?this._history.replaceState(B,te,me):this.location.hash=me}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return V.\u0275fac=function(B){return new(B||V)(T.LFG(Me))},V.\u0275prov=(0,T.Yz7)({factory:$e,token:V,providedIn:"platform"}),V})();function pe(){return!!window.history.pushState}function $e(){return new ce((0,T.LFG)(Me))}function Ye(V,Q){if(0==V.length)return Q;if(0==Q.length)return V;let B=0;return V.endsWith("/")&&B++,Q.startsWith("/")&&B++,2==B?V+Q.substring(1):1==B?V+Q:V+"/"+Q}function it(V){const Q=V.match(/#|\?|$/),B=Q&&Q.index||V.length;return V.slice(0,B-("/"===V[B-1]?1:0))+V.slice(B)}function ze(V){return V&&"?"!==V[0]?"?"+V:V}let Ct=(()=>{class V{historyGo(B){throw new Error("Not implemented")}}return V.\u0275fac=function(B){return new(B||V)},V.\u0275prov=(0,T.Yz7)({factory:We,token:V,providedIn:"root"}),V})();function We(V){const Q=(0,T.LFG)(Me).location;return new Ce((0,T.LFG)(he),Q&&Q.origin||"")}const Be=new T.OlP("appBaseHref");let Ce=(()=>{class V extends Ct{constructor(B,te){if(super(),this._platformLocation=B,this._removeListenerFns=[],null==te&&(te=this._platformLocation.getBaseHrefFromDOM()),null==te)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=te}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return Ye(this._baseHref,B)}path(B=!1){const te=this._platformLocation.pathname+ze(this._platformLocation.search),me=this._platformLocation.hash;return me&&B?`${te}${me}`:te}pushState(B,te,me,qe){const Je=this.prepareExternalUrl(me+ze(qe));this._platformLocation.pushState(B,te,Je)}replaceState(B,te,me,qe){const Je=this.prepareExternalUrl(me+ze(qe));this._platformLocation.replaceState(B,te,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(B=0){var te,me;null===(me=(te=this._platformLocation).historyGo)||void 0===me||me.call(te,B)}}return V.\u0275fac=function(B){return new(B||V)(T.LFG(he),T.LFG(Be,8))},V.\u0275prov=T.Yz7({token:V,factory:V.\u0275fac}),V})(),_t=(()=>{class V extends Ct{constructor(B,te){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=te&&(this._baseHref=te)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let te=this._platformLocation.hash;return null==te&&(te="#"),te.length>0?te.substring(1):te}prepareExternalUrl(B){const te=Ye(this._baseHref,B);return te.length>0?"#"+te:te}pushState(B,te,me,qe){let Je=this.prepareExternalUrl(me+ze(qe));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.pushState(B,te,Je)}replaceState(B,te,me,qe){let Je=this.prepareExternalUrl(me+ze(qe));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.replaceState(B,te,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(B=0){var te,me;null===(me=(te=this._platformLocation).historyGo)||void 0===me||me.call(te,B)}}return V.\u0275fac=function(B){return new(B||V)(T.LFG(he),T.LFG(Be,8))},V.\u0275prov=T.Yz7({token:V,factory:V.\u0275fac}),V})(),Wt=(()=>{class V{constructor(B,te){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=B;const me=this._platformStrategy.getBaseHref();this._platformLocation=te,this._baseHref=it(fn(me)),this._platformStrategy.onPopState(qe=>{this._subject.emit({url:this.path(!0),pop:!0,state:qe.state,type:qe.type})})}path(B=!1){return this.normalize(this._platformStrategy.path(B))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(B,te=""){return this.path()==this.normalize(B+ze(te))}normalize(B){return V.stripTrailingSlash(function(V,Q){return V&&Q.startsWith(V)?Q.substring(V.length):Q}(this._baseHref,fn(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._platformStrategy.prepareExternalUrl(B)}go(B,te="",me=null){this._platformStrategy.pushState(me,"",B,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ze(te)),me)}replaceState(B,te="",me=null){this._platformStrategy.replaceState(me,"",B,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ze(te)),me)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(B=0){var te,me;null===(me=(te=this._platformStrategy).historyGo)||void 0===me||me.call(te,B)}onUrlChange(B){this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(te=>{this._notifyUrlChangeListeners(te.url,te.state)}))}_notifyUrlChangeListeners(B="",te){this._urlChangeListeners.forEach(me=>me(B,te))}subscribe(B,te,me){return this._subject.subscribe({next:B,error:te,complete:me})}}return V.\u0275fac=function(B){return new(B||V)(T.LFG(Ct),T.LFG(he))},V.normalizeQueryParams=ze,V.joinWithSlash=Ye,V.stripTrailingSlash=it,V.\u0275prov=(0,T.Yz7)({factory:nn,token:V,providedIn:"root"}),V})();function nn(){return new Wt((0,T.LFG)(Ct),(0,T.LFG)(he))}function fn(V){return V.replace(/\/index.html$/,"")}var bt=(()=>((bt=bt||{})[bt.Zero=0]="Zero",bt[bt.One=1]="One",bt[bt.Two=2]="Two",bt[bt.Few=3]="Few",bt[bt.Many=4]="Many",bt[bt.Other=5]="Other",bt))();const ri=T.kL8;class Dr{}let Or=(()=>{class V extends Dr{constructor(B){super(),this.locale=B}getPluralCategory(B,te){switch(ri(te||this.locale)(B)){case bt.Zero:return"zero";case bt.One:return"one";case bt.Two:return"two";case bt.Few:return"few";case bt.Many:return"many";default:return"other"}}}return V.\u0275fac=function(B){return new(B||V)(T.LFG(T.soG))},V.\u0275prov=T.Yz7({token:V,factory:V.\u0275fac}),V})();function Pi(V,Q){Q=encodeURIComponent(Q);for(const B of V.split(";")){const te=B.indexOf("="),[me,qe]=-1==te?[B,""]:[B.slice(0,te),B.slice(te+1)];if(me.trim()===Q)return decodeURIComponent(qe)}return null}let Ts=(()=>{class V{constructor(B,te,me,qe){this._iterableDiffers=B,this._keyValueDiffers=te,this._ngEl=me,this._renderer=qe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(B){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof B?B.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(B){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof B?B.split(/\s+/):B,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const B=this._iterableDiffer.diff(this._rawClass);B&&this._applyIterableChanges(B)}else if(this._keyValueDiffer){const B=this._keyValueDiffer.diff(this._rawClass);B&&this._applyKeyValueChanges(B)}}_applyKeyValueChanges(B){B.forEachAddedItem(te=>this._toggleClass(te.key,te.currentValue)),B.forEachChangedItem(te=>this._toggleClass(te.key,te.currentValue)),B.forEachRemovedItem(te=>{te.previousValue&&this._toggleClass(te.key,!1)})}_applyIterableChanges(B){B.forEachAddedItem(te=>{if("string"!=typeof te.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(te.item)}`);this._toggleClass(te.item,!0)}),B.forEachRemovedItem(te=>this._toggleClass(te.item,!1))}_applyClasses(B){B&&(Array.isArray(B)||B instanceof Set?B.forEach(te=>this._toggleClass(te,!0)):Object.keys(B).forEach(te=>this._toggleClass(te,!!B[te])))}_removeClasses(B){B&&(Array.isArray(B)||B instanceof Set?B.forEach(te=>this._toggleClass(te,!1)):Object.keys(B).forEach(te=>this._toggleClass(te,!1)))}_toggleClass(B,te){(B=B.trim())&&B.split(/\s+/g).forEach(me=>{te?this._renderer.addClass(this._ngEl.nativeElement,me):this._renderer.removeClass(this._ngEl.nativeElement,me)})}}return V.\u0275fac=function(B){return new(B||V)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},V.\u0275dir=T.lG2({type:V,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),V})();class ki{constructor(Q,B,te,me){this.$implicit=Q,this.ngForOf=B,this.index=te,this.count=me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sn=(()=>{class V{constructor(B,te,me){this._viewContainer=B,this._template=te,this._differs=me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;if(!this._differ&&B)try{this._differ=this._differs.find(B).create(this.ngForTrackBy)}catch(te){throw new Error(`Cannot find a differ supporting object '${B}' of type '${function(V){return V.name||typeof V}(B)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const te=[];B.forEachOperation((me,qe,Je)=>{if(null==me.previousIndex){const F=this._viewContainer.createEmbeddedView(this._template,new ki(null,this._ngForOf,-1,-1),null===Je?void 0:Je),O=new Do(me,F);te.push(O)}else if(null==Je)this._viewContainer.remove(null===qe?void 0:qe);else if(null!==qe){const F=this._viewContainer.get(qe);this._viewContainer.move(F,Je);const O=new Do(me,F);te.push(O)}});for(let me=0;me<te.length;me++)this._perViewChange(te[me].view,te[me].record);for(let me=0,qe=this._viewContainer.length;me<qe;me++){const Je=this._viewContainer.get(me);Je.context.index=me,Je.context.count=qe,Je.context.ngForOf=this._ngForOf}B.forEachIdentityChange(me=>{this._viewContainer.get(me.currentIndex).context.$implicit=me.item})}_perViewChange(B,te){B.context.$implicit=te.item}static ngTemplateContextGuard(B,te){return!0}}return V.\u0275fac=function(B){return new(B||V)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},V.\u0275dir=T.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),V})();class Do{constructor(Q,B){this.record=Q,this.view=B}}let wi=(()=>{class V{constructor(B,te){this._viewContainer=B,this._context=new ao,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=te}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){ss("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){ss("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,te){return!0}}return V.\u0275fac=function(B){return new(B||V)(T.Y36(T.s_b),T.Y36(T.Rgc))},V.\u0275dir=T.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),V})();class ao{constructor(){this.$implicit=null,this.ngIf=null}}function ss(V,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,T.AaK)(Q)}'.`)}let Zo=(()=>{class V{}return V.\u0275fac=function(B){return new(B||V)},V.\u0275mod=T.oAB({type:V}),V.\u0275inj=T.cJS({providers:[{provide:Dr,useClass:Or}]}),V})();const Fs="browser";function co(V){return"server"===V}let yr=(()=>{class V{}return V.\u0275prov=(0,T.Yz7)({token:V,providedIn:"root",factory:()=>new Vs((0,T.LFG)(Me),window)}),V})();class Vs{constructor(Q,B){this.document=Q,this.window=B,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const B=function(V,Q){const B=V.getElementById(Q)||V.getElementsByName(Q)[0];if(B)return B;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const te=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let me=te.currentNode;for(;me;){const qe=me.shadowRoot;if(qe){const Je=qe.getElementById(Q)||qe.querySelector(`[name="${Q}"]`);if(Je)return Je}me=te.nextNode()}}return null}(this.document,Q);B&&(this.scrollToElement(B),this.attemptFocus(B))}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=Q)}}scrollToElement(Q){const B=Q.getBoundingClientRect(),te=B.left+this.window.pageXOffset,me=B.top+this.window.pageYOffset,qe=this.offset();this.window.scrollTo(te-qe[0],me-qe[1])}attemptFocus(Q){return Q.focus(),this.document.activeElement===Q}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=Yo(this.window.history)||Yo(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function Yo(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class Ss{}},7716:(Ot,Ge,z)=>{"use strict";z.d(Ge,{deG:()=>Fc,tb:()=>MC,AFp:()=>xC,ip1:()=>h0,CZH:()=>W_,hGG:()=>GS,z2F:()=>iv,sBO:()=>NI,Sil:()=>rv,_Vd:()=>L_,EJc:()=>OC,SBq:()=>Xh,qLn:()=>hs,vpe:()=>ef,gxx:()=>Hl,tBr:()=>xa,XFs:()=>xt,OlP:()=>ci,zs3:()=>Hi,ZZ4:()=>$v,aQg:()=>Hv,soG:()=>eE,YKP:()=>Cw,v3s:()=>bS,h0i:()=>Mm,PXZ:()=>_S,R0b:()=>Nc,FiY:()=>yu,Lbi:()=>NC,g9A:()=>RC,Qsj:()=>mI,FYo:()=>jv,JOm:()=>Go,Tiy:()=>VE,q3G:()=>$r,tp0:()=>Ya,EAV:()=>SS,Rgc:()=>Wy,dDg:()=>VC,DyG:()=>no,q4F:()=>UE,GfV:()=>gw,s_b:()=>zv,ifc:()=>Pt,eFA:()=>HC,G48:()=>cS,Gpc:()=>ce,X6Q:()=>v0,_c5:()=>LS,VLi:()=>lS,c2e:()=>PC,zSh:()=>sl,wAp:()=>e,vHH:()=>it,EiD:()=>fr,mCW:()=>Eu,qzn:()=>Xa,JVY:()=>sp,pB0:()=>lf,eBb:()=>uf,L6k:()=>Id,LAX:()=>Hc,cg1:()=>Uy,Tjo:()=>kS,kL8:()=>By,yhl:()=>fa,dqk:()=>Dt,sIi:()=>zh,CqO:()=>Oe,QGY:()=>X,F4k:()=>ue,RDi:()=>ho,AaK:()=>he,z3N:()=>Ja,qOj:()=>Xp,TTD:()=>Zo,_Bn:()=>cw,xp6:()=>Ah,uIk:()=>Gf,ekj:()=>R_,Suo:()=>aC,Xpm:()=>tn,lG2:()=>ps,Yz7:()=>en,cJS:()=>an,oAB:()=>Ni,Yjl:()=>Ko,Y36:()=>nh,_UZ:()=>o,BQk:()=>D,ynx:()=>y,qZA:()=>c,TgZ:()=>Zf,EpF:()=>K,n5z:()=>Se,Ikx:()=>k_,LFG:()=>Sr,$8M:()=>Gt,NdJ:()=>Ue,CRH:()=>uC,oxw:()=>Co,Hsn:()=>rs,F$t:()=>Wi,Q6J:()=>Cm,DdM:()=>Yw,VKq:()=>Qw,iGM:()=>sC,CHM:()=>vs,LSH:()=>Td,kYT:()=>ks,YNc:()=>ug,_uU:()=>fg,Oqu:()=>Tm,hij:()=>M_,AsE:()=>Ry,Gf:()=>oC});var T=z(9765),U=z(5319),ie=z(7574),Re=z(6682),Ae=z(8819);function de(t){for(let n in t)if(t[n]===de)return n;throw Error("Could not find renamed property on target object.")}function Me(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function he(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(he).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function we(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const se=de({__forward_ref__:de});function ce(t){return t.__forward_ref__=ce,t.toString=function(){return he(this())},t}function pe(t){return $e(t)?t():t}function $e(t){return"function"==typeof t&&t.hasOwnProperty(se)&&t.__forward_ref__===ce}class it extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function We(t){return"string"==typeof t?t:null==t?"":String(t)}function Be(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():We(t)}function nn(t,n){const i=n?` in ${n}`:"";throw new it("201",`No provider for ${Be(t)} found${i}`)}function gn(t,n){null==t&&function(t,n,i,u){throw new Error(`ASSERTION ERROR: ${t}`+(null==u?"":` [Expected=> ${i} ${u} ${n} <=Actual]`))}(n,t,null,"!=")}function en(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function an(t){return{providers:t.providers||[],imports:t.imports||[]}}function Fn(t){return gr(t,ri)||gr(t,et)}function gr(t,n){return t.hasOwnProperty(n)?t[n]:null}function ir(t){return t&&(t.hasOwnProperty(Mn)||t.hasOwnProperty(un))?t[Mn]:null}const ri=de({\u0275prov:de}),Mn=de({\u0275inj:de}),et=de({ngInjectableDef:de}),un=de({ngInjectorDef:de});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let jn;function xn(t){const n=jn;return jn=t,n}function xr(t,n,i){const u=Fn(t);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:i&xt.Optional?null:void 0!==n?n:void nn(he(t),"Injector")}function br(t){return{toString:t}.toString()}var hr=(()=>((hr=hr||{})[hr.OnPush=0]="OnPush",hr[hr.Default=1]="Default",hr))(),Pt=(()=>((Pt=Pt||{})[Pt.Emulated=0]="Emulated",Pt[Pt.None=2]="None",Pt[Pt.ShadowDom=3]="ShadowDom",Pt))();const rn="undefined"!=typeof globalThis&&globalThis,xi="undefined"!=typeof window&&window,Ds="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt=rn||"undefined"!=typeof global&&global||xi||Ds,Dn={},Tn=[],ye=de({\u0275cmp:de}),Ie=de({\u0275dir:de}),ge=de({\u0275pipe:de}),ve=de({\u0275mod:de}),De=de({\u0275loc:de}),rt=de({\u0275fac:de}),Tt=de({__NG_ELEMENT_ID__:de});let on=0;function tn(t){return br(()=>{const i={},u={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===hr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Tn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Pt.Emulated,id:"c",styles:t.styles||Tn,_:null,setInput:null,schemas:t.schemas||null,tView:null},d=t.directives,p=t.features,v=t.pipes;return u.id+=on++,u.inputs=is(t.inputs,i),u.outputs=is(t.outputs),p&&p.forEach(w=>w(u)),u.directiveDefs=d?()=>("function"==typeof d?d():d).map(Ri):null,u.pipeDefs=v?()=>("function"==typeof v?v():v).map(Cn):null,u})}function Ri(t){return Qn(t)||function(t){return t[Ie]||null}(t)}function Cn(t){return function(t){return t[ge]||null}(t)}const ii={};function Ni(t){return br(()=>{const n={type:t.type,bootstrap:t.bootstrap||Tn,declarations:t.declarations||Tn,imports:t.imports||Tn,exports:t.exports||Tn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ii[t.id]=t.type),n})}function ks(t,n){return br(()=>{const i=sn(t,!0);i.declarations=n.declarations||Tn,i.imports=n.imports||Tn,i.exports=n.exports||Tn})}function is(t,n){if(null==t)return Dn;const i={};for(const u in t)if(t.hasOwnProperty(u)){let d=t[u],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),i[d]=u,n&&(n[d]=p)}return i}const ps=tn;function Ko(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qn(t){return t[ye]||null}function sn(t,n){const i=t[ve]||null;if(!i&&!0===n)throw new Error(`Type ${he(t)} does not have '\u0275mod' property.`);return i}function ms(t){return Array.isArray(t)&&"object"==typeof t[1]}function Kr(t){return Array.isArray(t)&&!0===t[1]}function Xn(t){return 0!=(8&t.flags)}function Qs(t){return 2==(2&t.flags)}function So(t){return 1==(1&t.flags)}function Gr(t){return null!==t.template}function Fi(t){return 0!=(512&t[2])}function us(t,n){return t.hasOwnProperty(rt)?t[rt]:null}class ua{constructor(n,i,u){this.previousValue=n,this.currentValue=i,this.firstChange=u}isFirstChange(){return this.firstChange}}function Zo(){return Fs}function Fs(t){return t.type.prototype.ngOnChanges&&(t.setInput=ys),Ls}function Ls(){const t=Zr(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===Dn)t.previous=n;else for(let u in n)i[u]=n[u];t.current=null,this.ngOnChanges(n)}}function ys(t,n,i,u){const d=Zr(t)||function(t,n){return t[zi]=n}(t,{previous:Dn,current:null}),p=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[i],A=v[w];p[w]=new ua(A&&A.currentValue,n,v===Dn),t[u]=n}Zo.ngInherit=!0;const zi="__ngSimpleChanges__";function Zr(t){return t[zi]||null}let Yo;function ho(t){Yo=t}function V(t){return!!t.listen}const B={createRenderer:(t,n)=>void 0!==Yo?Yo:"undefined"!=typeof document?document:void 0};function me(t){for(;Array.isArray(t);)t=t[0];return t}function F(t,n){return me(n[t])}function O(t,n){return me(n[t.index])}function Y(t,n){return t.data[n]}function yt(t,n){const i=n[t];return ms(i)?i:i[0]}function ln(t){return 4==(4&t[2])}function er(t){return 128==(128&t[2])}function Yr(t,n){return null==n?null:t[n]}function Vi(t){t[18]=0}function cr(t,n){t[5]+=n;let i=t,u=t[3];for(;null!==u&&(1===n&&1===i[5]||-1===n&&0===i[5]);)u[5]+=n,i=u,u=u[3]}const Ht={lFrame:$s(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function uu(){return Ht.bindingsEnabled}function dt(){return Ht.lFrame.lView}function $n(){return Ht.lFrame.tView}function vs(t){return Ht.lFrame.contextLView=t,t[8]}function wr(){let t=Vu();for(;null!==t&&64===t.type;)t=t.parent;return t}function Vu(){return Ht.lFrame.currentTNode}function Es(t,n){const i=Ht.lFrame;i.currentTNode=t,i.isParent=n}function Ga(){return Ht.lFrame.isParent}function Qr(){Ht.lFrame.isParent=!1}function ls(){return Ht.isInCheckNoChangesMode}function No(t){Ht.isInCheckNoChangesMode=t}function Ci(){const t=Ht.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function fo(){return Ht.lFrame.bindingIndex++}function Zi(t){const n=Ht.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function cu(t,n){const i=Ht.lFrame;i.bindingIndex=i.bindingRootIndex=t,js(n)}function js(t){Ht.lFrame.currentDirectiveIndex=t}function fl(){return Ht.lFrame.currentQueryIndex}function pl(t){Ht.lFrame.currentQueryIndex=t}function Mo(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Xo(t,n,i){if(i&xt.SkipSelf){let d=n,p=t;for(;!(d=d.parent,null!==d||i&xt.Host||(d=Mo(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;n=d,t=p}const u=Ht.lFrame=gl();return u.currentTNode=n,u.lView=t,!0}function ea(t){const n=gl(),i=t[1];Ht.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function gl(){const t=Ht.lFrame,n=null===t?null:t.child;return null===n?$s(t):n}function $s(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function ml(){const t=Ht.lFrame;return Ht.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const du=ml;function Sa(){const t=ml();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Yi(){return Ht.lFrame.selectedIndex}function to(t){Ht.lFrame.selectedIndex=t}function Mr(){const t=Ht.lFrame;return Y(t.tView,t.selectedIndex)}function po(t,n){for(let i=n.directiveStart,u=n.directiveEnd;i<u;i++){const p=t.data[i].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:A,ngAfterViewChecked:k,ngOnDestroy:W}=p;v&&(t.contentHooks||(t.contentHooks=[])).push(-i,v),w&&((t.contentHooks||(t.contentHooks=[])).push(i,w),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,w)),A&&(t.viewHooks||(t.viewHooks=[])).push(-i,A),k&&((t.viewHooks||(t.viewHooks=[])).push(i,k),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,k)),null!=W&&(t.destroyHooks||(t.destroyHooks=[])).push(i,W)}}function Aa(t,n,i){fu(t,n,3,i)}function go(t,n,i,u){(3&t[2])===i&&fu(t,n,i,u)}function ui(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function fu(t,n,i,u){const p=null!=u?u:-1,v=n.length-1;let w=0;for(let A=void 0!==u?65535&t[18]:0;A<v;A++)if("number"==typeof n[A+1]){if(w=n[A],null!=u&&w>=u)break}else n[A]<0&&(t[18]+=65536),(w<p||-1==p)&&(Gu(t,i,n,A),t[18]=(4294901760&t[18])+A+2),A++}function Gu(t,n,i,u){const d=i[u]<0,p=i[u+1],w=t[d?-i[u]:i[u]];if(d){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Po{constructor(n,i,u){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=u}}function ko(t,n,i){const u=V(t);let d=0;for(;d<i.length;){const p=i[d];if("number"==typeof p){if(0!==p)break;d++;const v=i[d++],w=i[d++],A=i[d++];u?t.setAttribute(n,w,A,v):n.setAttributeNS(v,w,A)}else{const v=p,w=i[++d];Zl(v)?u&&t.setProperty(n,v,w):u?t.setAttribute(n,v,w):n.setAttribute(v,w),d++}}return d}function Oc(t){return 3===t||4===t||6===t}function Zl(t){return 64===t.charCodeAt(0)}function qa(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let u=0;u<n.length;u++){const d=n[u];"number"==typeof d?i=d:0===i||yl(t,i,d,null,-1===i||2===i?n[++u]:null)}}return t}function yl(t,n,i,u,d){let p=0,v=t.length;if(-1===n)v=-1;else for(;p<t.length;){const w=t[p++];if("number"==typeof w){if(w===n){v=-1;break}if(w>n){v=p-1;break}}}for(;p<t.length;){const w=t[p];if("number"==typeof w)break;if(w===i){if(null===u)return void(null!==d&&(t[p+1]=d));if(u===t[p+1])return void(t[p+2]=d)}p++,null!==u&&p++,null!==d&&p++}-1!==v&&(t.splice(v,0,n),p=v+1),t.splice(p++,0,i),null!==u&&t.splice(p++,0,u),null!==d&&t.splice(p++,0,d)}function Yl(t){return-1!==t}function ta(t){return 32767&t}function ws(t,n){let i=function(t){return t>>16}(t),u=n;for(;i>0;)u=u[15],i--;return u}let vl=!0;function na(t){const n=vl;return vl=t,n}let Wu=0;function pt(t,n){const i=_o(t,n);if(-1!==i)return i;const u=n[1];u.firstCreatePass&&(t.injectorIndex=n.length,kr(u.data,t),kr(n,null),kr(u.blueprint,null));const d=Ka(t,n),p=t.injectorIndex;if(Yl(d)){const v=ta(d),w=ws(d,n),A=w[1].data;for(let k=0;k<8;k++)n[p+k]=w[v+k]|A[v+k]}return n[p+8]=d,p}function kr(t,n){t.push(0,0,0,0,0,0,0,0,n)}function _o(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ka(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,u=null,d=n;for(;null!==d;){const p=d[1],v=p.type;if(u=2===v?p.declTNode:1===v?d[6]:null,null===u)return-1;if(i++,d=d[15],-1!==u.injectorIndex)return u.injectorIndex|i<<16}return-1}function jt(t,n,i){!function(t,n,i){let u;"string"==typeof i?u=i.charCodeAt(0)||0:i.hasOwnProperty(Tt)&&(u=i[Tt]),null==u&&(u=i[Tt]=Wu++);const d=255&u;n.data[t+(d>>5)]|=1<<d}(t,n,i)}function Ql(t,n,i){if(i&xt.Optional)return t;nn(n,"NodeInjector")}function Vt(t,n,i,u){if(i&xt.Optional&&void 0===u&&(u=null),0==(i&(xt.Self|xt.Host))){const d=t[9],p=xn(void 0);try{return d?d.get(n,u,i&xt.Optional):xr(n,u,i&xt.Optional)}finally{xn(p)}}return Ql(u,n,i)}function Qe(t,n,i,u=xt.Default,d){if(null!==t){const p=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Tt)?t[Tt]:void 0;return"number"==typeof n?n>=0?255&n:mi:n}(i);if("function"==typeof p){if(!Xo(n,t,u))return u&xt.Host?Ql(d,i,u):Vt(n,i,u,d);try{const v=p(u);if(null!=v||u&xt.Optional)return v;nn(i)}finally{du()}}else if("number"==typeof p){let v=null,w=_o(t,n),A=-1,k=u&xt.Host?n[16][6]:null;for((-1===w||u&xt.SkipSelf)&&(A=-1===w?Ka(t,n):n[w+8],-1!==A&&ee(u,!1)?(v=n[1],w=ta(A),n=ws(A,n)):w=-1);-1!==w;){const W=n[1];if(G(p,w,W.data)){const ne=N(w,n,i,v,u,k);if(ne!==ht)return ne}A=n[w+8],-1!==A&&ee(u,n[1].data[w+8]===k)&&G(p,w,n)?(v=W,w=ta(A),n=ws(A,n)):w=-1}}}return Vt(n,i,u,d)}const ht={};function mi(){return new le(wr(),dt())}function N(t,n,i,u,d,p){const v=n[1],w=v.data[t+8],W=S(w,v,i,null==u?Qs(w)&&vl:u!=v&&0!=(3&w.type),d&xt.Host&&p===w);return null!==W?I(n,v,W,w):ht}function S(t,n,i,u,d){const p=t.providerIndexes,v=n.data,w=1048575&p,A=t.directiveStart,W=p>>20,ae=d?w+W:t.directiveEnd;for(let Ee=u?w:w+W;Ee<ae;Ee++){const Ne=v[Ee];if(Ee<A&&i===Ne||Ee>=A&&Ne.type===i)return Ee}if(d){const Ee=v[A];if(Ee&&Gr(Ee)&&Ee.type===i)return A}return null}function I(t,n,i,u){let d=t[i];const p=n.data;if(function(t){return t instanceof Po}(d)){const v=d;v.resolving&&function(t,n){throw new it("200",`Circular dependency in DI detected for ${t}`)}(Be(p[i]));const w=na(v.canSeeViewProviders);v.resolving=!0;const A=v.injectImpl?xn(v.injectImpl):null;Xo(t,u,xt.Default);try{d=t[i]=v.factory(void 0,p,t,u),n.firstCreatePass&&i>=u.directiveStart&&function(t,n,i){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:p}=n.type.prototype;if(u){const v=Fs(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,v),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,v)}d&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,d),p&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,p),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,p))}(i,p[i],n)}finally{null!==A&&xn(A),na(w),v.resolving=!1,du()}}return d}function G(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function ee(t,n){return!(t&xt.Self||t&xt.Host&&n)}class le{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,u){return Qe(this._tNode,this._lView,n,u,i)}}function Se(t){return br(()=>{const n=t.prototype.constructor,i=n[rt]||st(n),u=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==u;){const p=d[rt]||st(d);if(p&&p!==i)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function st(t){return $e(t)?()=>{const n=st(pe(t));return n&&n()}:us(t)}function Gt(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const u=i.length;let d=0;for(;d<u;){const p=i[d];if(Oc(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<u&&"string"==typeof i[d];)d++;else{if(p===n)return i[d+1];d+=2}}}return null}(wr(),t)}const vt="__parameters__";function $t(t,n,i){return br(()=>{const u=function(t){return function(...i){if(t){const u=t(...i);for(const d in u)this[d]=u[d]}}}(n);function d(...p){if(this instanceof d)return u.apply(this,p),this;const v=new d(...p);return w.annotation=v,w;function w(A,k,W){const ne=A.hasOwnProperty(vt)?A[vt]:Object.defineProperty(A,vt,{value:[]})[vt];for(;ne.length<=W;)ne.push(null);return(ne[W]=ne[W]||[]).push(v),A}}return i&&(d.prototype=Object.create(i.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}class ci{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=en({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Fc=new ci("AnalyzeForEntryComponents"),no=Function;function vo(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let u=t[i];Array.isArray(u)?(n===t&&(n=t.slice(0,i)),vo(u,n)):n!==t&&n.push(u)}return n}function Cs(t,n){t.forEach(i=>Array.isArray(i)?Cs(i,n):n(i))}function Ku(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Lo(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Zu(t,n){const i=[];for(let u=0;u<t;u++)i.push(n);return i}function xs(t,n,i){let u=Vn(t,n);return u>=0?t[1|u]=i:(u=~u,function(t,n,i,u){let d=t.length;if(d==n)t.push(i,u);else if(1===d)t.push(u,t[0]),t[0]=i;else{for(d--,t.push(t[d-1],t[d]);d>n;)t[d]=t[d-2],d--;t[n]=i,t[n+1]=u}}(t,u,n,i)),u}function es(t,n){const i=Vn(t,n);if(i>=0)return t[1|i]}function Vn(t,n){return function(t,n,i){let u=0,d=t.length>>i;for(;d!==u;){const p=u+(d-u>>1),v=t[p<<i];if(n===v)return p<<i;v>n?d=p:u=p+1}return~(d<<i)}(t,n,1)}const fe={},Pe="__NG_DI_FLAG__",Le="ngTempTokenPath",Lt=/\n/gm,zt="__source",Xt=de({provide:String,useValue:de});let Tr;function Pr(t){const n=Tr;return Tr=t,n}function bi(t,n=xt.Default){if(void 0===Tr)throw new Error("inject() must be called from an injection context");return null===Tr?xr(t,void 0,n):Tr.get(t,n&xt.Optional?null:void 0,n)}function Sr(t,n=xt.Default){return(jn||bi)(pe(t),n)}function Rs(t){const n=[];for(let i=0;i<t.length;i++){const u=pe(t[i]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let d,p=xt.Default;for(let v=0;v<u.length;v++){const w=u[v],A=jr(w);"number"==typeof A?-1===A?d=w.token:p|=A:d=w}n.push(Sr(d,p))}else n.push(Sr(u))}return n}function zs(t,n){return t[Pe]=n,t.prototype[Pe]=n,t}function jr(t){return t[Pe]}function Za(t,n,i,u){const d=t[Le];throw n[zt]&&d.unshift(n[zt]),t.message=function(t,n,i,u=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let d=he(n);if(Array.isArray(n))d=n.map(he).join(" -> ");else if("object"==typeof n){let p=[];for(let v in n)if(n.hasOwnProperty(v)){let w=n[v];p.push(v+":"+("string"==typeof w?JSON.stringify(w):he(w)))}d=`{${p.join(", ")}}`}return`${i}${u?"("+u+")":""}[${d}]: ${t.replace(Lt,"\n  ")}`}("\n"+t.message,d,i,u),t.ngTokenPath=d,t[Le]=null,t}const xa=zs($t("Inject",t=>({token:t})),-1),yu=zs($t("Optional"),8),Ya=zs($t("SkipSelf"),4);let jc;function nc(t){var n;return(null===(n=function(){if(void 0===jc&&(jc=null,Dt.trustedTypes))try{jc=Dt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return jc}())||void 0===n?void 0:n.createHTML(t))||t}class jo{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class af extends jo{getTypeName(){return"HTML"}}class $c extends jo{getTypeName(){return"Style"}}class bd extends jo{getTypeName(){return"Script"}}class gh extends jo{getTypeName(){return"URL"}}class mh extends jo{getTypeName(){return"ResourceURL"}}function Ja(t){return t instanceof jo?t.changingThisBreaksApplicationSecurity:t}function Xa(t,n){const i=fa(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function fa(t){return t instanceof jo&&t.getTypeName()||null}function sp(t){return new af(t)}function Id(t){return new $c(t)}function uf(t){return new bd(t)}function Hc(t){return new gh(t)}function lf(t){return new mh(t)}class op{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(nc(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class Al{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const u=this.inertDocument.createElement("body");i.appendChild(u)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=nc(n),i;const u=this.inertDocument.createElement("body");return u.innerHTML=nc(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(n){const i=n.attributes;for(let d=i.length-1;0<d;d--){const v=i.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&n.removeAttribute(v)}let u=n.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const df=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,rc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Eu(t){return(t=String(t)).match(df)||t.match(rc)?t:"unsafe:"+t}function pa(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function wu(...t){const n={};for(const i of t)for(const u in i)i.hasOwnProperty(u)&&(n[u]=!0);return n}const Cu=pa("area,br,col,hr,img,wbr"),ff=pa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),eu=pa("rp,rt"),Dd=wu(Cu,wu(ff,pa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wu(eu,pa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wu(eu,ff)),Yu=pa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yh=pa("srcset"),vh=wu(Yu,yh,pa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tu=pa("script,style,template");class pf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,u=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?u=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,u&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let d=this.checkClobberedElement(i,i.nextSibling);if(d){i=d;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!Dd.hasOwnProperty(i))return this.sanitizedSomething=!0,!tu.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const u=n.attributes;for(let d=0;d<u.length;d++){const p=u.item(d),v=p.name,w=v.toLowerCase();if(!vh.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let A=p.value;Yu[w]&&(A=Eu(A)),yh[w]&&(t=A,A=(t=String(t)).split(",").map(n=>Eu(n.trim())).join(", ")),this.buf.push(" ",v,'="',gf(A),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();Dd.hasOwnProperty(i)&&!Cu.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(gf(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const lp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bu=/([^\#-~ |!])/g;function gf(t){return t.replace(/&/g,"&amp;").replace(lp,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(bu,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xl;function fr(t,n){let i=null;try{xl=xl||function(t){const n=new Al(t);return function(){try{return!!(new window.DOMParser).parseFromString(nc(""),"text/html")}catch(t){return!1}}()?new op(n):n}(t);let u=n?String(n):"";i=xl.getInertBodyElement(u);let d=5,p=u;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,u=p,p=i.innerHTML,i=xl.getInertBodyElement(u)}while(u!==p);return nc((new pf).sanitizeChildren(qn(i)||i))}finally{if(i){const u=qn(i)||i;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function qn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var $r=(()=>(($r=$r||{})[$r.NONE=0]="NONE",$r[$r.HTML=1]="HTML",$r[$r.STYLE=2]="STYLE",$r[$r.SCRIPT=3]="SCRIPT",$r[$r.URL=4]="URL",$r[$r.RESOURCE_URL=5]="RESOURCE_URL",$r))();function Td(t){const n=function(){const t=dt();return t&&t[12]}();return n?n.sanitize($r.URL,t)||"":Xa(t,"URL")?Ja(t):Eu(We(t))}const Na="__ngContext__";function ts(t,n){t[Na]=n}function mf(t){const n=function(t){return t[Na]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function uc(t){return t.ngOriginalError}function qs(t,...n){t.error(...n)}class hs{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),u=this._findContext(n),d=(t=n)&&t.ngErrorLogger||qs;var t;d(this._console,"ERROR",n),i&&d(this._console,"ORIGINAL ERROR",i),u&&d(this._console,"ERROR CONTEXT",u)}_findContext(n){return n?n.ngDebugContext||this._findContext(uc(n)):null}_findOriginalError(n){let i=n&&uc(n);for(;i&&uc(i);)i=uc(i);return i||null}}const qc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function Tu(t){return t instanceof Function?t():t}var Go=(()=>((Go=Go||{})[Go.Important=1]="Important",Go[Go.DashCase=2]="DashCase",Go))();function Ol(t,n){return undefined(t,n)}function bs(t){const n=t[3];return Kr(n)?n[3]:n}function m(t){return j(t[13])}function b(t){return j(t[4])}function j(t){for(;null!==t&&!Kr(t);)t=t[4];return t}function _e(t,n,i,u,d){if(null!=u){let p,v=!1;Kr(u)?p=u:ms(u)&&(v=!0,u=u[0]);const w=me(u);0===t&&null!==i?null==d?Qc(n,i,w):aa(n,i,w,d||null,!0):1===t&&null!==i?aa(n,i,w,d||null,!0):2===t?function(t,n,i){const u=Th(t,n);u&&function(t,n,i,u){V(t)?t.removeChild(n,i,u):n.removeChild(i)}(t,u,n,i)}(n,w,v):3===t&&n.destroyNode(w),null!=p&&function(t,n,i,u,d){const p=i[7];p!==me(i)&&_e(n,t,u,p,d);for(let w=10;w<i.length;w++){const A=i[w];Pa(A[1],A,t,n,u,p)}}(n,t,p,i,d)}}function Kt(t,n,i){return V(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function Md(t,n){const i=t[9],u=i.indexOf(n),d=n[3];1024&n[2]&&(n[2]&=-1025,cr(d,-1)),i.splice(u,1)}function bh(t,n){if(t.length<=10)return;const i=10+n,u=t[i];if(u){const d=u[17];null!==d&&d!==t&&Md(d,u),n>0&&(t[i-1][4]=u[4]);const p=Lo(t,10+n);!function(t,n){Pa(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(u[1],u);const v=p[19];null!==v&&v.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function pc(t,n){if(!(256&n[2])){const i=n[11];V(i)&&i.destroyNode&&Pa(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return Pd(t[1],t);for(;n;){let i=null;if(ms(n))i=n[13];else{const u=n[10];u&&(i=u)}if(!i){for(;n&&!n[4]&&n!==t;)ms(n)&&Pd(n[1],n),n=n[3];null===n&&(n=t),ms(n)&&Pd(n[1],n),i=n&&n[4]}n=i}}(n)}}function Pd(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let u=0;u<i.length;u+=2){const d=n[i[u]];if(!(d instanceof Po)){const p=i[u+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const w=d[p[v]],A=p[v+1];try{A.call(w)}finally{}}else try{p.call(d)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,u=n[7];let d=-1;if(null!==i)for(let p=0;p<i.length-1;p+=2)if("string"==typeof i[p]){const v=i[p+1],w="function"==typeof v?v(n):me(n[v]),A=u[d=i[p+2]],k=i[p+3];"boolean"==typeof k?w.removeEventListener(i[p],A,k):k>=0?u[d=k]():u[d=-k].unsubscribe(),p+=2}else{const v=u[d=i[p+1]];i[p].call(v)}if(null!==u){for(let p=d+1;p<u.length;p++)u[p]();n[7]=null}}(t,n),1===n[1].type&&V(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&Kr(n[3])){i!==n[3]&&Md(i,n);const u=n[19];null!==u&&u.detachView(t)}}}function Dh(t,n,i){return function(t,n,i){let u=n;for(;null!==u&&40&u.type;)u=(n=u).parent;if(null===u)return i[0];if(2&u.flags){const d=t.data[u.directiveStart].encapsulation;if(d===Pt.None||d===Pt.Emulated)return null}return O(u,i)}(t,n.parent,i)}function aa(t,n,i,u,d){V(t)?t.insertBefore(n,i,u,d):n.insertBefore(i,u,d)}function Qc(t,n,i){V(t)?t.appendChild(n,i):n.appendChild(i)}function Ps(t,n,i,u,d){null!==u?aa(t,n,i,u,d):Qc(t,n,i)}function Th(t,n){return V(t)?t.parentNode(n):n.parentNode}function gc(t,n,i){return Lm(t,n,i)}let Lm=function(t,n,i){return 40&t.type?O(t,i):null};function Su(t,n,i,u){const d=Dh(t,u,n),p=n[11],w=gc(u.parent||n[6],u,n);if(null!=d)if(Array.isArray(i))for(let A=0;A<i.length;A++)Ps(p,d,i[A],w,!1);else Ps(p,d,i,w,!1)}function Au(t,n){if(null!==n){const i=n.type;if(3&i)return O(n,t);if(4&i)return Xu(-1,t[n.index]);if(8&i){const u=n.child;if(null!==u)return Au(t,u);{const d=t[n.index];return Kr(d)?Xu(-1,d):me(d)}}if(32&i)return Ol(n,t)()||me(t[n.index]);{const u=Ju(t,n);return null!==u?Array.isArray(u)?u[0]:Au(bs(t[16]),u):Au(t,n.next)}}return null}function Ju(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Xu(t,n){const i=10+t+1;if(i<n.length){const u=n[i],d=u[1].firstChild;if(null!==d)return Au(u,d)}return n[7]}function Fl(t,n,i,u,d,p,v){for(;null!=i;){const w=u[i.index],A=i.type;if(v&&0===n&&(w&&ts(me(w),u),i.flags|=4),64!=(64&i.flags))if(8&A)Fl(t,n,i.child,u,d,p,!1),_e(n,t,d,w,p);else if(32&A){const k=Ol(i,u);let W;for(;W=k();)_e(n,t,d,W,p);_e(n,t,d,w,p)}else 16&A?bg(t,n,u,i,d,p):_e(n,t,d,w,p);i=v?i.projectionNext:i.next}}function Pa(t,n,i,u,d,p){Fl(i,u,t.firstChild,n,d,p,!1)}function bg(t,n,i,u,d,p){const v=i[16],A=v[6].projection[u.projection];if(Array.isArray(A))for(let k=0;k<A.length;k++)_e(n,t,d,A[k],p);else Fl(t,n,A,v[3],d,p,!0)}function Ig(t,n,i){V(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function _c(t,n,i){V(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function Ll(t,n,i){let u=t.length;for(;;){const d=t.indexOf(n,i);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const p=n.length;if(d+p===u||t.charCodeAt(d+p)<=32)return d}i=d+1}}const Cf="ng-template";function Jc(t,n,i){let u=0;for(;u<t.length;){let d=t[u++];if(i&&"class"===d){if(d=t[u],-1!==Ll(d.toLowerCase(),n,0))return!0}else if(1===d){for(;u<t.length&&"string"==typeof(d=t[u++]);)if(d.toLowerCase()===n)return!0;return!1}}return!1}function gp(t){return 4===t.type&&t.value!==Cf}function Q_(t,n,i){return n===(4!==t.type||i?t.value:Cf)}function Di(t,n,i){let u=4;const d=t.attrs||[],p=function(t){for(let n=0;n<t.length;n++)if(Oc(t[n]))return n;return t.length}(d);let v=!1;for(let w=0;w<n.length;w++){const A=n[w];if("number"!=typeof A){if(!v)if(4&u){if(u=2|1&u,""!==A&&!Q_(t,A,i)||""===A&&1===n.length){if($i(u))return!1;v=!0}}else{const k=8&u?A:n[++w];if(8&u&&null!==t.attrs){if(!Jc(t.attrs,k,i)){if($i(u))return!1;v=!0}continue}const ne=el(8&u?"class":A,d,gp(t),i);if(-1===ne){if($i(u))return!1;v=!0;continue}if(""!==k){let ae;ae=ne>p?"":d[ne+1].toLowerCase();const Ee=8&u?ae:null;if(Ee&&-1!==Ll(Ee,k,0)||2&u&&k!==ae){if($i(u))return!1;v=!0}}}}else{if(!v&&!$i(u)&&!$i(A))return!1;if(v&&$i(A))continue;v=!1,u=A|1&u}}return $i(u)||v}function $i(t){return 0==(1&t)}function el(t,n,i,u){if(null===n)return-1;let d=0;if(u||!i){let p=!1;for(;d<n.length;){const v=n[d];if(v===t)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let w=n[++d];for(;"string"==typeof w;)w=n[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const u=t[i];if("number"==typeof u)return-1;if(u===n)return i;i++}return-1}(n,t)}function Vl(t,n,i=!1){for(let u=0;u<n.length;u++)if(Di(t,n[u],i))return!0;return!1}function mp(t,n){e:for(let i=0;i<n.length;i++){const u=n[i];if(t.length===u.length){for(let d=0;d<t.length;d++)if(t[d]!==u[d])continue e;return!0}}return!1}function xu(t,n){return t?":not("+n.trim()+")":n}function Sg(t){let n=t[0],i=1,u=2,d="",p=!1;for(;i<t.length;){let v=t[i];if("string"==typeof v)if(2&u){const w=t[++i];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?d+="."+v:4&u&&(d+=" "+v);else""!==d&&!$i(v)&&(n+=xu(p,d),d=""),u=v,p=p||!$i(u);i++}return""!==d&&(n+=xu(p,d)),n}const An={};function Ah(t){Ag($n(),dt(),Yi()+t,ls())}function Ag(t,n,i,u){if(!u)if(3==(3&n[2])){const p=t.preOrderCheckHooks;null!==p&&Aa(n,p,i)}else{const p=t.preOrderHooks;null!==p&&go(n,p,0,i)}to(i)}function bf(t,n){return t<<17|n<<2}function ns(t){return t>>17&32767}function xh(t){return 2|t}function tl(t){return(131068&t)>>2}function nl(t,n){return-131069&t|n<<2}function yp(t){return 1|t}function qm(t,n){const i=t.contentQueries;if(null!==i)for(let u=0;u<i.length;u+=2){const d=i[u],p=i[u+1];if(-1!==p){const v=t.data[p];pl(d),v.contentQueries(2,n[p],p)}}}function vc(t,n,i,u,d,p,v,w,A,k){const W=n.blueprint.slice();return W[0]=d,W[2]=140|u,Vi(W),W[3]=W[15]=t,W[8]=i,W[10]=v||t&&t[10],W[11]=w||t&&t[11],W[12]=A||t&&t[12]||null,W[9]=k||t&&t[9]||null,W[6]=p,W[16]=2==n.type?t[16]:W,W}function td(t,n,i,u,d){let p=t.data[n];if(null===p)p=function(t,n,i,u,d){const p=Vu(),v=Ga(),A=t.data[n]=function(t,n,i,u,d,p){return{type:i,index:u,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,i,n,u,d);return null===t.firstChild&&(t.firstChild=A),null!==p&&(v?null==p.child&&null!==A.parent&&(p.child=A):null===p.next&&(p.next=A)),A}(t,n,i,u,d),Ht.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=i,p.value=u,p.attrs=d;const v=function(){const t=Ht.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Es(p,!0),p}function Mh(t,n,i,u){if(0===i)return-1;const d=n.length;for(let p=0;p<i;p++)n.push(u),t.blueprint.push(u),t.data.push(null);return d}function jd(t,n,i){ea(n);try{const u=t.viewQuery;null!==u&&$l(1,u,i);const d=t.template;null!==d&&nd(t,n,d,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&qm(t,n),t.staticViewQueries&&$l(2,t.viewQuery,i);const p=t.components;null!==p&&function(t,n){for(let i=0;i<n.length;i++)Lp(t,n[i])}(n,p)}catch(u){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),u}finally{n[2]&=-5,Sa()}}function nu(t,n,i,u){const d=n[2];if(256==(256&d))return;ea(n);const p=ls();try{Vi(n),function(t){Ht.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&nd(t,n,i,2,u);const v=3==(3&d);if(!p)if(v){const k=t.preOrderCheckHooks;null!==k&&Aa(n,k,null)}else{const k=t.preOrderHooks;null!==k&&go(n,k,0,null),ui(n,0)}if(function(t){for(let n=m(t);null!==n;n=b(n)){if(!n[2])continue;const i=n[9];for(let u=0;u<i.length;u++){const d=i[u],p=d[3];0==(1024&d[2])&&cr(p,1),d[2]|=1024}}}(n),function(t){for(let n=m(t);null!==n;n=b(n))for(let i=10;i<n.length;i++){const u=n[i],d=u[1];er(u)&&nu(d,u,d.template,u[8])}}(n),null!==t.contentQueries&&qm(t,n),!p)if(v){const k=t.contentCheckHooks;null!==k&&Aa(n,k)}else{const k=t.contentHooks;null!==k&&go(n,k,1),ui(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let u=0;u<i.length;u++){const d=i[u];if(d<0)to(~d);else{const p=d,v=i[++u],w=i[++u];cu(v,p),w(2,n[p])}}}finally{to(-1)}}(t,n);const w=t.components;null!==w&&function(t,n){for(let i=0;i<n.length;i++)Pf(t,n[i])}(n,w);const A=t.viewQuery;if(null!==A&&$l(2,A,u),!p)if(v){const k=t.viewCheckHooks;null!==k&&Aa(n,k)}else{const k=t.viewHooks;null!==k&&go(n,k,2),ui(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),p||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,cr(n[3],-1))}finally{Sa()}}function $d(t,n,i,u){const d=n[10],p=!ls(),v=ln(n);try{p&&!v&&d.begin&&d.begin(),v&&jd(t,n,u),nu(t,n,i,u)}finally{p&&!v&&d.end&&d.end()}}function nd(t,n,i,u,d){const p=Yi(),v=2&u;try{to(-1),v&&n.length>20&&Ag(t,n,20,ls()),i(u,d)}finally{to(p)}}function il(t,n,i){if(Xn(n)){const d=n.directiveEnd;for(let p=n.directiveStart;p<d;p++){const v=t.data[p];v.contentQueries&&v.contentQueries(1,i[p],p)}}}function Ec(t,n,i){!uu()||(function(t,n,i,u){const d=i.directiveStart,p=i.directiveEnd;t.firstCreatePass||pt(i,n),ts(u,n);const v=i.initialInputs;for(let w=d;w<p;w++){const A=t.data[w],k=Gr(A);k&&Rf(n,i,A);const W=I(n,t,w,i);ts(W,n),null!==v&&Nf(0,w-d,W,A,0,v),k&&(yt(i.index,n)[8]=W)}}(t,n,i,O(i,n)),128==(128&i.flags)&&function(t,n,i){const u=i.directiveStart,d=i.directiveEnd,v=i.index,w=Ht.lFrame.currentDirectiveIndex;try{to(v);for(let A=u;A<d;A++){const k=t.data[A],W=n[A];js(A),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&Gd(k,W)}}finally{to(-1),js(w)}}(t,n,i))}function Hd(t,n,i=O){const u=n.localNames;if(null!==u){let d=n.index+1;for(let p=0;p<u.length;p+=2){const v=u[p+1],w=-1===v?i(n,t):t[v];t[d++]=w}}}function Vg(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Tf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Tf(t,n,i,u,d,p,v,w,A,k){const W=20+u,ne=W+d,ae=function(t,n){const i=[];for(let u=0;u<n;u++)i.push(u<t?null:An);return i}(W,ne),Ee="function"==typeof k?k():k;return ae[1]={type:t,blueprint:ae,template:i,queries:null,viewQuery:w,declTNode:n,data:ae.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:A,consts:Ee,incompleteFirstPass:!1}}function Bl(t,n,i,u){const d=n_(n);null===i?d.push(u):(d.push(i),t.firstCreatePass&&kf(t).push(u,d.length-1))}function Ap(t,n,i){for(let u in t)if(t.hasOwnProperty(u)){const d=t[u];(i=null===i?{}:i).hasOwnProperty(u)?i[u].push(n,d):i[u]=[n,d]}return i}function so(t,n,i,u,d,p,v,w){const A=O(n,i);let W,k=n.inputs;!w&&null!=k&&(W=k[u])?(Bp(t,i,W,u,d),Qs(n)&&function(t,n){const i=yt(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(u=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(u),d=null!=v?v(d,n.value||"",u):d,V(p)?p.setProperty(A,u,d):Zl(u)||(A.setProperty?A.setProperty(u,d):A[u]=d))}function rd(t,n,i,u){let d=!1;if(uu()){const p=function(t,n,i){const u=t.directiveRegistry;let d=null;if(u)for(let p=0;p<u.length;p++){const v=u[p];Vl(i,v.selectors,!1)&&(d||(d=[]),jt(pt(i,n),t,v.type),Gr(v)?(Pp(t,i),d.unshift(v)):d.push(v))}return d}(t,n,i),v=null===u?null:{"":-1};if(null!==p){d=!0,Oh(i,t.data.length,p.length);for(let W=0;W<p.length;W++){const ne=p[W];ne.providersResolver&&ne.providersResolver(ne)}let w=!1,A=!1,k=Mh(t,n,p.length,null);for(let W=0;W<p.length;W++){const ne=p[W];i.mergedAttrs=qa(i.mergedAttrs,ne.hostAttrs),Xm(t,i,n,k,ne),sy(k,ne,v),null!==ne.contentQueries&&(i.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(i.flags|=128);const ae=ne.type.prototype;!w&&(ae.ngOnChanges||ae.ngOnInit||ae.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),w=!0),!A&&(ae.ngOnChanges||ae.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),A=!0),k++}!function(t,n){const u=n.directiveEnd,d=t.data,p=n.attrs,v=[];let w=null,A=null;for(let k=n.directiveStart;k<u;k++){const W=d[k],ne=W.inputs,ae=null===p||gp(n)?null:Op(ne,p);v.push(ae),w=Ap(ne,k,w),A=Ap(W.outputs,k,A)}null!==w&&(w.hasOwnProperty("class")&&(n.flags|=16),w.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=v,n.inputs=w,n.outputs=A}(t,i)}v&&function(t,n,i){if(n){const u=t.localNames=[];for(let d=0;d<n.length;d+=2){const p=i[n[d+1]];if(null==p)throw new it("301",`Export of name '${n[d+1]}' not found!`);u.push(n[d],p)}}}(i,u,v)}return i.mergedAttrs=qa(i.mergedAttrs,i.attrs),d}function jg(t,n,i,u,d,p){const v=p.hostBindings;if(v){let w=t.hostBindingOpCodes;null===w&&(w=t.hostBindingOpCodes=[]);const A=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(w)!=A&&w.push(A),w.push(u,d,v)}}function Gd(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Pp(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function sy(t,n,i){if(i){if(n.exportAs)for(let u=0;u<n.exportAs.length;u++)i[n.exportAs[u]]=t;Gr(n)&&(i[""]=t)}}function Oh(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function Xm(t,n,i,u,d){t.data[u]=d;const p=d.factory||(d.factory=us(d.type)),v=new Po(p,Gr(d),null);t.blueprint[u]=v,i[u]=v,jg(t,n,0,u,Mh(t,i,d.hostVars,An),d)}function Rf(t,n,i){const u=O(n,t),d=Vg(i),p=t[10],v=Mu(t,vc(t,d,null,i.onPush?64:16,u,n,p,p.createRenderer(u,i),null,null));t[n.index]=v}function Ru(t,n,i,u,d,p){const v=O(t,n);!function(t,n,i,u,d,p,v){if(null==p)V(t)?t.removeAttribute(n,d,i):n.removeAttribute(d);else{const w=null==v?We(p):v(p,u||"",d);V(t)?t.setAttribute(n,d,w,i):i?n.setAttributeNS(i,d,w):n.setAttribute(d,w)}}(n[11],v,p,t.value,i,u,d)}function Nf(t,n,i,u,d,p){const v=p[n];if(null!==v){const w=u.setInput;for(let A=0;A<v.length;){const k=v[A++],W=v[A++],ne=v[A++];null!==w?u.setInput(i,ne,k,W):i[W]=ne}}}function Op(t,n){let i=null,u=0;for(;u<n.length;){const d=n[u];if(0!==d)if(5!==d){if("number"==typeof d)break;t.hasOwnProperty(d)&&(null===i&&(i=[]),i.push(d,t[d],n[u+1])),u+=2}else u+=2;else u+=4}return i}function kp(t,n,i,u){return new Array(t,!0,!1,n,null,0,u,i,null,null)}function Pf(t,n){const i=yt(n,t);if(er(i)){const u=i[1];80&i[2]?nu(u,i,u.template,i[8]):i[5]>0&&Nu(i)}}function Nu(t){for(let u=m(t);null!==u;u=b(u))for(let d=10;d<u.length;d++){const p=u[d];if(1024&p[2]){const v=p[1];nu(v,p,v.template,p[8])}else p[5]>0&&Nu(p)}const i=t[1].components;if(null!==i)for(let u=0;u<i.length;u++){const d=yt(i[u],t);er(d)&&d[5]>0&&Nu(d)}}function Lp(t,n){const i=yt(n,t),u=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(u,i),jd(u,i,i[8])}function Mu(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Of(t){for(;t;){t[2]|=64;const n=bs(t);if(Fi(t)&&!n)return t;t=n}return null}function id(t,n,i){const u=n[10];u.begin&&u.begin();try{nu(t,n,t.template,i)}catch(d){throw zg(n,d),d}finally{u.end&&u.end()}}function kh(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],u=mf(i),d=u[1];$d(d,u,d.template,i)}}(t[8])}function $l(t,n,i){pl(0),n(t,i)}const oy=(()=>Promise.resolve(null))();function n_(t){return t[7]||(t[7]=[])}function kf(t){return t.cleanup||(t.cleanup=[])}function zg(t,n){const i=t[9],u=i?i.get(hs,null):null;u&&u.handleError(n)}function Bp(t,n,i,u,d){for(let p=0;p<i.length;){const v=i[p++],w=i[p++],A=n[v],k=t.data[v];null!==k.setInput?k.setInput(A,d,u,w):A[w]=d}}function ru(t,n,i){const u=F(n,t);!function(t,n,i){V(t)?t.setValue(n,i):n.textContent=i}(t[11],u,i)}function ya(t,n,i){let u=i?t.styles:null,d=i?t.classes:null,p=0;if(null!==n)for(let v=0;v<n.length;v++){const w=n[v];"number"==typeof w?p=w:1==p?d=we(d,w):2==p&&(u=we(u,w+": "+n[++v]+";"))}i?t.styles=u:t.stylesWithoutHost=u,i?t.classes=d:t.classesWithoutHost=d}const Hl=new ci("INJECTOR",-1);class Wd{get(n,i=fe){if(i===fe){const u=new Error(`NullInjectorError: No provider for ${he(n)}!`);throw u.name="NullInjectorError",u}return i}}const sl=new ci("Set Injector scope."),zd={},ka={};let Cc;function bc(){return void 0===Cc&&(Cc=new Wd),Cc}function sd(t,n=null,i=null,u){return new Wo(t,i,n||bc(),u)}class Wo{constructor(n,i,u,d=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];i&&Cs(i,w=>this.processProvider(w,n,i)),Cs([n],w=>this.processInjectorType(w,[],p)),this.records.set(Hl,od(void 0,this));const v=this.records.get(sl);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof n?null:he(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=fe,u=xt.Default){this.assertNotDestroyed();const d=Pr(this),p=xn(void 0);try{if(!(u&xt.SkipSelf)){let w=this.records.get(n);if(void 0===w){const A=("function"==typeof(t=n)||"object"==typeof t&&t instanceof ci)&&Fn(n);w=A&&this.injectableDefInScope(A)?od(Lf(n),zd):null,this.records.set(n,w)}if(null!=w)return this.hydrate(n,w)}return(u&xt.Self?bc():this.parent).get(n,i=u&xt.Optional&&i===fe?null:i)}catch(v){if("NullInjectorError"===v.name){if((v[Le]=v[Le]||[]).unshift(he(n)),d)throw v;return Za(v,n,"R3InjectorError",this.source)}throw v}finally{xn(p),Pr(d)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((u,d)=>n.push(he(d))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,u){if(!(n=pe(n)))return!1;let d=ir(n);const p=null==d&&n.ngModule||void 0,v=void 0===p?n:p,w=-1!==u.indexOf(v);if(void 0!==p&&(d=ir(p)),null==d)return!1;if(null!=d.imports&&!w){let W;u.push(v);try{Cs(d.imports,ne=>{this.processInjectorType(ne,i,u)&&(void 0===W&&(W=[]),W.push(ne))})}finally{}if(void 0!==W)for(let ne=0;ne<W.length;ne++){const{ngModule:ae,providers:Ee}=W[ne];Cs(Ee,Ne=>this.processProvider(Ne,ae,Ee||Tn))}}this.injectorDefTypes.add(v);const A=us(v)||(()=>new v);this.records.set(v,od(A,zd));const k=d.providers;if(null!=k&&!w){const W=n;Cs(k,ne=>this.processProvider(ne,W,k))}return void 0!==p&&void 0!==n.providers}processProvider(n,i,u){let d=Kd(n=pe(n))?n:pe(n&&n.provide);const p=(t=n,jp(t)?od(void 0,t.useValue):od(i_(t),zd));var t;if(Kd(n)||!0!==n.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=od(void 0,zd,!0),v.factory=()=>Rs(v.multi),this.records.set(d,v)),d=n,v.multi.push(n)}this.records.set(d,p)}hydrate(n,i){return i.value===zd&&(i.value=ka,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=pe(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function Lf(t){const n=Fn(t),i=null!==n?n.factory:us(t);if(null!==i)return i;if(t instanceof ci)throw new Error(`Token ${he(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const u=Zu(n,"?");throw new Error(`Can't resolve all parameters for ${he(t)}: (${u.join(", ")}).`)}const i=function(t){const n=t&&(t[ri]||t[et]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function i_(t,n,i){let u;if(Kd(t)){const d=pe(t);return us(d)||Lf(d)}if(jp(t))u=()=>pe(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))u=()=>t.useFactory(...Rs(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))u=()=>Sr(pe(t.useExisting));else{const d=pe(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return us(d)||Lf(d);u=()=>new d(...Rs(t.deps))}return u}function od(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function jp(t){return null!==t&&"object"==typeof t&&Xt in t}function Kd(t){return"function"==typeof t}const Yg=function(t,n,i){return function(t,n=null,i=null,u){const d=sd(t,n,i,u);return d._resolveInjectorDefTypes(),d}({name:i},n,t,i)};let Hi=(()=>{class t{static create(i,u){return Array.isArray(i)?Yg(i,u,""):Yg(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=fe,t.NULL=new Wd,t.\u0275prov=en({token:t,providedIn:"any",factory:()=>Sr(Hl)}),t.__NG_ELEMENT_ID__=-1,t})();function om(t,n){po(mf(t)[1],wr())}function Xp(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const u=[t];for(;n;){let d;if(Gr(t))d=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");d=n.\u0275dir}if(d){if(i){u.push(d);const v=t;v.inputs=Gh(t.inputs),v.declaredInputs=Gh(t.declaredInputs),v.outputs=Gh(t.outputs);const w=d.hostBindings;w&&tg(t,w);const A=d.viewQuery,k=d.contentQueries;if(A&&Yd(t,A),k&&am(t,k),Me(t.inputs,d.inputs),Me(t.declaredInputs,d.declaredInputs),Me(t.outputs,d.outputs),Gr(d)&&d.data.animation){const W=t.data;W.animation=(W.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const w=p[v];w&&w.ngInherit&&w(t),w===Xp&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let u=t.length-1;u>=0;u--){const d=t[u];d.hostVars=n+=d.hostVars,d.hostAttrs=qa(d.hostAttrs,i=qa(i,d.hostAttrs))}}(u)}function Gh(t){return t===Dn?{}:t===Tn?[]:t}function Yd(t,n){const i=t.viewQuery;t.viewQuery=i?(u,d)=>{n(u,d),i(u,d)}:n}function am(t,n){const i=t.contentQueries;t.contentQueries=i?(u,d,p)=>{n(u,d,p),i(u,d,p)}:n}function tg(t,n){const i=t.hostBindings;t.hostBindings=i?(u,d)=>{n(u,d),i(u,d)}:n}let Wh=null;function zo(){if(!Wh){const t=Dt.Symbol;if(t&&t.iterator)Wh=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const u=n[i];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Wh=u)}}}return Wh}function zh(t){return!!lm(t)&&(Array.isArray(t)||!(t instanceof Map)&&zo()in t)}function lm(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function zl(t,n,i){return t[n]=i}function qo(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Gf(t,n,i,u){const d=dt();return qo(d,fo(),n)&&($n(),Ru(Mr(),d,t,n,i,u)),Gf}function ld(t,n,i,u,d,p){const w=function(t,n,i,u){const d=qo(t,n,i);return qo(t,n+1,u)||d}(t,Ht.lFrame.bindingIndex,i,d);return Zi(2),w?n+We(i)+u+We(d)+p:An}function ug(t,n,i,u,d,p,v,w){const A=dt(),k=$n(),W=t+20,ne=k.firstCreatePass?function(t,n,i,u,d,p,v,w,A){const k=n.consts,W=td(n,t,4,v||null,Yr(k,w));rd(n,i,W,Yr(k,A)),po(n,W);const ne=W.tViews=Tf(2,W,u,d,p,n.directiveRegistry,n.pipeRegistry,null,n.schemas,k);return null!==n.queries&&(n.queries.template(n,W),ne.queries=n.queries.embeddedTView(W)),W}(W,k,A,n,i,u,d,p,v):k.data[W];Es(ne,!1);const ae=A[11].createComment("");Su(k,A,ae,ne),ts(ae,A),Mu(A,A[W]=kp(ae,A,ae,ne)),So(ne)&&Ec(k,A,ne),null!=v&&Hd(A,ne,w)}function nh(t,n=xt.Default){const i=dt();return null===i?Sr(t,n):Qe(wr(),i,pe(t),n)}function Cm(t,n,i){const u=dt();return qo(u,fo(),n)&&so($n(),Mr(),u,t,n,u[11],i,!1),Cm}function bm(t,n,i,u,d){const v=d?"class":"style";Bp(t,i,n.inputs[v],v,u)}function Zf(t,n,i,u){const d=dt(),p=$n(),v=20+t,w=d[11],A=d[v]=Kt(w,n,Ht.lFrame.currentNamespace),k=p.firstCreatePass?function(t,n,i,u,d,p,v){const w=n.consts,k=td(n,t,2,d,Yr(w,p));return rd(n,i,k,Yr(w,v)),null!==k.attrs&&ya(k,k.attrs,!1),null!==k.mergedAttrs&&ya(k,k.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,k),k}(v,p,d,0,n,i,u):p.data[v];Es(k,!0);const W=k.mergedAttrs;null!==W&&ko(w,A,W);const ne=k.classes;null!==ne&&_c(w,A,ne);const ae=k.styles;null!==ae&&Ig(w,A,ae),64!=(64&k.flags)&&Su(p,d,A,k),0===Ht.lFrame.elementDepthCount&&ts(A,d),Ht.lFrame.elementDepthCount++,So(k)&&(Ec(p,d,k),il(p,k,d)),null!==u&&Hd(d,k)}function c(){let t=wr();Ga()?Qr():(t=t.parent,Es(t,!1));const n=t;Ht.lFrame.elementDepthCount--;const i=$n();i.firstCreatePass&&(po(i,t),Xn(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&bm(i,n,dt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&bm(i,n,dt(),n.stylesWithoutHost,!1)}function o(t,n,i,u){Zf(t,n,i,u),c()}function y(t,n,i){const u=dt(),d=$n(),p=t+20,v=d.firstCreatePass?function(t,n,i,u,d){const p=n.consts,v=Yr(p,u),w=td(n,t,8,"ng-container",v);return null!==v&&ya(w,v,!0),rd(n,i,w,Yr(p,d)),null!==n.queries&&n.queries.elementStart(n,w),w}(p,d,u,n,i):d.data[p];Es(v,!0);const w=u[p]=u[11].createComment("");Su(d,u,w,v),ts(w,u),So(v)&&(Ec(d,u,v),il(d,v,u)),null!=i&&Hd(u,v)}function D(){let t=wr();const n=$n();Ga()?Qr():(t=t.parent,Es(t,!1)),n.firstCreatePass&&(po(n,t),Xn(t)&&n.queries.elementEnd(t))}function K(){return dt()}function X(t){return!!t&&"function"==typeof t.then}function ue(t){return!!t&&"function"==typeof t.subscribe}const Oe=ue;function Ue(t,n,i,u){const d=dt(),p=$n(),v=wr();return function(t,n,i,u,d,p,v,w){const A=So(u),W=t.firstCreatePass&&kf(t),ne=n[8],ae=n_(n);let Ee=!0;if(3&u.type||w){const He=O(u,n),Rt=w?w(He):He,ut=ae.length,wn=w?Wn=>w(me(Wn[u.index])):u.index;if(V(i)){let Wn=null;if(!w&&A&&(Wn=function(t,n,i,u){const d=t.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===i&&d[p+1]===u){const w=n[7],A=d[p+2];return w.length>A?w[A]:null}"string"==typeof v&&(p+=2)}return null}(t,n,d,u.index)),null!==Wn)(Wn.__ngLastListenerFn__||Wn).__ngNextListenerFn__=p,Wn.__ngLastListenerFn__=p,Ee=!1;else{p=kn(u,n,ne,p,!1);const Lr=i.listen(Rt,d,p);ae.push(p,Lr),W&&W.push(d,wn,ut,ut+1)}}else p=kn(u,n,ne,p,!0),Rt.addEventListener(d,p,v),ae.push(p),W&&W.push(d,wn,ut,v)}else p=kn(u,n,ne,p,!1);const Ne=u.outputs;let Xe;if(Ee&&null!==Ne&&(Xe=Ne[d])){const He=Xe.length;if(He)for(let Rt=0;Rt<He;Rt+=2){const ba=n[Xe[Rt]][Xe[Rt+1]].subscribe(p),md=ae.length;ae.push(p,ba),W&&W.push(d,u.index,md,-(md+1))}}}(p,d,d[11],v,t,n,!!i,u),Ue}function On(t,n,i,u){try{return!1!==i(u)}catch(d){return zg(t,d),!1}}function kn(t,n,i,u,d){return function p(v){if(v===Function)return u;const w=2&t.flags?yt(t.index,n):n;0==(32&n[2])&&Of(w);let A=On(n,0,u,v),k=p.__ngNextListenerFn__;for(;k;)A=On(n,0,k,v)&&A,k=k.__ngNextListenerFn__;return d&&!1===A&&(v.preventDefault(),v.returnValue=!1),A}}function Co(t=1){return function(t){return(Ht.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Ht.lFrame.contextLView))[8]}(t)}function Zs(t,n){let i=null;const u=function(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(0==(1&i))return n[i+1]}return null}(t);for(let d=0;d<n.length;d++){const p=n[d];if("*"!==p){if(null===u?Vl(t,p,!0):mp(u,p))return d}else i=d}return i}function Wi(t){const n=dt()[16][6];if(!n.projection){const u=n.projection=Zu(t?t.length:1,null),d=u.slice();let p=n.child;for(;null!==p;){const v=t?Zs(p,t):0;null!==v&&(d[v]?d[v].projectionNext=p:u[v]=p,d[v]=p),p=p.next}}}function rs(t,n=0,i){const u=dt(),d=$n(),p=td(d,20+t,16,null,i||null);null===p.projection&&(p.projection=n),Qr(),64!=(64&p.flags)&&function(t,n,i){bg(n[11],0,n,i,Dh(t,i,n),gc(i.parent||n[6],i,n))}(d,u,p)}function _v(t,n,i,u,d){const p=t[i+1],v=null===n;let w=u?ns(p):tl(p),A=!1;for(;0!==w&&(!1===A||v);){const W=t[w+1];yv(t[w],n)&&(A=!0,t[w+1]=u?yp(W):xh(W)),w=u?ns(W):tl(W)}A&&(t[i+1]=u?xh(p):yp(p))}function yv(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Vn(t,n)>=0}function R_(t,n){return function(t,n,i,u){const d=dt(),p=$n(),v=Zi(2);p.firstUpdatePass&&function(t,n,i,u){const d=t.data;if(null===d[i+1]){const p=d[Yi()],v=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(p,u)&&null===n&&!v&&(n=!1),n=function(t,n,i,u){const d=function(t){const n=Ht.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let p=u?n.residualClasses:n.residualStyles;if(null===d)0===(u?n.classBindings:n.styleBindings)&&(i=Dm(i=Ay(null,t,n,i,u),n.attrs,u),p=null);else{const v=n.directiveStylingLast;if(-1===v||t[v]!==d)if(i=Ay(d,t,n,i,u),null===p){let A=function(t,n,i){const u=i?n.classBindings:n.styleBindings;if(0!==tl(u))return t[ns(u)]}(t,n,u);void 0!==A&&Array.isArray(A)&&(A=Ay(null,t,n,A[1],u),A=Dm(A,n.attrs,u),function(t,n,i,u){t[ns(i?n.classBindings:n.styleBindings)]=u}(t,n,u,A))}else p=function(t,n,i){let u;const d=n.directiveEnd;for(let p=1+n.directiveStylingLast;p<d;p++)u=Dm(u,t[p].hostAttrs,i);return Dm(u,n.attrs,i)}(t,n,u)}return void 0!==p&&(u?n.residualClasses=p:n.residualStyles=p),i}(d,p,n,u),function(t,n,i,u,d,p){let v=p?n.classBindings:n.styleBindings,w=ns(v),A=tl(v);t[u]=i;let W,k=!1;if(Array.isArray(i)){const ne=i;W=ne[1],(null===W||Vn(ne,W)>0)&&(k=!0)}else W=i;if(d)if(0!==A){const ae=ns(t[w+1]);t[u+1]=bf(ae,w),0!==ae&&(t[ae+1]=nl(t[ae+1],u)),t[w+1]=function(t,n){return 131071&t|n<<17}(t[w+1],u)}else t[u+1]=bf(w,0),0!==w&&(t[w+1]=nl(t[w+1],u)),w=u;else t[u+1]=bf(A,0),0===w?w=u:t[A+1]=nl(t[A+1],u),A=u;k&&(t[u+1]=xh(t[u+1])),_v(t,W,u,!0),_v(t,W,u,!1),function(t,n,i,u,d){const p=d?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof n&&Vn(p,n)>=0&&(i[u+1]=yp(i[u+1]))}(n,W,t,u,p),v=bf(w,A),p?n.classBindings=v:n.styleBindings=v}(d,p,n,i,v,u)}}(p,t,v,u),n!==An&&qo(d,v,n)&&function(t,n,i,u,d,p,v,w){if(!(3&n.type))return;const A=t.data,k=A[w+1];hg(function(t){return 1==(1&t)}(k)?Sv(A,n,i,d,tl(k),v):void 0)||(hg(p)||function(t){return 2==(2&t)}(k)&&(p=Sv(A,null,i,d,w,v)),function(t,n,i,u,d){const p=V(t);if(n)d?p?t.addClass(i,u):i.classList.add(u):p?t.removeClass(i,u):i.classList.remove(u);else{let v=-1===u.indexOf("-")?void 0:Go.DashCase;if(null==d)p?t.removeStyle(i,u,v):i.style.removeProperty(u);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=Go.Important),p?t.setStyle(i,u,d,v):i.style.setProperty(u,d,w?"important":"")}}}(u,v,F(Yi(),i),d,p))}(p,p.data[Yi()],d,d[11],t,d[v+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=he(Ja(t)))),t}(n,i),u,v)}(t,n,null,!0),R_}function Ay(t,n,i,u,d){let p=null;const v=i.directiveEnd;let w=i.directiveStylingLast;for(-1===w?w=i.directiveStart:w++;w<v&&(p=n[w],u=Dm(u,p.hostAttrs,d),p!==t);)w++;return null!==t&&(i.directiveStylingLast=w),u}function Dm(t,n,i){const u=i?1:2;let d=-1;if(null!==n)for(let p=0;p<n.length;p++){const v=n[p];"number"==typeof v?d=v:d===u&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),xs(t,v,!!i||n[++p]))}return void 0===t?null:t}function Sv(t,n,i,u,d,p){const v=null===n;let w;for(;d>0;){const A=t[d],k=Array.isArray(A),W=k?A[1]:A,ne=null===W;let ae=i[d+1];ae===An&&(ae=ne?Tn:void 0);let Ee=ne?es(ae,u):W===u?ae:void 0;if(k&&!hg(Ee)&&(Ee=es(A,u)),hg(Ee)&&(w=Ee,v))return w;const Ne=t[d+1];d=v?ns(Ne):tl(Ne)}if(null!==n){let A=p?n.residualClasses:n.residualStyles;null!=A&&(w=es(A,u))}return w}function hg(t){return void 0!==t}function fg(t,n=""){const i=dt(),u=$n(),d=t+20,p=u.firstCreatePass?td(u,d,1,n,null):u.data[d],v=i[d]=function(t,n){return V(t)?t.createText(n):t.createTextNode(n)}(i[11],n);Su(u,i,v,p),Es(p,!1)}function Tm(t){return M_("",t,""),Tm}function M_(t,n,i){const u=dt(),d=function(t,n,i,u){return qo(t,fo(),i)?n+We(i)+u:An}(u,t,n,i);return d!==An&&ru(u,Yi(),d),M_}function Ry(t,n,i,u,d){const p=dt(),v=ld(p,t,n,i,u,d);return v!==An&&ru(p,Yi(),v),Ry}function k_(t,n,i){const u=dt();return qo(u,fo(),n)&&so($n(),Mr(),u,t,n,u[11],i,!0),k_}const Jh=void 0;var Fv=["en",[["a","p"],["AM","PM"],Jh],[["AM","PM"],Jh,Jh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jh,"{1} 'at' {0}",Jh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let Xf={};function Uy(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=Lv(n);if(i)return i;const u=n.split("-")[0];if(i=Lv(u),i)return i;if("en"===u)return Fv;throw new Error(`Missing locale data for the locale "${t}".`)}function By(t){return Uy(t)[e.PluralCase]}function Lv(t){return t in Xf||(Xf[t]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[t]),Xf[t]}var e=(()=>((e=e||{})[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e))();const _="en-US";let be=_;function Ke(t){gn(t,"Expected localeId to be defined"),"string"==typeof t&&(be=t.toLowerCase().replace(/_/g,"-"))}function PE(t,n,i,u,d){if(t=pe(t),Array.isArray(t))for(let p=0;p<t.length;p++)PE(t[p],n,i,u,d);else{const p=$n(),v=dt();let w=Kd(t)?t:pe(t.provide),A=i_(t);const k=wr(),W=1048575&k.providerIndexes,ne=k.directiveStart,ae=k.providerIndexes>>20;if(Kd(t)||!t.multi){const Ee=new Po(A,d,nh),Ne=kE(w,n,d?W:W+ae,ne);-1===Ne?(jt(pt(k,v),p,w),OE(p,t,n.length),n.push(w),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),i.push(Ee),v.push(Ee)):(i[Ne]=Ee,v[Ne]=Ee)}else{const Ee=kE(w,n,W+ae,ne),Ne=kE(w,n,W,W+ae),Xe=Ee>=0&&i[Ee],He=Ne>=0&&i[Ne];if(d&&!He||!d&&!Xe){jt(pt(k,v),p,w);const Rt=function(t,n,i,u,d){const p=new Po(t,i,nh);return p.multi=[],p.index=n,p.componentProviders=0,lw(p,d,u&&!i),p}(d?lI:uI,i.length,d,u,A);!d&&He&&(i[Ne].providerFactory=Rt),OE(p,t,n.length,0),n.push(w),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),i.push(Rt),v.push(Rt)}else OE(p,t,Ee>-1?Ee:Ne,lw(i[d?Ne:Ee],A,!d&&u));!d&&u&&He&&i[Ne].componentProviders++}}}function OE(t,n,i,u){const d=Kd(n);if(d||function(t){return!!t.useClass}(n)){const v=(n.useClass||n).prototype.ngOnDestroy;if(v){const w=t.destroyHooks||(t.destroyHooks=[]);if(!d&&n.multi){const A=w.indexOf(i);-1===A?w.push(i,[u,v]):w[A+1].push(u,v)}else w.push(i,v)}}}function lw(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function kE(t,n,i,u){for(let d=i;d<u;d++)if(n[d]===t)return d;return-1}function uI(t,n,i,u){return FE(this.multi,[])}function lI(t,n,i,u){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=I(i,i[1],this.providerFactory.index,u);p=w.slice(0,v),FE(d,p);for(let A=v;A<w.length;A++)p.push(w[A])}else p=[],FE(d,p);return p}function FE(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function cw(t,n=[]){return i=>{i.providersResolver=(u,d)=>function(t,n,i){const u=$n();if(u.firstCreatePass){const d=Gr(t);PE(i,u.data,u.blueprint,d,!0),PE(n,u.data,u.blueprint,d,!1)}}(u,d?d(t):t,n)}}class dw{}const fw="ngComponent";class hI{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${he(t)}. Did you add it to @NgModule.entryComponents?`);return n[fw]=t,n}(n)}}let L_=(()=>{class t{}return t.NULL=new hI,t})();function Bv(...t){}function V_(t,n){return new Xh(O(t,n))}const gI=function(){return V_(wr(),dt())};let Xh=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=gI,t})();function pw(t){return t instanceof Xh?t.nativeElement:t}class jv{}let mI=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>yI(),t})();const yI=function(){const t=dt(),i=yt(wr().index,t);return function(t){return t[11]}(ms(i)?i:t)};let VE=(()=>{class t{}return t.\u0275prov=en({token:t,providedIn:"root",factory:()=>null}),t})();class gw{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const UE=new gw("12.2.16");class mw{constructor(){}supports(n){return zh(n)}create(n){return new CI(n)}}const wI=(t,n)=>n;class CI{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||wI}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,u=this._removalsHead,d=0,p=null;for(;i||u;){const v=!u||i&&i.currentIndex<yw(u,d,p)?i:u,w=yw(v,d,p),A=v.currentIndex;if(v===u)d--,u=u._nextRemoved;else if(i=i._next,null==v.previousIndex)d++;else{p||(p=[]);const k=w-d,W=A-d;if(k!=W){for(let ae=0;ae<k;ae++){const Ee=ae<p.length?p[ae]:p[ae]=0,Ne=Ee+ae;W<=Ne&&Ne<k&&(p[ae]=Ee+1)}p[v.previousIndex]=W-k}}w!==A&&n(v,w,A)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!zh(n))throw new Error(`Error trying to diff '${he(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let d,p,v,i=this._itHead,u=!1;if(Array.isArray(n)){this.length=n.length;for(let w=0;w<this.length;w++)p=n[w],v=this._trackByFn(w,p),null!==i&&Object.is(i.trackById,v)?(u&&(i=this._verifyReinsertion(i,p,v,w)),Object.is(i.item,p)||this._addIdentityChange(i,p)):(i=this._mismatch(i,p,v,w),u=!0),i=i._next}else d=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[zo()]();let u;for(;!(u=i.next()).done;)n(u.value)}}(n,w=>{v=this._trackByFn(d,w),null!==i&&Object.is(i.trackById,v)?(u&&(i=this._verifyReinsertion(i,w,v,d)),Object.is(i.item,w)||this._addIdentityChange(i,w)):(i=this._mismatch(i,w,v,d),u=!0),i=i._next,d++}),this.length=d;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,u,d){let p;return null===n?p=this._itTail:(p=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,p,d)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,p,d)):n=this._addAfter(new bI(i,u),p,d),n}_verifyReinsertion(n,i,u,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?n=this._reinsertAfter(p,n._prev,d):n.currentIndex!=d&&(n.currentIndex=d,this._addToMoves(n,d)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const d=n._prevRemoved,p=n._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(n,i,u),this._addToMoves(n,u),n}_moveAfter(n,i,u){return this._unlink(n),this._insertAfter(n,i,u),this._addToMoves(n,u),n}_addAfter(n,i,u){return this._insertAfter(n,i,u),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,u){const d=null===i?this._itHead:i._next;return n._next=d,n._prev=i,null===d?this._itTail=n:d._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new _w),this._linkedRecords.put(n),n.currentIndex=u,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,u=n._next;return null===i?this._itHead=u:i._next=u,null===u?this._itTail=i:u._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _w),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class bI{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class II{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===i||i<=u.currentIndex)&&Object.is(u.trackById,n))return u;return null}remove(n){const i=n._prevDup,u=n._nextDup;return null===i?this._head=u:i._nextDup=u,null===u?this._tail=i:u._prevDup=i,null===this._head}}class _w{constructor(){this.map=new Map}put(n){const i=n.trackById;let u=this.map.get(i);u||(u=new II,this.map.set(i,u)),u.add(n)}get(n,i){const d=this.map.get(n);return d?d.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yw(t,n,i){const u=t.previousIndex;if(null===u)return u;let d=0;return i&&u<i.length&&(d=i[u]),u+n+d}class vw{constructor(){}supports(n){return n instanceof Map||lm(n)}create(){return new DI}}class DI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||lm(n)))throw new Error(`Error trying to diff '${he(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(u,d)=>{if(i&&i.key===d)this._maybeAddToChanges(i,u),this._appendAfter=i,i=i._next;else{const p=this._getOrCreateRecordForKey(d,u);i=this._insertBeforeOrAppend(i,p)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let u=i;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const u=n._prev;return i._next=n,i._prev=u,n._prev=i,u&&(u._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const d=this._records.get(n);this._maybeAddToChanges(d,i);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const u=new TI(n);return this._records.set(n,u),u.currentValue=i,this._addToAdditions(u),u}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(u=>i(n[u],u))}}class TI{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ew(){return new $v([new mw])}let $v=(()=>{class t{constructor(i){this.factories=i}static create(i,u){if(null!=u){const d=u.factories.slice();i=i.concat(d)}return new t(i)}static extend(i){return{provide:t,useFactory:u=>t.create(i,u||Ew()),deps:[[t,new Ya,new yu]]}}find(i){const u=this.factories.find(d=>d.supports(i));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=en({token:t,providedIn:"root",factory:Ew}),t})();function ww(){return new Hv([new vw])}let Hv=(()=>{class t{constructor(i){this.factories=i}static create(i,u){if(u){const d=u.factories.slice();i=i.concat(d)}return new t(i)}static extend(i){return{provide:t,useFactory:u=>t.create(i,u||ww()),deps:[[t,new Ya,new yu]]}}find(i){const u=this.factories.find(d=>d.supports(i));if(u)return u;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=en({token:t,providedIn:"root",factory:ww}),t})();function Gv(t,n,i,u,d=!1){for(;null!==i;){const p=n[i.index];if(null!==p&&u.push(me(p)),Kr(p))for(let w=10;w<p.length;w++){const A=p[w],k=A[1].firstChild;null!==k&&Gv(A[1],A,k,u)}const v=i.type;if(8&v)Gv(t,n,i.child,u);else if(32&v){const w=Ol(i,n);let A;for(;A=w();)u.push(A)}else if(16&v){const w=Ju(n,i);if(Array.isArray(w))u.push(...w);else{const A=bs(n[16]);Gv(A[1],A,w,u,!0)}}i=d?i.projectionNext:i.next}return u}class Gy{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return Gv(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Kr(n)){const i=n[8],u=i?i.indexOf(this):-1;u>-1&&(bh(n,u),Lo(i,u))}this._attachedToViewContainer=!1}pc(this._lView[1],this._lView)}onDestroy(n){Bl(this._lView[1],this._lView,null,n)}markForCheck(){Of(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){id(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){No(!0);try{id(t,n,i)}finally{No(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,Pa(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class AI extends Gy{constructor(n){super(n),this._view=n}detectChanges(){kh(this._view)}checkNoChanges(){!function(t){No(!0);try{kh(t)}finally{No(!1)}}(this._view)}get context(){return null}}const RI=function(t){return function(t,n,i){if(Qs(t)&&!i){const u=yt(t.index,n);return new Gy(u,u)}return 47&t.type?new Gy(n[16],n):null}(wr(),dt(),16==(16&t))};let NI=(()=>{class t{}return t.__NG_ELEMENT_ID__=RI,t})();const OI=[new vw],FI=new $v([new mw]),LI=new Hv(OI),UI=function(){return Wv(wr(),dt())};let Wy=(()=>{class t{}return t.__NG_ELEMENT_ID__=UI,t})();const BI=Wy,jI=class extends BI{constructor(n,i,u){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=u}createEmbeddedView(n){const i=this._declarationTContainer.tViews,u=vc(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(u[19]=p.createEmbeddedView(i)),jd(i,u,n),new Gy(u)}};function Wv(t,n){return 4&t.type?new jI(n,t,V_(t,n)):null}class Mm{}class Cw{}const GI=function(){return Dw(wr(),dt())};let zv=(()=>{class t{}return t.__NG_ELEMENT_ID__=GI,t})();const zI=zv,bw=class extends zI{constructor(n,i,u){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=u}get element(){return V_(this._hostTNode,this._hostLView)}get injector(){return new le(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ka(this._hostTNode,this._hostLView);if(Yl(n)){const i=ws(n,this._hostLView),u=ta(n);return new le(i[1].data[u+8],i)}return new le(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Iw(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,u){const d=n.createEmbeddedView(i||{});return this.insert(d,u),d}createComponent(n,i,u,d,p){const v=u||this.parentInjector;if(!p&&null==n.ngModule&&v){const A=v.get(Mm,null);A&&(p=A)}const w=n.create(v,d,void 0,p);return this.insert(w.hostView,i),w}insert(n,i){const u=n._lView,d=u[1];if(Kr(u[3])){const W=this.indexOf(n);if(-1!==W)this.detach(W);else{const ne=u[3],ae=new bw(ne,ne[6],ne[3]);ae.detach(ae.indexOf(n))}}const p=this._adjustIndex(i),v=this._lContainer;!function(t,n,i,u){const d=10+u,p=i.length;u>0&&(i[d-1][4]=n),u<p-10?(n[4]=i[d],Ku(i,10+u,n)):(i.push(n),n[4]=null),n[3]=i;const v=n[17];null!==v&&i!==v&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(v,n);const w=n[19];null!==w&&w.insertView(t),n[2]|=128}(d,u,v,p);const w=Xu(p,v),A=u[11],k=Th(A,v[7]);return null!==k&&function(t,n,i,u,d,p){u[0]=d,u[6]=n,Pa(t,u,i,1,d,p)}(d,v[6],A,u,k,w),n.attachToViewContainerRef(),Ku(BE(v),p,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Iw(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),u=bh(this._lContainer,i);u&&(Lo(BE(this._lContainer),i),pc(u[1],u))}detach(n){const i=this._adjustIndex(n,-1),u=bh(this._lContainer,i);return u&&null!=Lo(BE(this._lContainer),i)?new Gy(u):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function Iw(t){return t[8]}function BE(t){return t[8]||(t[8]=[])}function Dw(t,n){let i;const u=n[t.index];if(Kr(u))i=u;else{let d;if(8&t.type)d=me(u);else{const p=n[11];d=p.createComment("");const v=O(t,n);aa(p,Th(p,v),d,function(t,n){return V(t)?t.nextSibling(n):n.nextSibling}(p,v),!1)}n[t.index]=i=kp(u,n,d,t),Mu(n,i)}return new bw(i,t,n)}const $_={};class Ww extends L_{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=Qn(n);return new qw(i,this.ngModule)}}function zw(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const $D=new ci("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>qc});class qw extends dw{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(Sg).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return zw(this.componentDef.inputs)}get outputs(){return zw(this.componentDef.outputs)}create(n,i,u,d){const p=(d=d||this.ngModule)?function(t,n){return{get:(i,u,d)=>{const p=t.get(i,$_,d);return p!==$_||u===$_?p:n.get(i,u,d)}}}(n,d.injector):n,v=p.get(jv,B),w=p.get(VE,null),A=v.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",W=u?function(t,n,i){if(V(t))return t.selectRootElement(n,i===Pt.ShadowDom);let u="string"==typeof n?t.querySelector(n):n;return u.textContent="",u}(A,u,this.componentDef.encapsulation):Kt(v.createRenderer(null,this.componentDef),k,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(k)),ne=this.componentDef.onPush?576:528,ae=function(t,n){return{components:[],scheduler:t||qc,clean:oy,playerHandler:n||null,flags:0}}(),Ee=Tf(0,null,null,1,0,null,null,null,null,null),Ne=vc(null,Ee,ae,ne,null,null,v,A,w,p);let Xe,He;ea(Ne);try{const Rt=function(t,n,i,u,d,p){const v=i[1];i[20]=t;const A=td(v,20,2,"#host",null),k=A.mergedAttrs=n.hostAttrs;null!==k&&(ya(A,k,!0),null!==t&&(ko(d,t,k),null!==A.classes&&_c(d,t,A.classes),null!==A.styles&&Ig(d,t,A.styles)));const W=u.createRenderer(t,n),ne=vc(i,Vg(n),null,n.onPush?64:16,i[20],A,u,W,p||null,null);return v.firstCreatePass&&(jt(pt(A,i),v,n.type),Pp(v,A),Oh(A,i.length,1)),Mu(i,ne),i[20]=ne}(W,this.componentDef,Ne,v,A);if(W)if(u)ko(A,W,["ng-version",UE.full]);else{const{attrs:ut,classes:wn}=function(t){const n=[],i=[];let u=1,d=2;for(;u<t.length;){let p=t[u];if("string"==typeof p)2===d?""!==p&&n.push(p,t[++u]):8===d&&i.push(p);else{if(!$i(d))break;d=p}u++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);ut&&ko(A,W,ut),wn&&wn.length>0&&_c(A,W,wn.join(" "))}if(He=Y(Ee,20),void 0!==i){const ut=He.projection=[];for(let wn=0;wn<this.ngContentSelectors.length;wn++){const Wn=i[wn];ut.push(null!=Wn?Array.from(Wn):null)}}Xe=function(t,n,i,u,d){const p=i[1],v=function(t,n,i){const u=wr();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Xm(t,u,n,Mh(t,n,1,null),i));const d=I(n,t,u.directiveStart,u);ts(d,n);const p=O(u,n);return p&&ts(p,n),d}(p,i,n);if(u.components.push(v),t[8]=v,d&&d.forEach(A=>A(v,n)),n.contentQueries){const A=wr();n.contentQueries(1,v,A.directiveStart)}const w=wr();return!p.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(to(w.index),jg(i[1],w,0,w.directiveStart,w.directiveEnd,n),Gd(n,v)),v}(Rt,this.componentDef,Ne,ae,[om]),jd(Ee,Ne,null)}finally{Sa()}return new WD(this.componentType,Xe,V_(He,Ne),Ne,He)}}class WD extends class{}{constructor(n,i,u,d,p){super(),this.location=u,this._rootLView=d,this._tNode=p,this.instance=i,this.hostView=this.changeDetectorRef=new AI(d),this.componentType=n}get injector(){return new le(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const H_=new Map;class KD extends Mm{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ww(this);const u=sn(n),d=n[De]||null;d&&Ke(d),this._bootstrapComponents=Tu(u.bootstrap),this._r3Injector=sd(n,i,[{provide:Mm,useValue:this},{provide:L_,useValue:this.componentFactoryResolver}],he(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=Hi.THROW_IF_NOT_FOUND,u=xt.Default){return n===Hi||n===Mm||n===Hl?this:this._r3Injector.get(n,i,u)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class XE extends Cw{constructor(n){super(),this.moduleType=n,null!==sn(n)&&function(t){const n=new Set;!function i(u){const d=sn(u,!0),p=d.id;null!==p&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${he(n)} vs ${he(n.name)}`)}(p,H_.get(p),u),H_.set(p,u));const v=Tu(d.imports);for(const w of v)n.has(w)||(n.add(w),i(w))}(t)}(n)}create(n){return new KD(this.moduleType,n)}}function Yw(t,n,i){const u=Ci()+t,d=dt();return d[u]===An?zl(d,u,i?n.call(i):n()):function(t,n){return t[n]}(d,u)}function Qw(t,n,i,u){return function(t,n,i,u,d,p){const v=n+i;return qo(t,v,d)?zl(t,v+1,p?u.call(p,d):u(d)):function(t,n){const i=t[n];return i===An?void 0:i}(t,v+1)}(dt(),Ci(),t,n,i,u)}function e0(t){return n=>{setTimeout(t,void 0,n)}}const ef=class extends T.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,u){var d,p,v;let w=n,A=i||(()=>null),k=u;if(n&&"object"==typeof n){const ne=n;w=null===(d=ne.next)||void 0===d?void 0:d.bind(ne),A=null===(p=ne.error)||void 0===p?void 0:p.bind(ne),k=null===(v=ne.complete)||void 0===v?void 0:v.bind(ne)}this.__isAsync&&(A=e0(A),w&&(w=e0(w)),k&&(k=e0(k)));const W=super.subscribe({next:w,error:A,complete:k});return n instanceof U.w&&n.add(W),W}};function dT(){return this._results[zo()]()}class Qv{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=zo(),u=Qv.prototype;u[i]||(u[i]=dT)}get changes(){return this._changes||(this._changes=new ef)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const u=this;u.dirty=!1;const d=vo(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let u=0;u<t.length;u++){let d=t[u],p=n[u];if(i&&(d=i(d),p=i(p)),p!==d)return!1}return!0}(u._results,d,i))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class t0{constructor(n){this.queryList=n,this.matches=null}clone(){return new t0(this.queryList)}setDirty(){this.queryList.setDirty()}}class n0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const u=null!==n.contentQueries?n.contentQueries[0]:i.length,d=[];for(let p=0;p<u;p++){const v=i.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new n0(d)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==dC(n,i).matches&&this.queries[i].setDirty()}}class rC{constructor(n,i,u=null){this.predicate=n,this.flags=i,this.read=u}}class r0{constructor(n=[]){this.queries=n}elementStart(n,i){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let u=0;u<this.length;u++){const d=null!==i?i.length:0,p=this.getByIndex(u).embeddedTView(n,d);p&&(p.indexInDeclarationView=u,null!==i?i.push(p):i=[p])}return null!==i?new r0(i):null}template(n,i){for(let u=0;u<this.queries.length;u++)this.queries[u].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class s0{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new s0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let u=n.parent;for(;null!==u&&8&u.type&&u.index!==i;)u=u.parent;return i===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const p=u[d];this.matchTNodeWithReadOption(n,i,pT(i,p)),this.matchTNodeWithReadOption(n,i,S(i,n,p,!1,!1))}else u===Wy?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,S(i,n,u,!1,!1))}matchTNodeWithReadOption(n,i,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===Xh||d===zv||d===Wy&&4&i.type)this.addMatch(i.index,-2);else{const p=S(i,n,d,!1,!1);null!==p&&this.addMatch(i.index,p)}else this.addMatch(i.index,u)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function pT(t,n){const i=t.localNames;if(null!==i)for(let u=0;u<i.length;u+=2)if(i[u]===n)return i[u+1];return null}function mT(t,n,i,u){return-1===i?function(t,n){return 11&t.type?V_(t,n):4&t.type?Wv(t,n):null}(n,t):-2===i?function(t,n,i){return i===Xh?V_(n,t):i===Wy?Wv(n,t):i===zv?Dw(n,t):void 0}(t,n,u):I(t,t[1],i,n)}function iC(t,n,i,u){const d=n[19].queries[u];if(null===d.matches){const p=t.data,v=i.matches,w=[];for(let A=0;A<v.length;A+=2){const k=v[A];w.push(k<0?null:mT(n,p[k],v[A+1],i.metadata.read))}d.matches=w}return d.matches}function o0(t,n,i,u){const d=t.queries.getByIndex(i),p=d.matches;if(null!==p){const v=iC(t,n,d,i);for(let w=0;w<p.length;w+=2){const A=p[w];if(A>0)u.push(v[w/2]);else{const k=p[w+1],W=n[-A];for(let ne=10;ne<W.length;ne++){const ae=W[ne];ae[17]===ae[3]&&o0(ae[1],ae,k,u)}if(null!==W[9]){const ne=W[9];for(let ae=0;ae<ne.length;ae++){const Ee=ne[ae];o0(Ee[1],Ee,k,u)}}}}}return u}function sC(t){const n=dt(),i=$n(),u=fl();pl(u+1);const d=dC(i,u);if(t.dirty&&ln(n)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const p=d.crossesNgTemplate?o0(i,n,u,[]):iC(i,n,d,u);t.reset(p,pw),t.notifyOnChanges()}return!0}return!1}function oC(t,n,i){const u=$n();u.firstCreatePass&&(cC(u,new rC(t,n,i),-1),2==(2&n)&&(u.staticViewQueries=!0)),lC(u,dt(),n)}function aC(t,n,i,u){const d=$n();if(d.firstCreatePass){const p=wr();cC(d,new rC(n,i,u),p.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(d,t),2==(2&i)&&(d.staticContentQueries=!0)}lC(d,dt(),i)}function uC(){return t=dt(),n=fl(),t[19].queries[n].queryList;var t,n}function lC(t,n,i){const u=new Qv(4==(4&i));Bl(t,n,u,u.destroy),null===n[19]&&(n[19]=new n0),n[19].queries.push(new t0(u))}function cC(t,n,i){null===t.queries&&(t.queries=new r0),t.queries.track(new s0(n,i))}function dC(t,n){return t.queries.getByIndex(n)}const h0=new ci("Application Initializer");let W_=(()=>{class t{constructor(i){this.appInits=i,this.resolve=Bv,this.reject=Bv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const i=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(X(p))i.push(p);else if(Oe(p)){const v=new Promise((w,A)=>{p.subscribe({complete:w,error:A})});i.push(v)}}Promise.all(i).then(()=>{u()}).catch(d=>{this.reject(d)}),0===i.length&&u(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(Sr(h0,8))},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})();const xC=new ci("AppId"),qT={provide:xC,useFactory:function(){return`${f0()}${f0()}${f0()}`},deps:[]};function f0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RC=new ci("Platform Initializer"),NC=new ci("Platform ID"),MC=new ci("appBootstrapListener");let PC=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})();const eE=new ci("LocaleId"),OC=new ci("DefaultCurrencyCode");class ZT{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const p0=function(t){return new XE(t)},YT=p0,QT=function(t){return Promise.resolve(p0(t))},kC=function(t){const n=p0(t),u=Tu(sn(t).declarations).reduce((d,p)=>{const v=Qn(p);return v&&d.push(new qw(v)),d},[]);return new ZT(n,u)},JT=kC,XT=function(t){return Promise.resolve(kC(t))};let rv=(()=>{class t{constructor(){this.compileModuleSync=YT,this.compileModuleAsync=QT,this.compileModuleAndAllComponentsSync=JT,this.compileModuleAndAllComponentsAsync=XT}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})();const nS=(()=>Promise.resolve(0))();function g0(t){"undefined"==typeof Zone?nS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Nc{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ef(!1),this.onMicrotaskEmpty=new ef(!1),this.onStable=new ef(!1),this.onError=new ef(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&i,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let t=Dt.requestAnimationFrame,n=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const u=n[Zone.__symbol__("OriginalDelegate")];u&&(n=u)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_0(t),t.isCheckStableRunning=!0,m0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,u,d,p,v,w)=>{try{return FC(t),i.invokeTask(d,p,v,w)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&n(),LC(t)}},onInvoke:(i,u,d,p,v,w,A)=>{try{return FC(t),i.invoke(d,p,v,w,A)}finally{t.shouldCoalesceRunChangeDetection&&n(),LC(t)}},onHasTask:(i,u,d,p)=>{i.hasTask(d,p),u===d&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,_0(t),m0(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(i,u,d,p)=>(i.handleError(d,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Nc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,u){return this._inner.run(n,i,u)}runTask(n,i,u,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,n,iS,Bv,Bv);try{return p.runTask(v,i,u)}finally{p.cancelTask(v)}}runGuarded(n,i,u){return this._inner.runGuarded(n,i,u)}runOutsideAngular(n){return this._outer.run(n)}}const iS={};function m0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function FC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function LC(t){t._nesting--,m0(t)}class aS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ef,this.onMicrotaskEmpty=new ef,this.onStable=new ef,this.onError=new ef}run(n,i,u){return n.apply(i,u)}runGuarded(n,i,u){return n.apply(i,u)}runOutsideAngular(n){return n()}runTask(n,i,u,d){return n.apply(i,u)}}let VC=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nc.assertNotInAngularZone(),g0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())g0(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(i)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,u,d){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),i(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:i,timeoutId:p,updateCb:d})}whenStable(i,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,u,d){return[]}}return t.\u0275fac=function(i){return new(i||t)(Sr(Nc))},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})(),UC=(()=>{class t{constructor(){this._applications=new Map,y0.addToWindow(this)}registerApplication(i,u){this._applications.set(i,u)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,u=!0){return y0.findTestabilityInTree(this,i,u)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})();class uS{addToWindow(n){}findTestabilityInTree(n,i,u){return null}}function lS(t){y0=t}let y0=new uS,BC=!0,jC=!1;function v0(){return jC=!0,BC}function cS(){if(jC)throw new Error("Cannot enable prod mode after platform setup.");BC=!1}let sh;const $C=new ci("AllowMultipleToken");class _S{constructor(n,i){this.name=n,this.token=i}}function HC(t,n,i=[]){const u=`Platform: ${n}`,d=new ci(u);return(p=[])=>{let v=GC();if(!v||v.injector.get($C,!1))if(t)t(i.concat(p).concat({provide:d,useValue:!0}));else{const w=i.concat(p).concat({provide:d,useValue:!0},{provide:sl,useValue:"platform"});!function(t){if(sh&&!sh.destroyed&&!sh.injector.get($C,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sh=t.get(WC);const n=t.get(RC,null);n&&n.forEach(i=>i())}(Hi.create({providers:w,name:u}))}return function(t){const n=GC();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(d)}}function GC(){return sh&&!sh.destroyed?sh:null}let WC=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,u){const w=function(t,n){let i;return i="noop"===t?new aS:("zone.js"===t?void 0:t)||new Nc({enableLongStackTrace:v0(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),A=[{provide:Nc,useValue:w}];return w.run(()=>{const k=Hi.create({providers:A,parent:this.injector,name:i.moduleType.name}),W=i.create(k),ne=W.injector.get(hs,null);if(!ne)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return w.runOutsideAngular(()=>{const ae=w.onError.subscribe({next:Ee=>{ne.handleError(Ee)}});W.onDestroy(()=>{E0(this._modules,W),ae.unsubscribe()})}),function(t,n,i){try{const u=i();return X(u)?u.catch(d=>{throw n.runOutsideAngular(()=>t.handleError(d)),d}):u}catch(u){throw n.runOutsideAngular(()=>t.handleError(u)),u}}(ne,w,()=>{const ae=W.injector.get(W_);return ae.runInitializers(),ae.donePromise.then(()=>(Ke(W.injector.get(eE,_)||_),this._moduleDoBootstrap(W),W))})})}bootstrapModule(i,u=[]){const d=zC({},u);return function(t,n,i){const u=new XE(i);return Promise.resolve(u)}(0,0,i).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(i){const u=i.injector.get(iv);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${he(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(u)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(Sr(Hi))},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})();function zC(t,n){return Array.isArray(n)?n.reduce(zC,t):Object.assign(Object.assign({},t),n)}let iv=(()=>{class t{constructor(i,u,d,p,v){this._zone=i,this._injector=u,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new ie.y(k=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{k.next(this._stable),k.complete()})}),A=new ie.y(k=>{let W;this._zone.runOutsideAngular(()=>{W=this._zone.onStable.subscribe(()=>{Nc.assertNotInAngularZone(),g0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,k.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{Nc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{k.next(!1)}))});return()=>{W.unsubscribe(),ne.unsubscribe()}});this.isStable=(0,Re.T)(w,A.pipe((0,Ae.B)()))}bootstrap(i,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=i instanceof dw?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(d.componentType);const p=function(t){return t.isBoundToModule}(d)?void 0:this._injector.get(Mm),w=d.create(Hi.NULL,[],u||d.selector,p),A=w.location.nativeElement,k=w.injector.get(VC,null),W=k&&w.injector.get(UC);return k&&W&&W.registerApplication(A,k),w.onDestroy(()=>{this.detachView(w.hostView),E0(this.components,w),W&&W.unregisterApplication(A)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const u=i;this._views.push(u),u.attachToAppRef(this)}detachView(i){const u=i;E0(this._views,u),u.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(MC,[]).concat(this._bootstrapListeners).forEach(d=>d(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(Sr(Nc),Sr(Hi),Sr(hs),Sr(L_),Sr(W_))},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})();function E0(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class bS{}class DS{}const TS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let SS=(()=>{class t{constructor(i,u){this._compiler=i,this._config=u||TS}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[u,d]=i.split("#");return void 0===d&&(d="default"),z(8255)(u).then(p=>p[d]).then(p=>YC(p,u,d)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(i){let[u,d]=i.split("#"),p="NgFactory";return void 0===d&&(d="default",p=""),z(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(v=>v[d+p]).then(v=>YC(v,u,d))}}return t.\u0275fac=function(i){return new(i||t)(Sr(rv),Sr(DS,8))},t.\u0275prov=en({token:t,factory:t.\u0275fac}),t})();function YC(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const kS=function(t){return null},LS=HC(null,"core",[{provide:NC,useValue:"unknown"},{provide:WC,deps:[Hi]},{provide:UC,deps:[]},{provide:PC,deps:[]}]),$S=[{provide:iv,useClass:iv,deps:[Nc,Hi,hs,L_,W_]},{provide:$D,deps:[Nc],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:W_,useClass:W_,deps:[[new yu,h0]]},{provide:rv,useClass:rv,deps:[]},qT,{provide:$v,useFactory:function(){return FI},deps:[]},{provide:Hv,useFactory:function(){return LI},deps:[]},{provide:eE,useFactory:function(t){return Ke(t=t||"undefined"!=typeof $localize&&$localize.locale||_),t},deps:[[new xa(eE),new yu,new Ya]]},{provide:OC,useValue:"USD"}];let GS=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(Sr(iv))},t.\u0275mod=Ni({type:t}),t.\u0275inj=an({providers:$S}),t})()},905:(Ot,Ge,z)=>{"use strict";z.d(Ge,{nm:()=>To});var T=z(6913);z(7716),z(2329);var _t=z(8239),Wt=z(8026),nn=z(3910),St=z(3854),fn=z(5422);const ct=new Map,Fe={activated:!1,tokenObservers:[]},bt={initialized:!1,enabled:!1};function ot(xe){return ct.get(xe)||Fe}function Mt(xe,Te){ct.set(xe,Te)}function Jt(){return bt}class gt{constructor(Te,Ve,tt,Et,kt){if(this.operation=Te,this.retryPolicy=Ve,this.getWaitDuration=tt,this.lowerBound=Et,this.upperBound=kt,this.pending=null,this.nextErrorWaitInterval=Et,Et>kt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Te){var Ve=this;return(0,_t.Z)(function*(){Ve.stop();try{Ve.pending=new St.BH,yield(xe=Ve.getNextRun(Te),new Promise(Te=>{setTimeout(Te,xe)})),Ve.pending.resolve(),yield Ve.pending.promise,Ve.pending=new St.BH,yield Ve.operation(),Ve.pending.resolve(),yield Ve.pending.promise,Ve.process(!0).catch(()=>{})}catch(tt){Ve.retryPolicy(tt)?Ve.process(!1).catch(()=>{}):Ve.stop()}var xe})()}getNextRun(Te){if(Te)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ve=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ve}}}const Zt=new St.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Bt(xe){if(!ot(xe).activated)throw Zt.create("use-before-activation",{appName:xe.name})}function gr(xe,Te){return _n.apply(this,arguments)}function _n(){return(_n=(0,_t.Z)(function*({url:xe,body:Te},Ve){var tt,Et;const kt={"Content-Type":"application/json"},re=Ve.getImmediate({optional:!0});if(re){const as=yield re.getHeartbeatsHeader();as&&(kt["X-Firebase-Client"]=as)}const Er={method:"POST",body:JSON.stringify(Te),headers:kt};let Zn,ai;try{Zn=yield fetch(xe,Er)}catch(as){throw Zt.create("fetch-network-error",{originalErrorMessage:null===(tt=as)||void 0===tt?void 0:tt.message})}if(200!==Zn.status)throw Zt.create("fetch-status-error",{httpStatus:Zn.status});try{ai=yield Zn.json()}catch(as){throw Zt.create("fetch-parse-error",{originalErrorMessage:null===(Et=as)||void 0===Et?void 0:Et.message})}const os=ai.ttl.match(/^([\d.]+)(s)$/);if(!os||!os[2]||isNaN(Number(os[1])))throw Zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ai.ttl}`});const _s=1e3*Number(os[1]),_r=Date.now();return{token:ai.token,expireTimeMillis:_r+_s,issuedAtTimeMillis:_r}})).apply(this,arguments)}function ri(xe,Te){const{projectId:Ve,appId:tt,apiKey:Et}=xe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ve}/apps/${tt}:exchangeDebugToken?key=${Et}`,body:{debug_token:Te}}}const un="firebase-app-check-store";let jn=null;function or(){return jn||(jn=new Promise((xe,Te)=>{var Ve;try{const tt=indexedDB.open("firebase-app-check-database",1);tt.onsuccess=Et=>{xe(Et.target.result)},tt.onerror=Et=>{var kt;Te(Zt.create("storage-open",{originalErrorMessage:null===(kt=Et.target.error)||void 0===kt?void 0:kt.message}))},tt.onupgradeneeded=Et=>{0===Et.oldVersion&&Et.target.result.createObjectStore(un,{keyPath:"compositeKey"})}}catch(tt){Te(Zt.create("storage-open",{originalErrorMessage:null===(Ve=tt)||void 0===Ve?void 0:Ve.message}))}}),jn)}function Is(){return(Is=(0,_t.Z)(function*(xe,Te){const tt=(yield or()).transaction(un,"readwrite"),kt=tt.objectStore(un).put({compositeKey:xe,value:Te});return new Promise((re,Er)=>{kt.onsuccess=Zn=>{re()},tt.onerror=Zn=>{var ai;Er(Zt.create("storage-set",{originalErrorMessage:null===(ai=Zn.target.error)||void 0===ai?void 0:ai.message}))}})})).apply(this,arguments)}const xi=new fn.Yd("@firebase/app-check");function Dt(xe,Te){return(0,St.hl)()?function(xe,Te){return function(xe,Te){return Is.apply(this,arguments)}(function(xe){return`${xe.options.appId}-${xe.name}`}(xe),Te)}(xe,Te).catch(Ve=>{xi.warn(`Failed to write token to IndexedDB. Error: ${Ve}`)}):Promise.resolve()}function Dn(){return Jt().enabled}function Tn(){return ye.apply(this,arguments)}function ye(){return(ye=(0,_t.Z)(function*(){const xe=Jt();if(xe.enabled&&xe.token)return xe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ge={error:"UNKNOWN_ERROR"};function ve(xe){return St.US.encodeString(JSON.stringify(xe),!1)}function De(xe){return rt.apply(this,arguments)}function rt(){return(rt=(0,_t.Z)(function*(xe,Te=!1){const Ve=xe.app;Bt(Ve);const tt=ot(Ve);let kt,Et=tt.token;if(!Et){const Zn=yield tt.cachedTokenPromise;Zn&&Cn(Zn)&&(Et=Zn)}if(!Te&&Et&&Cn(Et))return{token:Et.token};let Er,re=!1;if(Dn()){tt.exchangeTokenPromise||(tt.exchangeTokenPromise=gr(ri(Ve,yield Tn()),xe.heartbeatServiceProvider).then(ai=>(tt.exchangeTokenPromise=void 0,ai)),re=!0);const Zn=yield tt.exchangeTokenPromise;return yield Dt(Ve,Zn),Mt(Ve,Object.assign(Object.assign({},tt),{token:Zn})),{token:Zn.token}}try{tt.exchangeTokenPromise||(tt.exchangeTokenPromise=tt.provider.getToken().then(Zn=>(tt.exchangeTokenPromise=void 0,Zn)),re=!0),Et=yield tt.exchangeTokenPromise}catch(Zn){"appCheck/throttled"===Zn.code?xi.warn(Zn.message):xi.error(Zn),kt=Zn}return Et?(Er={token:Et.token},Mt(Ve,Object.assign(Object.assign({},tt),{token:Et})),yield Dt(Ve,Et)):Er=ii(kt),re&&Ri(Ve,Er),Er})).apply(this,arguments)}function on(xe,Te){const Ve=ot(xe),tt=Ve.tokenObservers.filter(Et=>Et.next!==Te);0===tt.length&&Ve.tokenRefresher&&Ve.tokenRefresher.isRunning()&&Ve.tokenRefresher.stop(),Mt(xe,Object.assign(Object.assign({},Ve),{tokenObservers:tt}))}function tn(xe){const{app:Te}=xe,Ve=ot(Te);let tt=Ve.tokenRefresher;tt||(tt=function(xe){const{app:Te}=xe;return new gt((0,_t.Z)(function*(){let tt;if(tt=ot(Te).token?yield De(xe,!0):yield De(xe),tt.error)throw tt.error}),()=>!0,()=>{const Ve=ot(Te);if(Ve.token){let tt=Ve.token.issuedAtTimeMillis+.5*(Ve.token.expireTimeMillis-Ve.token.issuedAtTimeMillis)+3e5;return tt=Math.min(tt,Ve.token.expireTimeMillis-3e5),Math.max(0,tt-Date.now())}return 0},3e4,96e4)}(xe),Mt(Te,Object.assign(Object.assign({},Ve),{tokenRefresher:tt}))),!tt.isRunning()&&Ve.isTokenAutoRefreshEnabled&&tt.start()}function Ri(xe,Te){const Ve=ot(xe).tokenObservers;for(const tt of Ve)try{"EXTERNAL"===tt.type&&null!=Te.error?tt.error(Te.error):tt.next(Te)}catch(Et){}}function Cn(xe){return xe.expireTimeMillis-Date.now()>0}function ii(xe){return{token:ve(ge),error:xe}}class Ni{constructor(Te,Ve){this.app=Te,this.heartbeatServiceProvider=Ve}_delete(){const{tokenObservers:Te}=ot(this.app);for(const Ve of Te)on(this.app,Ve.next);return Promise.resolve()}}const Oi="app-check-internal";(0,Wt._registerComponent)(new nn.wA("app-check",xe=>function(xe,Te){return new Ni(xe,Te)}(xe.getProvider("app").getImmediate(),xe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((xe,Te,Ve)=>{xe.getProvider(Oi).initialize()})),(0,Wt._registerComponent)(new nn.wA(Oi,xe=>function(xe){return{getToken:Te=>De(xe,Te),addTokenListener:Te=>function(xe,Te,Ve,tt){const{app:Et}=xe,kt=ot(Et),re={next:Ve,error:tt,type:Te};if(Mt(Et,Object.assign(Object.assign({},kt),{tokenObservers:[...kt.tokenObservers,re]})),kt.token&&Cn(kt.token)){const Er=kt.token;Promise.resolve().then(()=>{Ve({token:Er.token}),tn(xe)}).catch(()=>{})}kt.cachedTokenPromise.then(()=>tn(xe))}(xe,"INTERNAL",Te),removeTokenListener:Te=>on(xe.app,Te)}}(xe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wt.registerVersion)("@firebase/app-check","0.5.12");class To{constructor(){return(0,T.vb)("app-check")}}"undefined"!=typeof window&&window},8006:(Ot,Ge,z)=>{"use strict";z.d(Ge,{zQ:()=>Ur,rT:()=>Jt,f7:()=>ur,L6:()=>ot,_Q:()=>Mt,lh:()=>It,Qv:()=>bt,nw:()=>Vr});var T=z(7716),U=z(9765),ie=z(5917),Re=z(7574),Ae=z(4402),de=z(6682),Me=z(7771),he=z(5319),we=z(309),se=z(7971),ce=z(8858);class pe extends U.xQ{constructor(gt=Number.POSITIVE_INFINITY,mn=Number.POSITIVE_INFINITY,cn){super(),this.scheduler=cn,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=gt<1?1:gt,this._windowTime=mn<1?1:mn,mn===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(gt){if(!this.isStopped){const mn=this._events;mn.push(gt),mn.length>this._bufferSize&&mn.shift()}super.next(gt)}nextTimeWindow(gt){this.isStopped||(this._events.push(new $e(this._getNow(),gt)),this._trimBufferThenGetEvents()),super.next(gt)}_subscribe(gt){const mn=this._infiniteTimeWindow,cn=mn?this._events:this._trimBufferThenGetEvents(),Zt=this.scheduler,en=cn.length;let Bt;if(this.closed)throw new se.N;if(this.isStopped||this.hasError?Bt=he.w.EMPTY:(this.observers.push(gt),Bt=new ce.W(this,gt)),Zt&&gt.add(gt=new we.ht(gt,Zt)),mn)for(let an=0;an<en&&!gt.closed;an++)gt.next(cn[an]);else for(let an=0;an<en&&!gt.closed;an++)gt.next(cn[an].value);return this.hasError?gt.error(this.thrownError):this.isStopped&&gt.complete(),Bt}_getNow(){return(this.scheduler||Me.c).now()}_trimBufferThenGetEvents(){const gt=this._getNow(),mn=this._bufferSize,cn=this._windowTime,Zt=this._events,en=Zt.length;let Bt=0;for(;Bt<en&&!(gt-Zt[Bt].time<cn);)Bt++;return en>mn&&(Bt=Math.max(Bt,en-mn)),Bt>0&&Zt.splice(0,Bt),Zt}}class $e{constructor(gt,mn){this.time=gt,this.value=mn}}function Ye(gn,gt,mn){let cn;return cn=gn&&"object"==typeof gn?gn:{bufferSize:gn,windowTime:gt,refCount:!1,scheduler:mn},Zt=>Zt.lift(function({bufferSize:gn=Number.POSITIVE_INFINITY,windowTime:gt=Number.POSITIVE_INFINITY,refCount:mn,scheduler:cn}){let Zt,Bt,en=0,an=!1,Fn=!1;return function(_n){let Nn;en++,!Zt||an?(an=!1,Zt=new pe(gn,gt,cn),Nn=Zt.subscribe(this),Bt=_n.subscribe({next(ir){Zt.next(ir)},error(ir){an=!0,Zt.error(ir)},complete(){Fn=!0,Bt=void 0,Zt.complete()}}),Fn&&(Bt=void 0)):Nn=Zt.subscribe(this),this.add(()=>{en--,Nn.unsubscribe(),Nn=void 0,Bt&&!Fn&&mn&&0===en&&(Bt.unsubscribe(),Bt=void 0,Zt=void 0)})}}(cn))}var ze=z(3190);function Ct(gn,gt){return gt?(0,ze.w)(()=>gn,gt):(0,ze.w)(()=>gn)}var We=z(8002),Be=z(8049),Ce=z(3101),_t=z(5435),Wt=z(6913),nn=z(8939),St=z(8583),fn=z(905);z(7841);const bt=new T.OlP("angularfire2.auth.use-emulator"),ot=new T.OlP("angularfire2.auth.settings"),Mt=new T.OlP("angularfire2.auth.tenant-id"),Jt=new T.OlP("angularfire2.auth.langugage-code"),It=new T.OlP("angularfire2.auth.use-device-language"),ur=new T.OlP("angularfire.auth.persistence"),Vr=(gn,gt,mn,cn,Zt,en,Bt,an)=>(0,nn.cc)(`${gn.name}.auth`,"AngularFireAuth",gn.name,()=>{const Fn=gt.runOutsideAngular(()=>gn.auth());if(mn&&Fn.useEmulator(...mn),cn&&(Fn.tenantId=cn),Fn.languageCode=Zt,en&&Fn.useDeviceLanguage(),Bt)for(const[gr,_n]of Object.entries(Bt))Fn.settings[gr]=_n;return an&&Fn.setPersistence(an),Fn},[mn,cn,Zt,en,Bt,an]);let Ur=(()=>{class gn{constructor(mn,cn,Zt,en,Bt,an,Fn,gr,_n,Nn,ir,ri){const Mn=new U.xQ,et=(0,ie.of)(void 0).pipe((0,we.QV)(Bt.outsideAngular),(0,ze.w)(()=>en.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,1530)))),(0,We.U)(()=>(0,nn.on)(mn,en,cn)),(0,We.U)(un=>Vr(un,en,an,gr,_n,Nn,Fn,ir)),Ye({bufferSize:1,refCount:!1}));if((0,St.PM)(Zt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ie.of)(null);else{et.pipe((0,Be.P)()).subscribe();const xt=et.pipe((0,ze.w)(xn=>xn.getRedirectResult().then(xr=>xr,()=>null)),Wt.iC,Ye({bufferSize:1,refCount:!1})),jn=et.pipe((0,ze.w)(xn=>new Re.y(xr=>({unsubscribe:en.runOutsideAngular(()=>xn.onAuthStateChanged(vr=>xr.next(vr),vr=>xr.error(vr),()=>xr.complete()))})))),or=et.pipe((0,ze.w)(xn=>new Re.y(xr=>({unsubscribe:en.runOutsideAngular(()=>xn.onIdTokenChanged(vr=>xr.next(vr),vr=>xr.error(vr),()=>xr.complete()))}))));this.authState=xt.pipe(Ct(jn),(0,Ce.R)(Bt.outsideAngular),(0,we.QV)(Bt.insideAngular)),this.user=xt.pipe(Ct(or),(0,Ce.R)(Bt.outsideAngular),(0,we.QV)(Bt.insideAngular)),this.idToken=this.user.pipe((0,ze.w)(xn=>xn?(0,Ae.D)(xn.getIdToken()):(0,ie.of)(null))),this.idTokenResult=this.user.pipe((0,ze.w)(xn=>xn?(0,Ae.D)(xn.getIdTokenResult()):(0,ie.of)(null))),this.credential=(0,de.T)(xt,Mn,this.authState.pipe((0,_t.h)(xn=>!xn))).pipe((0,We.U)(xn=>(null==xn?void 0:xn.user)?xn:null),(0,Ce.R)(Bt.outsideAngular),(0,we.QV)(Bt.insideAngular))}return(0,nn.pX)(this,et,en,{spy:{apply:(un,xt,jn)=>{(un.startsWith("signIn")||un.startsWith("createUser"))&&jn.then(or=>Mn.next(or))}}})}}return gn.\u0275fac=function(mn){return new(mn||gn)(T.LFG(nn.Dh),T.LFG(nn.xv,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Wt.HU),T.LFG(bt,8),T.LFG(ot,8),T.LFG(Mt,8),T.LFG(Jt,8),T.LFG(It,8),T.LFG(ur,8),T.LFG(fn.nm,8))},gn.\u0275prov=T.Yz7({token:gn,factory:gn.\u0275fac,providedIn:"any"}),gn})()},2278:(Ot,Ge,z)=>{"use strict";z.d(Ge,{ST:()=>By,yb:()=>Lv});var T=z(7716),U=z(3637),ie=z(7574),Re=z(4402),Ae=z(5917),de=z(6913),Me=z(7393);function he(){return s=>s.lift(new we)}class we{call(e,r){return r.subscribe(new se(e))}}class se extends Me.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let r;this.hasPrev?r=[this.prev,e]:this.hasPrev=!0,this.prev=e,r&&this.destination.next(r)}}var Fe,ce=z(9761),pe=z(8002),$e=z(2145),Ye=z(7519),it=z(5435),ze=z(8939),Ct=z(8583),Be=(z(1530),z(3394)),Ce=z(8239),_t=z(8026),Wt=z(3910),nn=z(5422),St=z(3854),fn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ct={},bt=bt||{},ot=fn||self;function Mt(){}function Jt(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function It(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var Vr="closure_uid_"+(1e9*Math.random()>>>0),Ur=0;function ni(s,e,r){return s.call.apply(s.bind,arguments)}function gn(s,e,r){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function gt(s,e,r){return(gt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ni:gn).apply(null,arguments)}function mn(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function cn(s,e){function r(){}r.prototype=e.prototype,s.Z=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Vb=function(a,h,_){for(var C=Array(arguments.length-2),x=2;x<arguments.length;x++)C[x-2]=arguments[x];return e.prototype[h].apply(a,C)}}function Zt(){this.s=this.s,this.o=this.o}var Bt={};Zt.prototype.s=!1,Zt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,Vr)&&s[Vr]||(s[Vr]=++Ur)}(this);delete Bt[s]}},Zt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const an=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1},Fn=Array.prototype.forEach?function(s,e,r){Array.prototype.forEach.call(s,e,r)}:function(s,e,r){const a=s.length,h="string"==typeof s?s.split(""):s;for(let _=0;_<a;_++)_ in h&&e.call(r,h[_],_,s)};function _n(s){return Array.prototype.concat.apply([],arguments)}function Nn(s){const e=s.length;if(0<e){const r=Array(e);for(let a=0;a<e;a++)r[a]=s[a];return r}return[]}function ir(s){return/^[\s\xa0]*$/.test(s)}var un,ri=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function Mn(s,e){return-1!=s.indexOf(e)}function et(s,e){return s<e?-1:s>e?1:0}e:{var xt=ot.navigator;if(xt){var jn=xt.userAgent;if(jn){un=jn;break e}}un=""}function or(s,e,r){for(const a in s)e.call(r,s[a],a,s)}function xn(s){const e={};for(const r in s)e[r]=s[r];return e}var xr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vr(s,e){let r,a;for(let h=1;h<arguments.length;h++){for(r in a=arguments[h],a)s[r]=a[r];for(let _=0;_<xr.length;_++)r=xr[_],Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}}function br(s){return br[" "](s),s}br[" "]=Mt;var Dt,s,Is=Mn(un,"Opera"),Yn=Mn(un,"Trident")||Mn(un,"MSIE"),Pt=Mn(un,"Edge"),rn=Pt||Yn,xi=Mn(un,"Gecko")&&!(Mn(un.toLowerCase(),"webkit")&&!Mn(un,"Edge"))&&!(Mn(un,"Trident")||Mn(un,"MSIE"))&&!Mn(un,"Edge"),Ds=Mn(un.toLowerCase(),"webkit")&&!Mn(un,"Edge");function fi(){var s=ot.document;return s?s.documentMode:void 0}e:{var zn="",qr=(s=un,xi?/rv:([^\);]+)(\)|;)/.exec(s):Pt?/Edge\/([\d\.]+)/.exec(s):Yn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Ds?/WebKit\/(\S+)/.exec(s):Is?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(qr&&(zn=qr?qr[1]:""),Yn){var Dn=fi();if(null!=Dn&&Dn>parseFloat(zn)){Dt=String(Dn);break e}}Dt=zn}var Tn={};function ye(){return e=Tn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=ri(String(Dt)).split("."),r=ri("9").split("."),a=Math.max(e.length,r.length);for(let C=0;0==s&&C<a;C++){var h=e[C]||"",_=r[C]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==h[0].length&&0==_[0].length)break;s=et(0==h[1].length?0:parseInt(h[1],10),0==_[1].length?0:parseInt(_[1],10))||et(0==h[2].length,0==_[2].length)||et(h[2],_[2]),h=h[3],_=_[3]}while(0==s)}return 0<=s}();var e}var ve=ot.document&&Yn&&(fi()||parseInt(Dt,10))||void 0,De=function(){if(!ot.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{ot.addEventListener("test",Mt,e),ot.removeEventListener("test",Mt,e)}catch(r){}return s}();function rt(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}function Tt(s,e){if(rt.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(xi){e:{try{br(e.nodeName);var h=!0;break e}catch(_){}h=!1}h||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:on[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Tt.Z.h.call(this)}}rt.prototype.h=function(){this.defaultPrevented=!0},cn(Tt,rt);var on={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Un=0;function Ri(s,e,r,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!a,this.ia=h,this.key=++Un,this.ca=this.fa=!1}function Cn(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function ii(s){this.src=s,this.g={},this.h=0}function Ni(s,e){var r=e.type;if(r in s.g){var _,a=s.g[r],h=an(a,e);(_=0<=h)&&Array.prototype.splice.call(a,h,1),_&&(Cn(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function ks(s,e,r,a){for(var h=0;h<s.length;++h){var _=s[h];if(!_.ca&&_.listener==e&&_.capture==!!r&&_.ia==a)return h}return-1}ii.prototype.add=function(s,e,r,a,h){var _=s.toString();(s=this.g[_])||(s=this.g[_]=[],this.h++);var C=ks(s,e,a,h);return-1<C?(e=s[C],r||(e.fa=!1)):((e=new Ri(e,this.src,_,!!a,h)).fa=r,s.push(e)),e};var is="closure_lm_"+(1e6*Math.random()|0),ps={};function Ko(s,e,r,a,h){if(a&&a.once)return Ir(s,e,r,a,h);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Ko(s,e[_],r,a,h);return null}return r=Hr(r),s&&s[tn]?s.N(e,r,It(a)?!!a.capture:!!a,h):Qn(s,e,r,!1,a,h)}function Qn(s,e,r,a,h,_){if(!e)throw Error("Invalid event type");var C=It(h)?!!h.capture:!!h,x=vn(s);if(x||(s[is]=x=new ii(s)),(r=x.add(e,r,a,C,_)).proxy)return r;if(a=function(){var e=At;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=a,a.src=s,a.listener=r,s.addEventListener)De||(h=C),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(Rr(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return r}function Ir(s,e,r,a,h){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Ir(s,e[_],r,a,h);return null}return r=Hr(r),s&&s[tn]?s.O(e,r,It(a)?!!a.capture:!!a,h):Qn(s,e,r,!0,a,h)}function sn(s,e,r,a,h){if(Array.isArray(e))for(var _=0;_<e.length;_++)sn(s,e[_],r,a,h);else a=It(a)?!!a.capture:!!a,r=Hr(r),s&&s[tn]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=ks(_=s.g[e],r,a,h))&&(Cn(_[r]),Array.prototype.splice.call(_,r,1),0==_.length&&(delete s.g[e],s.h--))):s&&(s=vn(s))&&(e=s.g[e.toString()],s=-1,e&&(s=ks(e,r,a,h)),(r=-1<s?e[s]:null)&&pi(r))}function pi(s){if("number"!=typeof s&&s&&!s.ca){var e=s.src;if(e&&e[tn])Ni(e.i,s);else{var r=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(r,a,s.capture):e.detachEvent?e.detachEvent(Rr(r),a):e.addListener&&e.removeListener&&e.removeListener(a),(r=vn(e))?(Ni(r,s),0==r.h&&(r.src=null,e[is]=null)):Cn(s)}}}function Rr(s){return s in ps?ps[s]:ps[s]="on"+s}function At(s,e){if(s.ca)s=!0;else{e=new Tt(e,this);var r=s.listener,a=s.ia||s.src;s.fa&&pi(s),s=r.call(a,e)}return s}function vn(s){return(s=s[is])instanceof ii?s:null}var Bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(s){return"function"==typeof s?s:(s[Bn]||(s[Bn]=function(e){return s.handleEvent(e)}),s[Bn])}function mr(){Zt.call(this),this.i=new ii(this),this.P=this,this.I=null}function En(s,e){var r,a=s.I;if(a)for(r=[];a;a=a.I)r.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new rt(e,s);else if(e instanceof rt)e.target=e.target||s;else{var h=e;vr(e=new rt(a,s),h)}if(h=!0,r)for(var _=r.length-1;0<=_;_--){var C=e.g=r[_];h=Nr(C,a,!0,e)&&h}if(h=Nr(C=e.g=s,a,!0,e)&&h,h=Nr(C,a,!1,e)&&h,r)for(_=0;_<r.length;_++)h=Nr(C=e.g=r[_],a,!1,e)&&h}function Nr(s,e,r,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,_=0;_<e.length;++_){var C=e[_];if(C&&!C.ca&&C.capture==r){var x=C.listener,H=C.ia||C.src;C.fa&&Ni(s.i,C),h=!1!==x.call(H,a)&&h}}return h&&!a.defaultPrevented}cn(mr,Zt),mr.prototype[tn]=!0,mr.prototype.removeEventListener=function(s,e,r,a){sn(this,s,e,r,a)},mr.prototype.M=function(){if(mr.Z.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],a=0;a<r.length;a++)Cn(r[a]);delete s.g[e],s.h--}}this.I=null},mr.prototype.N=function(s,e,r,a){return this.i.add(String(s),e,!1,r,a)},mr.prototype.O=function(s,e,r,a){return this.i.add(String(s),e,!0,r,a)};var Jn=ot.JSON.stringify;function si(){var s=Oi;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var gs,dn=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new Dr,s=>s.reset());class Dr{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Ei(s){ot.setTimeout(()=>{throw s},0)}function Or(s,e){gs||function(){var s=ot.Promise.resolve(void 0);gs=function(){s.then(ki)}}(),Ts||(gs(),Ts=!0),Oi.add(s,e)}var Ts=!1,Oi=new class{constructor(){this.h=this.g=null}add(e,r){const a=dn.get();a.set(e,r),this.h?this.h.next=a:this.g=a,this.h=a}};function ki(){for(var s;s=si();){try{s.h.call(s.g)}catch(r){Ei(r)}var e=dn;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}Ts=!1}function Sn(s,e){mr.call(this),this.h=s||1,this.g=e||ot,this.j=gt(this.kb,this),this.l=Date.now()}function Do(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function To(s,e,r){if("function"==typeof s)r&&(s=gt(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=gt(s.handleEvent,s)}return 2147483647<Number(e)?-1:ot.setTimeout(s,e||0)}function wi(s){s.g=To(()=>{s.g=null,s.i&&(s.i=!1,wi(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}cn(Sn,mr),(Fe=Sn.prototype).da=!1,Fe.S=null,Fe.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),En(this,"tick"),this.da&&(Do(this),this.start()))}},Fe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fe.M=function(){Sn.Z.M.call(this),Do(this),delete this.g};class ao extends Zt{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wi(this)}M(){super.M(),this.g&&(ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(s){Zt.call(this),this.h=s,this.g={}}cn(ss,Zt);var gi=[];function oi(s,e,r,a){Array.isArray(r)||(r&&(gi[0]=r.toString()),r=gi);for(var h=0;h<r.length;h++){var _=Ko(e,r[h],a||s.handleEvent,!1,s.h||s);if(!_)break;s.g[_.key]=_}}function lr(s){or(s.g,function(e,r){this.g.hasOwnProperty(r)&&pi(e)},s),s.g={}}function Ys(){this.g=!0}function Xn(s,e,r,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var a=r[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var _=h[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var C=1;C<h.length;C++)h[C]=""}}}return Jn(r)}catch(x){return e}}(s,r)+(a?" "+a:"")})}ss.prototype.M=function(){ss.Z.M.call(this),lr(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ys.prototype.Aa=function(){this.g=!1},Ys.prototype.info=function(){};var Gr={},Fi=null;function Ao(){return Fi=Fi||new mr}function xe(s){rt.call(this,Gr.Ma,s)}function Te(s){const e=Ao();En(e,new xe(e,s))}function Ve(s,e){rt.call(this,Gr.STAT_EVENT,s),this.stat=e}function tt(s){const e=Ao();En(e,new Ve(e,s))}function Et(s,e){rt.call(this,Gr.Na,s),this.size=e}function kt(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return ot.setTimeout(function(){s()},e)}Gr.Ma="serverreachability",cn(xe,rt),Gr.STAT_EVENT="statevent",cn(Ve,rt),Gr.Na="timingevent",cn(Et,rt);var re={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Er={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zn(){}function os(){}Zn.prototype.h=null;var xo,_s={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _r(){rt.call(this,"d")}function as(){rt.call(this,"c")}function uo(){}function Ro(s,e,r,a){this.l=s,this.j=e,this.m=r,this.X=a||1,this.V=new ss(this),this.P=hl,this.W=new Sn(s=rn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new lo}function lo(){this.i=null,this.g="",this.h=!1}cn(_r,rt),cn(as,rt),cn(uo,Zn),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},xo=new uo;var hl=45e3,Js={},Xs={};function us(s,e,r){s.K=1,s.v=F(Q(e)),s.s=r,s.U=!0,ua(s,null)}function ua(s,e){s.F=Date.now(),ys(s),s.A=Q(s.v);var r=s.A,a=s.X;Array.isArray(a)||(a=[String(a)]),Ia(r.h,"t",a),s.C=0,r=s.l.H,s.h=new lo,s.g=Oo(s.l,r?e:null,!s.s),0<s.O&&(s.L=new ao(gt(s.Ia,s,s.g),s.O)),oi(s.V,s.g,"readystatechange",s.gb),e=s.H?xn(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,e)):(s.u="GET",s.g.ea(s.A,s.u,null,e)),Te(1),function(s,e,r,a,h,_){s.info(function(){if(s.g)if(_)for(var C="",x=_.split("&"),H=0;H<x.length;H++){var q=x[H].split("=");if(1<q.length){var oe=q[0];q=q[1];var be=oe.split("_");C=2<=be.length&&"type"==be[1]?C+(oe+"=")+q+"&":C+(oe+"=redacted&")}}else C=null;else C=_;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+r+"\n"+C})}(s.j,s.u,s.A,s.m,s.X,s.s)}function Zo(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function Fs(s,e,r){let h,a=!0;for(;!s.I&&s.C<r.length;){if(h=Ls(s,r),h==Xs){4==e&&(s.o=4,tt(14),a=!1),Xn(s.j,s.m,null,"[Incomplete Response]");break}if(h==Js){s.o=4,tt(15),Xn(s.j,s.m,r,"[Invalid Chunk]"),a=!1;break}Xn(s.j,s.m,h,null),Ki(s,h)}Zo(s)&&h!=Xs&&h!=Js&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,tt(16),a=!1),s.i=s.i&&a,a?0<r.length&&!s.aa&&(s.aa=!0,(e=s.l).g==s&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),go(e),e.L=!0,tt(11))):(Xn(s.j,s.m,r,"[Invalid Chunked Response]"),qi(s),co(s))}function Ls(s,e){var r=s.C,a=e.indexOf("\n",r);return-1==a?Xs:(r=Number(e.substring(r,a)),isNaN(r)?Js:(a+=1)+r>e.length?Xs:(e=e.substr(a,r),s.C=a+r,e))}function ys(s){s.Y=Date.now()+s.P,zi(s,s.P)}function zi(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=kt(gt(s.eb,s),e)}function Zr(s){s.B&&(ot.clearTimeout(s.B),s.B=null)}function co(s){0==s.l.G||s.I||Gu(s.l,s)}function qi(s){Zr(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Do(s.W),lr(s.V),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function Ki(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||wr(r.i,s)))if(r.I=s.N,!s.J&&wr(r.i,s)&&3==r.G){try{var a=r.Ca.g.parse(e)}catch(q){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(r.u)r.ta=h[1],0<r.ta-r.U&&37500>h[2]&&r.N&&0==r.A&&!r.v&&(r.v=kt(gt(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;fu(r),to(r)}Aa(r),tt(18)}if(1>=vs(r.i)&&r.ka){try{r.ka()}catch(q){}r.ka=void 0}}else Po(r,11)}else if((s.J||r.g==s)&&fu(r),!ir(e))for(h=r.Ca.g.parse(e),e=0;e<h.length;e++){let q=h[e];if(r.U=q[0],q=q[1],2==r.G)if("c"==q[0]){r.J=q[1],r.la=q[2];const oe=q[3];null!=oe&&(r.ma=oe,r.h.info("VER="+r.ma));const be=q[4];null!=be&&(r.za=be,r.h.info("SVER="+r.za));const Ke=q[5];null!=Ke&&"number"==typeof Ke&&0<Ke&&(r.K=a=1.5*Ke,r.h.info("backChannelRequestTimeoutMs_="+a)),a=r;const at=s.g;if(at){const mt=at.g?at.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mt){var _=a.i;!_.g&&(Mn(mt,"spdy")||Mn(mt,"quic")||Mn(mt,"h2"))&&(_.j=_.l,_.g=new Set,_.h&&(Vu(_,_.h),_.h=null))}if(a.D){const qt=at.g?at.g.getResponseHeader("X-HTTP-Session-Id"):null;qt&&(a.sa=qt,Je(a.F,a.D,qt))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-s.F,r.h.info("Handshake RTT: "+r.O+"ms"));var C=s;if((a=r).oa=_l(a,a.H?a.la:null,a.W),C.J){la(a.i,C);var x=C,H=a.K;H&&x.setTimeout(H),x.B&&(Zr(x),ys(x)),a.g=C}else po(a);0<r.l.length&&Hu(r)}else"stop"!=q[0]&&"close"!=q[0]||Po(r,7);else 3==r.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?Po(r,7):Yi(r):"noop"!=q[0]&&r.j&&r.j.wa(q),r.A=0)}Te(4)}catch(q){}}function yr(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Jt(s)||"string"==typeof s)Fn(s,e,void 0);else{if(s.T&&"function"==typeof s.T)var r=s.T();else if(s.R&&"function"==typeof s.R)r=void 0;else if(Jt(s)||"string"==typeof s){r=[];for(var a=s.length,h=0;h<a;h++)r.push(h)}else for(h in r=[],a=0,s)r[a++]=h;a=function(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(Jt(s)){for(var e=[],r=s.length,a=0;a<r;a++)e.push(s[a]);return e}for(a in e=[],r=0,s)e[r++]=s[a];return e}(s),h=a.length;for(var _=0;_<h;_++)e.call(void 0,a[_],r&&r[_],s)}}function Vs(s,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var a=0;a<r;a+=2)this.set(arguments[a],arguments[a+1])}else if(s)if(s instanceof Vs)for(r=s.T(),a=0;a<r.length;a++)this.set(r[a],s.get(r[a]));else for(a in s)this.set(a,s[a])}function Yo(s){if(s.i!=s.g.length){for(var e=0,r=0;e<s.g.length;){var a=s.g[e];ho(s.h,a)&&(s.g[r++]=a),e++}s.g.length=r}if(s.i!=s.g.length){var h={};for(r=e=0;e<s.g.length;)ho(h,a=s.g[e])||(s.g[r++]=a,h[a]=1),e++;s.g.length=r}}function ho(s,e){return Object.prototype.hasOwnProperty.call(s,e)}(Fe=Ro.prototype).setTimeout=function(s){this.P=s},Fe.gb=function(s){s=s.target;const e=this.L;e&&3==$s(s)?e.l():this.Ia(s)},Fe.Ia=function(s){try{if(s==this.g)e:{const oe=$s(this.g);var e=this.g.Da();const be=this.g.ba();if(!(3>oe)&&(3!=oe||rn||this.g&&(this.h.h||this.g.ga()||ml(this.g)))){this.I||4!=oe||7==e||Te(8==e||0>=be?3:2),Zr(this);var r=this.g.ba();this.N=r;t:if(Zo(this)){var a=ml(this.g);s="";var h=a.length,_=4==$s(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qi(this),co(this);var C="";break t}this.h.i=new ot.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:_&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==r,function(s,e,r,a,h,_,C){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+r+"\n"+_+" "+C})}(this.j,this.u,this.A,this.m,this.X,oe,r),this.i){if(this.$&&!this.J){t:{if(this.g){var x,H=this.g;if((x=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ir(x)){var q=x;break t}}q=null}if(!(r=q)){this.i=!1,this.o=3,tt(12),qi(this),co(this);break e}Xn(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ki(this,r)}this.U?(Fs(this,oe,C),rn&&this.i&&3==oe&&(oi(this.V,this.W,"tick",this.fb),this.W.start())):(Xn(this.j,this.m,C,null),Ki(this,C)),4==oe&&qi(this),this.i&&!this.I&&(4==oe?Gu(this.l,this):(this.i=!1,ys(this)))}else 400==r&&0<C.indexOf("Unknown SID")?(this.o=3,tt(12)):(this.o=0,tt(13)),qi(this),co(this)}}}catch(oe){}},Fe.fb=function(){if(this.g){var s=$s(this.g),e=this.g.ga();this.C<e.length&&(Zr(this),Fs(this,s,e),this.i&&4!=s&&ys(this))}},Fe.cancel=function(){this.I=!0,qi(this)},Fe.eb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Te(3),tt(17)),qi(this),this.o=2,co(this)):zi(this,this.Y-s)},(Fe=Vs.prototype).R=function(){Yo(this);for(var s=[],e=0;e<this.g.length;e++)s.push(this.h[this.g[e]]);return s},Fe.T=function(){return Yo(this),this.g.concat()},Fe.get=function(s,e){return ho(this.h,s)?this.h[s]:e},Fe.set=function(s,e){ho(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=e},Fe.forEach=function(s,e){for(var r=this.T(),a=0;a<r.length;a++){var h=r[a],_=this.get(h);s.call(e,_,h,this)}};var Us=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function V(s,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof V){this.g=void 0!==e?e:s.g,B(this,s.j),this.s=s.s,te(this,s.i),me(this,s.m),this.l=s.l,e=s.h;var r=new cr;r.i=e.i,e.g&&(r.g=new Vs(e.g),r.h=e.h),qe(this,r),this.o=s.o}else s&&(r=String(s).match(Us))?(this.g=!!e,B(this,r[1]||"",!0),this.s=Y(r[2]||""),te(this,r[3]||"",!0),me(this,r[4]),this.l=Y(r[5]||"",!0),qe(this,r[6]||"",!0),this.o=Y(r[7]||"")):(this.g=!!e,this.h=new cr(null,this.g))}function Q(s){return new V(s)}function B(s,e,r){s.j=r?Y(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function te(s,e,r){s.i=r?Y(e,!0):e}function me(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function qe(s,e,r){e instanceof cr?(s.h=e,function(s,e){e&&!s.j&&(Ht(s),s.i=null,s.g.forEach(function(r,a){var h=a.toLowerCase();a!=h&&(Qo(this,a),Ia(this,h,r))},s)),s.j=e}(s.h,s.g)):(r||(e=ke(e,Yr)),s.h=new cr(e,s.g))}function Je(s,e,r){s.h.set(e,r)}function F(s){return Je(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Y(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function ke(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,yt),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function yt(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}V.prototype.toString=function(){var s=[],e=this.j;e&&s.push(ke(e,ln,!0),":");var r=this.i;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(ke(e,ln,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&s.push("/"),s.push(ke(r,"/"==r.charAt(0)?Li:er,!0))),(r=this.h.toString())&&s.push("?",r),(r=this.o)&&s.push("#",ke(r,Vi)),s.join("")};var ln=/[#\/\?@]/g,er=/[#\?:]/g,Li=/[#\?]/g,Yr=/[#\?@]/g,Vi=/#/g;function cr(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Ht(s){s.g||(s.g=new Vs,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var a=s[r].indexOf("="),h=null;if(0<=a){var _=s[r].substring(0,a);h=s[r].substring(a+1)}else _=s[r];e(_,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Qo(s,e){Ht(s),e=Da(s,e),ho(s.g.h,e)&&(s.i=null,s.h-=s.g.get(e).length,ho((s=s.g).h,e)&&(delete s.h[e],s.i--,s.g.length>2*s.i&&Yo(s)))}function Jo(s,e){return Ht(s),e=Da(s,e),ho(s.g.h,e)}function Ia(s,e,r){Qo(s,e),0<r.length&&(s.i=null,s.g.set(Da(s,e),Nn(r)),s.h+=r.length)}function Da(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function lu(s){this.l=s||dt,s=ot.PerformanceNavigationTiming?0<(s=ot.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(ot.g&&ot.g.Ea&&ot.g.Ea()&&ot.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Fe=cr.prototype).add=function(s,e){Ht(this),this.i=null,s=Da(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},Fe.forEach=function(s,e){Ht(this),this.g.forEach(function(r,a){Fn(r,function(h){s.call(e,h,a,this)},this)},this)},Fe.T=function(){Ht(this);for(var s=this.g.R(),e=this.g.T(),r=[],a=0;a<e.length;a++)for(var h=s[a],_=0;_<h.length;_++)r.push(e[a]);return r},Fe.R=function(s){Ht(this);var e=[];if("string"==typeof s)Jo(this,s)&&(e=_n(e,this.g.get(Da(this,s))));else{s=this.g.R();for(var r=0;r<s.length;r++)e=_n(e,s[r])}return e},Fe.set=function(s,e){return Ht(this),this.i=null,Jo(this,s=Da(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},Fe.get=function(s,e){return s&&0<(s=this.R(s)).length?String(s[0]):e},Fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],e=this.g.T(),r=0;r<e.length;r++){var a=e[r],h=encodeURIComponent(String(a));a=this.R(a);for(var _=0;_<a.length;_++){var C=h;""!==a[_]&&(C+="="+encodeURIComponent(String(a[_]))),s.push(C)}}return this.i=s.join("&")};var dt=10;function $n(s){return!!s.h||!!s.g&&s.g.size>=s.j}function vs(s){return s.h?1:s.g?s.g.size:0}function wr(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function Vu(s,e){s.g?s.g.add(e):s.h=e}function la(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Es(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return Nn(s.i)}function Ga(){}function Qr(){this.g=new Ga}function Uu(s,e,r){const a=r||"";try{yr(s,function(h,_){let C=h;It(h)&&(C=Jn(h)),e.push(a+_+"="+encodeURIComponent(C))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function ls(s,e,r,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(_){}}function No(s){this.l=s.$b||null,this.j=s.ib||!1}function Ci(s,e){mr.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=Bs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lu.prototype.cancel=function(){if(this.i=Es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},Ga.prototype.stringify=function(s){return ot.JSON.stringify(s,void 0)},Ga.prototype.parse=function(s){return ot.JSON.parse(s,void 0)},cn(No,Zn),No.prototype.g=function(){return new Ci(this.l,this.j)},No.prototype.i=function(s){return function(){return s}}({}),cn(Ci,mr);var Bs=0;function Wa(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function fo(s){s.readyState=4,s.l=null,s.j=null,s.A=null,Zi(s)}function Zi(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(Fe=Ci.prototype).open=function(s,e){if(this.readyState!=Bs)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,Zi(this)},Fe.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fo(this)),this.readyState=Bs},Fe.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ot.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wa(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},Fe.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?fo(this):Zi(this),3==this.readyState&&Wa(this)}},Fe.Ua=function(s){this.g&&(this.response=this.responseText=s,fo(this))},Fe.Ta=function(s){this.g&&(this.response=s,fo(this))},Fe.ha=function(){this.g&&fo(this)},Fe.setRequestHeader=function(s,e){this.v.append(s,e)},Fe.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},Fe.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var Bu=ot.JSON.parse;function Wr(s){mr.call(this),this.headers=new Vs,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cu,this.K=this.L=!1}cn(Wr,mr);var cu="",eo=/^https?$/i,js=["POST","PUT"];function fl(s){return"content-type"==s.toLowerCase()}function pl(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Mo(s),ea(s)}function Mo(s){s.D||(s.D=!0,En(s,"complete"),En(s,"error"))}function Xo(s){if(s.h&&void 0!==bt&&(!s.C[1]||4!=$s(s)||2!=s.ba()))if(s.v&&4==$s(s))To(s.Fa,0,s);else if(En(s,"readystatechange"),4==$s(s)){s.h=!1;try{const x=s.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var a;if(a=0===x){var h=String(s.H).match(Us)[1]||null;if(!h&&ot.self&&ot.self.location){var _=ot.self.location.protocol;h=_.substr(0,_.length-1)}a=!eo.test(h?h.toLowerCase():"")}r=a}if(r)En(s,"complete"),En(s,"success");else{s.m=6;try{var C=2<$s(s)?s.g.statusText:""}catch(H){C=""}s.j=C+" ["+s.ba()+"]",Mo(s)}}finally{ea(s)}}}function ea(s,e){if(s.g){gl(s);const r=s.g,a=s.C[0]?Mt:null;s.g=null,s.C=null,e||En(s,"ready");try{r.onreadystatechange=a}catch(h){}}}function gl(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(ot.clearTimeout(s.A),s.A=null)}function $s(s){return s.g?s.g.readyState:0}function ml(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case cu:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Sa(s,e,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=function(s){let e="";return or(s,function(r,a){e+=a,e+=":",e+=r,e+="\r\n"}),e}(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):Je(s,e,r))}function ju(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function za(s){this.za=0,this.l=[],this.h=new Ys,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ju("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ju("baseRetryDelayMs",5e3,s),this.$a=ju("retryDelaySeedMs",1e4,s),this.Ya=ju("forwardChannelMaxRetries",2,s),this.ra=ju("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new lu(s&&s.concurrentRequestLimit),this.Ca=new Qr,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function Yi(s){if(Mr(s),3==s.G){var e=s.V++,r=Q(s.F);Je(r,"SID",s.J),Je(r,"RID",e),Je(r,"TYPE","terminate"),hu(s,r),(e=new Ro(s,s.h,e,void 0)).K=2,e.v=F(Q(r)),r=!1,ot.navigator&&ot.navigator.sendBeacon&&(r=ot.navigator.sendBeacon(e.v.toString(),"")),!r&&ot.Image&&((new Image).src=e.v,r=!0),r||(e.g=Oo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ys(e)}Ji(s)}function to(s){s.g&&(go(s),s.g.cancel(),s.g=null)}function Mr(s){to(s),s.u&&(ot.clearTimeout(s.u),s.u=null),fu(s),s.i.cancel(),s.m&&("number"==typeof s.m&&ot.clearTimeout(s.m),s.m=null)}function $u(s,e){s.l.push(new class{constructor(s,e){this.h=s,this.g=e}}(s.Za++,e)),3==s.G&&Hu(s)}function Hu(s){$n(s.i)||s.m||(s.m=!0,Or(s.Ha,s),s.C=0)}function ca(s,e){var r;r=e?e.m:s.V++;const a=Q(s.F);Je(a,"SID",s.J),Je(a,"RID",r),Je(a,"AID",s.U),hu(s,a),s.o&&s.s&&Sa(a,s.o,s.s),r=new Ro(s,s.h,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.l=e.D.concat(s.l)),e=Qi(s,r,1e3),r.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),Vu(s.i,r),us(r,a,e)}function hu(s,e){s.j&&yr({},function(r,a){Je(e,a,r)})}function Qi(s,e,r){r=Math.min(s.l.length,r);var a=s.j?gt(s.j.Oa,s.j,s):null;e:{var h=s.l;let _=-1;for(;;){const C=["count="+r];-1==_?0<r?(_=h[0].h,C.push("ofs="+_)):_=0:C.push("ofs="+_);let x=!0;for(let H=0;H<r;H++){let q=h[H].h;const oe=h[H].g;if(q-=_,0>q)_=Math.max(0,h[H].h-100),x=!1;else try{Uu(oe,C,"req"+q+"_")}catch(be){a&&a(oe)}}if(x){a=C.join("&");break e}}}return s=s.l.splice(0,r),e.D=s,a}function po(s){s.g||s.u||(s.Y=1,Or(s.Ga,s),s.A=0)}function Aa(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=kt(gt(s.Ga,s),Ui(s,s.A)),s.A++,0))}function go(s){null!=s.B&&(ot.clearTimeout(s.B),s.B=null)}function ui(s){s.g=new Ro(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var e=Q(s.oa);Je(e,"RID","rpc"),Je(e,"SID",s.J),Je(e,"CI",s.N?"0":"1"),Je(e,"AID",s.U),hu(s,e),Je(e,"TYPE","xmlhttp"),s.o&&s.s&&Sa(e,s.o,s.s),s.K&&s.g.setTimeout(s.K);var r=s.g;s=s.la,r.K=1,r.v=F(Q(e)),r.s=null,r.U=!0,ua(r,s)}function fu(s){null!=s.v&&(ot.clearTimeout(s.v),s.v=null)}function Gu(s,e){var r=null;if(s.g==e){fu(s),go(s),s.g=null;var a=2}else{if(!wr(s.i,e))return;r=e.D,la(s.i,e),a=1}if(s.I=e.N,0!=s.G)if(e.i)if(1==a){r=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;En(a=Ao(),new Et(a,r,e,h)),Hu(s)}else po(s);else if(3==(h=e.o)||0==h&&0<s.I||!(1==a&&function(s,e){return!(vs(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=e.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=kt(gt(s.Ha,s,e),Ui(s,s.C)),s.C++,0)))}(s,e)||2==a&&Aa(s)))switch(r&&0<r.length&&(e=s.i,e.i=e.i.concat(r)),h){case 1:Po(s,5);break;case 4:Po(s,10);break;case 3:Po(s,6);break;default:Po(s,2)}}function Ui(s,e){let r=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(r*=2),r*e}function Po(s,e){if(s.h.info("Error code "+e),2==e){var r=null;s.j&&(r=null);var a=gt(s.jb,s);r||(r=new V("//www.google.com/images/cleardot.gif"),ot.location&&"http"==ot.location.protocol||B(r,"https"),F(r)),function(s,e){const r=new Ys;if(ot.Image){const a=new Image;a.onload=mn(ls,r,a,"TestLoadImage: loaded",!0,e),a.onerror=mn(ls,r,a,"TestLoadImage: error",!1,e),a.onabort=mn(ls,r,a,"TestLoadImage: abort",!1,e),a.ontimeout=mn(ls,r,a,"TestLoadImage: timeout",!1,e),ot.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(r.toString(),a)}else tt(2);s.G=0,s.j&&s.j.va(e),Ji(s),Mr(s)}function Ji(s){s.G=0,s.I=-1,s.j&&((0!=Es(s.i).length||0!=s.l.length)&&(s.i.i.length=0,Nn(s.l),s.l.length=0),s.j.ua())}function _l(s,e,r){let a=function(s){return s instanceof V?Q(s):new V(s,void 0)}(r);if(""!=a.i)e&&te(a,e+"."+a.i),me(a,a.m);else{const h=ot.location;a=function(s,e,r,a){var h=new V(null,void 0);return s&&B(h,s),e&&te(h,e),r&&me(h,r),a&&(h.l=a),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,r)}return s.aa&&or(s.aa,function(h,_){Je(a,_,h)}),r=s.sa,(e=s.D)&&r&&Je(a,e,r),Je(a,"VER",s.ma),hu(s,a),a}function Oo(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wr(r&&s.Ba&&!s.qa?new No({ib:!0}):s.qa)).L=s.H,e}function mo(){}function Hs(){if(Yn&&!(10<=Number(ve)))throw Error("Environmental error: no available transport.")}function Xi(s,e){mr.call(this),this.g=new za(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.P=s,(s=e&&e.httpHeadersOverwriteParam)&&!ir(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ir(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new ko(this)}function Pc(s){_r.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function Gs(){as.call(this),this.status=1}function ko(s){this.g=s}(Fe=Wr.prototype).ea=function(s,e,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xo.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:xo),this.g.onreadystatechange=gt(this.Fa,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(_){return void pl(this,_)}s=r||"";const h=new Vs(this.headers);a&&yr(a,function(_,C){h.set(C,_)}),a=function(s){e:{var e=fl;const r=s.length,a="string"==typeof s?s.split(""):s;for(let h=0;h<r;h++)if(h in a&&e.call(void 0,a[h],h,s)){e=h;break e}e=-1}return 0>e?null:"string"==typeof s?s.charAt(e):s[e]}(h.T()),r=ot.FormData&&s instanceof ot.FormData,!(0<=an(js,e))||a||r||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(_,C){this.g.setRequestHeader(C,_)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gl(this),0<this.B&&((this.K=function(s){return Yn&&ye()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gt(this.pa,this)):this.A=To(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(_){pl(this,_)}},Fe.pa=function(){void 0!==bt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,En(this,"timeout"),this.abort(8))},Fe.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,En(this,"complete"),En(this,"abort"),ea(this))},Fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ea(this,!0)),Wr.Z.M.call(this)},Fe.Fa=function(){this.s||(this.F||this.v||this.l?Xo(this):this.cb())},Fe.cb=function(){Xo(this)},Fe.ba=function(){try{return 2<$s(this)?this.g.status:-1}catch(s){return-1}},Fe.ga=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},Fe.Qa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),Bu(e)}},Fe.Da=function(){return this.m},Fe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Fe=za.prototype).ma=8,Fe.G=1,Fe.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch(e){}},Fe.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;const h=new Ro(this,this.h,s,void 0);let _=this.s;if(this.P&&(_?(_=xn(_),vr(_,this.P)):_=this.P),null===this.o&&(h.H=_),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){var a=this.l[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=r;break e}if(4096===e||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Qi(this,h,e),Je(r=Q(this.F),"RID",s),Je(r,"CVER",22),this.D&&Je(r,"X-HTTP-Session-Id",this.D),hu(this,r),this.o&&_&&Sa(r,this.o,_),Vu(this.i,h),this.Ra&&Je(r,"TYPE","init"),this.ja?(Je(r,"$req",e),Je(r,"SID","null"),h.$=!0,us(h,r,null)):us(h,r,e),this.G=2}}else 3==this.G&&(s?ca(this,s):0==this.l.length||$n(this.i)||ca(this))},Fe.Ga=function(){if(this.u=null,ui(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=kt(gt(this.bb,this),s)}},Fe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,tt(10),to(this),ui(this))},Fe.ab=function(){null!=this.v&&(this.v=null,to(this),Aa(this),tt(19))},Fe.jb=function(s){s?(this.h.info("Successfully pinged google.com"),tt(2)):(this.h.info("Failed to ping google.com"),tt(1))},(Fe=mo.prototype).xa=function(){},Fe.wa=function(){},Fe.va=function(){},Fe.ua=function(){},Fe.Oa=function(){},Hs.prototype.g=function(s,e){return new Xi(s,e)},cn(Xi,mr),Xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),Or(gt(s.hb,s,e))),tt(0),s.W=e,s.aa=r||{},s.N=s.X,s.F=_l(s,null,s.W),Hu(s)},Xi.prototype.close=function(){Yi(this.g)},Xi.prototype.u=function(s){if("string"==typeof s){var e={};e.__data__=s,$u(this.g,e)}else this.v?((e={}).__data__=Jn(s),$u(this.g,e)):$u(this.g,s)},Xi.prototype.M=function(){this.g.j=null,delete this.j,Yi(this.g),delete this.g,Xi.Z.M.call(this)},cn(Pc,_r),cn(Gs,as),cn(ko,mo),ko.prototype.xa=function(){En(this.g,"a")},ko.prototype.wa=function(s){En(this.g,new Pc(s))},ko.prototype.va=function(s){En(this.g,new Gs(s))},ko.prototype.ua=function(){En(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,Xi.prototype.send=Xi.prototype.u,Xi.prototype.open=Xi.prototype.m,Xi.prototype.close=Xi.prototype.close,re.NO_ERROR=0,re.TIMEOUT=8,re.HTTP_ERROR=6,Er.COMPLETE="complete",os.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",mr.prototype.listen=mr.prototype.N,Wr.prototype.listenOnce=Wr.prototype.O,Wr.prototype.getLastError=Wr.prototype.La,Wr.prototype.getLastErrorCode=Wr.prototype.Da,Wr.prototype.getStatus=Wr.prototype.ba,Wr.prototype.getResponseJson=Wr.prototype.Qa,Wr.prototype.getResponseText=Wr.prototype.ga,Wr.prototype.send=Wr.prototype.ea;var Oc=ct.createWebChannelTransport=function(){return new Hs},Zl=ct.getStatEventTarget=function(){return Ao()},qa=ct.ErrorCode=re,yl=ct.EventType=Er,Yl=ct.Event=Gr,ta=ct.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},tf=ct.FetchXmlHttpFactory=No,ws=ct.WebChannel=os,vl=ct.XhrIo=Wr;const na="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let da="9.9.1";const ra=new nn.Yd("@firebase/firestore");function Wu(){return ra.logLevel}function pt(s,...e){if(ra.logLevel<=nn.in.DEBUG){const r=e.map(Ka);ra.debug(`Firestore (${da}): ${s}`,...r)}}function kr(s,...e){if(ra.logLevel<=nn.in.ERROR){const r=e.map(Ka);ra.error(`Firestore (${da}): ${s}`,...r)}}function _o(s,...e){if(ra.logLevel<=nn.in.WARN){const r=e.map(Ka);ra.warn(`Firestore (${da}): ${s}`,...r)}}function Ka(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function jt(s="Unexpected state"){const e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+s;throw kr(e),new Error(e)}function yn(s,e){s||jt()}function Vt(s,e){return s}const Qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends St.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class N{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(li.UNAUTHENTICATED))}shutdown(){}}class I{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class L{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var a=this;let h=this.i;const _=q=>this.i!==h?(h=this.i,r(q)):Promise.resolve();let C=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new mi,e.enqueueRetryable(()=>_(this.currentUser))};const x=()=>{const q=C;e.enqueueRetryable((0,Ce.Z)(function*(){yield q.promise,yield _(a.currentUser)}))},H=q=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(q=>H(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?H(q):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new mi)}},0),x()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(yn("string"==typeof a.accessToken),new N(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yn(null===e||"string"==typeof e),new li(e)}}class G{constructor(e,r,a){this.type="FirstParty",this.user=li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),a&&this.headers.set("X-Goog-Iam-Authorization-Token",a)}}class ee{constructor(e,r,a){this.h=e,this.l=r,this.m=a}getToken(){return Promise.resolve(new G(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class le{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Se{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,r){const a=_=>{null!=_.error&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const C=_.token!==this.p;return this.p=_.token,pt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?r(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>a(_))};const h=_=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.g.onInit(_=>h(_)),setTimeout(()=>{if(!this.appCheck){const _=this.g.getImmediate({optional:!0});_?h(_):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(yn("string"==typeof r.token),this.p=r.token,new le(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gt(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}class Pn{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=Gt(40);for(let _=0;_<h.length;++_)a.length<20&&h[_]<r&&(a+=e.charAt(h[_]%e.length))}return a}}function vt(s,e){return s<e?-1:s>e?1:0}function bn(s,e,r){return s.length===e.length&&s.every((a,h)=>r(a,e[h]))}function Rn(s){return s+"\0"}class dr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ht(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ht(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ht(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ht(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*r));return new dr(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new dr(0,0))}static max(){return new $t(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class As{constructor(e,r,a){void 0===r?r=0:r>e.length&&jt(),void 0===a?a=e.length-r:a>e.length-r&&jt(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return 0===As.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let h=0;h<a;h++){const _=e.get(h),C=r.get(h);if(_<C)return-1;if(_>C)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Ln extends As{construct(e,r,a){return new Ln(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new ht(Qe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(h=>h.length>0))}return new Ln(r)}static emptyPath(){return new Ln([])}}const Fo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends As{construct(e,r,a){return new Fr(e,r,a)}static isValidIdentifier(e){return Fo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const r=[];let a="",h=0;const _=()=>{if(0===a.length)throw new ht(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let C=!1;for(;h<e.length;){const x=e[h];if("\\"===x){if(h+1===e.length)throw new ht(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[h+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new ht(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=H,h+=2}else"`"===x?(C=!C,h++):"."!==x||C?(a+=x,h++):(_(),h++)}if(_(),C)throw new ht(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(r)}static emptyPath(){return new Fr([])}}class Nt{constructor(e){this.path=e}static fromPath(e){return new Nt(Ln.fromString(e))}static fromName(e){return new Nt(Ln.fromString(e).popFirst(5))}static empty(){return new Nt(Ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Ln.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nt(new Ln(e.slice()))}}class ci{constructor(e,r,a,h){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=h}}function Fc(s){return s.fields.find(e=>2===e.kind)}function pu(s){return s.fields.filter(e=>2!==e.kind)}ci.UNKNOWN_ID=-1;class Jl{constructor(e,r){this.fieldPath=e,this.kind=r}}class Lc{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Lc(0,ia.min())}}function uh(s,e){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=$t.fromTimestamp(1e9===a?new dr(r+1,0):new dr(r,a));return new ia(h,Nt.empty(),e)}function yd(s){return new ia(s.readTime,s.key,-1)}class ia{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new ia($t.min(),Nt.empty(),-1)}static max(){return new ia($t.max(),Nt.empty(),-1)}}function gu(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=Nt.comparator(s.documentKey,e.documentKey),0!==r?r:vt(s.largestBatchId,e.largestBatchId))}const nf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zu(s){return mu.apply(this,arguments)}function mu(){return mu=(0,Ce.Z)(function*(s){if(s.code!==Qe.FAILED_PRECONDITION||s.message!==nf)throw s;pt("LocalStore","Unexpectedly lost primary lease")}),mu.apply(this,arguments)}class Ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ze((a,h)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(a,h)},this.catchCallback=_=>{this.wrapFailure(r,_).next(a,h)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ze?r:Ze.resolve(r)}catch(r){return Ze.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ze.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ze.reject(r)}static resolve(e){return new Ze((r,a)=>{r(e)})}static reject(e){return new Ze((r,a)=>{a(e)})}static waitFor(e){return new Ze((r,a)=>{let h=0,_=0,C=!1;e.forEach(x=>{++h,x.next(()=>{++_,C&&_===h&&r()},H=>a(H))}),C=!0,_===h&&r()})}static or(e){let r=Ze.resolve(!1);for(const a of e)r=r.next(h=>h?Ze.resolve(h):a());return r}static forEach(e,r){const a=[];return e.forEach((h,_)=>{a.push(r.call(this,h,_))}),this.waitFor(a)}static mapArray(e,r){return new Ze((a,h)=>{const _=e.length,C=new Array(_);let x=0;for(let H=0;H<_;H++){const q=H;r(e[q]).next(oe=>{C[q]=oe,++x,x===_&&a(C)},oe=>h(oe))}})}static doWhile(e,r){return new Ze((a,h)=>{const _=()=>{!0===e()?r().next(()=>{_()},h):a()};_()})}}class _i{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.T=new mi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{r.error?this.T.reject(new El(e,r.error)):this.T.resolve()},this.transaction.onerror=a=>{const h=Lo(a.target.error);this.T.reject(new El(e,h))}}static open(e,r,a,h){try{return new _i(r,e.transaction(h,a))}catch(_){throw new El(r,_)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new vo(r)}}class no{constructor(e,r,a){this.name=e,this.version=r,this.P=a,12.2===no.v((0,St.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pt("SimpleDb","Removing database:",e),Cs(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,St.hl)())return!1;if(no.S())return!0;const e=(0,St.z$)(),r=no.v(e),a=0<r&&r<10,h=no.D(e),_=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||_)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,r){return e.store(r)}static v(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static D(e){const r=e.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}k(e){var r=this;return(0,Ce.Z)(function*(){return r.db||(pt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,h)=>{const _=indexedDB.open(r.name,r.version);_.onsuccess=C=>{a(C.target.result)},_.onblocked=()=>{h(new El(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=C=>{const x=C.target.error;h("VersionError"===x.name?new ht(Qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new ht(Qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new El(e,x))},_.onupgradeneeded=C=>{pt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',C.oldVersion),r.P.O(C.target.result,_.transaction,C.oldVersion,r.version).next(()=>{pt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.M&&(r.db.onversionchange=a=>r.M(a)),r.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,a,h){var _=this;return(0,Ce.Z)(function*(){const C="readonly"===r;let x=0;for(;;){++x;try{_.db=yield _.k(e);const H=_i.open(_.db,e,C?"readonly":"readwrite",a),q=h(H).next(oe=>(H.R(),oe)).catch(oe=>(H.abort(oe),Ze.reject(oe))).toPromise();return q.catch(()=>{}),yield H.A,q}catch(H){const q=H,oe="FirebaseError"!==q.name&&x<3;if(pt("SimpleDb","Transaction failed with error:",q.message,"Retrying:",oe),_.close(),!oe)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qu{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Cs(this.$.delete())}}class El extends ht{constructor(e,r){super(Qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function yo(s){return"IndexedDbTransactionError"===s.name}class vo{constructor(e){this.store=e}put(e,r){let a;return void 0!==r?(pt("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),Cs(a)}add(e){return pt("SimpleDb","ADD",this.store.name,e,e),Cs(this.store.add(e))}get(e){return Cs(this.store.get(e)).next(r=>(void 0===r&&(r=null),pt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return pt("SimpleDb","DELETE",this.store.name,e),Cs(this.store.delete(e))}count(){return pt("SimpleDb","COUNT",this.store.name),Cs(this.store.count())}K(e,r){const a=this.options(e,r);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),_=[];return this.G(h,(C,x)=>{_.push(x)}).next(()=>_)}{const h=this.store.getAll(a.range);return new Ze((_,C)=>{h.onerror=x=>{C(x.target.error)},h.onsuccess=x=>{_(x.target.result)}})}}j(e,r){const a=this.store.getAll(e,null===r?void 0:r);return new Ze((h,_)=>{a.onerror=C=>{_(C.target.error)},a.onsuccess=C=>{h(C.target.result)}})}W(e,r){pt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,r);a.H=!1;const h=this.cursor(a);return this.G(h,(_,C,x)=>x.delete())}J(e,r){let a;r?a=e:(a={},r=e);const h=this.cursor(a);return this.G(h,r)}Y(e){const r=this.cursor({});return new Ze((a,h)=>{r.onerror=_=>{const C=Lo(_.target.error);h(C)},r.onsuccess=_=>{const C=_.target.result;C?e(C.primaryKey,C.value).next(x=>{x?C.continue():a()}):a()}})}G(e,r){const a=[];return new Ze((h,_)=>{e.onerror=C=>{_(C.target.error)},e.onsuccess=C=>{const x=C.target.result;if(!x)return void h();const H=new qu(x),q=r(x.primaryKey,x.value,H);if(q instanceof Ze){const oe=q.catch(be=>(H.done(),Ze.reject(be)));a.push(oe)}H.isDone?h():null===H.U?x.continue():x.continue(H.U)}}).next(()=>Ze.waitFor(a))}options(e,r){let a;return void 0!==e&&("string"==typeof e?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const a=this.store.index(e.index);return e.H?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Cs(s){return new Ze((e,r)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=Lo(a.target.error);r(h)}})}let Ku=!1;function Lo(s){const e=no.v((0,St.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const a=new ht("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ku||(Ku=!0,setTimeout(()=>{throw a},0)),a}}return s}class Zu{constructor(e,r){this.asyncQueue=e,this.X=r,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var r=this;pt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){r.task=null;try{pt("IndexBackiller",`Documents written: ${yield r.X.tt()}`)}catch(a){yo(a)?pt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield zu(a)}yield r.Z(1)}))}}class sf{constructor(e,r){this.localStore=e,this.persistence=r}tt(e=50){var r=this;return(0,Ce.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>r.et(a,e))})()}et(e,r){const a=new Set;let h=r,_=!0;return Ze.doWhile(()=>!0===_&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!a.has(C))return pt("IndexBackiller",`Processing collection: ${C}`),this.nt(e,C,h).next(x=>{h-=x,a.add(C)});_=!1})).next(()=>r-h)}nt(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(h=>this.localStore.localDocuments.getNextDocuments(e,r,h,a).next(_=>{const C=_.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.st(h,_)).next(x=>(pt("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,r,x))).next(()=>C.size)}))}st(e,r){let a=e;return r.changes.forEach((h,_)=>{const C=yd(_);gu(C,a)>0&&(a=C)}),new ia(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class Vo{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.it(a),this.rt=a=>r.writeSequenceNumber(a))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function lh(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function wl(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function Cl(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}Vo.ot=-1;class Jr{constructor(e,r){this.comparator=e,this.root=r||es.EMPTY}insert(e,r){return new Jr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new Jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return r+a.left.size;h<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xs(this.root,e,this.comparator,!0)}}class xs{constructor(e,r,a,h){this.isReverse=h,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=r?a(e.key,r):1,r&&h&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class es{constructor(e,r,a,h,_){this.key=e,this.value=r,this.color=null!=a?a:es.RED,this.left=null!=h?h:es.EMPTY,this.right=null!=_?_:es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,h,_){return new es(null!=e?e:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=_?_:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let h=this;const _=a(e,h.key);return h=_<0?h.copy(null,null,null,h.left.insert(e,r,a),null):0===_?h.copy(null,r,null,null,null):h.copy(null,null,null,null,h.right.insert(e,r,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,h=this;if(r(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===r(e,h.key)){if(h.right.isEmpty())return es.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();const e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1,es.EMPTY=new class{constructor(){this.size=0}get key(){throw jt()}get value(){throw jt()}get color(){throw jt()}get left(){throw jt()}get right(){throw jt()}copy(s,e,r,a,h){return this}insert(s,e,r){return new es(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new Jr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;r(h.key)}}forEachWhile(e,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ch(this.data.getIterator())}getIteratorFrom(e){return new ch(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const h=r.getNext().key,_=a.getNext().key;if(0!==this.comparator(h,_))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Vn(this.comparator);return r.data=e,r}}class ch{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ro(s){return s.hasNext()?s.getNext():void 0}class Uo{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new Uo([])}unionWith(e){let r=new Vn(Fr.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new Uo(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return bn(this.fields,e.fields,(r,a)=>r.isEqual(a))}}class Xr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Xr(r)}static fromUint8Array(e){const r=function(a){let h="";for(let _=0;_<a.length;++_)h+=String.fromCharCode(a[_]);return h}(e);return new Xr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xr.EMPTY_BYTE_STRING=new Xr("");const Xl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(s){if(yn(!!s),"string"==typeof s){let e=0;const r=Xl.exec(s);if(yn(!!r),r[1]){let h=r[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Br(s.seconds),nanos:Br(s.nanos)}}function Br(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function P(s){return"string"==typeof s?Xr.fromBase64String(s):Xr.fromUint8Array(s)}function $(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function J(s){const e=s.mapValue.fields.__previous_value__;return $(e)?J(e):e}function fe(s){const e=Ws(s.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}class Pe{constructor(e,r,a,h,_,C,x,H){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=h,this.ssl=_,this.forceLongPolling=C,this.autoDetectLongPolling=x,this.useFetchStreams=H}}class Le{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Le("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Le&&e.projectId===this.projectId&&e.database===this.database}}function lt(s){return null==s}function Lt(s){return 0===s&&1/s==-1/0}function Yt(s){return"number"==typeof s&&Number.isInteger(s)&&!Lt(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const zt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hn={nullValue:"NULL_VALUE"};function Xt(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$(s)?4:yu(s)?9007199254740991:10:jt()}function Tr(s,e){if(s===e)return!0;const r=Xt(s);if(r!==Xt(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return fe(s).isEqual(fe(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const _=Ws(a.timestampValue),C=Ws(h.timestampValue);return _.seconds===C.seconds&&_.nanos===C.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,P(s.bytesValue).isEqual(P(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return Br(a.geoPointValue.latitude)===Br(h.geoPointValue.latitude)&&Br(a.geoPointValue.longitude)===Br(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return Br(a.integerValue)===Br(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const _=Br(a.doubleValue),C=Br(h.doubleValue);return _===C?Lt(_)===Lt(C):isNaN(_)&&isNaN(C)}return!1}(s,e);case 9:return bn(s.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:return function(a,h){const _=a.mapValue.fields||{},C=h.mapValue.fields||{};if(lh(_)!==lh(C))return!1;for(const x in _)if(_.hasOwnProperty(x)&&(void 0===C[x]||!Tr(_[x],C[x])))return!1;return!0}(s,e);default:return jt()}var h}function Pr(s,e){return void 0!==(s.values||[]).find(r=>Tr(r,e))}function bi(s,e){if(s===e)return 0;const r=Xt(s),a=Xt(e);if(r!==a)return vt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return vt(s.booleanValue,e.booleanValue);case 2:return function(h,_){const C=Br(h.integerValue||h.doubleValue),x=Br(_.integerValue||_.doubleValue);return C<x?-1:C>x?1:C===x?0:isNaN(C)?isNaN(x)?0:-1:1}(s,e);case 3:return Sr(s.timestampValue,e.timestampValue);case 4:return Sr(fe(s),fe(e));case 5:return vt(s.stringValue,e.stringValue);case 6:return function(h,_){const C=P(h),x=P(_);return C.compareTo(x)}(s.bytesValue,e.bytesValue);case 7:return function(h,_){const C=h.split("/"),x=_.split("/");for(let H=0;H<C.length&&H<x.length;H++){const q=vt(C[H],x[H]);if(0!==q)return q}return vt(C.length,x.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,_){const C=vt(Br(h.latitude),Br(_.latitude));return 0!==C?C:vt(Br(h.longitude),Br(_.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,_){const C=h.values||[],x=_.values||[];for(let H=0;H<C.length&&H<x.length;++H){const q=bi(C[H],x[H]);if(q)return q}return vt(C.length,x.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,_){if(h===zt.mapValue&&_===zt.mapValue)return 0;if(h===zt.mapValue)return 1;if(_===zt.mapValue)return-1;const C=h.fields||{},x=Object.keys(C),H=_.fields||{},q=Object.keys(H);x.sort(),q.sort();for(let oe=0;oe<x.length&&oe<q.length;++oe){const be=vt(x[oe],q[oe]);if(0!==be)return be;const Ke=bi(C[x[oe]],H[q[oe]]);if(0!==Ke)return Ke}return vt(x.length,q.length)}(s.mapValue,e.mapValue);default:throw jt()}}function Sr(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return vt(s,e);const r=Ws(s),a=Ws(e),h=vt(r.seconds,a.seconds);return 0!==h?h:vt(r.nanos,a.nanos)}function Eo(s){return _u(s)}function _u(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=Ws(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?P(s.bytesValue).toBase64():"referenceValue"in s?Nt.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",_=!0;for(const C of a.values||[])_?_=!1:h+=",",h+=_u(C);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let _="{",C=!0;for(const x of h)C?C=!1:_+=",",_+=`${x}:${_u(a.fields[x])}`;return _+"}"}(s.mapValue):jt();var e}function Rs(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function zs(s){return!!s&&"integerValue"in s}function jr(s){return!!s&&"arrayValue"in s}function Za(s){return!!s&&"nullValue"in s}function bl(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ed(s){return!!s&&"mapValue"in s}function xa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return wl(s.mapValue.fields,(r,a)=>e.mapValue.fields[r]=xa(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=xa(s.arrayValue.values[r]);return e}return Object.assign({},s)}function yu(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function ec(s){return"nullValue"in s?Hn:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Rs(Le.empty(),Nt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:jt()}function Ya(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Rs(Le.empty(),Nt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?zt:jt()}function Vc(s,e){const r=bi(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function Il(s,e){const r=bi(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Ns{constructor(e){this.value=e}static empty(){return new Ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!Ed(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=xa(r)}setAll(e){let r=Fr.emptyPath(),a={},h=[];e.forEach((C,x)=>{if(!r.isImmediateParentOf(x)){const H=this.getFieldsMap(r);this.applyChanges(H,a,h),a={},h=[],r=x.popLast()}C?a[x.lastSegment()]=xa(C):h.push(x.lastSegment())});const _=this.getFieldsMap(r);this.applyChanges(_,a,h)}delete(e){const r=this.field(e.popLast());Ed(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=r.mapValue.fields[e.get(a)];Ed(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=h),r=h}return r.mapValue.fields}applyChanges(e,r,a){wl(r,(h,_)=>e[h]=_);for(const h of a)delete e[h]}clone(){return new Ns(xa(this.value))}}function Qa(s){const e=[];return wl(s.fields,(r,a)=>{const h=new Fr([r]);if(Ed(a)){const _=Qa(a.mapValue).fields;if(0===_.length)e.push(h);else for(const C of _)e.push(h.child(C))}else e.push(h)}),new Uo(e)}class di{constructor(e,r,a,h,_,C){this.key=e,this.documentType=r,this.version=a,this.readTime=h,this.data=_,this.documentState=C}static newInvalidDocument(e){return new di(e,0,$t.min(),$t.min(),Ns.empty(),0)}static newFoundDocument(e,r,a){return new di(e,1,r,$t.min(),a,0)}static newNoDocument(e,r){return new di(e,2,r,$t.min(),Ns.empty(),0)}static newUnknownDocument(e,r){return new di(e,3,r,$t.min(),Ns.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new di(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _g{constructor(e,r=null,a=[],h=[],_=null,C=null,x=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=h,this.limit=_,this.startAt=C,this.endAt=x,this.ut=null}}function Dl(s,e=null,r=[],a=[],h=null,_=null,C=null){return new _g(s,e,r,a,h,_,C)}function Bo(s){const e=Vt(s);if(null===e.ut){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+Eo(h.value);var h}).join(","),r+="|ob:",r+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),lt(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>Eo(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>Eo(a)).join(",")),e.ut=r}return e.ut}function Tl(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!ip(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((r=s.filters[h]).op!==(a=e.filters[h]).op||!r.field.isEqual(a.field)||!Tr(r.value,a.value))return!1;var r,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ph(s.startAt,e.startAt)&&ph(s.endAt,e.endAt)}function dh(s){return Nt.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Sl(s,e){return s.filters.filter(r=>r instanceof Ms&&r.field.isEqual(e))}function Bc(s,e,r){let a=Hn,h=!0;for(const _ of Sl(s,e)){let C=Hn,x=!0;switch(_.op){case"<":case"<=":C=ec(_.value);break;case"==":case"in":case">=":C=_.value;break;case">":C=_.value,x=!1;break;case"!=":case"not-in":C=Hn}Vc({value:a,inclusive:h},{value:C,inclusive:x})<0&&(a=C,h=x)}if(null!==r)for(let _=0;_<s.orderBy.length;++_)if(s.orderBy[_].field.isEqual(e)){const C=r.position[_];Vc({value:a,inclusive:h},{value:C,inclusive:r.inclusive})<0&&(a=C,h=r.inclusive);break}return{value:a,inclusive:h}}function hh(s,e,r){let a=zt,h=!0;for(const _ of Sl(s,e)){let C=zt,x=!0;switch(_.op){case">=":case">":C=Ya(_.value),x=!1;break;case"==":case"in":case"<=":C=_.value;break;case"<":C=_.value,x=!1;break;case"!=":case"not-in":C=zt}Il({value:a,inclusive:h},{value:C,inclusive:x})>0&&(a=C,h=x)}if(null!==r)for(let _=0;_<s.orderBy.length;++_)if(s.orderBy[_].field.isEqual(e)){const C=r.position[_];Il({value:a,inclusive:h},{value:C,inclusive:r.inclusive})>0&&(a=C,h=r.inclusive);break}return{value:a,inclusive:h}}class Ms extends class{}{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?"in"===r||"not-in"===r?this.ct(e,r,a):new wd(e,r,a):"array-contains"===r?new nc(e,a):"in"===r?new np(e,a):"not-in"===r?new rp(e,a):"array-contains-any"===r?new fh(e,a):new Ms(e,r,a)}static ct(e,r,a){return"in"===r?new tp(e,a):new jc(e,a)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.at(bi(r,this.value)):null!==r&&Xt(this.value)===Xt(r)&&this.at(bi(r,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wd extends Ms{constructor(e,r,a){super(e,r,a),this.key=Nt.fromName(a.referenceValue)}matches(e){const r=Nt.comparator(e.key,this.key);return this.at(r)}}class tp extends Ms{constructor(e,r){super(e,"in",r),this.keys=tc(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class jc extends Ms{constructor(e,r){super(e,"not-in",r),this.keys=tc(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function tc(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>Nt.fromName(a.referenceValue))}class nc extends Ms{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return jr(r)&&Pr(r.arrayValue,this.value)}}class np extends Ms{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Pr(this.value.arrayValue,r)}}class rp extends Ms{constructor(e,r){super(e,"not-in",r)}matches(e){if(Pr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Pr(this.value.arrayValue,r)}}class fh extends Ms{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!jr(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Pr(this.value.arrayValue,a))}}class ha{constructor(e,r){this.position=e,this.inclusive=r}}class vu{constructor(e,r="asc"){this.field=e,this.dir=r}}function ip(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function Cd(s,e,r){let a=0;for(let h=0;h<s.position.length;h++){const _=e[h],C=s.position[h];if(a=_.field.isKeyField()?Nt.comparator(Nt.fromName(C.referenceValue),r.key):bi(C,r.data.field(_.field)),"desc"===_.dir&&(a*=-1),0!==a)break}return a}function ph(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Tr(s.position[r],e.position[r]))return!1;return!0}class jo{constructor(e,r=null,a=[],h=[],_=null,C="F",x=null,H=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=h,this.limit=_,this.limitType=C,this.startAt=x,this.endAt=H,this.lt=null,this.ft=null}}function af(s,e,r,a,h,_,C,x){return new jo(s,e,r,a,h,_,C,x)}function $c(s){return new jo(s)}function gh(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function mh(s){for(const e of s.filters)if(e.ht())return e.field;return null}function Ja(s){return null!==s.collectionGroup}function Xa(s){const e=Vt(s);if(null===e.lt){e.lt=[];const r=mh(e),a=gh(e);if(null!==r&&null===a)r.isKeyField()||e.lt.push(new vu(r)),e.lt.push(new vu(Fr.keyField(),"asc"));else{let h=!1;for(const _ of e.explicitOrderBy)e.lt.push(_),_.field.isKeyField()&&(h=!0);if(!h){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new vu(Fr.keyField(),_))}}}return e.lt}function fa(s){const e=Vt(s);if(!e.ft)if("F"===e.limitType)e.ft=Dl(e.path,e.collectionGroup,Xa(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const _ of Xa(e))r.push(new vu(_.field,"desc"===_.dir?"asc":"desc"));const a=e.endAt?new ha(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new ha(e.startAt.position,e.startAt.inclusive):null;e.ft=Dl(e.path,e.collectionGroup,r,e.filters,e.limit,a,h)}return e.ft}function sp(s,e,r){return new jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function Id(s,e){return Tl(fa(s),fa(e))&&s.limitType===e.limitType}function uf(s){return`${Bo(fa(s))}|lt:${s.limitType}`}function Hc(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${Eo(a.value)}`;var a}).join(", ")}]`),lt(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>Eo(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>Eo(r)).join(",")),`Target(${e})`}(fa(s))}; limitType=${s.limitType})`}function lf(s,e){return e.isFoundDocument()&&function(r,a){const h=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):Nt.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,e)&&function(r,a){for(const h of r.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(r,a){for(const h of r.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((r=s).startAt&&!function(h,_,C){const x=Cd(h,_,C);return h.inclusive?x<=0:x<0}(r.startAt,Xa(r),a)||r.endAt&&!function(h,_,C){const x=Cd(h,_,C);return h.inclusive?x>=0:x>0}(r.endAt,Xa(r),a)));var r,a}function cf(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function op(s){return(e,r)=>{let a=!1;for(const h of Xa(s)){const _=Al(h,e,r);if(0!==_)return _;a=a||h.field.isKeyField()}return 0}}function Al(s,e,r){const a=s.field.isKeyField()?Nt.comparator(e.key,r.key):function(h,_,C){const x=_.data.field(h),H=C.data.field(h);return null!==x&&null!==H?bi(x,H):jt()}(s.field,e,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return jt()}}function _h(s,e){if(s.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lt(e)?"-0":e}}function df(s){return{integerValue:""+s}}function yg(s,e){return Yt(e)?df(e):_h(s,e)}class rc{constructor(){this._=void 0}}function Eu(s,e,r){return s instanceof wu?function(a,h){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(_.fields.__previous_value__=h),{mapValue:_}}(r,e):s instanceof Cu?ff(s,e):s instanceof eu?ap(s,e):function(a,h){const _=pa(a,h),C=up(_)+up(a._t);return zs(_)&&zs(a._t)?df(C):_h(a.wt,C)}(s,e)}function hf(s,e,r){return s instanceof Cu?ff(s,e):s instanceof eu?ap(s,e):r}function pa(s,e){return s instanceof ic?zs(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var a,r}class wu extends rc{}class Cu extends rc{constructor(e){super(),this.elements=e}}function ff(s,e){const r=Dd(e);for(const a of s.elements)r.some(h=>Tr(h,a))||r.push(a);return{arrayValue:{values:r}}}class eu extends rc{constructor(e){super(),this.elements=e}}function ap(s,e){let r=Dd(e);for(const a of s.elements)r=r.filter(h=>!Tr(h,a));return{arrayValue:{values:r}}}class ic extends rc{constructor(e,r){super(),this.wt=e,this._t=r}}function up(s){return Br(s.integerValue||s.doubleValue)}function Dd(s){return jr(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Yu{constructor(e,r){this.field=e,this.transform=r}}class vg{constructor(e,r){this.version=e,this.transformResults=r}}class Bi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class tu{}function pf(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new Iu(s.key,Bi.none()):new fr(s.key,s.data,Bi.none());{const r=s.data,a=Ns.empty();let h=new Vn(Fr.comparator);for(let _ of e.fields)if(!h.has(_)){let C=r.field(_);null===C&&_.length>1&&(_=_.popLast(),C=r.field(_)),null===C?a.delete(_):a.set(_,C),h=h.add(_)}return new qn(s.key,a,new Uo(h.toArray()),Bi.none())}}function lp(s,e,r){s instanceof fr?function(a,h,_){const C=a.value.clone(),x=$r(a.fieldTransforms,h,_.transformResults);C.setAll(x),h.convertToFoundDocument(_.version,C).setHasCommittedMutations()}(s,e,r):s instanceof qn?function(a,h,_){if(!vh(a.precondition,h))return void h.convertToUnknownDocument(_.version);const C=$r(a.fieldTransforms,h,_.transformResults),x=h.data;x.setAll(Kn(a)),x.setAll(C),h.convertToFoundDocument(_.version,x).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function bu(s,e,r,a){return s instanceof fr?function(h,_,C,x){if(!vh(h.precondition,_))return C;const H=h.value.clone(),q=ei(h.fieldTransforms,x,_);return H.setAll(q),_.convertToFoundDocument(_.version,H).setHasLocalMutations(),null}(s,e,r,a):s instanceof qn?function(h,_,C,x){if(!vh(h.precondition,_))return C;const H=ei(h.fieldTransforms,x,_),q=_.data;return q.setAll(Kn(h)),q.setAll(H),_.convertToFoundDocument(_.version,q).setHasLocalMutations(),null===C?null:C.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(oe=>oe.field))}(s,e,r,a):(C=r,vh(s.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):C);var _,C}function gf(s,e){let r=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),_=pa(a.transform,h||null);null!=_&&(null===r&&(r=Ns.empty()),r.set(a.field,_))}return r||null}function xl(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===a||r&&a&&bn(r,a,(h,_)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(r=s.transform)instanceof Cu&&a instanceof Cu||r instanceof eu&&a instanceof eu?bn(r.elements,a.elements,Tr):r instanceof ic&&a instanceof ic?Tr(r._t,a._t):r instanceof wu&&a instanceof wu);var r,a}(h,_))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,a}class fr extends tu{constructor(e,r,a,h=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class qn extends tu{constructor(e,r,a,h,_=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=h,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function Kn(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);e.set(r,a)}}),e}function $r(s,e,r){const a=new Map;yn(s.length===r.length);for(let h=0;h<r.length;h++){const _=s[h],C=_.transform,x=e.data.field(_.field);a.set(_.field,hf(C,x,r[h]))}return a}function ei(s,e,r){const a=new Map;for(const h of s){const _=h.transform,C=r.data.field(h.field);a.set(h.field,Eu(_,C,e))}return a}class Iu extends tu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Td extends tu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gc{constructor(e){this.count=e}}var cs,hn;function tr(s){switch(s){default:return jt();case Qe.CANCELLED:case Qe.UNKNOWN:case Qe.DEADLINE_EXCEEDED:case Qe.RESOURCE_EXHAUSTED:case Qe.INTERNAL:case Qe.UNAVAILABLE:case Qe.UNAUTHENTICATED:return!1;case Qe.INVALID_ARGUMENT:case Qe.NOT_FOUND:case Qe.ALREADY_EXISTS:case Qe.PERMISSION_DENIED:case Qe.FAILED_PRECONDITION:case Qe.ABORTED:case Qe.OUT_OF_RANGE:case Qe.UNIMPLEMENTED:case Qe.DATA_LOSS:return!0}}function io(s){if(void 0===s)return kr("GRPC error has no .code"),Qe.UNKNOWN;switch(s){case cs.OK:return Qe.OK;case cs.CANCELLED:return Qe.CANCELLED;case cs.UNKNOWN:return Qe.UNKNOWN;case cs.DEADLINE_EXCEEDED:return Qe.DEADLINE_EXCEEDED;case cs.RESOURCE_EXHAUSTED:return Qe.RESOURCE_EXHAUSTED;case cs.INTERNAL:return Qe.INTERNAL;case cs.UNAVAILABLE:return Qe.UNAVAILABLE;case cs.UNAUTHENTICATED:return Qe.UNAUTHENTICATED;case cs.INVALID_ARGUMENT:return Qe.INVALID_ARGUMENT;case cs.NOT_FOUND:return Qe.NOT_FOUND;case cs.ALREADY_EXISTS:return Qe.ALREADY_EXISTS;case cs.PERMISSION_DENIED:return Qe.PERMISSION_DENIED;case cs.FAILED_PRECONDITION:return Qe.FAILED_PRECONDITION;case cs.ABORTED:return Qe.ABORTED;case cs.OUT_OF_RANGE:return Qe.OUT_OF_RANGE;case cs.UNIMPLEMENTED:return Qe.UNIMPLEMENTED;case cs.DATA_LOSS:return Qe.DATA_LOSS;default:return jt()}}(hn=cs||(cs={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class Du{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a)for(const[h,_]of a)if(this.equalsFn(h,e))return _}has(e){return void 0!==this.get(e)}set(e,r){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,r]],void this.innerSize++;for(let _=0;_<h.length;_++)if(this.equalsFn(h[_][0],e))return void(h[_]=[e,r]);h.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[r]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){wl(this.inner,(r,a)=>{for(const[h,_]of a)e(h,_)})}isEmpty(){return Cl(this.inner)}size(){return this.innerSize}}const cp=new Jr(Nt.comparator);function Ii(){return cp}const Rl=new Jr(Nt.comparator);function ds(...s){let e=Rl;for(const r of s)e=e.insert(r.key,r);return e}function Eh(s){let e=Rl;return s.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function Ra(){return ts()}function Na(){return ts()}function ts(){return new Du(s=>s.toString(),(s,e)=>s.isEqual(e))}const Qu=new Jr(Nt.comparator),mf=new Vn(Nt.comparator);function Gn(...s){let e=mf;for(const r of s)e=e.add(r);return e}const Eg=new Vn(vt);function Sd(){return Eg}class Ad{constructor(e,r,a,h,_){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,r){const a=new Map;return a.set(e,sc.createSynthesizedTargetChangeForCurrentChange(e,r)),new Ad($t.min(),a,Sd(),Ii(),Gn())}}class sc{constructor(e,r,a,h,_){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,r){return new sc(Xr.EMPTY_BYTE_STRING,r,Gn(),Gn(),Gn())}}class sa{constructor(e,r,a,h){this.gt=e,this.removedTargetIds=r,this.key=a,this.yt=h}}class nr{constructor(e,r){this.targetId=e,this.It=r}}class Wc{constructor(e,r,a=Xr.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=h}}class xd{constructor(){this.Tt=0,this.Et=oc(),this.At=Xr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Gn(),r=Gn(),a=Gn();return this.Et.forEach((h,_)=>{switch(_){case 0:e=e.add(h);break;case 2:r=r.add(h);break;case 1:a=a.add(h);break;default:jt()}}),new sc(this.At,this.Rt,e,r,a)}Dt(){this.bt=!1,this.Et=oc()}Ct(e,r){this.bt=!0,this.Et=this.Et.insert(e,r)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class dp{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Ii(),this.Bt=Ma(),this.Lt=new Vn(vt)}Ut(e){for(const r of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt);for(const r of e.removedTargetIds)this.Kt(r,e.key,e.yt)}Gt(e){this.forEachTarget(e,r=>{const a=this.Qt(r);switch(e.state){case 0:this.jt(r)&&a.Vt(e.resumeToken);break;case 1:a.kt(),a.Pt||a.Dt(),a.Vt(e.resumeToken);break;case 2:a.kt(),a.Pt||this.removeTarget(r);break;case 3:this.jt(r)&&(a.Ot(),a.Vt(e.resumeToken));break;case 4:this.jt(r)&&(this.Wt(r),a.Vt(e.resumeToken));break;default:jt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Ft.forEach((a,h)=>{this.jt(h)&&r(h)})}zt(e){const r=e.targetId,a=e.It.count,h=this.Ht(r);if(h){const _=h.target;if(dh(_))if(0===a){const C=new Nt(_.path);this.Kt(r,C,di.newNoDocument(C,$t.min()))}else yn(1===a);else this.Jt(r)!==a&&(this.Wt(r),this.Lt=this.Lt.add(r))}}Yt(e){const r=new Map;this.Ft.forEach((_,C)=>{const x=this.Ht(C);if(x){if(_.current&&dh(x.target)){const H=new Nt(x.target.path);null!==this.$t.get(H)||this.Xt(C,H)||this.Kt(C,H,di.newNoDocument(H,e))}_.vt&&(r.set(C,_.St()),_.Dt())}});let a=Gn();this.Bt.forEach((_,C)=>{let x=!0;C.forEachWhile(H=>{const q=this.Ht(H);return!q||2===q.purpose||(x=!1,!1)}),x&&(a=a.add(_))}),this.$t.forEach((_,C)=>C.setReadTime(e));const h=new Ad(e,r,this.Lt,this.$t,a);return this.$t=Ii(),this.Bt=Ma(),this.Lt=new Vn(vt),h}qt(e,r){if(!this.jt(e))return;const a=this.Xt(e,r.key)?2:0;this.Qt(e).Ct(r.key,a),this.$t=this.$t.insert(r.key,r),this.Bt=this.Bt.insert(r.key,this.Zt(r.key).add(e))}Kt(e,r,a){if(!this.jt(e))return;const h=this.Qt(e);this.Xt(e,r)?h.Ct(r,1):h.xt(r),this.Bt=this.Bt.insert(r,this.Zt(r).delete(e)),a&&(this.$t=this.$t.insert(r,a))}removeTarget(e){this.Ft.delete(e)}Jt(e){const r=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let r=this.Ft.get(e);return r||(r=new xd,this.Ft.set(e,r)),r}Zt(e){let r=this.Bt.get(e);return r||(r=new Vn(vt),this.Bt=this.Bt.insert(e,r)),r}jt(e){const r=null!==this.Ht(e);return r||pt("WatchChangeAggregator","Detected inactive target",e),r}Ht(e){const r=this.Ft.get(e);return r&&r.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new xd),this.Mt.getRemoteKeysForTarget(e).forEach(r=>{this.Kt(e,r,null)})}Xt(e,r){return this.Mt.getRemoteKeysForTarget(e).has(r)}}function Ma(){return new Jr(Nt.comparator)}function oc(){return new Jr(Nt.comparator)}const ga={asc:"ASCENDING",desc:"DESCENDING"},_f={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class $o{constructor(e,r){this.databaseId=e,this.dt=r}}function ac(s,e){return s.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uc(s,e){return s.dt?e.toBase64():e.toUint8Array()}function Rd(s,e){return ac(s,e.toTimestamp())}function qs(s){return yn(!!s),$t.fromTimestamp(function(e){const r=Ws(e);return new dr(r.seconds,r.nanos)}(s))}function hs(s,e){return(r=s,new Ln(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function lc(s){const e=Ln.fromString(s);return yn(Ch(e)),e}function cc(s,e){return hs(s.databaseId,e.path)}function Ho(s,e){const r=lc(e);if(r.get(1)!==s.databaseId.projectId)throw new ht(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new ht(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Nt(oa(r))}function zc(s,e){return hs(s.databaseId,e)}function Nd(s){const e=lc(s);return 4===e.length?Ln.emptyPath():oa(e)}function Nl(s){return new Ln(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function oa(s){return yn(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function yf(s,e,r){return{name:cc(s,e),fields:r.value.mapValue.fields}}function Cr(s,e,r){const a=Ho(s,e.name),h=qs(e.updateTime),_=new Ns({mapValue:{fields:e.fields}}),C=di.newFoundDocument(a,h,_);return r&&C.setHasCommittedMutations(),r?C.setHasCommittedMutations():C}function dc(s,e){let r;if(e instanceof fr)r={update:yf(s,e.key,e.value)};else if(e instanceof Iu)r={delete:cc(s,e.key)};else if(e instanceof qn)r={update:yf(s,e.key,e.data),updateMask:vf(e.fieldMask)};else{if(!(e instanceof Td))return jt();r={verify:cc(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(h,_){const C=_.transform;if(C instanceof wu)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Cu)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof eu)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof ic)return{fieldPath:_.field.canonicalString(),increment:C._t};throw jt()}(0,a))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Rd(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:jt()),r;var h}function qc(s,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Bi.updateTime(qs(h.updateTime)):void 0!==h.exists?Bi.exists(h.exists):Bi.none():Bi.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(_,C){let x=null;"setToServerValue"in C?(yn("REQUEST_TIME"===C.setToServerValue),x=new wu):"appendMissingElements"in C?x=new Cu(C.appendMissingElements.values||[]):"removeAllFromArray"in C?x=new eu(C.removeAllFromArray.values||[]):"increment"in C?x=new ic(_,C.increment):jt();const H=Fr.fromServerFormat(C.fieldPath);return new Yu(H,x)}(s,h)):[];var h;if(e.update){const h=Ho(s,e.update.name),_=new Ns({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Uo((e.updateMask.fieldPaths||[]).map(q=>Fr.fromServerFormat(q)));return new qn(h,_,C,r,a)}return new fr(h,_,r,a)}if(e.delete){const h=Ho(s,e.delete);return new Iu(h,r)}if(e.verify){const h=Ho(s,e.verify);return new Td(h,r)}return jt()}function ji(s,e){return{documents:[zc(s,e.path)]}}function Ml(s,e){const r={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(r.parent=zc(s,a),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=zc(s,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(H){if(0===H.length)return;const q=H.map(oe=>function(be){if("=="===be.op){if(bl(be.value))return{unaryFilter:{field:Pl(be.field),op:"IS_NAN"}};if(Za(be.value))return{unaryFilter:{field:Pl(be.field),op:"IS_NULL"}}}else if("!="===be.op){if(bl(be.value))return{unaryFilter:{field:Pl(be.field),op:"IS_NOT_NAN"}};if(Za(be.value))return{unaryFilter:{field:Pl(be.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pl(be.field),op:yi(be.op),value:be.value}}}(oe));return 1===q.length?q[0]:{compositeFilter:{op:"AND",filters:q}}}(e.filters);h&&(r.structuredQuery.where=h);const _=function(H){if(0!==H.length)return H.map(q=>{return{field:Pl((oe=q).field),direction:wh(oe.dir)};var oe})}(e.orderBy);_&&(r.structuredQuery.orderBy=_);const C=(q=e.limit,s.dt||lt(q)?q:{value:q});var q,x,H;return null!==C&&(r.structuredQuery.limit=C),e.startAt&&(r.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(r.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),r}function In(s){let e=Nd(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let h=null;if(a>0){yn(1===a);const oe=r.from[0];oe.allDescendants?h=oe.collectionId:e=e.child(oe.collectionId)}let _=[];r.where&&(_=ma(r.where));let C=[];r.orderBy&&(C=r.orderBy.map(oe=>{return new vu(Go((be=oe).field),function(Ke){switch(Ke){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(be.direction));var be}));let x=null;r.limit&&(x=function(oe){let be;return be="object"==typeof oe?oe.value:oe,lt(be)?null:be}(r.limit));let H=null;var oe;r.startAt&&(H=new ha((oe=r.startAt).values||[],!!oe.before));let q=null;return r.endAt&&(q=function(oe){return new ha(oe.values||[],!oe.before)}(r.endAt)),af(e,h,C,_,x,"F",H,q)}function ma(s){return s?void 0!==s.unaryFilter?[Ol(s)]:void 0!==s.fieldFilter?[fc(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>ma(e)).reduce((e,r)=>e.concat(r)):jt():[]}function wh(s){return ga[s]}function yi(s){return _f[s]}function Pl(s){return{fieldPath:s.canonicalString()}}function Go(s){return Fr.fromServerFormat(s.fieldPath)}function fc(s){return Ms.create(Go(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}}(s.fieldFilter.op),s.fieldFilter.value)}function Ol(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Go(s.unaryFilter.field);return Ms.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Go(s.unaryFilter.field);return Ms.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Go(s.unaryFilter.field);return Ms.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Go(s.unaryFilter.field);return Ms.create(h,"!=",{nullValue:"NULL_VALUE"});default:return jt()}}function vf(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Ch(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function bs(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=g(e)),e=E(s.get(r),e);return g(e)}function E(s,e){let r=e;const a=s.length;for(let h=0;h<a;h++){const _=s.charAt(h);switch(_){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=_}}return r}function g(s){return s+"\x01\x01"}function m(s){const e=s.length;if(yn(e>=2),2===e)return yn("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Ln.emptyPath();const r=e-2,a=[];let h="";for(let _=0;_<e;){const C=s.indexOf("\x01",_);switch((C<0||C>r)&&jt(),s.charAt(C+1)){case"\x01":const x=s.substring(_,C);let H;0===h.length?H=x:(h+=x,H=h,h=""),a.push(H);break;case"\x10":h+=s.substring(_,C),h+="\0";break;case"\x11":h+=s.substring(_,C+1);break;default:jt()}_=C+2}return new Ln(a)}const b=["userId","batchId"];function j(s,e){return[s,bs(e)]}function Z(s,e,r){return[s,bs(e),r]}const _e={},je=["prefixPath","collectionGroup","readTime","documentId"],wt=["prefixPath","collectionGroup","documentId"],ft=["collectionGroup","readTime","prefixPath","documentId"],Kt=["canonicalId","targetId"],Qt=["targetId","path"],pr=["path","targetId"],Ks=["collectionId","parent"],kl=["indexId","uid"],Kc=["uid","sequenceNumber"],Ef=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Md=["indexId","uid","orderedDocumentKey"],bh=["userId","collectionPath","documentId"],pc=["userId","collectionPath","largestBatchId"],Pd=["userId","collectionGroup","largestBatchId"],Ih=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zc=[...Ih,"documentOverlays"],Dh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yc=Dh,aa=[...Yc,"indexConfiguration","indexState","indexEntries"];class Qc extends rf{constructor(e,r){super(),this.ee=e,this.currentSequenceNumber=r}}function Ps(s,e){const r=Vt(s);return no.N(r.ee,e)}class wg{constructor(e,r,a,h){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let h=0;h<this.mutations.length;h++){const _=this.mutations[h];_.key.isEqual(e.key)&&lp(_,e,a[h])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=bu(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=bu(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=Na();return this.mutations.forEach(h=>{const _=e.get(h.key),C=_.overlayedDocument;let x=this.applyToLocalView(C,_.mutatedFields);x=r.has(h.key)?null:x;const H=pf(C,x);null!==H&&a.set(h.key,H),C.isValidDocument()||C.convertToNoDocument($t.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Gn())}isEqual(e){return this.batchId===e.batchId&&bn(this.mutations,e.mutations,(r,a)=>xl(r,a))&&bn(this.baseMutations,e.baseMutations,(r,a)=>xl(r,a))}}class Th{constructor(e,r,a,h){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=h}static from(e,r,a){yn(e.mutations.length===a.length);let h=Qu;const _=e.mutations;for(let C=0;C<_.length;C++)h=h.insert(_[C].key,a[C].version);return new Th(e,r,a,h)}}class pp{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gc{constructor(e,r,a,h,_=$t.min(),C=$t.min(),x=Xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=x}withSequenceNumber(e){return new gc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Cg{constructor(e){this.ne=e}}function _a(s,e){const r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Od(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:cc(h=s.ne,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:ac(h,_.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:Su(e.version)};else{if(!e.isUnknownDocument())return jt();a.unknownDocument={path:r.path.toArray(),version:Su(e.version)}}var h,_;return a}function Od(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Su(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Au(s){const e=new dr(s.seconds,s.nanoseconds);return $t.fromTimestamp(e)}function Ju(s,e){const r=(e.baseMutations||[]).map(_=>qc(s.ne,_));for(let _=0;_<e.mutations.length-1;++_){const C=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(C.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const a=e.mutations.map(_=>qc(s.ne,_)),h=dr.fromMillis(e.localWriteTimeMs);return new wg(e.batchId,h,r,a)}function Xu(s){const e=Au(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?Au(s.lastLimboFreeSnapshotVersion):$t.min();let a;var h;return void 0!==s.query.documents?(yn(1===(h=s.query).documents.length),a=fa($c(Nd(h.documents[0])))):a=fa(In(s.query)),new gc(a,s.targetId,0,s.lastListenSequenceNumber,e,r,Xr.fromBase64String(s.resumeToken))}function mc(s,e){const r=Su(e.snapshotVersion),a=Su(e.lastLimboFreeSnapshotVersion);let h;h=dh(e.target)?ji(s.ne,e.target):Ml(s.ne,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bo(e.target),readTime:r,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function Fl(s){const e=In({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?sp(e,e.limit,"L"):e}function Pa(s,e){return new pp(e.largestBatchId,qc(s.ne,e.overlayMutation))}function Vm(s,e){const r=e.path.lastSegment();return[s,bs(e.path.popLast()),r]}function bg(s,e,r,a){return{indexId:s,uid:e.uid||"",sequenceNumber:r,readTime:Su(a.readTime),documentKey:bs(a.documentKey.path),largestBatchId:a.largestBatchId}}class wf{getBundleMetadata(e,r){return Um(e).get(r).next(a=>{if(a)return{id:(h=a).bundleId,createTime:Au(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return Um(e).put({bundleId:(a=r).id,createTime:Su(qs(a.createTime)),version:a.version});var a}getNamedQuery(e,r){return Ig(e).get(r).next(a=>{if(a)return{name:(h=a).name,query:Fl(h.bundledQuery),readTime:Au(h.readTime)};var h})}saveNamedQuery(e,r){return Ig(e).put({name:(a=r).name,readTime:Su(qs(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Um(s){return Ps(s,"bundles")}function Ig(s){return Ps(s,"namedQueries")}class _c{constructor(e,r){this.wt=e,this.userId=r}static se(e,r){return new _c(e,r.uid||"")}getOverlay(e,r){return Ll(e).get(Vm(this.userId,r)).next(a=>a?Pa(this.wt,a):null)}getOverlays(e,r){const a=Ra();return Ze.forEach(r,h=>this.getOverlay(e,h).next(_=>{null!==_&&a.set(h,_)})).next(()=>a)}saveOverlays(e,r,a){const h=[];return a.forEach((_,C)=>{const x=new pp(r,C);h.push(this.ie(e,x))}),Ze.waitFor(h)}removeOverlaysForBatchId(e,r,a){const h=new Set;r.forEach(C=>h.add(bs(C.getCollectionPath())));const _=[];return h.forEach(C=>{const x=IDBKeyRange.bound([this.userId,C,a],[this.userId,C,a+1],!1,!0);_.push(Ll(e).W("collectionPathOverlayIndex",x))}),Ze.waitFor(_)}getOverlaysForCollection(e,r,a){const h=Ra(),_=bs(r),C=IDBKeyRange.bound([this.userId,_,a],[this.userId,_,Number.POSITIVE_INFINITY],!0);return Ll(e).K("collectionPathOverlayIndex",C).next(x=>{for(const H of x){const q=Pa(this.wt,H);h.set(q.getKey(),q)}return h})}getOverlaysForCollectionGroup(e,r,a,h){const _=Ra();let C;const x=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Ll(e).J({index:"collectionGroupOverlayIndex",range:x},(H,q,oe)=>{const be=Pa(this.wt,q);_.size()<h||be.largestBatchId===C?(_.set(be.getKey(),be),C=be.largestBatchId):oe.done()}).next(()=>_)}ie(e,r){return Ll(e).put(function(a,h,_){const[C,x,H]=Vm(h,_.mutation.key);return{userId:h,collectionPath:x,documentId:H,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:dc(a.ne,_.mutation)}}(this.wt,this.userId,r))}}function Ll(s){return Ps(s,"documentOverlays")}class kd{constructor(){}re(e,r){this.oe(e,r),r.ue()}oe(e,r){if("nullValue"in e)this.ce(r,5);else if("booleanValue"in e)this.ce(r,10),r.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(r,15),r.ae(Br(e.integerValue));else if("doubleValue"in e){const a=Br(e.doubleValue);isNaN(a)?this.ce(r,13):(this.ce(r,15),Lt(a)?r.ae(0):r.ae(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ce(r,20),"string"==typeof a?r.he(a):(r.he(`${a.seconds||""}`),r.ae(a.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,r),this.fe(r);else if("bytesValue"in e)this.ce(r,30),r.de(P(e.bytesValue)),this.fe(r);else if("referenceValue"in e)this._e(e.referenceValue,r);else if("geoPointValue"in e){const a=e.geoPointValue;this.ce(r,45),r.ae(a.latitude||0),r.ae(a.longitude||0)}else"mapValue"in e?yu(e)?this.ce(r,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,r),this.fe(r)):"arrayValue"in e?(this.me(e.arrayValue,r),this.fe(r)):jt()}le(e,r){this.ce(r,25),this.ge(e,r)}ge(e,r){r.he(e)}we(e,r){const a=e.fields||{};this.ce(r,55);for(const h of Object.keys(a))this.le(h,r),this.oe(a[h],r)}me(e,r){const a=e.values||[];this.ce(r,50);for(const h of a)this.oe(h,r)}_e(e,r){this.ce(r,37),Nt.fromName(e).path.forEach(a=>{this.ce(r,60),this.ge(a,r)})}ce(e,r){e.ae(r)}fe(e){e.ae(2)}}function Cf(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Jc(s){const e=64-function(r){let a=0;for(let h=0;h<8;++h){const _=Cf(255&r[h]);if(a+=_,8!==_)break}return a}(s);return Math.ceil(e/8)}kd.ye=new kd;class gp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ie(a.value),a=r.next();this.Te()}Ee(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ae(a.value),a=r.next();this.Re()}be(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ie(a);else if(a<2048)this.Ie(960|a>>>6),this.Ie(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a);else{const h=r.codePointAt(0);this.Ie(240|h>>>18),this.Ie(128|63&h>>>12),this.Ie(128|63&h>>>6),this.Ie(128|63&h)}}this.Te()}Pe(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=r.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}ve(e){const r=this.Ve(e),a=Jc(r);this.Se(1+a),this.buffer[this.position++]=255&a;for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=255&r[h]}De(e){const r=this.Ve(e),a=Jc(r);this.Se(1+a),this.buffer[this.position++]=~(255&a);for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=~(255&r[h])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const r=function(h){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,h,!1),new Uint8Array(_.buffer)}(e),a=0!=(128&r[0]);r[0]^=a?255:128;for(let h=1;h<r.length;++h)r[h]^=a?255:0;return r}Ie(e){const r=255&e;0===r?(this.xe(0),this.xe(255)):255===r?(this.xe(255),this.xe(0)):this.xe(r)}Ae(e){const r=255&e;0===r?(this.ke(0),this.ke(255)):255===r?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class Q_{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class Di{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class $i{constructor(){this.Me=new gp,this.Fe=new Q_(this.Me),this.$e=new Di(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class el{constructor(e,r,a,h){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=h}Le(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new el(this.indexId,this.documentKey,this.arrayValue,a)}}function Vl(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=Dg(s.arrayValue,e.arrayValue),0!==r?r:(r=Dg(s.directionalValue,e.directionalValue),0!==r?r:Nt.comparator(s.documentKey,e.documentKey)))}function Dg(s,e){for(let r=0;r<s.length&&r<e.length;++r){const a=s[r]-e[r];if(0!==a)return a}return s.length-e.length}class Tg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const r of e.filters){const a=r;a.ht()?this.Ke=a:this.qe.push(a)}}Ge(e){const r=Fc(e);if(void 0!==r&&!this.Qe(r))return!1;const a=pu(e);let h=0,_=0;for(;h<a.length&&this.Qe(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.Ke){const C=a[h];if(!this.je(this.Ke,C)||!this.We(this.Ue[_++],C))return!1;++h}for(;h<a.length;++h){const C=a[h];if(_>=this.Ue.length||!this.We(this.Ue[_++],C))return!1}return!0}Qe(e){for(const r of this.qe)if(this.je(r,e))return!0;return!1}je(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class Fd{constructor(){this.ze=new mp}addToCollectionParentIndex(e,r){return this.ze.add(r),Ze.resolve()}getCollectionParents(e,r){return Ze.resolve(this.ze.getEntries(r))}addFieldIndex(e,r){return Ze.resolve()}deleteFieldIndex(e,r){return Ze.resolve()}getDocumentsMatchingTarget(e,r){return Ze.resolve(null)}getIndexType(e,r){return Ze.resolve(0)}getFieldIndexes(e,r){return Ze.resolve([])}getNextCollectionGroupToUpdate(e){return Ze.resolve(null)}getMinOffset(e,r){return Ze.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,r){return Ze.resolve(ia.min())}updateCollectionGroup(e,r,a){return Ze.resolve()}updateIndexEntries(e,r){return Ze.resolve()}}class mp{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r]||new Vn(Ln.comparator),_=!h.has(a);return this.index[r]=h.add(a),_}has(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r];return h&&h.has(a)}getEntries(e){return(this.index[e]||new Vn(Ln.comparator)).toArray()}}const xu=new Uint8Array(0);class Sg{constructor(e,r){this.user=e,this.databaseId=r,this.He=new mp,this.Je=new Du(a=>Bo(a),(a,h)=>Tl(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.He.has(r)){const a=r.lastSegment(),h=r.popLast();e.addOnCommittedListener(()=>{this.He.add(r)});const _={collectionId:a,parent:bs(h)};return Ld(e).put(_)}return Ze.resolve()}getCollectionParents(e,r){const a=[],h=IDBKeyRange.bound([r,""],[Rn(r),""],!1,!0);return Ld(e).K(h).next(_=>{for(const C of _){if(C.collectionId!==r)break;a.push(m(C.parent))}return a})}addFieldIndex(e,r){const a=An(e),h={indexId:(C=r).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var C;delete h.indexId;const _=a.add(h);if(r.indexState){const C=Ah(e);return _.next(x=>{C.put(bg(x,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return _.next()}deleteFieldIndex(e,r){const a=An(e),h=Ah(e),_=Sh(e);return a.delete(r.indexId).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const a=Sh(e);let h=!0;const _=new Map;return Ze.forEach(this.Ye(r),C=>this.Xe(e,C).next(x=>{h&&(h=!!x),_.set(C,x)})).next(()=>{if(h){let C=Gn();const x=[];return Ze.forEach(_,(H,q)=>{var oe;pt("IndexedDbIndexManager",`Using index ${oe=H,`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map(Si=>`${Si.fieldPath}:${Si.kind}`).join(",")}`} to execute ${Bo(r)}`);const be=function(Si,Io){const vi=Fc(Io);if(void 0===vi)return null;for(const Os of Sl(Si,vi.fieldPath))switch(Os.op){case"array-contains-any":return Os.value.arrayValue.values||[];case"array-contains":return[Os.value]}return null}(q,H),Ke=function(Si,Io){const vi=new Map;for(const Os of pu(Io))for(const ja of Sl(Si,Os.fieldPath))switch(ja.op){case"==":case"in":vi.set(Os.fieldPath.canonicalString(),ja.value);break;case"not-in":case"!=":return vi.set(Os.fieldPath.canonicalString(),ja.value),Array.from(vi.values())}return null}(q,H),at=function(Si,Io){const vi=[];let Os=!0;for(const ja of pu(Io)){const Nm=0===ja.kind?Bc(Si,ja.fieldPath,Si.startAt):hh(Si,ja.fieldPath,Si.startAt);vi.push(Nm.value),Os&&(Os=Nm.inclusive)}return new ha(vi,Os)}(q,H),mt=function(Si,Io){const vi=[];let Os=!0;for(const ja of pu(Io)){const Nm=0===ja.kind?hh(Si,ja.fieldPath,Si.endAt):Bc(Si,ja.fieldPath,Si.endAt);vi.push(Nm.value),Os&&(Os=Nm.inclusive)}return new ha(vi,Os)}(q,H),qt=this.Ze(H,q,at),pn=this.Ze(H,q,mt),ti=this.tn(H,q,Ke),fs=this.en(H.indexId,be,qt,at.inclusive,pn,mt.inclusive,ti);return Ze.forEach(fs,Si=>a.j(Si,r.limit).next(Io=>{Io.forEach(vi=>{const Os=Nt.fromSegments(vi.documentKey);C.has(Os)||(C=C.add(Os),x.push(Os))})}))}).next(()=>x)}return Ze.resolve(null)})}Ye(e){let r=this.Je.get(e);return r||(r=[e],this.Je.set(e,r),r)}en(e,r,a,h,_,C,x){const H=(null!=r?r.length:1)*Math.max(a.length,_.length),q=H/(null!=r?r.length:1),oe=[];for(let be=0;be<H;++be){const Ke=r?this.nn(r[be/q]):xu,at=this.sn(e,Ke,a[be%q],h),mt=this.rn(e,Ke,_[be%q],C),qt=x.map(pn=>this.sn(e,Ke,pn,!0));oe.push(...this.createRange(at,mt,qt))}return oe}sn(e,r,a,h){const _=new el(e,Nt.empty(),r,a);return h?_:_.Le()}rn(e,r,a,h){const _=new el(e,Nt.empty(),r,a);return h?_.Le():_}Xe(e,r){const a=new Tg(r),h=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,h).next(_=>{let C=null;for(const x of _)a.Ge(x)&&(!C||x.fields.length>C.fields.length)&&(C=x);return C})}getIndexType(e,r){let a=2;return Ze.forEach(this.Ye(r),h=>this.Xe(e,h).next(_=>{_?0!==a&&_.fields.length<function(C){let x=new Vn(Fr.comparator),H=!1;for(const q of C.filters){const oe=q;oe.field.isKeyField()||("array-contains"===oe.op||"array-contains-any"===oe.op?H=!0:x=x.add(oe.field))}for(const q of C.orderBy)q.field.isKeyField()||(x=x.add(q.field));return x.size+(H?1:0)}(h)&&(a=1):a=0})).next(()=>a)}on(e,r){const a=new $i;for(const h of pu(e)){const _=r.data.field(h.fieldPath);if(null==_)return null;const C=a.Be(h.kind);kd.ye.re(_,C)}return a.Oe()}nn(e){const r=new $i;return kd.ye.re(e,r.Be(0)),r.Oe()}un(e,r){const a=new $i;return kd.ye.re(Rs(this.databaseId,r),a.Be(function(h){const _=pu(h);return 0===_.length?0:_[_.length-1].kind}(e))),a.Oe()}tn(e,r,a){if(null===a)return[];let h=[];h.push(new $i);let _=0;for(const C of pu(e)){const x=a[_++];for(const H of h)if(this.cn(r,C.fieldPath)&&jr(x))h=this.an(h,C,x);else{const q=H.Be(C.kind);kd.ye.re(x,q)}}return this.hn(h)}Ze(e,r,a){return this.tn(e,r,a.position)}hn(e){const r=[];for(let a=0;a<e.length;++a)r[a]=e[a].Oe();return r}an(e,r,a){const h=[...e],_=[];for(const C of a.arrayValue.values||[])for(const x of h){const H=new $i;H.seed(x.Oe()),kd.ye.re(C,H.Be(r.kind)),_.push(H)}return _}cn(e,r){return!!e.filters.find(a=>a instanceof Ms&&a.field.isEqual(r)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,r){const a=An(e),h=Ah(e);return(r?a.K("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.K()).next(_=>{const C=[];return Ze.forEach(_,x=>h.get([x.indexId,this.uid]).next(H=>{C.push(function(q,oe){const be=oe?new Lc(oe.sequenceNumber,new ia(Au(oe.readTime),new Nt(m(oe.documentKey)),oe.largestBatchId)):Lc.empty(),Ke=q.fields.map(([at,mt])=>new Jl(Fr.fromServerFormat(at),mt));return new ci(q.indexId,q.collectionGroup,Ke,be)}(x,H))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((a,h)=>{const _=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==_?_:vt(a.collectionGroup,h.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){const h=An(e),_=Ah(e);return this.ln(e).next(C=>h.K("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(x=>Ze.forEach(x,H=>_.put(bg(H.indexId,this.user,C,a)))))}updateIndexEntries(e,r){const a=new Map;return Ze.forEach(r,(h,_)=>{const C=a.get(h.collectionGroup);return(C?Ze.resolve(C):this.getFieldIndexes(e,h.collectionGroup)).next(x=>(a.set(h.collectionGroup,x),Ze.forEach(x,H=>this.fn(e,h,H).next(q=>{const oe=this.dn(_,H);return q.isEqual(oe)?Ze.resolve():this._n(e,_,H,q,oe)}))))})}wn(e,r,a,h){return Sh(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.un(a,r.key),documentKey:r.key.path.toArray()})}mn(e,r,a,h){return Sh(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.un(a,r.key),r.key.path.toArray()])}fn(e,r,a){const h=Sh(e);let _=new Vn(Vl);return h.J({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.un(a,r)])},(C,x)=>{_=_.add(new el(a.indexId,r,x.arrayValue,x.directionalValue))}).next(()=>_)}dn(e,r){let a=new Vn(Vl);const h=this.on(r,e);if(null==h)return a;const _=Fc(r);if(null!=_){const C=e.data.field(_.fieldPath);if(jr(C))for(const x of C.arrayValue.values||[])a=a.add(new el(r.indexId,e.key,this.nn(x),h))}else a=a.add(new el(r.indexId,e.key,xu,h));return a}_n(e,r,a,h,_){pt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const C=[];return function(x,H,q,oe,be){const Ke=x.getIterator(),at=H.getIterator();let mt=ro(Ke),qt=ro(at);for(;mt||qt;){let pn=!1,ti=!1;if(mt&&qt){const fs=q(mt,qt);fs<0?ti=!0:fs>0&&(pn=!0)}else null!=mt?ti=!0:pn=!0;pn?(oe(qt),qt=ro(at)):ti?(be(mt),mt=ro(Ke)):(mt=ro(Ke),qt=ro(at))}}(h,_,Vl,x=>{C.push(this.wn(e,r,a,x))},x=>{C.push(this.mn(e,r,a,x))}),Ze.waitFor(C)}ln(e){let r=1;return Ah(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,_)=>{_.done(),r=h.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((C,x)=>Vl(C,x)).filter((C,x,H)=>!x||0!==Vl(C,H[x-1]));const h=[];h.push(e);for(const C of a){const x=Vl(C,e),H=Vl(C,r);if(0===x)h[0]=e.Le();else if(x>0&&H<0)h.push(C),h.push(C.Le());else if(H>0)break}h.push(r);const _=[];for(let C=0;C<h.length;C+=2)_.push(IDBKeyRange.bound([h[C].indexId,this.uid,h[C].arrayValue,h[C].directionalValue,xu,[]],[h[C+1].indexId,this.uid,h[C+1].arrayValue,h[C+1].directionalValue,xu,[]]));return _}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Ag)}getMinOffset(e,r){return Ze.mapArray(this.Ye(r),a=>this.Xe(e,a).next(h=>h||jt())).next(Ag)}}function Ld(s){return Ps(s,"collectionParents")}function Sh(s){return Ps(s,"indexEntries")}function An(s){return Ps(s,"indexConfiguration")}function Ah(s){return Ps(s,"indexState")}function Ag(s){yn(0!==s.length);let e=s[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;gu(h,e)<0&&(e=h),r<h.largestBatchId&&(r=h.largestBatchId)}return new ia(e.readTime,e.documentKey,r)}const bf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(s,e,r){const a=s.store("mutations"),h=s.store("documentMutations"),_=[],C=IDBKeyRange.only(r.batchId);let x=0;const H=a.J({range:C},(oe,be,Ke)=>(x++,Ke.delete()));_.push(H.next(()=>{yn(1===x)}));const q=[];for(const oe of r.mutations){const be=Z(e,oe.key.path,r.batchId);_.push(h.delete(be)),q.push(oe.key)}return Ze.waitFor(_).next(()=>q)}function _p(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw jt();e=s.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class xh{constructor(e,r,a,h){this.userId=e,this.wt=r,this.indexManager=a,this.referenceDelegate=h,this.gn={}}static se(e,r,a,h){yn(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new xh(_,r,a,h)}checkEmpty(e){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nl(e).J({index:"userMutationsIndex",range:a},(h,_,C)=>{r=!1,C.done()}).next(()=>r)}addMutationBatch(e,r,a,h){const _=Vd(e),C=nl(e);return C.add({}).next(x=>{yn("number"==typeof x);const H=new wg(x,r,a,h),q=function(Ke,at,mt){const qt=mt.baseMutations.map(ti=>dc(Ke.ne,ti)),pn=mt.mutations.map(ti=>dc(Ke.ne,ti));return{userId:at,batchId:mt.batchId,localWriteTimeMs:mt.localWriteTime.toMillis(),baseMutations:qt,mutations:pn}}(this.wt,this.userId,H),oe=[];let be=new Vn((Ke,at)=>vt(Ke.canonicalString(),at.canonicalString()));for(const Ke of h){const at=Z(this.userId,Ke.key.path,x);be=be.add(Ke.key.path.popLast()),oe.push(C.put(q)),oe.push(_.put(at,_e))}return be.forEach(Ke=>{oe.push(this.indexManager.addToCollectionParentIndex(e,Ke))}),e.addOnCommittedListener(()=>{this.gn[x]=H.keys()}),Ze.waitFor(oe).next(()=>H)})}lookupMutationBatch(e,r){return nl(e).get(r).next(a=>a?(yn(a.userId===this.userId),Ju(this.wt,a)):null)}yn(e,r){return this.gn[r]?Ze.resolve(this.gn[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){const h=a.keys();return this.gn[r]=h,h}return null})}getNextMutationBatchAfterBatchId(e,r){const a=r+1,h=IDBKeyRange.lowerBound([this.userId,a]);let _=null;return nl(e).J({index:"userMutationsIndex",range:h},(C,x,H)=>{x.userId===this.userId&&(yn(x.batchId>=a),_=Ju(this.wt,x)),H.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return nl(e).J({index:"userMutationsIndex",range:r,reverse:!0},(h,_,C)=>{a=_.batchId,C.done()}).next(()=>a)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nl(e).K("userMutationsIndex",r).next(a=>a.map(h=>Ju(this.wt,h)))}getAllMutationBatchesAffectingDocumentKey(e,r){const a=j(this.userId,r.path),h=IDBKeyRange.lowerBound(a),_=[];return Vd(e).J({range:h},(C,x,H)=>{const[q,oe,be]=C,Ke=m(oe);if(q===this.userId&&r.path.isEqual(Ke))return nl(e).get(be).next(at=>{if(!at)throw jt();yn(at.userId===this.userId),_.push(Ju(this.wt,at))});H.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new Vn(vt);const h=[];return r.forEach(_=>{const C=j(this.userId,_.path),x=IDBKeyRange.lowerBound(C),H=Vd(e).J({range:x},(q,oe,be)=>{const[Ke,at,mt]=q,qt=m(at);Ke===this.userId&&_.path.isEqual(qt)?a=a.add(mt):be.done()});h.push(H)}),Ze.waitFor(h).next(()=>this.pn(e,a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1,_=j(this.userId,a),C=IDBKeyRange.lowerBound(_);let x=new Vn(vt);return Vd(e).J({range:C},(H,q,oe)=>{const[be,Ke,at]=H,mt=m(Ke);be===this.userId&&a.isPrefixOf(mt)?mt.length===h&&(x=x.add(at)):oe.done()}).next(()=>this.pn(e,x))}pn(e,r){const a=[],h=[];return r.forEach(_=>{h.push(nl(e).get(_).next(C=>{if(null===C)throw jt();yn(C.userId===this.userId),a.push(Ju(this.wt,C))}))}),Ze.waitFor(h).next(()=>a)}removeMutationBatch(e,r){return xg(e.ee,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.In(r.batchId)}),Ze.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ze.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Vd(e).J({range:a},(_,C,x)=>{if(_[0]===this.userId){const H=m(_[1]);h.push(H)}else x.done()}).next(()=>{yn(0===h.length)})})}containsKey(e,r){return tl(e,this.userId,r)}Tn(e){return yp(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tl(s,e,r){const a=j(e,r.path),h=a[1],_=IDBKeyRange.lowerBound(a);let C=!1;return Vd(s).J({range:_,H:!0},(x,H,q)=>{const[oe,be,Ke]=x;oe===e&&be===h&&(C=!0),q.done()}).next(()=>C)}function nl(s){return Ps(s,"mutations")}function Vd(s){return Ps(s,"documentMutations")}function yp(s){return Ps(s,"mutationQueues")}class Rh{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Rh(0)}static Rn(){return new Rh(-1)}}class Bm{constructor(e,r){this.referenceDelegate=e,this.wt=r}allocateTargetId(e){return this.bn(e).next(r=>{const a=new Rh(r.highestTargetId);return r.highestTargetId=a.next(),this.Pn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(r=>$t.fromTimestamp(new dr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.bn(e).next(h=>(h.highestListenSequenceNumber=r,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),r>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=r),this.Pn(e,h)))}addTargetData(e,r){return this.vn(e,r).next(()=>this.bn(e).next(a=>(a.targetCount+=1,this.Vn(r,a),this.Pn(e,a))))}updateTargetData(e,r){return this.vn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>If(e).delete(r.targetId)).next(()=>this.bn(e)).next(a=>(yn(a.targetCount>0),a.targetCount-=1,this.Pn(e,a)))}removeTargets(e,r,a){let h=0;const _=[];return If(e).J((C,x)=>{const H=Xu(x);H.sequenceNumber<=r&&null===a.get(H.targetId)&&(h++,_.push(this.removeTargetData(e,H)))}).next(()=>Ze.waitFor(_)).next(()=>h)}forEachTarget(e,r){return If(e).J((a,h)=>{const _=Xu(h);r(_)})}bn(e){return Ul(e).get("targetGlobalKey").next(r=>(yn(null!==r),r))}Pn(e,r){return Ul(e).put("targetGlobalKey",r)}vn(e,r){return If(e).put(mc(this.wt,r))}Vn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.bn(e).next(r=>r.targetCount)}getTargetData(e,r){const a=Bo(r),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let _=null;return If(e).J({range:h,index:"queryTargetsIndex"},(C,x,H)=>{const q=Xu(x);Tl(r,q.target)&&(_=q,H.done())}).next(()=>_)}addMatchingKeys(e,r,a){const h=[],_=Oa(e);return r.forEach(C=>{const x=bs(C.path);h.push(_.put({targetId:a,path:x})),h.push(this.referenceDelegate.addReference(e,a,C))}),Ze.waitFor(h)}removeMatchingKeys(e,r,a){const h=Oa(e);return Ze.forEach(r,_=>{const C=bs(_.path);return Ze.waitFor([h.delete([a,C]),this.referenceDelegate.removeReference(e,a,_)])})}removeMatchingKeysForTargetId(e,r){const a=Oa(e),h=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),h=Oa(e);let _=Gn();return h.J({range:a,H:!0},(C,x,H)=>{const q=m(C[1]),oe=new Nt(q);_=_.add(oe)}).next(()=>_)}containsKey(e,r){const a=bs(r.path),h=IDBKeyRange.bound([a],[Rn(a)],!1,!0);let _=0;return Oa(e).J({index:"documentTargetsIndex",H:!0,range:h},([C,x],H,q)=>{0!==C&&(_++,q.done())}).next(()=>_>0)}te(e,r){return If(e).get(r).next(a=>a?Xu(a):null)}}function If(s){return Ps(s,"targets")}function Ul(s){return Ps(s,"targetGlobal")}function Oa(s){return Ps(s,"targetDocuments")}function Ud([s,e],[r,a]){const h=vt(s,r);return 0===h?vt(e,a):h}class vp{constructor(e){this.Sn=e,this.buffer=new Vn(Ud),this.Dn=0}Cn(){return++this.Dn}xn(e){const r=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Ud(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Rg{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var r=this;pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){r.Nn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(a){yo(a)?pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield zu(a)}yield r.kn(3e5)}))}}class J_{constructor(e,r){this.On=e,this.params=r}calculateTargetCount(e,r){return this.On.Mn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(0===r)return Ze.resolve(Vo.ot);const a=new vp(r);return this.On.forEachTarget(e,h=>a.xn(h.sequenceNumber)).next(()=>this.On.Fn(e,h=>a.xn(h))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.On.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.On.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),Ze.resolve(bf)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bf):this.$n(e,r))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,r){let a,h,_,C,x,H,q;const oe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(be=>(be>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${be}`),h=this.params.maximumSequenceNumbersToCollect):h=be,C=Date.now(),this.nthSequenceNumber(e,h))).next(be=>(a=be,x=Date.now(),this.removeTargets(e,a,r))).next(be=>(_=be,H=Date.now(),this.removeOrphanedDocuments(e,a))).next(be=>(q=Date.now(),Wu()<=nn.in.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-oe}ms\n\tDetermined least recently used ${h} in `+(x-C)+`ms\n\tRemoved ${_} targets in `+(H-x)+`ms\n\tRemoved ${be} documents in `+(q-H)+`ms\nTotal Duration: ${q-oe}ms`),Ze.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:_,documentsRemoved:be})))}}class Ep{constructor(e,r){this.db=e,this.garbageCollector=new J_(this,r)}Mn(e){const r=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(h=>a+h))}Bn(e){let r=0;return this.Fn(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Fn(e,r){return this.Ln(e,(a,h)=>r(h))}addReference(e,r,a){return wp(e,a)}removeReference(e,r,a){return wp(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return wp(e,r)}Un(e,r){return function(a,h){let _=!1;return yp(a).Y(C=>tl(a,C,h).next(x=>(x&&(_=!0),Ze.resolve(!x)))).next(()=>_)}(e,r)}removeOrphanedDocuments(e,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let _=0;return this.Ln(e,(C,x)=>{if(x<=r){const H=this.Un(e,C).next(q=>{if(!q)return _++,a.getEntry(e,C).next(()=>(a.removeEntry(C,$t.min()),Oa(e).delete([0,bs(C.path)])))});h.push(H)}}).next(()=>Ze.waitFor(h)).next(()=>a.apply(e)).next(()=>_)}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return wp(e,r)}Ln(e,r){const a=Oa(e);let h,_=Vo.ot;return a.J({index:"documentTargetsIndex"},([C,x],{path:H,sequenceNumber:q})=>{0===C?(_!==Vo.ot&&r(new Nt(m(h)),_),_=q,h=H):_=Vo.ot}).next(()=>{_!==Vo.ot&&r(new Nt(m(h)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wp(s,e){return Oa(s).put((a=s.currentSequenceNumber,{targetId:0,path:bs(e.path),sequenceNumber:a}));var a}class Ng{constructor(){this.changes=new Du(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,di.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?Ze.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cv{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return yc(e).put(a)}removeEntry(e,r,a){return yc(e).delete(function(h,_){const C=h.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Od(_),C[C.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.qn(e,a)))}getEntry(e,r){let a=di.newInvalidDocument(r);return yc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bp(r))},(h,_)=>{a=this.Kn(r,_)}).next(()=>a)}Gn(e,r){let a={size:0,document:di.newInvalidDocument(r)};return yc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bp(r))},(h,_)=>{a={document:this.Kn(r,_),size:_p(_)}}).next(()=>a)}getEntries(e,r){let a=Ii();return this.Qn(e,r,(h,_)=>{const C=this.Kn(h,_);a=a.insert(h,C)}).next(()=>a)}jn(e,r){let a=Ii(),h=new Jr(Nt.comparator);return this.Qn(e,r,(_,C)=>{const x=this.Kn(_,C);a=a.insert(_,x),h=h.insert(_,_p(C))}).next(()=>({documents:a,Wn:h}))}Qn(e,r,a){if(r.isEmpty())return Ze.resolve();let h=new Vn(ey);r.forEach(H=>h=h.add(H));const _=IDBKeyRange.bound(bp(h.first()),bp(h.last())),C=h.getIterator();let x=C.getNext();return yc(e).J({index:"documentKeyIndex",range:_},(H,q,oe)=>{const be=Nt.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;x&&ey(x,be)<0;)a(x,null),x=C.getNext();x&&x.isEqual(be)&&(a(x,q),x=C.hasNext()?C.getNext():null),x?oe.q(bp(x)):oe.done()}).next(()=>{for(;x;)a(x,null),x=C.hasNext()?C.getNext():null})}getAllFromCollection(e,r,a){const h=[r.popLast().toArray(),r.lastSegment(),Od(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],_=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yc(e).K(IDBKeyRange.bound(h,_,!0)).next(C=>{let x=Ii();for(const H of C){const q=this.Kn(Nt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);x=x.insert(q.key,q)}return x})}getAllFromCollectionGroup(e,r,a,h){let _=Ii();const C=X_(r,a),x=X_(r,ia.max());return yc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,x,!0)},(H,q,oe)=>{const be=this.Kn(Nt.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);_=_.insert(be.key,be),_.size===h&&oe.done()}).next(()=>_)}newChangeBuffer(e){return new Pg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Cp(e).get("remoteDocumentGlobalKey").next(r=>(yn(!!r),r))}qn(e,r){return Cp(e).put("remoteDocumentGlobalKey",r)}Kn(e,r){if(r){const a=function(s,e){let r;if(e.document)r=Cr(s.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=Nt.fromSegments(e.noDocument.path),h=Au(e.noDocument.readTime);r=di.newNoDocument(a,h),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return jt();{const a=Nt.fromSegments(e.unknownDocument.path),h=Au(e.unknownDocument.version);r=di.newUnknownDocument(a,h)}}return e.readTime&&r.setReadTime(function(a){const h=new dr(a[0],a[1]);return $t.fromTimestamp(h)}(e.readTime)),r}(this.wt,r);if(!a.isNoDocument()||!a.version.isEqual($t.min()))return a}return di.newInvalidDocument(e)}}function Mg(s){return new cv(s)}class Pg extends Ng{constructor(e,r){super(),this.zn=e,this.trackRemovals=r,this.Hn=new Du(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const r=[];let a=0,h=new Vn((_,C)=>vt(_.canonicalString(),C.canonicalString()));return this.changes.forEach((_,C)=>{const x=this.Hn.get(_);if(r.push(this.zn.removeEntry(e,_,x.readTime)),C.isValidDocument()){const H=_a(this.zn.wt,C);h=h.add(_.path.popLast()),a+=_p(H)-x.size,r.push(this.zn.addEntry(e,_,H))}else if(a-=x.size,this.trackRemovals){const H=_a(this.zn.wt,C.convertToNoDocument($t.min()));r.push(this.zn.addEntry(e,_,H))}}),h.forEach(_=>{r.push(this.zn.indexManager.addToCollectionParentIndex(e,_))}),r.push(this.zn.updateMetadata(e,a)),Ze.waitFor(r)}getFromCache(e,r){return this.zn.Gn(e,r).next(a=>(this.Hn.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.zn.jn(e,r).next(({documents:a,Wn:h})=>(h.forEach((_,C)=>{this.Hn.set(_,{size:C,readTime:a.get(_).readTime})}),a))}}function Cp(s){return Ps(s,"remoteDocumentGlobal")}function yc(s){return Ps(s,"remoteDocumentsV14")}function bp(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function X_(s,e){const r=e.documentKey.path.toArray();return[s,Od(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function ey(s,e){const r=s.path.toArray(),a=e.path.toArray();let h=0;for(let _=0;_<r.length-2&&_<a.length-2;++_)if(h=vt(r[_],a[_]),h)return h;return h=vt(r.length,a.length),h||(h=vt(r[r.length-2],a[a.length-2]),h||vt(r[r.length-1],a[a.length-1]))}class ty{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Ip{constructor(e,r,a,h){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(h=>(a=h,this.getBaseDocument(e,r,a))).next(h=>(null!==a&&bu(a.mutation,h,Uo.empty(),dr.now()),h))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,Gn()).next(()=>a))}getLocalViewOfDocuments(e,r,a=Gn()){const h=Ra();return this.populateOverlays(e,h,r).next(()=>this.computeViews(e,r,h,a).next(_=>{let C=ds();return _.forEach((x,H)=>{C=C.insert(x,H.overlayedDocument)}),C}))}getOverlayedDocuments(e,r){const a=Ra();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,Gn()))}populateOverlays(e,r,a){const h=[];return a.forEach(_=>{r.has(_)||h.push(_)}),this.documentOverlayCache.getOverlays(e,h).next(_=>{_.forEach((C,x)=>{r.set(C,x)})})}computeViews(e,r,a,h){let _=Ii();const C=ts(),x=ts();return r.forEach((H,q)=>{const oe=a.get(q.key);h.has(q.key)&&(void 0===oe||oe.mutation instanceof qn)?_=_.insert(q.key,q):void 0!==oe&&(C.set(q.key,oe.mutation.getFieldMask()),bu(oe.mutation,q,oe.mutation.getFieldMask(),dr.now()))}),this.recalculateAndSaveOverlays(e,_).next(H=>(H.forEach((q,oe)=>C.set(q,oe)),r.forEach((q,oe)=>{var be;return x.set(q,new ty(oe,null!==(be=C.get(q))&&void 0!==be?be:null))}),x))}recalculateAndSaveOverlays(e,r){const a=ts();let h=new Jr((C,x)=>C-x),_=Gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(C=>{for(const x of C)x.keys().forEach(H=>{const q=r.get(H);if(null===q)return;let oe=a.get(H)||Uo.empty();oe=x.applyToLocalView(q,oe),a.set(H,oe);const be=(h.get(x.batchId)||Gn()).add(H);h=h.insert(x.batchId,be)})}).next(()=>{const C=[],x=h.getReverseIterator();for(;x.hasNext();){const H=x.getNext(),q=H.key,oe=H.value,be=Na();oe.forEach(Ke=>{if(!_.has(Ke)){const at=pf(r.get(Ke),a.get(Ke));null!==at&&be.set(Ke,at),_=_.add(Ke)}}),C.push(this.documentOverlayCache.saveOverlays(e,q,be))}return Ze.waitFor(C)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a){return Nt.isDocumentKey((h=r).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Ja(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a):this.getDocumentsMatchingCollectionQuery(e,r,a);var h}getNextDocuments(e,r,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,h).next(_=>{const C=h-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,h-_.size):Ze.resolve(Ra());let x=-1,H=_;return C.next(q=>Ze.forEach(q,(oe,be)=>(x<be.largestBatchId&&(x=be.largestBatchId),_.get(oe)?Ze.resolve():this.getBaseDocument(e,oe,be).next(Ke=>{H=H.insert(oe,Ke)}))).next(()=>this.populateOverlays(e,q,_)).next(()=>this.computeViews(e,H,q,Gn())).next(oe=>({batchId:x,changes:Eh(oe)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Nt(r)).next(a=>{let h=ds();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,r,a){const h=r.collectionGroup;let _=ds();return this.indexManager.getCollectionParents(e,h).next(C=>Ze.forEach(C,x=>{const H=(q=r,oe=x.child(h),new jo(oe,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,oe;return this.getDocumentsMatchingCollectionQuery(e,H,a).next(q=>{q.forEach((oe,be)=>{_=_.insert(oe,be)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,r,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,r.path,a).next(_=>(h=_,this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId))).next(_=>{_.forEach((x,H)=>{const q=H.getKey();null===h.get(q)&&(h=h.insert(q,di.newInvalidDocument(q)))});let C=ds();return h.forEach((x,H)=>{const q=_.get(x);void 0!==q&&bu(q.mutation,H,Uo.empty(),dr.now()),lf(r,H)&&(C=C.insert(x,H))}),C})}getBaseDocument(e,r,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,r):Ze.resolve(di.newInvalidDocument(r))}}class jm{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,r){return Ze.resolve(this.Jn.get(r))}saveBundleMetadata(e,r){var a;return this.Jn.set(r.id,{id:(a=r).id,version:a.version,createTime:qs(a.createTime)}),Ze.resolve()}getNamedQuery(e,r){return Ze.resolve(this.Yn.get(r))}saveNamedQuery(e,r){return this.Yn.set(r.name,{name:(a=r).name,query:Fl(a.bundledQuery),readTime:qs(a.readTime)}),Ze.resolve();var a}}class ny{constructor(){this.overlays=new Jr(Nt.comparator),this.Xn=new Map}getOverlay(e,r){return Ze.resolve(this.overlays.get(r))}getOverlays(e,r){const a=Ra();return Ze.forEach(r,h=>this.getOverlay(e,h).next(_=>{null!==_&&a.set(h,_)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((h,_)=>{this.ie(e,r,_)}),Ze.resolve()}removeOverlaysForBatchId(e,r,a){const h=this.Xn.get(a);return void 0!==h&&(h.forEach(_=>this.overlays=this.overlays.remove(_)),this.Xn.delete(a)),Ze.resolve()}getOverlaysForCollection(e,r,a){const h=Ra(),_=r.length+1,C=new Nt(r.child("")),x=this.overlays.getIteratorFrom(C);for(;x.hasNext();){const H=x.getNext().value,q=H.getKey();if(!r.isPrefixOf(q.path))break;q.path.length===_&&H.largestBatchId>a&&h.set(H.getKey(),H)}return Ze.resolve(h)}getOverlaysForCollectionGroup(e,r,a,h){let _=new Jr((q,oe)=>q-oe);const C=this.overlays.getIterator();for(;C.hasNext();){const q=C.getNext().value;if(q.getKey().getCollectionGroup()===r&&q.largestBatchId>a){let oe=_.get(q.largestBatchId);null===oe&&(oe=Ra(),_=_.insert(q.largestBatchId,oe)),oe.set(q.getKey(),q)}}const x=Ra(),H=_.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((q,oe)=>x.set(q,oe)),!(x.size()>=h)););return Ze.resolve(x)}ie(e,r,a){const h=this.overlays.get(a.key);if(null!==h){const C=this.Xn.get(h.largestBatchId).delete(a.key);this.Xn.set(h.largestBatchId,C)}this.overlays=this.overlays.insert(a.key,new pp(r,a));let _=this.Xn.get(r);void 0===_&&(_=Gn(),this.Xn.set(r,_)),this.Xn.set(r,_.add(a.key))}}class $m{constructor(){this.Zn=new Vn(wo.ts),this.es=new Vn(wo.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,r){const a=new wo(e,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.rs(new wo(e,r))}os(e,r){e.forEach(a=>this.removeReference(a,r))}us(e){const r=new Nt(new Ln([])),a=new wo(r,e),h=new wo(r,e+1),_=[];return this.es.forEachInRange([a,h],C=>{this.rs(C),_.push(C.key)}),_}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const r=new Nt(new Ln([])),a=new wo(r,e),h=new wo(r,e+1);let _=Gn();return this.es.forEachInRange([a,h],C=>{_=_.add(C.key)}),_}containsKey(e){const r=new wo(e,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&e.isEqual(a.key)}}class wo{constructor(e,r){this.key=e,this.ls=r}static ts(e,r){return Nt.comparator(e.key,r.key)||vt(e.ls,r.ls)}static ns(e,r){return vt(e.ls,r.ls)||Nt.comparator(e.key,r.key)}}class Hm{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.fs=1,this.ds=new Vn(wo.ts)}checkEmpty(e){return Ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,a,h){const _=this.fs;this.fs++;const C=new wg(_,r,a,h);this.mutationQueue.push(C);for(const x of h)this.ds=this.ds.add(new wo(x.key,_)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Ze.resolve(C)}lookupMutationBatch(e,r){return Ze.resolve(this._s(r))}getNextMutationBatchAfterBatchId(e,r){const h=this.ws(r+1),_=h<0?0:h;return Ze.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return Ze.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new wo(r,0),h=new wo(r,Number.POSITIVE_INFINITY),_=[];return this.ds.forEachInRange([a,h],C=>{const x=this._s(C.ls);_.push(x)}),Ze.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new Vn(vt);return r.forEach(h=>{const _=new wo(h,0),C=new wo(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([_,C],x=>{a=a.add(x.ls)})}),Ze.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1;let _=a;Nt.isDocumentKey(_)||(_=_.child(""));const C=new wo(new Nt(_),0);let x=new Vn(vt);return this.ds.forEachWhile(H=>{const q=H.key.path;return!!a.isPrefixOf(q)&&(q.length===h&&(x=x.add(H.ls)),!0)},C),Ze.resolve(this.gs(x))}gs(e){const r=[];return e.forEach(a=>{const h=this._s(a);null!==h&&r.push(h)}),r}removeMutationBatch(e,r){yn(0===this.ys(r.batchId,"removed")),this.mutationQueue.shift();let a=this.ds;return Ze.forEach(r.mutations,h=>{const _=new wo(h.key,r.batchId);return a=a.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.ds=a})}In(e){}containsKey(e,r){const a=new wo(r,0),h=this.ds.firstAfterOrEqual(a);return Ze.resolve(r.isEqual(h&&h.key))}performConsistencyCheck(e){return Ze.resolve()}ys(e,r){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const r=this.ws(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class dv{constructor(e){this.ps=e,this.docs=new Jr(Nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,h=this.docs.get(a),_=h?h.size:0,C=this.ps(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:C}),this.size+=C-_,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return Ze.resolve(a?a.document.mutableCopy():di.newInvalidDocument(r))}getEntries(e,r){let a=Ii();return r.forEach(h=>{const _=this.docs.get(h);a=a.insert(h,_?_.document.mutableCopy():di.newInvalidDocument(h))}),Ze.resolve(a)}getAllFromCollection(e,r,a){let h=Ii();const _=new Nt(r.child("")),C=this.docs.getIteratorFrom(_);for(;C.hasNext();){const{key:x,value:{document:H}}=C.getNext();if(!r.isPrefixOf(x.path))break;x.path.length>r.length+1||gu(yd(H),a)<=0||(h=h.insert(H.key,H.mutableCopy()))}return Ze.resolve(h)}getAllFromCollectionGroup(e,r,a,h){jt()}Is(e,r){return Ze.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new Xc(this)}getSize(e){return Ze.resolve(this.size)}}class Xc extends Ng{constructor(e){super(),this.zn=e}applyChanges(e){const r=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?r.push(this.zn.addEntry(e,h)):this.zn.removeEntry(a)}),Ze.waitFor(r)}getFromCache(e,r){return this.zn.getEntry(e,r)}getAllFromCache(e,r){return this.zn.getEntries(e,r)}}class Og{constructor(e){this.persistence=e,this.Ts=new Du(r=>Bo(r),Tl),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Es=0,this.As=new $m,this.targetCount=0,this.Rs=Rh.An()}forEachTarget(e,r){return this.Ts.forEach((a,h)=>r(h)),Ze.resolve()}getLastRemoteSnapshotVersion(e){return Ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ze.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ze.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Es&&(this.Es=r),Ze.resolve()}vn(e){this.Ts.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Rs=new Rh(r),this.highestTargetId=r),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,r){return this.vn(r),this.targetCount+=1,Ze.resolve()}updateTargetData(e,r){return this.vn(r),Ze.resolve()}removeTargetData(e,r){return this.Ts.delete(r.target),this.As.us(r.targetId),this.targetCount-=1,Ze.resolve()}removeTargets(e,r,a){let h=0;const _=[];return this.Ts.forEach((C,x)=>{x.sequenceNumber<=r&&null===a.get(x.targetId)&&(this.Ts.delete(C),_.push(this.removeMatchingKeysForTargetId(e,x.targetId)),h++)}),Ze.waitFor(_).next(()=>h)}getTargetCount(e){return Ze.resolve(this.targetCount)}getTargetData(e,r){const a=this.Ts.get(r)||null;return Ze.resolve(a)}addMatchingKeys(e,r,a){return this.As.ss(r,a),Ze.resolve()}removeMatchingKeys(e,r,a){this.As.os(r,a);const h=this.persistence.referenceDelegate,_=[];return h&&r.forEach(C=>{_.push(h.markPotentiallyOrphaned(e,C))}),Ze.waitFor(_)}removeMatchingKeysForTargetId(e,r){return this.As.us(r),Ze.resolve()}getMatchingKeysForTargetId(e,r){const a=this.As.hs(r);return Ze.resolve(a)}containsKey(e,r){return Ze.resolve(this.As.containsKey(r))}}class Gm{constructor(e,r){this.bs={},this.overlays={},this.Ps=new Vo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Og(this),this.indexManager=new Fd,this.remoteDocumentCache=new dv(a=>this.referenceDelegate.Ss(a)),this.wt=new Cg(r),this.Ds=new jm(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new ny,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.bs[e.toKey()];return a||(a=new Hm(r,this.referenceDelegate),this.bs[e.toKey()]=a),a}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,r,a){pt("MemoryPersistence","Starting transaction:",e);const h=new Wm(this.Ps.next());return this.referenceDelegate.Cs(),a(h).next(_=>this.referenceDelegate.xs(h).next(()=>_)).toPromise().then(_=>(h.raiseOnCommittedEvent(),_))}Ns(e,r){return Ze.or(Object.values(this.bs).map(a=>()=>a.containsKey(e,r)))}}class Wm extends rf{constructor(e){super(),this.currentSequenceNumber=e}}class Nh{constructor(e){this.persistence=e,this.ks=new $m,this.Os=null}static Ms(e){return new Nh(e)}get Fs(){if(this.Os)return this.Os;throw jt()}addReference(e,r,a){return this.ks.addReference(a,r),this.Fs.delete(a.toString()),Ze.resolve()}removeReference(e,r,a){return this.ks.removeReference(a,r),this.Fs.add(a.toString()),Ze.resolve()}markPotentiallyOrphaned(e,r){return this.Fs.add(r.toString()),Ze.resolve()}removeTarget(e,r){this.ks.us(r.targetId).forEach(h=>this.Fs.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(h=>{h.forEach(_=>this.Fs.add(_.toString()))}).next(()=>a.removeTargetData(e,r))}Cs(){this.Os=new Set}xs(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ze.forEach(this.Fs,a=>{const h=Nt.fromPath(a);return this.$s(e,h).next(_=>{_||r.removeEntry(h,$t.min())})}).next(()=>(this.Os=null,r.apply(e)))}updateLimboDocument(e,r){return this.$s(e,r).next(a=>{a?this.Fs.delete(r.toString()):this.Fs.add(r.toString())})}Ss(e){return 0}$s(e,r){return Ze.or([()=>Ze.resolve(this.ks.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ns(e,r)])}}class zm{constructor(e){this.wt=e}O(e,r,a,h){const _=new _i("createOrUpgrade",r);var x;a<1&&h>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b,{unique:!0}),x.createObjectStore("documentMutations"),Df(e),function(x){x.createObjectStore("remoteDocuments")}(e));let C=Ze.resolve();return a<3&&h>=3&&(0!==a&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),Df(e)),C=C.next(()=>function(x){const H=x.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",q)}(_))),a<4&&h>=4&&(0!==a&&(C=C.next(()=>function(x,H){return H.store("mutations").K().next(q=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b,{unique:!0});const oe=H.store("mutations"),be=q.map(Ke=>oe.put(Ke));return Ze.waitFor(be)})}(e,_))),C=C.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(C=C.next(()=>this.Bs(_))),a<6&&h>=6&&(C=C.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(_)))),a<7&&h>=7&&(C=C.next(()=>this.Us(_))),a<8&&h>=8&&(C=C.next(()=>this.qs(e,_))),a<9&&h>=9&&(C=C.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(C=C.next(()=>this.Ks(_))),a<11&&h>=11&&(C=C.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(C=C.next(()=>{!function(x){const H=x.createObjectStore("documentOverlays",{keyPath:bh});H.createIndex("collectionPathOverlayIndex",pc,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Pd,{unique:!1})}(e)})),a<13&&h>=13&&(C=C.next(()=>function(x){const H=x.createObjectStore("remoteDocumentsV14",{keyPath:je});H.createIndex("documentKeyIndex",wt),H.createIndex("collectionGroupIndex",ft)}(e)).next(()=>this.Gs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(C=C.next(()=>this.Qs(e,_))),a<15&&h>=15&&(C=C.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:kl}).createIndex("sequenceNumberIndex",Kc,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Ef}).createIndex("documentKeyIndex",Md,{unique:!1})}(e))),C}Ls(e){let r=0;return e.store("remoteDocuments").J((a,h)=>{r+=_p(h)}).next(()=>{const a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Bs(e){const r=e.store("mutationQueues"),a=e.store("mutations");return r.K().next(h=>Ze.forEach(h,_=>{const C=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return a.K("userMutationsIndex",C).next(x=>Ze.forEach(x,H=>{yn(H.userId===_.userId);const q=Ju(this.wt,H);return xg(e,_.userId,q).next(()=>{})}))}))}Us(e){const r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const _=[];return a.J((C,x)=>{const H=new Ln(C),q=[0,bs(H)];_.push(r.get(q).next(oe=>oe?Ze.resolve():r.put({targetId:0,path:bs(H),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>Ze.waitFor(_))})}qs(e,r){e.createObjectStore("collectionParents",{keyPath:Ks});const a=r.store("collectionParents"),h=new mp,_=C=>{if(h.add(C)){const x=C.lastSegment(),H=C.popLast();return a.put({collectionId:x,parent:bs(H)})}};return r.store("remoteDocuments").J({H:!0},(C,x)=>{const H=new Ln(C);return _(H.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([C,x,H],q)=>{const oe=m(x);return _(oe.popLast())}))}Ks(e){const r=e.store("targets");return r.J((a,h)=>{const _=Xu(h),C=mc(this.wt,_);return r.put(C)})}Gs(e,r){const a=r.store("remoteDocuments"),h=[];return a.J((_,C)=>{const x=r.store("remoteDocumentsV14"),H=(q=C,q.document?new Nt(Ln.fromString(q.document.name).popFirst(5)):q.noDocument?Nt.fromSegments(q.noDocument.path):q.unknownDocument?Nt.fromSegments(q.unknownDocument.path):jt()).path.toArray();var q;const oe={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};h.push(x.put(oe))}).next(()=>Ze.waitFor(h))}Qs(e,r){const a=r.store("mutations"),h=Mg(this.wt),_=new Gm(Nh.Ms,this.wt.ne);return a.K().next(C=>{const x=new Map;return C.forEach(H=>{var q;let oe=null!==(q=x.get(H.userId))&&void 0!==q?q:Gn();Ju(this.wt,H).keys().forEach(be=>oe=oe.add(be)),x.set(H.userId,oe)}),Ze.forEach(x,(H,q)=>{const oe=new li(q),be=_c.se(this.wt,oe),Ke=_.getIndexManager(oe),at=xh.se(oe,this.wt,Ke,_.referenceDelegate);return new Ip(h,at,be,Ke).recalculateAndSaveOverlaysForDocumentKeys(new Qc(r,Vo.ot),H).next()})})}}function Df(s){s.createObjectStore("targetDocuments",{keyPath:Qt}).createIndex("documentTargetsIndex",pr,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kt,{unique:!0}),s.createObjectStore("targetGlobal")}const kg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rl{constructor(e,r,a,h,_,C,x,H,q,oe,be=14){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.js=_,this.window=C,this.document=x,this.Ws=q,this.zs=oe,this.Hs=be,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=Ke=>Promise.resolve(),!rl.V())throw new ht(Qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ep(this,h),this.ei=r+"main",this.wt=new Cg(H),this.ni=new no(this.ei,this.Hs,new zm(this.wt)),this.Vs=new Bm(this.referenceDelegate,this.wt),this.remoteDocumentCache=Mg(this.wt),this.Ds=new wf,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===oe&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ht(Qe.FAILED_PRECONDITION,kg);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Vo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var r=this;return this.ti=function(){var a=(0,Ce.Z)(function*(h){if(r.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var r=(0,Ce.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ce.Z)(function*(){r.started&&(yield r.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(r=>{r||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(r=>this.isPrimary&&!r?this.li(e).next(()=>!1):!!r&&this.fi(e).next(()=>!0))).catch(e=>{if(yo(e))return pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Bd(e).get("owner").next(r=>Ze.resolve(this.di(r)))}_i(e){return Dp(e).delete(this.clientId)}wi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=Ps(a,"clientMetadata");return h.K().next(_=>{const C=e.gi(_,18e5),x=_.filter(H=>-1===C.indexOf(H));return Ze.forEach(x,H=>h.delete(H.clientId)).next(()=>x)})}).catch(()=>[]);if(e.si)for(const a of r)e.si.removeItem(e.yi(a.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Ze.resolve(!0):Bd(e).get("owner").next(r=>{if(null!==r&&this.mi(r.leaseTimestampMs,5e3)&&!this.pi(r.ownerId)){if(this.di(r)&&this.networkEnabled)return!0;if(!this.di(r)){if(!r.allowTabSynchronization)throw new ht(Qe.FAILED_PRECONDITION,kg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dp(e).K().next(a=>void 0===this.gi(a,5e3).find(h=>{if(this.clientId!==h.clientId){const C=!this.inForeground&&h.inForeground,x=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||C&&x)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&pt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const a=new Qc(r,Vo.ot);return e.li(a).next(()=>e._i(a))}),e.ni.close(),e.Ai()})()}gi(e,r){return e.filter(a=>this.mi(a.updateTimeMs,r)&&!this.pi(a.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Dp(e).K().next(r=>this.gi(r,18e5).map(a=>a.clientId)))}get started(){return this.vs}getMutationQueue(e,r){return xh.se(e,this.wt,r,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Sg(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return _c.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,r,a){pt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===r?"readonly":"readwrite",_=15===(C=this.Hs)?aa:14===C?Yc:13===C?Dh:12===C?Zc:11===C?Ih:void jt();var C;let x;return this.ni.runTransaction(e,h,_,H=>(x=new Qc(H,this.Ps?this.Ps.next():Vo.ot),"readwrite-primary"===r?this.ai(x).next(q=>!!q||this.hi(x)).next(q=>{if(!q)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ht(Qe.FAILED_PRECONDITION,nf);return a(x)}).next(q=>this.fi(x).next(()=>q)):this.bi(x).next(()=>a(x)))).then(H=>(x.raiseOnCommittedEvent(),H))}bi(e){return Bd(e).get("owner").next(r=>{if(null!==r&&this.mi(r.leaseTimestampMs,5e3)&&!this.pi(r.ownerId)&&!this.di(r)&&!(this.zs||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ht(Qe.FAILED_PRECONDITION,kg)})}fi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bd(e).put("owner",r)}static V(){return no.V()}li(e){const r=Bd(e);return r.get("owner").next(a=>this.di(a)?(pt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ze.resolve())}mi(e,r){const a=Date.now();return!(e<a-r||e>a&&(kr(`Detected an update time that is in the future: ${e} > ${a}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,St.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var r;try{const a=null!==(null===(r=this.si)||void 0===r?void 0:r.getItem(this.yi(e)));return pt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return kr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bd(s){return Ps(s,"owner")}function Dp(s){return Ps(s,"clientMetadata")}function Fg(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class ed{constructor(e,r,a,h){this.targetId=e,this.fromCache=r,this.Pi=a,this.vi=h}static Vi(e,r){let a=Gn(),h=Gn();for(const _ of r.docChanges)switch(_.type){case 0:a=a.add(_.doc.key);break;case 1:h=h.add(_.doc.key)}return new ed(e,r.fromCache,a,h)}}class Lg{constructor(){this.Si=!1}initialize(e,r){this.Di=e,this.indexManager=r,this.Si=!0}getDocumentsMatchingQuery(e,r,a,h){return this.Ci(e,r).next(_=>_||this.xi(e,r,h,a)).next(_=>_||this.Ni(e,r))}Ci(e,r){return Ze.resolve(null)}xi(e,r,a,h){return function(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}(r)||h.isEqual($t.min())?this.Ni(e,r):this.Di.getDocuments(e,a).next(_=>{const C=this.ki(r,_);return this.Oi(r,C,a,h)?this.Ni(e,r):(Wu()<=nn.in.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Hc(r)),this.Mi(e,C,r,uh(h,-1)))})}ki(e,r){let a=new Vn(op(e));return r.forEach((h,_)=>{lf(e,_)&&(a=a.add(_))}),a}Oi(e,r,a,h){if(null===e.limit)return!1;if(a.size!==r.size)return!0;const _="F"===e.limitType?r.last():r.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(h)>0)}Ni(e,r){return Wu()<=nn.in.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",Hc(r)),this.Di.getDocumentsMatchingQuery(e,r,ia.min())}Mi(e,r,a,h){return this.Di.getDocumentsMatchingQuery(e,a,h).next(_=>(r.forEach(C=>{_=_.insert(C.key,C)}),_))}}class qm{constructor(e,r,a,h){this.persistence=e,this.Fi=r,this.wt=h,this.$i=new Jr(vt),this.Bi=new Du(_=>Bo(_),Tl),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(a)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ip(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.$i))}}function Km(s,e,r,a){return new qm(s,e,r,a)}function Zm(s,e){return vc.apply(this,arguments)}function vc(){return vc=(0,Ce.Z)(function*(s,e){const r=Vt(s);return yield r.persistence.runTransaction("Handle user change","readonly",a=>{let h;return r.mutationQueue.getAllMutationBatches(a).next(_=>(h=_,r.qi(e),r.mutationQueue.getAllMutationBatches(a))).next(_=>{const C=[],x=[];let H=Gn();for(const q of h){C.push(q.batchId);for(const oe of q.mutations)H=H.add(oe.key)}for(const q of _){x.push(q.batchId);for(const oe of q.mutations)H=H.add(oe.key)}return r.localDocuments.getDocuments(a,H).next(q=>({Ki:q,removedBatchIds:C,addedBatchIds:x}))})})}),vc.apply(this,arguments)}function td(s,e){const r=Vt(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),_=r.Ui.newChangeBuffer({trackRemovals:!0});return function(C,x,H,q){const oe=H.batch,be=oe.keys();let Ke=Ze.resolve();return be.forEach(at=>{Ke=Ke.next(()=>q.getEntry(x,at)).next(mt=>{const qt=H.docVersions.get(at);yn(null!==qt),mt.version.compareTo(qt)<0&&(oe.applyToRemoteDocument(mt,H),mt.isValidDocument()&&(mt.setReadTime(H.commitVersion),q.addEntry(mt)))})}),Ke.next(()=>C.mutationQueue.removeMutationBatch(x,oe))}(r,a,e,_).next(()=>_.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(C){let x=Gn();for(let H=0;H<C.mutationResults.length;++H)C.mutationResults[H].transformResults.length>0&&(x=x.add(C.batch.mutations[H].key));return x}(e))).next(()=>r.localDocuments.getDocuments(a,h))})}function Tp(s){const e=Vt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Vs.getLastRemoteSnapshotVersion(r))}function Mh(s,e){const r=Vt(s),a=e.snapshotVersion;let h=r.$i;return r.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const C=r.Ui.newChangeBuffer({trackRemovals:!0});h=r.$i;const x=[];e.targetChanges.forEach((oe,be)=>{const Ke=h.get(be);if(!Ke)return;x.push(r.Vs.removeMatchingKeys(_,oe.removedDocuments,be).next(()=>r.Vs.addMatchingKeys(_,oe.addedDocuments,be)));let at=Ke.withSequenceNumber(_.currentSequenceNumber);var mt,qt,pn;e.targetMismatches.has(be)?at=at.withResumeToken(Xr.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):oe.resumeToken.approximateByteSize()>0&&(at=at.withResumeToken(oe.resumeToken,a)),h=h.insert(be,at),qt=at,pn=oe,(0===(mt=Ke).resumeToken.approximateByteSize()||qt.snapshotVersion.toMicroseconds()-mt.snapshotVersion.toMicroseconds()>=3e8||pn.addedDocuments.size+pn.modifiedDocuments.size+pn.removedDocuments.size>0)&&x.push(r.Vs.updateTargetData(_,at))});let H=Ii(),q=Gn();if(e.documentUpdates.forEach(oe=>{e.resolvedLimboDocuments.has(oe)&&x.push(r.persistence.referenceDelegate.updateLimboDocument(_,oe))}),x.push(jd(_,C,e.documentUpdates).next(oe=>{H=oe.Gi,q=oe.Qi})),!a.isEqual($t.min())){const oe=r.Vs.getLastRemoteSnapshotVersion(_).next(be=>r.Vs.setTargetsMetadata(_,_.currentSequenceNumber,a));x.push(oe)}return Ze.waitFor(x).next(()=>C.apply(_)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,H,q)).next(()=>H)}).then(_=>(r.$i=h,_))}function jd(s,e,r){let a=Gn(),h=Gn();return r.forEach(_=>a=a.add(_)),e.getEntries(s,a).next(_=>{let C=Ii();return r.forEach((x,H)=>{const q=_.get(x);H.isFoundDocument()!==q.isFoundDocument()&&(h=h.add(x)),H.isNoDocument()&&H.version.isEqual($t.min())?(e.removeEntry(x,H.readTime),C=C.insert(x,H)):!q.isValidDocument()||H.version.compareTo(q.version)>0||0===H.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(H),C=C.insert(x,H)):pt("LocalStore","Ignoring outdated watch update for ",x,". Current version:",q.version," Watch version:",H.version)}),{Gi:C,Qi:h}})}function nu(s,e){const r=Vt(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function $d(s,e){const r=Vt(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return r.Vs.getTargetData(a,e).next(_=>_?(h=_,Ze.resolve(h)):r.Vs.allocateTargetId(a).next(C=>(h=new gc(e,C,0,a.currentSequenceNumber),r.Vs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=r.$i.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(r.$i=r.$i.insert(a.targetId,a),r.Bi.set(e,a.targetId)),a})}function nd(s,e,r){return il.apply(this,arguments)}function il(){return il=(0,Ce.Z)(function*(s,e,r){const a=Vt(s),h=a.$i.get(e),_=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",_,C=>a.persistence.referenceDelegate.removeTarget(C,h)))}catch(C){if(!yo(C))throw C;pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}a.$i=a.$i.remove(e),a.Bi.delete(h.target)}),il.apply(this,arguments)}function Ec(s,e,r){const a=Vt(s);let h=$t.min(),_=Gn();return a.persistence.runTransaction("Execute query","readonly",C=>function(x,H,q){const oe=Vt(x),be=oe.Bi.get(q);return void 0!==be?Ze.resolve(oe.$i.get(be)):oe.Vs.getTargetData(H,q)}(a,C,fa(e)).next(x=>{if(x)return h=x.lastLimboFreeSnapshotVersion,a.Vs.getMatchingKeysForTargetId(C,x.targetId).next(H=>{_=H})}).next(()=>a.Fi.getDocumentsMatchingQuery(C,e,r?h:$t.min(),r?_:Gn())).next(x=>(Tf(a,cf(e),x),{documents:x,ji:_})))}function Hd(s,e){const r=Vt(s),a=Vt(r.Vs),h=r.$i.get(e);return h?Promise.resolve(h.target):r.persistence.runTransaction("Get target data","readonly",_=>a.te(_,e).next(C=>C?C.target:null))}function Vg(s,e){const r=Vt(s),a=r.Li.get(e)||$t.min();return r.persistence.runTransaction("Get new document changes","readonly",h=>r.Ui.getAllFromCollectionGroup(h,e,uh(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Tf(r,e,h),h))}function Tf(s,e,r){let a=$t.min();r.forEach((h,_)=>{_.readTime.compareTo(a)>0&&(a=_.readTime)}),s.Li.set(e,a)}function Sf(){return Sf=(0,Ce.Z)(function*(s,e,r,a){const h=Vt(s);let _=Gn(),C=Ii();for(const q of r){const oe=e.Wi(q.metadata.name);q.document&&(_=_.add(oe));const be=e.zi(q);be.setReadTime(e.Hi(q.metadata.readTime)),C=C.insert(oe,be)}const x=h.Ui.newChangeBuffer({trackRemovals:!0}),H=yield $d(h,(q=a,fa($c(Ln.fromString(`__bundle__/docs/${q}`)))));var q;return h.persistence.runTransaction("Apply bundle documents","readwrite",q=>jd(q,x,C).next(oe=>(x.apply(q),oe)).next(oe=>h.Vs.removeMatchingKeysForTargetId(q,H.targetId).next(()=>h.Vs.addMatchingKeys(q,_,H.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(q,oe.Gi,oe.Qi)).next(()=>oe.Gi)))}),Sf.apply(this,arguments)}function Ym(s,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,Ce.Z)(function*(s,e,r=Gn()){const a=yield $d(s,fa(Fl(e.bundledQuery))),h=Vt(s);return h.persistence.runTransaction("Save named query","readwrite",_=>{const C=qs(e.readTime);if(a.snapshotVersion.compareTo(C)>=0)return h.Ds.saveNamedQuery(_,e);const x=a.withResumeToken(Xr.EMPTY_BYTE_STRING,C);return h.$i=h.$i.insert(x.targetId,x),h.Vs.updateTargetData(_,x).next(()=>h.Vs.removeMatchingKeysForTargetId(_,a.targetId)).next(()=>h.Vs.addMatchingKeys(_,r,a.targetId)).next(()=>h.Ds.saveNamedQuery(_,e))})}),Sp.apply(this,arguments)}function Bl(s,e){return`firestore_clients_${s}_${e}`}function Ph(s,e,r){let a=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Ap(s,e){return`firestore_targets_${s}_${e}`}class xp{constructor(e,r,a,h){this.user=e,this.batchId=r,this.state=a,this.error=h}static Ji(e,r,a){const h=JSON.parse(a);let _,C="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return C&&h.error&&(C="string"==typeof h.error.message&&"string"==typeof h.error.code,C&&(_=new ht(h.error.code,h.error.message))),C?new xp(e,r,h.state,_):(kr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Af{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static Ji(e,r){const a=JSON.parse(r);let h,_="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return _&&a.error&&(_="string"==typeof a.error.message&&"string"==typeof a.error.code,_&&(h=new ht(a.error.code,a.error.message))),_?new Af(e,a.state,h):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class so{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Ji(e,r){const a=JSON.parse(r);let h="object"==typeof a&&a.activeTargetIds instanceof Array,_=Sd();for(let C=0;h&&C<a.activeTargetIds.length;++C)h=Yt(a.activeTargetIds[C]),_=_.add(a.activeTargetIds[C]);return h?new so(e,_):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Ug{constructor(e,r){this.clientId=e,this.onlineState=r}static Ji(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Ug(r.clientId,r.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rp{constructor(){this.activeTargetIds=Sd()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qm{constructor(e,r,a,h,_){this.window=e,this.js=r,this.persistenceKey=a,this.tr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Jr(vt),this.started=!1,this.ir=[];const C=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.rr=Bl(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Rp),this.cr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.syncEngine.Ri();for(const h of r){if(h===e.tr)continue;const _=e.getItem(Bl(e.persistenceKey,h));if(_){const C=so.Ji(h,_);C&&(e.sr=e.sr.insert(C.clientId,C))}}e._r();const a=e.storage.getItem(e.lr);if(a){const h=e.wr(a);h&&e.mr(h)}for(const h of e.ir)e.nr(h);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let r=!1;return this.sr.forEach((a,h)=>{h.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,r,a){this.yr(e,r,a),this.pr(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ap(this.persistenceKey,e));if(a){const h=Af.Ji(e,a);h&&(r=h.state)}}return this.Ir.Xi(e),this._r(),r}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ap(this.persistenceKey,e))}updateQueryState(e,r,a){this.Tr(e,r,a)}handleUserChange(e,r,a){r.forEach(h=>{this.pr(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return pt("SharedClientState","READ",e,r),r}setItem(e,r){pt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){pt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var r=this;const a=e;if(a.storageArea===this.storage){if(pt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.rr)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ce.Z)(function*(){if(r.started){if(null!==a.key)if(r.cr.test(a.key)){if(null==a.newValue){const h=r.Rr(a.key);return r.br(h,null)}{const h=r.Pr(a.key,a.newValue);if(h)return r.br(h.clientId,h)}}else if(r.ar.test(a.key)){if(null!==a.newValue){const h=r.vr(a.key,a.newValue);if(h)return r.Vr(h)}}else if(r.hr.test(a.key)){if(null!==a.newValue){const h=r.Sr(a.key,a.newValue);if(h)return r.Dr(h)}}else if(a.key===r.lr){if(null!==a.newValue){const h=r.wr(a.newValue);if(h)return r.mr(h)}}else if(a.key===r.ur){const h=function(_){let C=Vo.ot;if(null!=_)try{const x=JSON.parse(_);yn("number"==typeof x),C=x}catch(x){kr("SharedClientState","Failed to read sequence number from WebStorage",x)}return C}(a.newValue);h!==Vo.ot&&r.sequenceNumberHandler(h)}else if(a.key===r.dr){const h=r.Cr(a.newValue);yield Promise.all(h.map(_=>r.syncEngine.Nr(_)))}}else r.ir.push(a)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,r,a){const h=new xp(this.currentUser,e,r,a),_=Ph(this.persistenceKey,this.currentUser,e);this.setItem(_,h.Yi())}pr(e){const r=Ph(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,r,a){const h=Ap(this.persistenceKey,e),_=new Af(e,r,a);this.setItem(h,_.Yi())}Ar(e){const r=JSON.stringify(Array.from(e));this.setItem(this.dr,r)}Rr(e){const r=this.cr.exec(e);return r?r[1]:null}Pr(e,r){const a=this.Rr(e);return so.Ji(a,r)}vr(e,r){const a=this.ar.exec(e),h=Number(a[1]);return xp.Ji(new li(void 0!==a[2]?a[2]:null),h,r)}Sr(e,r){const a=this.hr.exec(e),h=Number(a[1]);return Af.Ji(h,r)}wr(e){return Ug.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var r=this;return(0,Ce.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.kr(e.batchId,e.state,e.error);pt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,r){const a=r?this.sr.insert(e,r):this.sr.remove(e),h=this.gr(this.sr),_=this.gr(a),C=[],x=[];return _.forEach(H=>{h.has(H)||C.push(H)}),h.forEach(H=>{_.has(H)||x.push(H)}),this.syncEngine.Mr(C,x).then(()=>{this.sr=a})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let r=Sd();return e.forEach((a,h)=>{r=r.unionWith(h.activeTargetIds)}),r}}class Jm{constructor(){this.Fr=new Rp,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,r,a){this.$r[e]=r}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Rp,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bg{Br(e){}shutdown(){}}class Np{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const iy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class rd{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class jg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,r,a,h,_){const C=this.oo(e,r);pt("RestConnection","Sending: ",C,a);const x={};return this.uo(x,h,_),this.co(e,C,x,a).then(H=>(pt("RestConnection","Received: ",H),H),H=>{throw _o("RestConnection",`${e} failed with error: `,H,"url: ",C,"request:",a),H})}ao(e,r,a,h,_,C){return this.ro(e,r,a,h,_)}uo(e,r,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+da,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((h,_)=>e[_]=h),a&&a.headers.forEach((h,_)=>e[_]=h)}oo(e,r){return`${this.so}/v1/${r}:${iy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,r,a,h){return new Promise((_,C)=>{const x=new vl;x.listenOnce(yl.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case qa.NO_ERROR:const q=x.getResponseJson();pt("Connection","XHR received:",JSON.stringify(q)),_(q);break;case qa.TIMEOUT:pt("Connection",'RPC "'+e+'" timed out'),C(new ht(Qe.DEADLINE_EXCEEDED,"Request time out"));break;case qa.HTTP_ERROR:const oe=x.getStatus();if(pt("Connection",'RPC "'+e+'" failed with status:',oe,"response text:",x.getResponseText()),oe>0){const be=x.getResponseJson().error;if(be&&be.status&&be.message){const Ke=function(at){const mt=at.toLowerCase().replace(/_/g,"-");return Object.values(Qe).indexOf(mt)>=0?mt:Qe.UNKNOWN}(be.status);C(new ht(Ke,be.message))}else C(new ht(Qe.UNKNOWN,"Server responded with status "+x.getStatus()))}else C(new ht(Qe.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{pt("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(h);x.send(r,"POST",H,a,15)})}ho(e,r,a){const h=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=Oc(),C=Zl(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new tf({})),this.uo(x.initMessageHeaders,r,a),(0,St.uI)()||(0,St.b$)()||(0,St.d)()||(0,St.w1)()||(0,St.Mn)()||(0,St.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const H=h.join("");pt("Connection","Creating WebChannel: "+H,x);const q=_.createWebChannel(H,x);let oe=!1,be=!1;const Ke=new rd({jr:mt=>{be?pt("Connection","Not sending because WebChannel is closed:",mt):(oe||(pt("Connection","Opening WebChannel transport."),q.open(),oe=!0),pt("Connection","WebChannel sending:",mt),q.send(mt))},Wr:()=>q.close()}),at=(mt,qt,pn)=>{mt.listen(qt,ti=>{try{pn(ti)}catch(fs){setTimeout(()=>{throw fs},0)}})};return at(q,ws.EventType.OPEN,()=>{be||pt("Connection","WebChannel transport opened.")}),at(q,ws.EventType.CLOSE,()=>{be||(be=!0,pt("Connection","WebChannel transport closed"),Ke.eo())}),at(q,ws.EventType.ERROR,mt=>{be||(be=!0,_o("Connection","WebChannel transport errored:",mt),Ke.eo(new ht(Qe.UNAVAILABLE,"The operation could not be completed")))}),at(q,ws.EventType.MESSAGE,mt=>{var qt;if(!be){const pn=mt.data[0];yn(!!pn);const ti=pn,fs=ti.error||(null===(qt=ti[0])||void 0===qt?void 0:qt.error);if(fs){pt("Connection","WebChannel received error:",fs);const Si=fs.status;let Io=function(Os){const ja=cs[Os];if(void 0!==ja)return io(ja)}(Si),vi=fs.message;void 0===Io&&(Io=Qe.INTERNAL,vi="Unknown error status: "+Si+" with message "+fs.message),be=!0,Ke.eo(new ht(Io,vi)),q.close()}else pt("Connection","WebChannel received:",pn),Ke.no(pn)}}),at(C,Yl.STAT_EVENT,mt=>{mt.stat===ta.PROXY?pt("Connection","Detected buffering proxy"):mt.stat===ta.NOPROXY&&pt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ke.Zr()},0),Ke}}function $g(){return"undefined"!=typeof window?window:null}function xf(){return"undefined"!=typeof document?document:null}function wc(s){return new $o(s,!0)}class Gd{constructor(e,r,a=1e3,h=1.5,_=6e4){this.js=e,this.timerId=r,this.lo=a,this.fo=h,this._o=_,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const r=Math.floor(this.wo+this.To()),a=Math.max(0,Date.now()-this.yo),h=Math.max(0,r-a);h>0&&pt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.wo} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,h,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Mp{constructor(e,r,a,h,_,C,x,H){this.js=e,this.Ao=a,this.Ro=h,this.bo=_,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=x,this.listener=H,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Gd(e,r)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,r){var a=this;return(0,Ce.Z)(function*(){a.Fo(),a.$o(),a.So.cancel(),a.Po++,4!==e?a.So.reset():r&&r.code===Qe.RESOURCE_EXHAUSTED?(kr(r.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),a.So.po()):r&&r.code===Qe.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Bo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Jr(r)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),r=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Po===r&&this.Uo(a,h)},a=>{e(()=>{const h=new ht(Qe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.qo(h)})})}Uo(e,r){const a=this.Lo(this.Po);this.stream=this.Ko(e,r),this.stream.zr(()=>{a(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(h=>{a(()=>this.qo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}xo(){var e=this;this.state=5,this.So.Io((0,Ce.Z)(function*(){e.state=0,e.start()}))}qo(e){return pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return r=>{this.js.enqueueAndForget(()=>this.Po===e?r():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pp extends Mp{constructor(e,r,a,h,_,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,h,C),this.wt=_}Ko(e,r){return this.bo.ho("Listen",e,r)}onMessage(e){this.So.reset();const r=function(s,e){let r;if("targetChange"in e){const a="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:jt(),h=e.targetChange.targetIds||[],_=function(H,q){return H.dt?(yn(void 0===q||"string"==typeof q),Xr.fromBase64String(q||"")):(yn(void 0===q||q instanceof Uint8Array),Xr.fromUint8Array(q||new Uint8Array))}(s,e.targetChange.resumeToken),C=e.targetChange.cause,x=C&&function(H){const q=void 0===H.code?Qe.UNKNOWN:io(H.code);return new ht(q,H.message||"")}(C);r=new Wc(a,h,_,x||null)}else if("documentChange"in e){const a=e.documentChange,h=Ho(s,a.document.name),_=qs(a.document.updateTime),C=new Ns({mapValue:{fields:a.document.fields}}),x=di.newFoundDocument(h,_,C);r=new sa(a.targetIds||[],a.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const a=e.documentDelete,h=Ho(s,a.document),_=a.readTime?qs(a.readTime):$t.min(),C=di.newNoDocument(h,_);r=new sa([],a.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const a=e.documentRemove,h=Ho(s,a.document);r=new sa([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return jt();{const a=e.filter,_=new Gc(a.count||0);r=new nr(a.targetId,_)}}var H;return r}(this.wt,e),a=function(h){if(!("targetChange"in h))return $t.min();const _=h.targetChange;return _.targetIds&&_.targetIds.length?$t.min():_.readTime?qs(_.readTime):$t.min()}(e);return this.listener.Go(r,a)}Qo(e){const r={};r.database=Nl(this.wt),r.addTarget=function(h,_){let C;const x=_.target;return C=dh(x)?{documents:ji(h,x)}:{query:Ml(h,x)},C.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?C.resumeToken=uc(h,_.resumeToken):_.snapshotVersion.compareTo($t.min())>0&&(C.readTime=ac(h,_.snapshotVersion.toTimestamp())),C}(this.wt,e);const a=function(s,e){const r=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jt()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);a&&(r.labels=a),this.Mo(r)}jo(e){const r={};r.database=Nl(this.wt),r.removeTarget=e,this.Mo(r)}}class Hg extends Mp{constructor(e,r,a,h,_,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,h,C),this.wt=_,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,r){return this.bo.ho("Write",e,r)}onMessage(e){if(yn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const r=function(s,e){return s&&s.length>0?(yn(void 0!==e),s.map(r=>function(a,h){let _=qs(a.updateTime?a.updateTime:h);return _.isEqual($t.min())&&(_=qs(h)),new vg(_,a.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),a=qs(e.commitTime);return this.listener.Jo(a,r)}return yn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Nl(this.wt),this.Mo(e)}Ho(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>dc(this.wt,a))};this.Mo(r)}}class sy extends class{}{constructor(e,r,a,h){super(),this.authCredentials=e,this.appCheckCredentials=r,this.bo=a,this.wt=h,this.Zo=!1}tu(){if(this.Zo)throw new ht(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,r,a){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,_])=>this.bo.ro(e,r,a,h,_)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ht(Qe.UNKNOWN,h.toString())})}ao(e,r,a,h){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,C])=>this.bo.ao(e,r,a,_,C,h)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new ht(Qe.UNKNOWN,_.toString())})}terminate(){this.Zo=!0}}class Oh{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(kr(r),this.su=!1):pt("OnlineStateTracker",r)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Xm{constructor(e,r,a,h,_){var C=this;this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=_,this.du.Br(x=>{a.enqueueAndForget((0,Ce.Z)(function*(){var H;Nu(C)&&(pt("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,Ce.Z)(function*(q){const oe=Vt(q);oe.lu.add(4),yield jl(oe),oe._u.set("Unknown"),oe.lu.delete(4),yield Rf(oe)}),function(q){return H.apply(this,arguments)})(C))}))}),this._u=new Oh(a,h)}}function Rf(s){return Ru.apply(this,arguments)}function Ru(){return Ru=(0,Ce.Z)(function*(s){if(Nu(s))for(const e of s.fu)yield e(!0)}),Ru.apply(this,arguments)}function jl(s){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,Ce.Z)(function*(s){for(const e of s.fu)yield e(!1)}),Nf.apply(this,arguments)}function Op(s,e){const r=Vt(s);r.hu.has(e.targetId)||(r.hu.set(e.targetId,e),Pf(r)?Fp(r):Cc(r).Co()&&kp(r,e))}function Mf(s,e){const r=Vt(s),a=Cc(r);r.hu.delete(e),a.Co()&&e_(r,e),0===r.hu.size&&(a.Co()?a.ko():Nu(r)&&r._u.set("Unknown"))}function kp(s,e){s.wu.Nt(e.targetId),Cc(s).Qo(e)}function e_(s,e){s.wu.Nt(e),Cc(s).jo(e)}function Fp(s){s.wu=new dp({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),te:e=>s.hu.get(e)||null}),Cc(s).start(),s._u.iu()}function Pf(s){return Nu(s)&&!Cc(s).Do()&&s.hu.size>0}function Nu(s){return 0===Vt(s).lu.size}function Lp(s){s.wu=void 0}function Vp(s){return Mu.apply(this,arguments)}function Mu(){return Mu=(0,Ce.Z)(function*(s){s.hu.forEach((e,r)=>{kp(s,e)})}),Mu.apply(this,arguments)}function Of(s,e){return Up.apply(this,arguments)}function Up(){return Up=(0,Ce.Z)(function*(s,e){Lp(s),Pf(s)?(s._u.uu(e),Fp(s)):s._u.set("Unknown")}),Up.apply(this,arguments)}function Gg(s,e,r){return id.apply(this,arguments)}function id(){return id=(0,Ce.Z)(function*(s,e,r){if(s._u.set("Online"),e instanceof Wc&&2===e.state&&e.cause)try{yield(a=(0,Ce.Z)(function*(h,_){const C=_.cause;for(const x of _.targetIds)h.hu.has(x)&&(yield h.remoteSyncer.rejectListen(x,C),h.hu.delete(x),h.wu.removeTarget(x))}),function(h,_){return a.apply(this,arguments)})(s,e)}catch(a){pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield kh(s,a)}else if(e instanceof sa?s.wu.Ut(e):e instanceof nr?s.wu.zt(e):s.wu.Gt(e),!r.isEqual($t.min()))try{const a=yield Tp(s.localStore);r.compareTo(a)>=0&&(yield function(h,_){const C=h.wu.Yt(_);return C.targetChanges.forEach((x,H)=>{if(x.resumeToken.approximateByteSize()>0){const q=h.hu.get(H);q&&h.hu.set(H,q.withResumeToken(x.resumeToken,_))}}),C.targetMismatches.forEach(x=>{const H=h.hu.get(x);if(!H)return;h.hu.set(x,H.withResumeToken(Xr.EMPTY_BYTE_STRING,H.snapshotVersion)),e_(h,x);const q=new gc(H.target,x,1,H.sequenceNumber);kp(h,q)}),h.remoteSyncer.applyRemoteEvent(C)}(s,r))}catch(a){pt("RemoteStore","Failed to raise snapshot:",a),yield kh(s,a)}var a}),id.apply(this,arguments)}function kh(s,e,r){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,Ce.Z)(function*(s,e,r){if(!yo(e))throw e;s.lu.add(1),yield jl(s),s._u.set("Offline"),r||(r=()=>Tp(s.localStore)),s.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){pt("RemoteStore","Retrying IndexedDB access"),yield r(),s.lu.delete(1),yield Rf(s)}))}),Wg.apply(this,arguments)}function Fh(s,e){return e().catch(r=>kh(s,r,e))}function $l(s){return t_.apply(this,arguments)}function t_(){return t_=(0,Ce.Z)(function*(s){const e=Vt(s),r=bc(e);let a=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;oy(e);)try{const h=yield nu(e.localStore,a);if(null===h){0===e.au.length&&r.ko();break}a=h.batchId,n_(e,h)}catch(h){yield kh(e,h)}kf(e)&&Lh(e)}),t_.apply(this,arguments)}function oy(s){return Nu(s)&&s.au.length<10}function n_(s,e){s.au.push(e);const r=bc(s);r.Co()&&r.zo&&r.Ho(e.mutations)}function kf(s){return Nu(s)&&!bc(s).Do()&&s.au.length>0}function Lh(s){bc(s).start()}function zg(s){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,Ce.Z)(function*(s){bc(s).Xo()}),Bp.apply(this,arguments)}function ru(s){return ya.apply(this,arguments)}function ya(){return ya=(0,Ce.Z)(function*(s){const e=bc(s);for(const r of s.au)e.Ho(r.mutations)}),ya.apply(this,arguments)}function Ff(s,e,r){return qg.apply(this,arguments)}function qg(){return qg=(0,Ce.Z)(function*(s,e,r){const a=s.au.shift(),h=Th.from(a,e,r);yield Fh(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield $l(s)}),qg.apply(this,arguments)}function ay(s,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,Ce.Z)(function*(s,e){var r;e&&bc(s).zo&&(yield(r=(0,Ce.Z)(function*(a,h){if(tr(_=h.code)&&_!==Qe.ABORTED){const C=a.au.shift();bc(a).No(),yield Fh(a,()=>a.remoteSyncer.rejectFailedWrite(C.batchId,h)),yield $l(a)}var _}),function(a,h){return r.apply(this,arguments)})(s,e)),kf(s)&&Lh(s)}),Hl.apply(this,arguments)}function Wd(s,e){return sl.apply(this,arguments)}function sl(){return sl=(0,Ce.Z)(function*(s,e){const r=Vt(s);r.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const a=Nu(r);r.lu.add(3),yield jl(r),a&&r._u.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.lu.delete(3),yield Rf(r)}),sl.apply(this,arguments)}function zd(s,e){return ka.apply(this,arguments)}function ka(){return ka=(0,Ce.Z)(function*(s,e){const r=Vt(s);e?(r.lu.delete(2),yield Rf(r)):e||(r.lu.add(2),yield jl(r),r._u.set("Unknown"))}),ka.apply(this,arguments)}function Cc(s){return s.mu||(s.mu=function(e,r,a){const h=Vt(e);return h.tu(),new Pp(r,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,a)}(s.datastore,s.asyncQueue,{zr:Vp.bind(null,s),Jr:Of.bind(null,s),Go:Gg.bind(null,s)}),s.fu.push(function(){var e=(0,Ce.Z)(function*(r){r?(s.mu.No(),Pf(s)?Fp(s):s._u.set("Unknown")):(yield s.mu.stop(),Lp(s))});return function(r){return e.apply(this,arguments)}}())),s.mu}function bc(s){return s.gu||(s.gu=function(e,r,a){const h=Vt(e);return h.tu(),new Hg(r,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,a)}(s.datastore,s.asyncQueue,{zr:zg.bind(null,s),Jr:ay.bind(null,s),Yo:ru.bind(null,s),Jo:Ff.bind(null,s)}),s.fu.push(function(){var e=(0,Ce.Z)(function*(r){r?(s.gu.No(),yield $l(s)):(yield s.gu.stop(),s.au.length>0&&(pt("RemoteStore",`Stopping write stream with ${s.au.length} pending writes`),s.au=[]))});return function(r){return e.apply(this,arguments)}}())),s.gu}class Vh{constructor(e,r,a,h,_){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=h,this.removalCallback=_,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,r,a,h,_){const C=Date.now()+a,x=new Vh(e,r,C,h,_);return x.start(a),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ht(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sd(s,e){if(kr("AsyncQueue",`${e}: ${s}`),yo(s))return new ht(Qe.UNAVAILABLE,`${e}: ${s}`);throw s}class Wo{constructor(e){this.comparator=e?(r,a)=>e(r,a)||Nt.comparator(r.key,a.key):(r,a)=>Nt.comparator(r.key,a.key),this.keyedMap=ds(),this.sortedSet=new Jr(this.comparator)}static emptySet(e){return new Wo(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const h=r.getNext().key,_=a.getNext().key;if(!h.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const a=new Wo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class Lf{constructor(){this.yu=new Jr(Nt.comparator)}track(e){const r=e.doc.key,a=this.yu.get(r);a?0!==e.type&&3===a.type?this.yu=this.yu.insert(r,e):3===e.type&&1!==a.type?this.yu=this.yu.insert(r,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.yu=this.yu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.yu=this.yu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.yu=this.yu.remove(r):1===e.type&&2===a.type?this.yu=this.yu.insert(r,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.yu=this.yu.insert(r,{type:2,doc:e.doc}):jt():this.yu=this.yu.insert(r,e)}pu(){const e=[];return this.yu.inorderTraversal((r,a)=>{e.push(a)}),e}}class Uh{constructor(e,r,a,h,_,C,x,H){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=_,this.fromCache=C,this.syncStateChanged=x,this.excludesMetadataChanges=H}static fromInitialDocuments(e,r,a,h){const _=[];return r.forEach(C=>{_.push({type:0,doc:C})}),new Uh(e,r,Wo.emptySet(r),_,a,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(r[h].type!==a[h].type||!r[h].doc.isEqual(a[h].doc))return!1;return!0}}class r_{constructor(){this.Iu=void 0,this.listeners=[]}}class i_{constructor(){this.queries=new Du(e=>uf(e),Id),this.onlineState="Unknown",this.Tu=new Set}}function od(s,e){return jp.apply(this,arguments)}function jp(){return jp=(0,Ce.Z)(function*(s,e){const r=Vt(s),a=e.query;let h=!1,_=r.queries.get(a);if(_||(h=!0,_=new r_),h)try{_.Iu=yield r.onListen(a)}catch(C){const x=sd(C,`Initialization of query '${Hc(e.query)}' failed`);return void e.onError(x)}r.queries.set(a,_),_.listeners.push(e),e.Eu(r.onlineState),_.Iu&&e.Au(_.Iu)&&Kg(r)}),jp.apply(this,arguments)}function $p(s,e){return qd.apply(this,arguments)}function qd(){return qd=(0,Ce.Z)(function*(s,e){const r=Vt(s),a=e.query;let h=!1;const _=r.queries.get(a);if(_){const C=_.listeners.indexOf(e);C>=0&&(_.listeners.splice(C,1),h=0===_.listeners.length)}if(h)return r.queries.delete(a),r.onUnlisten(a)}),qd.apply(this,arguments)}function Kd(s,e){const r=Vt(s);let a=!1;for(const h of e){const C=r.queries.get(h.query);if(C){for(const x of C.listeners)x.Au(h)&&(a=!0);C.Iu=h}}a&&Kg(r)}function s_(s,e,r){const a=Vt(s),h=a.queries.get(e);if(h)for(const _ of h.listeners)_.onError(r);a.queries.delete(e)}function Kg(s){s.Tu.forEach(e=>{e.next()})}class Vf{constructor(e,r,a){this.query=e,this.Ru=r,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=a||{}}Au(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Uh(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),r=!0):this.Vu(e,this.onlineState)&&(this.Su(e),r=!0),this.Pu=e,r}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let r=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),r=!0),r}Vu(e,r){return!e.fromCache||!(this.options.Du&&"Offline"!==r||e.docs.isEmpty()&&"Offline"!==r)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Hp{constructor(e,r){this.payload=e,this.byteLength=r}Cu(){return"metadata"in this.payload}}class uy{constructor(e){this.wt=e}Wi(e){return Ho(this.wt,e)}zi(e){return e.metadata.exists?Cr(this.wt,e.document,!1):di.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return qs(e)}}class Zg{constructor(e,r,a){this.xu=e,this.localStore=r,this.wt=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yg(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const a=Ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ku(e){const r=new Map,a=new uy(this.wt);for(const h of e)if(h.metadata.queries){const _=a.Wi(h.metadata.name);for(const C of h.metadata.queries){const x=(r.get(C)||Gn()).add(_);r.set(C,x)}}return r}complete(){var e=this;return(0,Ce.Z)(function*(){const r=yield function(s,e,r,a){return Sf.apply(this,arguments)}(e.localStore,new uy(e.wt),e.documents,e.xu.id),a=e.ku(e.documents);for(const h of e.queries)yield Ym(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:r}})()}}function Yg(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Hi{constructor(e){this.key=e}}class Gp{constructor(e){this.key=e}}class o_{constructor(e,r){this.query=e,this.Fu=r,this.$u=null,this.current=!1,this.Bu=Gn(),this.mutatedKeys=Gn(),this.Lu=op(e),this.Uu=new Wo(this.Lu)}get qu(){return this.Fu}Ku(e,r){const a=r?r.Gu:new Lf,h=r?r.Uu:this.Uu;let _=r?r.mutatedKeys:this.mutatedKeys,C=h,x=!1;const H="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,q="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((oe,be)=>{const Ke=h.get(oe),at=lf(this.query,be)?be:null,mt=!!Ke&&this.mutatedKeys.has(Ke.key),qt=!!at&&(at.hasLocalMutations||this.mutatedKeys.has(at.key)&&at.hasCommittedMutations);let pn=!1;Ke&&at?Ke.data.isEqual(at.data)?mt!==qt&&(a.track({type:3,doc:at}),pn=!0):this.Qu(Ke,at)||(a.track({type:2,doc:at}),pn=!0,(H&&this.Lu(at,H)>0||q&&this.Lu(at,q)<0)&&(x=!0)):!Ke&&at?(a.track({type:0,doc:at}),pn=!0):Ke&&!at&&(a.track({type:1,doc:Ke}),pn=!0,(H||q)&&(x=!0)),pn&&(at?(C=C.add(at),_=qt?_.add(oe):_.delete(oe)):(C=C.delete(oe),_=_.delete(oe)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const oe="F"===this.query.limitType?C.last():C.first();C=C.delete(oe.key),_=_.delete(oe.key),a.track({type:1,doc:oe})}return{Uu:C,Gu:a,Oi:x,mutatedKeys:_}}Qu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a){const h=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const _=e.Gu.pu();_.sort((q,oe)=>function(be,Ke){const at=mt=>{switch(mt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}};return at(be)-at(Ke)}(q.type,oe.type)||this.Lu(q.doc,oe.doc)),this.ju(a);const C=r?this.Wu():[],x=0===this.Bu.size&&this.current?1:0,H=x!==this.$u;return this.$u=x,0!==_.length||H?{snapshot:new Uh(this.query,e.Uu,h,_,e.mutatedKeys,0===x,H,!1),zu:C}:{zu:C}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Lf,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(r=>this.Fu=this.Fu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Fu=this.Fu.delete(r)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Gn(),this.Uu.forEach(a=>{this.Hu(a.key)&&(this.Bu=this.Bu.add(a.key))});const r=[];return e.forEach(a=>{this.Bu.has(a)||r.push(new Gp(a))}),this.Bu.forEach(a=>{e.has(a)||r.push(new Hi(a))}),r}Ju(e){this.Fu=e.ji,this.Bu=Gn();const r=this.Ku(e.documents);return this.applyChanges(r,!0)}Yu(){return Uh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Ic{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class Qg{constructor(e){this.key=e,this.Xu=!1}}class Jg{constructor(e,r,a,h,_,C){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=h,this.currentUser=_,this.maxConcurrentLimboResolutions=C,this.Zu={},this.tc=new Du(x=>uf(x),Id),this.ec=new Map,this.nc=new Set,this.sc=new Jr(Nt.comparator),this.ic=new Map,this.rc=new $m,this.oc={},this.uc=new Map,this.cc=Rh.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function a_(s,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,Ce.Z)(function*(s,e){const r=ng(s);let a,h;const _=r.tc.get(e);if(_)a=_.targetId,r.sharedClientState.addLocalQueryTarget(a),h=_.view.Yu();else{const C=yield $d(r.localStore,fa(e));r.isPrimaryClient&&Op(r.remoteStore,C);const x=r.sharedClientState.addLocalQueryTarget(C.targetId);a=C.targetId,h=yield Xg(r,e,a,"current"===x)}return h}),Wp.apply(this,arguments)}function Xg(s,e,r,a){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,Ce.Z)(function*(s,e,r,a){s.hc=(oe,be,Ke)=>{return(at=(0,Ce.Z)(function*(mt,qt,pn,ti){let fs=qt.view.Ku(pn);fs.Oi&&(fs=yield Ec(mt.localStore,qt.query,!1).then(({documents:vi})=>qt.view.Ku(vi,fs)));const Si=ti&&ti.targetChanges.get(qt.targetId),Io=qt.view.applyChanges(fs,mt.isPrimaryClient,Si);return Zp(mt,qt.targetId,Io.zu),Io.snapshot}),function(mt,qt,pn,ti){return at.apply(this,arguments)})(s,oe,be,Ke);var at};const h=yield Ec(s.localStore,e,!0),_=new o_(e,h.ji),C=_.Ku(h.documents),x=sc.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState),H=_.applyChanges(C,s.isPrimaryClient,x);Zp(s,r,H.zu);const q=new Ic(e,r,_);return s.tc.set(e,q),s.ec.has(r)?s.ec.get(r).push(e):s.ec.set(r,[e]),H.snapshot}),Gl.apply(this,arguments)}function Dc(s,e){return zp.apply(this,arguments)}function zp(){return zp=(0,Ce.Z)(function*(s,e){const r=Vt(s),a=r.tc.get(e),h=r.ec.get(a.targetId);if(h.length>1)return r.ec.set(a.targetId,h.filter(_=>!Id(_,e))),void r.tc.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield nd(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),Mf(r.remoteStore,a.targetId),ad(r,a.targetId)}).catch(zu))):(ad(r,a.targetId),yield nd(r.localStore,a.targetId,!0))}),zp.apply(this,arguments)}function Bh(){return Bh=(0,Ce.Z)(function*(s,e,r){const a=rg(s);try{const h=yield function(_,C){const x=Vt(_),H=dr.now(),q=C.reduce((Ke,at)=>Ke.add(at.key),Gn());let oe,be;return x.persistence.runTransaction("Locally write mutations","readwrite",Ke=>{let at=Ii(),mt=Gn();return x.Ui.getEntries(Ke,q).next(qt=>{at=qt,at.forEach((pn,ti)=>{ti.isValidDocument()||(mt=mt.add(pn))})}).next(()=>x.localDocuments.getOverlayedDocuments(Ke,at)).next(qt=>{oe=qt;const pn=[];for(const ti of C){const fs=gf(ti,oe.get(ti.key).overlayedDocument);null!=fs&&pn.push(new qn(ti.key,fs,Qa(fs.value.mapValue),Bi.exists(!0)))}return x.mutationQueue.addMutationBatch(Ke,H,pn,C)}).next(qt=>{be=qt;const pn=qt.applyToLocalDocumentSet(oe,mt);return x.documentOverlayCache.saveOverlays(Ke,qt.batchId,pn)})}).then(()=>({batchId:be.batchId,changes:Eh(oe)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(_,C,x){let H=_.oc[_.currentUser.toKey()];H||(H=new Jr(vt)),H=H.insert(C,x),_.oc[_.currentUser.toKey()]=H}(a,h.batchId,r),yield Fa(a,h.changes),yield $l(a.remoteStore)}catch(h){const _=sd(h,"Failed to persist write");r.reject(_)}}),Bh.apply(this,arguments)}function u_(s,e){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,Ce.Z)(function*(s,e){const r=Vt(s);try{const a=yield Mh(r.localStore,e);e.targetChanges.forEach((h,_)=>{const C=r.ic.get(_);C&&(yn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?C.Xu=!0:h.modifiedDocuments.size>0?yn(C.Xu):h.removedDocuments.size>0&&(yn(C.Xu),C.Xu=!1))}),yield Fa(r,a,e)}catch(a){yield zu(a)}}),Pu.apply(this,arguments)}function Kp(s,e,r){const a=Vt(s);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const h=[];a.tc.forEach((_,C)=>{const x=C.view.Eu(e);x.snapshot&&h.push(x.snapshot)}),function(_,C){const x=Vt(_);x.onlineState=C;let H=!1;x.queries.forEach((q,oe)=>{for(const be of oe.listeners)be.Eu(C)&&(H=!0)}),H&&Kg(x)}(a.eventManager,e),h.length&&a.Zu.Go(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function em(s,e,r){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Ce.Z)(function*(s,e,r){const a=Vt(s);a.sharedClientState.updateQueryState(e,"rejected",r);const h=a.ic.get(e),_=h&&h.key;if(_){let C=new Jr(Nt.comparator);C=C.insert(_,di.newNoDocument(_,$t.min()));const x=Gn().add(_),H=new Ad($t.min(),new Map,new Vn(vt),C,x);yield u_(a,H),a.sc=a.sc.remove(_),a.ic.delete(e),va(a)}else yield nd(a.localStore,e,!1).then(()=>ad(a,e,r)).catch(zu)}),Uf.apply(this,arguments)}function tm(s,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,Ce.Z)(function*(s,e){const r=Vt(s),a=e.batch.batchId;try{const h=yield td(r.localStore,e);l_(r,a,null),jh(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield Fa(r,h)}catch(h){yield zu(h)}}),Zd.apply(this,arguments)}function nm(s,e,r){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,Ce.Z)(function*(s,e,r){const a=Vt(s);try{const h=yield function(_,C){const x=Vt(_);return x.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let q;return x.mutationQueue.lookupMutationBatch(H,C).next(oe=>(yn(null!==oe),q=oe.keys(),x.mutationQueue.removeMutationBatch(H,oe))).next(()=>x.mutationQueue.performConsistencyCheck(H)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(H,q,C)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,q)).next(()=>x.localDocuments.getDocuments(H,q))})}(a.localStore,e);l_(a,e,r),jh(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),yield Fa(a,h)}catch(h){yield zu(h)}}),Bf.apply(this,arguments)}function rm(){return rm=(0,Ce.Z)(function*(s,e){const r=Vt(s);Nu(r.remoteStore)||pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(_){const C=Vt(_);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>C.mutationQueue.getHighestUnacknowledgedBatchId(x))}(r.localStore);if(-1===a)return void e.resolve();const h=r.uc.get(a)||[];h.push(e),r.uc.set(a,h)}catch(a){const h=sd(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),rm.apply(this,arguments)}function jh(s,e){(s.uc.get(e)||[]).forEach(r=>{r.resolve()}),s.uc.delete(e)}function l_(s,e,r){const a=Vt(s);let h=a.oc[a.currentUser.toKey()];if(h){const _=h.get(e);_&&(r?_.reject(r):_.resolve(),h=h.remove(e)),a.oc[a.currentUser.toKey()]=h}}function ad(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.ec.get(e))s.tc.delete(a),r&&s.Zu.lc(a,r);s.ec.delete(e),s.isPrimaryClient&&s.rc.us(e).forEach(a=>{s.rc.containsKey(a)||im(s,a)})}function im(s,e){s.nc.delete(e.path.canonicalString());const r=s.sc.get(e);null!==r&&(Mf(s.remoteStore,r),s.sc=s.sc.remove(e),s.ic.delete(r),va(s))}function Zp(s,e,r){for(const a of r)a instanceof Hi?(s.rc.addReference(a.key,e),cy(s,a)):a instanceof Gp?(pt("SyncEngine","Document no longer in limbo: "+a.key),s.rc.removeReference(a.key,e),s.rc.containsKey(a.key)||im(s,a.key)):jt()}function cy(s,e){const r=e.key,a=r.path.canonicalString();s.sc.get(r)||s.nc.has(a)||(pt("SyncEngine","New document in limbo: "+r),s.nc.add(a),va(s))}function va(s){for(;s.nc.size>0&&s.sc.size<s.maxConcurrentLimboResolutions;){const e=s.nc.values().next().value;s.nc.delete(e);const r=new Nt(Ln.fromString(e)),a=s.cc.next();s.ic.set(a,new Qg(r)),s.sc=s.sc.insert(r,a),Op(s.remoteStore,new gc(fa($c(r.path)),a,2,Vo.ot))}}function Fa(s,e,r){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,Ce.Z)(function*(s,e,r){const a=Vt(s),h=[],_=[],C=[];var x;a.tc.isEmpty()||(a.tc.forEach((x,H)=>{C.push(a.hc(H,e,r).then(q=>{if(q){a.isPrimaryClient&&a.sharedClientState.updateQueryState(H.targetId,q.fromCache?"not-current":"current"),h.push(q);const oe=ed.Vi(H.targetId,q);_.push(oe)}}))}),yield Promise.all(C),a.Zu.Go(h),yield(x=(0,Ce.Z)(function*(H,q){const oe=Vt(H);try{yield oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",be=>Ze.forEach(q,Ke=>Ze.forEach(Ke.Pi,at=>oe.persistence.referenceDelegate.addReference(be,Ke.targetId,at)).next(()=>Ze.forEach(Ke.vi,at=>oe.persistence.referenceDelegate.removeReference(be,Ke.targetId,at)))))}catch(be){if(!yo(be))throw be;pt("LocalStore","Failed to update sequence numbers: "+be)}for(const be of q){const Ke=be.targetId;if(!be.fromCache){const at=oe.$i.get(Ke),qt=at.withLastLimboFreeSnapshotVersion(at.snapshotVersion);oe.$i=oe.$i.insert(Ke,qt)}}}),function(H,q){return x.apply(this,arguments)})(a.localStore,_))}),Wl.apply(this,arguments)}function jf(s,e){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,Ce.Z)(function*(s,e){const r=Vt(s);if(!r.currentUser.isEqual(e)){pt("SyncEngine","User change. New user:",e.toKey());const a=yield Zm(r.localStore,e);r.currentUser=e,(h=r).uc.forEach(C=>{C.forEach(x=>{x.reject(new ht(Qe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.uc.clear(),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield Fa(r,a.Ki)}var h}),Ea.apply(this,arguments)}function $h(s,e){const r=Vt(s),a=r.ic.get(e);if(a&&a.Xu)return Gn().add(a.key);{let h=Gn();const _=r.ec.get(e);if(!_)return h;for(const C of _){const x=r.tc.get(C);h=h.unionWith(x.view.qu)}return h}}function Ou(s,e){return sm.apply(this,arguments)}function sm(){return sm=(0,Ce.Z)(function*(s,e){const r=Vt(s),a=yield Ec(r.localStore,e.query,!0),h=e.view.Ju(a);return r.isPrimaryClient&&Zp(r,e.targetId,h.zu),h}),sm.apply(this,arguments)}function Hh(s,e){return dy.apply(this,arguments)}function dy(){return dy=(0,Ce.Z)(function*(s,e){const r=Vt(s);return Vg(r.localStore,e).then(a=>Fa(r,a))}),dy.apply(this,arguments)}function c_(s,e,r,a){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,Ce.Z)(function*(s,e,r,a){const h=Vt(s),_=yield function(C,x){const H=Vt(C),q=Vt(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",oe=>q.yn(oe,x).next(be=>be?H.localDocuments.getDocuments(oe,be):Ze.resolve(null)))}(h.localStore,e);var x;null!==_?("pending"===r?yield $l(h.remoteStore):"acknowledged"===r||"rejected"===r?(l_(h,e,a||null),jh(h,e),x=e,Vt(Vt(h.localStore).mutationQueue).In(x)):jt(),yield Fa(h,_)):pt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Yp.apply(this,arguments)}function om(){return om=(0,Ce.Z)(function*(s,e){const r=Vt(s);if(ng(r),rg(r),!0===e&&!0!==r.ac){const a=r.sharedClientState.getAllActiveQueryTargets(),h=yield hy(r,a.toArray());r.ac=!0,yield zd(r.remoteStore,!0);for(const _ of h)Op(r.remoteStore,_)}else if(!1===e&&!1!==r.ac){const a=[];let h=Promise.resolve();r.ec.forEach((_,C)=>{r.sharedClientState.isLocalQueryTarget(C)?a.push(C):h=h.then(()=>(ad(r,C),nd(r.localStore,C,!0))),Mf(r.remoteStore,C)}),yield h,yield hy(r,a),function(_){const C=Vt(_);C.ic.forEach((x,H)=>{Mf(C.remoteStore,H)}),C.rc.cs(),C.ic=new Map,C.sc=new Jr(Nt.comparator)}(r),r.ac=!1,yield zd(r.remoteStore,!1)}}),om.apply(this,arguments)}function hy(s,e,r){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,Ce.Z)(function*(s,e,r){const a=Vt(s),h=[],_=[];for(const C of e){let x;const H=a.ec.get(C);if(H&&0!==H.length){x=yield $d(a.localStore,fa(H[0]));for(const q of H){const oe=a.tc.get(q),be=yield Ou(a,oe);be.snapshot&&_.push(be.snapshot)}}else{const q=yield Hd(a.localStore,C);x=yield $d(a.localStore,q),yield Xg(a,Xp(q),C,!1)}h.push(x)}return a.Zu.Go(_),h}),Jp.apply(this,arguments)}function Xp(s){return af(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function eg(s){const e=Vt(s);return Vt(Vt(e.localStore).persistence).Ri()}function Gh(s,e,r,a){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,Ce.Z)(function*(s,e,r,a){const h=Vt(s);if(h.ac)return void pt("SyncEngine","Ignoring unexpected query state notification.");const _=h.ec.get(e);if(_&&_.length>0)switch(r){case"current":case"not-current":{const C=yield Vg(h.localStore,cf(_[0])),x=Ad.createSynthesizedRemoteEventForCurrentChange(e,"current"===r);yield Fa(h,C,x);break}case"rejected":yield nd(h.localStore,e,!0),ad(h,e,a);break;default:jt()}}),Yd.apply(this,arguments)}function am(s,e,r){return tg.apply(this,arguments)}function tg(){return tg=(0,Ce.Z)(function*(s,e,r){const a=ng(s);if(a.ac){for(const h of e){if(a.ec.has(h)){pt("SyncEngine","Adding an already active target "+h);continue}const _=yield Hd(a.localStore,h),C=yield $d(a.localStore,_);yield Xg(a,Xp(_),C.targetId,!1),Op(a.remoteStore,C)}for(const h of r)a.ec.has(h)&&(yield nd(a.localStore,h,!1).then(()=>{Mf(a.remoteStore,h),ad(a,h)}).catch(zu))}}),tg.apply(this,arguments)}function ng(s){const e=Vt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=u_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$h.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=em.bind(null,e),e.Zu.Go=Kd.bind(null,e.eventManager),e.Zu.lc=s_.bind(null,e.eventManager),e}function rg(s){const e=Vt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nm.bind(null,e),e}class Wh{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,Ce.Z)(function*(){r.wt=wc(e.databaseInfo.databaseId),r.sharedClientState=r.dc(e),r.persistence=r._c(e),yield r.persistence.start(),r.localStore=r.wc(e),r.gcScheduler=r.mc(e,r.localStore),r.indexBackfillerScheduler=r.gc(e,r.localStore)})()}mc(e,r){return null}gc(e,r){return null}wc(e){return Km(this.persistence,new Lg,e.initialUser,this.wt)}_c(e){return new Gm(Nh.Ms,this.wt)}dc(e){return new Jm}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zo extends Wh{constructor(e,r,a){super(),this.yc=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,a=this;return(0,Ce.Z)(function*(){yield r().call(a,e),yield a.yc.initialize(a,e),yield rg(a.yc.syncEngine),yield $l(a.yc.remoteStore),yield a.persistence.ci(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Km(this.persistence,new Lg,e.initialUser,this.wt)}mc(e,r){return new Rg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}gc(e,r){const a=new sf(r,this.persistence);return new Zu(e.asyncQueue,a)}_c(e){const r=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new rl(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,$g(),xf(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Jm}}class um extends zo{constructor(e,r){super(e,r,!1),this.yc=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,a=this;return(0,Ce.Z)(function*(){yield r().call(a,e);const h=a.yc.syncEngine;a.sharedClientState instanceof Qm&&(a.sharedClientState.syncEngine={kr:c_.bind(null,h),Or:Gh.bind(null,h),Mr:am.bind(null,h),Ri:eg.bind(null,h),Nr:Hh.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.ci(function(){var _=(0,Ce.Z)(function*(C){yield function(s,e){return om.apply(this,arguments)}(a.yc.syncEngine,C),a.gcScheduler&&(C&&!a.gcScheduler.started?a.gcScheduler.start():C||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(C&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():C||a.indexBackfillerScheduler.stop())});return function(C){return _.apply(this,arguments)}}())})()}dc(e){const r=$g();if(!Qm.V(r))throw new ht(Qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qm(r,e.asyncQueue,a,e.clientId,e.initialUser)}}class iu{initialize(e,r){var a=this;return(0,Ce.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>Kp(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=jf.bind(null,a.syncEngine),yield zd(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new i_}createDatastore(e){const r=wc(e.databaseInfo.databaseId),a=new jg(e.databaseInfo);return new sy(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return r=this.localStore,a=this.datastore,h=e.asyncQueue,_=x=>Kp(this.syncEngine,x,0),C=Np.V()?new Np:new Bg,new Xm(r,a,h,_,C);var r,a,h,_,C}createSyncEngine(e,r){return function(a,h,_,C,x,H,q){const oe=new Jg(a,h,_,C,x,H);return q&&(oe.ac=!0),oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,Ce.Z)(function*(r){const a=Vt(r);pt("RemoteStore","RemoteStore shutting down."),a.lu.add(5),yield jl(a),a.du.shutdown(),a._u.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function zh(s,e=10240){let r=0;return{read:()=>(0,Ce.Z)(function*(){if(r<s.byteLength){const a={value:s.slice(r,r+e),done:!1};return r+=e,a}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class h_{constructor(e,r){this.Ec=e,this.wt=r,this.metadata=new mi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(a=>{a&&a.Cu()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.bc();if(null===r)return null;const a=e.Ac.decode(r),h=Number(a);isNaN(h)&&e.Pc(`length string (${a}) is not valid number`);const _=yield e.vc(h);return new Hp(JSON.parse(_),r.length+h)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const r=e.Vc();r<0&&e.Pc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),a})()}vc(e){var r=this;return(0,Ce.Z)(function*(){for(;r.buffer.length<e;)(yield r.Sc())&&r.Pc("Reached the end of bundle when more is expected.");const a=r.Ac.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),a})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.Ec.read();if(!r.done){const a=new Uint8Array(e.buffer.length+r.value.length);a.set(e.buffer),a.set(r.value,e.buffer.length),e.buffer=a}return r.done})()}}class lm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ce.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new ht(Qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,Ce.Z)(function*(_,C){const x=Vt(_),H=Nl(x.wt)+"/documents",q={documents:C.map(at=>cc(x.wt,at))},oe=yield x.ao("BatchGetDocuments",H,q,C.length),be=new Map;oe.forEach(at=>{const mt=function(s,e){return"found"in e?function(r,a){yn(!!a.found);const h=Ho(r,a.found.name),_=qs(a.found.updateTime),C=new Ns({mapValue:{fields:a.found.fields}});return di.newFoundDocument(h,_,C)}(s,e):"missing"in e?function(r,a){yn(!!a.missing),yn(!!a.readTime);const h=Ho(r,a.missing),_=qs(a.readTime);return di.newNoDocument(h,_)}(s,e):jt()}(x.wt,at);be.set(mt.key.toString(),mt)});const Ke=[];return C.forEach(at=>{const mt=be.get(at.toString());yn(!!mt),Ke.push(mt)}),Ke}),function(_,C){return h.apply(this,arguments)})(r.datastore,e);var h;return a.forEach(h=>r.recordVersion(h)),a})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Iu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var a;e.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,h)=>{const _=Nt.fromPath(h);e.mutations.push(new Td(_,e.precondition(_)))}),yield(a=(0,Ce.Z)(function*(h,_){const C=Vt(h),x=Nl(C.wt)+"/documents",H={writes:_.map(q=>dc(C.wt,q))};yield C.ro("Commit",x,H)}),function(h,_){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw jt();r=$t.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!r.isEqual(a))throw new ht(Qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?Bi.updateTime(r):Bi.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($t.min()))throw new ht(Qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bi.updateTime(r)}return Bi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zl{constructor(e,r,a,h,_){this.asyncQueue=e,this.datastore=r,this.options=a,this.updateFunction=h,this.deferred=_,this.Dc=a.maxAttempts,this.So=new Gd(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ce.Z)(function*(){const r=new lm(e.datastore),a=e.xc(r);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(h)}).catch(_=>{e.Nc(_)}))}).catch(h=>{e.Nc(h)})}))}xc(e){try{const r=this.updateFunction(e);return!lt(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!tr(r)}return!1}}class $f{constructor(e,r,a,h){var _=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=h,this.user=li.UNAUTHENTICATED,this.clientId=Pn.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var C=(0,Ce.Z)(function*(x){pt("FirestoreClient","Received user=",x.uid),yield _.authCredentialListener(x),_.user=x});return function(x){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(a,C=>(pt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ht(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(a){const h=sd(a,"Failed to shutdown persistence");r.reject(h)}})),r.promise}}function qo(s,e){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,Ce.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(function(){var h=(0,Ce.Z)(function*(_){a.isEqual(_)||(yield Zm(e.localStore,_),a=_)});return function(_){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),Tc.apply(this,arguments)}function Hf(s,e){return La.apply(this,arguments)}function La(){return La=(0,Ce.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield Gf(s);pt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(r,a),s.setCredentialChangeListener(h=>Wd(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,_)=>Wd(e.remoteStore,_)),s.onlineComponents=e}),La.apply(this,arguments)}function Gf(s){return ud.apply(this,arguments)}function ud(){return ud=(0,Ce.Z)(function*(s){return s.offlineComponents||(pt("FirestoreClient","Using default OfflineComponentProvider"),yield qo(s,new Wh)),s.offlineComponents}),ud.apply(this,arguments)}function Sc(s){return ld.apply(this,arguments)}function ld(){return ld=(0,Ce.Z)(function*(s){return s.onlineComponents||(pt("FirestoreClient","Using default OnlineComponentProvider"),yield Hf(s,new iu)),s.onlineComponents}),ld.apply(this,arguments)}function Qd(s){return Gf(s).then(e=>e.persistence)}function cd(s){return Gf(s).then(e=>e.localStore)}function Jd(s){return Sc(s).then(e=>e.remoteStore)}function dd(s){return Sc(s).then(e=>e.syncEngine)}function ol(s){return hd.apply(this,arguments)}function hd(){return hd=(0,Ce.Z)(function*(s){const e=yield Sc(s),r=e.eventManager;return r.onListen=a_.bind(null,e.syncEngine),r.onUnlisten=Dc.bind(null,e.syncEngine),r}),hd.apply(this,arguments)}function og(s,e,r={}){const a=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(h,_,C,x,H){const q=new ig({next:be=>{_.enqueueAndForget(()=>$p(h,oe));const Ke=be.docs.has(C);!Ke&&be.fromCache?H.reject(new ht(Qe.UNAVAILABLE,"Failed to get document because the client is offline.")):Ke&&be.fromCache&&x&&"server"===x.source?H.reject(new ht(Qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(be)},error:be=>H.reject(be)}),oe=new Vf($c(C.path),q,{includeMetadataChanges:!0,Du:!0});return od(h,oe)}(yield ol(s),s.asyncQueue,e,r,a)})),a.promise}function ag(s,e,r={}){const a=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(h,_,C,x,H){const q=new ig({next:be=>{_.enqueueAndForget(()=>$p(h,oe)),be.fromCache&&"server"===x.source?H.reject(new ht(Qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(be)},error:be=>H.reject(be)}),oe=new Vf(C,q,{includeMetadataChanges:!0,Du:!0});return od(h,oe)}(yield ol(s),s.asyncQueue,e,r,a)})),a.promise}const ug=new Map;function cm(s,e,r){if(!r)throw new ht(Qe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function y_(s,e,r,a){if(!0===e&&!0===a)throw new ht(Qe.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function v_(s){if(!Nt.isDocumentKey(s))throw new ht(Qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function E_(s){if(Nt.isDocumentKey(s))throw new ht(Qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function dm(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":jt()}function Ar(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ht(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=dm(s);throw new ht(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function hm(s,e){if(e<=0)throw new ht(Qe.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class w_{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new ht(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ht(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,y_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,r,a){this._authCredentials=r,this._appCheckCredentials=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1,e instanceof Le?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ht(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Le(h.options.projectId)}(e))}get app(){if(!this._app)throw new ht(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ht(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new S;switch(r.type){case"gapi":const a=r.client;return yn(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new ee(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new ht(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=ug.get(e);r&&(pt("ComponentProvider","Removing Datastore"),ug.delete(e),r.terminate())}(this),Promise.resolve()}}class Gi{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ql(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gi(this.firestore,e,this._key)}}class wa{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new wa(this.firestore,e,this._query)}}class ql extends wa{constructor(e,r,a){super(e,r,$c(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gi(this.firestore,null,new Nt(e))}withConverter(e){return new ql(this.firestore,e,this._path)}}function C_(s,e,...r){if(s=(0,St.m9)(s),cm("collection","path",e),s instanceof qh){const a=Ln.fromString(e,...r);return E_(a),new ql(s,null,a)}{if(!(s instanceof Gi||s instanceof ql))throw new ht(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ln.fromString(e,...r));return E_(a),new ql(s.firestore,null,a)}}function fm(s,e,...r){if(s=(0,St.m9)(s),1===arguments.length&&(e=Pn.I()),cm("doc","path",e),s instanceof qh){const a=Ln.fromString(e,...r);return v_(a),new Gi(s,null,new Nt(a))}{if(!(s instanceof Gi||s instanceof ql))throw new ht(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ln.fromString(e,...r));return v_(a),new Gi(s.firestore,s instanceof ql?s.converter:null,new Nt(a))}}function gy(s,e){return s=(0,St.m9)(s),e=(0,St.m9)(e),(s instanceof Gi||s instanceof ql)&&(e instanceof Gi||e instanceof ql)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function b_(s,e){return s=(0,St.m9)(s),e=(0,St.m9)(e),s instanceof wa&&e instanceof wa&&s.firestore===e.firestore&&Id(s._query,e._query)&&s.converter===e.converter}class my{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Gd(this,"async_queue_retry"),this.Kc=()=>{const r=xf();r&&pt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.So.Eo()};const e=xf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const r=xf();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const r=new mi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(r){if(!yo(r))throw r;pt("AsyncQueue","Operation failed with retryable error: "+r)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const r=this.Oc.then(()=>(this.Lc=!0,e().catch(a=>{throw this.Bc=a,this.Lc=!1,kr("INTERNAL UNHANDLED ERROR: ",function(_){let C=_.message||"";return _.stack&&(C=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),C}(a)),a}).then(a=>(this.Lc=!1,a))));return this.Oc=r,r}enqueueAfterDelay(e,r,a){this.Gc(),this.qc.indexOf(e)>-1&&(r=0);const h=Vh.createAndSchedule(this,e,r,a,_=>this.Wc(_));return this.$c.push(h),h}Gc(){this.Bc&&jt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ce.Z)(function*(){let r;do{r=e.Oc,yield r}while(r!==e.Oc)})()}Hc(e){for(const r of this.$c)if(r.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.$c)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const r=this.$c.indexOf(e);this.$c.splice(r,1)}}function pm(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class _y{constructor(){this._progressObserver={},this._taskCompletionResolver=new mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,a){this._progressObserver={next:e,error:r,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ti extends qh{constructor(e,r,a){super(e,r,a),this.type="firestore",this._queue=new my,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Wf(this),this._firestoreClient.terminate()}}function zr(s){return s._firestoreClient||Wf(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Wf(s){var e;const r=s._freezeSettings(),a=(_=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Pe(s._databaseId,_,s._persistenceKey,(x=r).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var _,x;s._firestoreClient=new $f(s._authCredentials,s._appCheckCredentials,s._queue,a)}function vy(s,e,r){const a=new mi;return s.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield qo(s,r),yield Hf(s,e),a.resolve()}catch(h){const _=h;if(!("FirebaseError"===(C=_).name?C.code===Qe.FAILED_PRECONDITION||C.code===Qe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw _;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+_),a.reject(_)}var C})).then(()=>a.promise)}function _m(s){if(s._initialized||s._terminated)throw new ht(Qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Va{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new ht(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new al(Xr.fromBase64String(e))}catch(r){throw new ht(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new al(Xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eh{constructor(e){this._methodName=e}}class lg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ht(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ht(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}}const T_=/^__.*__$/;class ym{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return null!==this.fieldMask?new qn(e,this.data,this.fieldMask,r,this.fieldTransforms):new fr(e,this.data,r,this.fieldTransforms)}}class vm{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new qn(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Em(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}class qf{constructor(e,r,a,h,_,C){this.settings=e,this.databaseId=r,this.wt=a,this.ignoreUndefinedProperties=h,void 0===_&&this.Xc(),this.fieldTransforms=_||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ta({path:a,na:!1});return h.sa(e),h}ia(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ta({path:a,na:!1});return h.Xc(),h}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return X(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Em(this.Zc)&&T_.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class wm{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.wt=a||wc(e)}aa(e,r,a,h=!1){return new qf({Zc:e,methodName:r,ca:a,path:Fr.emptyPath(),na:!1,ua:h},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function th(s){const e=s._freezeSettings(),r=wc(s._databaseId);return new wm(s._databaseId,!!e.ignoreUndefinedProperties,r)}function Kh(s,e,r,a,h,_={}){const C=s.aa(_.merge||_.mergeFields?2:0,e,r,h);y("Data must be an object, but it was:",C,a);const x=l(a,C);let H,q;if(_.merge)H=new Uo(C.fieldMask),q=C.fieldTransforms;else if(_.mergeFields){const oe=[];for(const be of _.mergeFields){const Ke=D(e,be,r);if(!C.contains(Ke))throw new ht(Qe.INVALID_ARGUMENT,`Field '${Ke}' is specified in your field mask but missing from your input data.`);ue(oe,Ke)||oe.push(Ke)}H=new Uo(oe),q=C.fieldTransforms.filter(be=>H.covers(be.field))}else H=null,q=C.fieldTransforms;return new ym(new Ns(x),H,q)}class Kf extends eh{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kf}}function S_(s,e,r){return new qf({Zc:3,ca:e.settings.ca,methodName:s._methodName,na:r},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class nh extends eh{_toFieldTransform(e){return new Yu(e.path,new wu)}isEqual(e){return e instanceof nh}}class by extends eh{constructor(e,r){super(e),this.ha=r}_toFieldTransform(e){const r=S_(this,e,!0),a=this.ha.map(_=>o(_,r)),h=new Cu(a);return new Yu(e.path,h)}isEqual(e){return this===e}}class Cm extends eh{constructor(e,r){super(e),this.ha=r}_toFieldTransform(e){const r=S_(this,e,!0),a=this.ha.map(_=>o(_,r)),h=new eu(a);return new Yu(e.path,h)}isEqual(e){return this===e}}class bm extends eh{constructor(e,r){super(e),this.la=r}_toFieldTransform(e){const r=new ic(e.wt,yg(e.wt,this.la));return new Yu(e.path,r)}isEqual(e){return this===e}}function Im(s,e,r,a){const h=s.aa(1,e,r);y("Data must be an object, but it was:",h,a);const _=[],C=Ns.empty();wl(a,(H,q)=>{const oe=K(e,H,r);q=(0,St.m9)(q);const be=h.ia(oe);if(q instanceof Kf)_.push(oe);else{const Ke=o(q,be);null!=Ke&&(_.push(oe),C.set(oe,Ke))}});const x=new Uo(_);return new vm(C,x,h.fieldTransforms)}function Zf(s,e,r,a,h,_){const C=s.aa(1,e,r),x=[D(e,a,r)],H=[h];if(_.length%2!=0)throw new ht(Qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ke=0;Ke<_.length;Ke+=2)x.push(D(e,_[Ke])),H.push(_[Ke+1]);const q=[],oe=Ns.empty();for(let Ke=x.length-1;Ke>=0;--Ke)if(!ue(q,x[Ke])){const at=x[Ke];let mt=H[Ke];mt=(0,St.m9)(mt);const qt=C.ia(at);if(mt instanceof Kf)q.push(at);else{const pn=o(mt,qt);null!=pn&&(q.push(at),oe.set(at,pn))}}const be=new Uo(q);return new vm(oe,be,C.fieldTransforms)}function c(s,e,r,a=!1){return o(r,s.aa(a?4:3,e))}function o(s,e){if(f(s=(0,St.m9)(s)))return y("Unsupported field value:",e,s),l(s,e);if(s instanceof eh)return function(r,a){if(!Em(a.Zc))throw a.oa(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.oa(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(r,a){const h=[];let _=0;for(const C of r){let x=o(C,a.ra(_));null==x&&(x={nullValue:"NULL_VALUE"}),h.push(x),_++}return{arrayValue:{values:h}}}(s,e)}return function(r,a){if(null===(r=(0,St.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return yg(a.wt,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const h=dr.fromDate(r);return{timestampValue:ac(a.wt,h)}}if(r instanceof dr){const h=new dr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(a.wt,h)}}if(r instanceof lg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof al)return{bytesValue:uc(a.wt,r._byteString)};if(r instanceof Gi){const h=a.databaseId,_=r.firestore._databaseId;if(!_.isEqual(h))throw a.oa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:hs(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.oa(`Unsupported field value: ${dm(r)}`)}(s,e)}function l(s,e){const r={};return Cl(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wl(s,(a,h)=>{const _=o(h,e.ea(a));null!=_&&(r[a]=_)}),{mapValue:{fields:r}}}function f(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof dr||s instanceof lg||s instanceof al||s instanceof Gi||s instanceof eh)}function y(s,e,r){if(!f(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=dm(r);throw e.oa("an object"===a?s+" a custom object":s+" "+a)}var a}function D(s,e,r){if((e=(0,St.m9)(e))instanceof Va)return e._internalPath;if("string"==typeof e)return K(s,e);throw X("Field path arguments must be of type string or ",s,!1,void 0,r)}const M=new RegExp("[~\\*/\\[\\]]");function K(s,e,r){if(e.search(M)>=0)throw X(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new Va(...e.split("."))._internalPath}catch(a){throw X(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function X(s,e,r,a,h){const _=a&&!a.isEmpty(),C=void 0!==h;let x=`Function ${e}() called with invalid data`;r&&(x+=" (via `toFirestore()`)"),x+=". ";let H="";return(_||C)&&(H+=" (found",_&&(H+=` in field ${a}`),C&&(H+=` in document ${h}`),H+=")"),new ht(Qe.INVALID_ARGUMENT,x+s+H)}function ue(s,e){return s.some(r=>r.isEqual(e))}class Oe{constructor(e,r,a,h,_){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=h,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(nt("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Ue extends Oe{data(){return super.data()}}function nt(s,e){return"string"==typeof e?K(s,e):e instanceof Va?e._internalPath:e._delegate._internalPath}class Ft{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ut extends Oe{constructor(e,r,a,h,_,C){super(e,r,a,h,C),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new On(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(nt("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class On extends Ut{data(e={}){return super.data(e)}}class kn{constructor(e,r,a,h){this._firestore=e,this._userDataWriter=r,this._snapshot=h,this.metadata=new Ft(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new On(this._firestore,this._userDataWriter,a.key,a,new Ft(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ht(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let _=0;return a._snapshot.docChanges.map(C=>({type:"added",doc:new On(a._firestore,a._userDataWriter,C.doc.key,C.doc,new Ft(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:_++}))}{let _=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(C=>h||3!==C.type).map(C=>{const x=new On(a._firestore,a._userDataWriter,C.doc.key,C.doc,new Ft(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter);let H=-1,q=-1;return 0!==C.type&&(H=_.indexOf(C.doc.key),_=_.delete(C.doc.key)),1!==C.type&&(_=_.add(C.doc),q=_.indexOf(C.doc.key)),{type:Co(C.type),doc:x,oldIndex:H,newIndex:q}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Co(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}function Zs(s,e){return s instanceof Ut&&e instanceof Ut?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof kn&&e instanceof kn&&s._firestore===e._firestore&&b_(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function Wi(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new ht(Qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rs{}function Ua(s,...e){for(const r of e)s=r._apply(s);return s}class fd extends rs{constructor(e,r,a){super(),this.fa=e,this.da=r,this._a=a,this.type="where"}_apply(e){const r=th(e.firestore),a=function(h,_,C,x,H,q,oe){let be;if(H.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new ht(Qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){Ty(oe,q);const at=[];for(const mt of oe)at.push(bo(x,h,mt));be={arrayValue:{values:at}}}else be=bo(x,h,oe)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||Ty(oe,q),be=c(C,"where",oe,"in"===q||"not-in"===q);const Ke=Ms.create(H,q,be);return function(at,mt){if(mt.ht()){const pn=mh(at);if(null!==pn&&!pn.isEqual(mt.field))throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${pn.toString()}' and '${mt.field.toString()}'`);const ti=gh(at);null!==ti&&vv(0,mt.field,ti)}const qt=function(pn,ti){for(const fs of pn.filters)if(ti.indexOf(fs.op)>=0)return fs.op;return null}(at,function(pn){switch(pn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(mt.op));if(null!==qt)throw new ht(Qe.INVALID_ARGUMENT,qt===mt.op?`Invalid query. You cannot use more than one '${mt.op.toString()}' filter.`:`Invalid query. You cannot use '${mt.op.toString()}' filters with '${qt.toString()}' filters.`)}(h,Ke),Ke}(e._query,0,r,e.firestore._databaseId,this.fa,this.da,this._a);return new wa(e.firestore,e.converter,function(h,_){const C=h.filters.concat([_]);return new jo(h.path,h.collectionGroup,h.explicitOrderBy.slice(),C,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}class Zh extends rs{constructor(e,r){super(),this.fa=e,this.wa=r,this.type="orderBy"}_apply(e){const r=function(a,h,_){if(null!==a.startAt)throw new ht(Qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new ht(Qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new vu(h,_);return function(x,H){if(null===gh(x)){const q=mh(x);null!==q&&vv(0,q,H.field)}}(a,C),C}(e._query,this.fa,this.wa);return new wa(e.firestore,e.converter,function(a,h){const _=a.explicitOrderBy.concat([h]);return new jo(a.path,a.collectionGroup,_,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class Iy extends rs{constructor(e,r,a){super(),this.type=e,this.ma=r,this.ga=a}_apply(e){return new wa(e.firestore,e.converter,sp(e._query,this.ma,this.ga))}}class Dy extends rs{constructor(e,r,a){super(),this.type=e,this.ya=r,this.pa=a}_apply(e){const r=yv(e,this.type,this.ya,this.pa);return new wa(e.firestore,e.converter,(h=r,new jo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}class mv extends rs{constructor(e,r,a){super(),this.type=e,this.ya=r,this.pa=a}_apply(e){const r=yv(e,this.type,this.ya,this.pa);return new wa(e.firestore,e.converter,(h=r,new jo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function yv(s,e,r,a){if(r[0]=(0,St.m9)(r[0]),r[0]instanceof Oe)return function(h,_,C,x,H){if(!x)throw new ht(Qe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const q=[];for(const oe of Xa(h))if(oe.field.isKeyField())q.push(Rs(_,x.key));else{const be=x.data.field(oe.field);if($(be))throw new ht(Qe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+oe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===be){const Ke=oe.field.canonicalString();throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ke}' (used as the orderBy) does not exist.`)}q.push(be)}return new ha(q,H)}(s._query,s.firestore._databaseId,e,r[0]._document,a);{const h=th(s.firestore);return function(_,C,x,H,q,oe){const be=_.explicitOrderBy;if(q.length>be.length)throw new ht(Qe.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ke=[];for(let at=0;at<q.length;at++){const mt=q[at];if(be[at].field.isKeyField()){if("string"!=typeof mt)throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof mt}`);if(!Ja(_)&&-1!==mt.indexOf("/"))throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${mt}' contains a slash.`);const qt=_.path.child(Ln.fromString(mt));if(!Nt.isDocumentKey(qt))throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${qt}' is not because it contains an odd number of segments.`);const pn=new Nt(qt);Ke.push(Rs(C,pn))}else{const qt=c(x,H,mt);Ke.push(qt)}}return new ha(Ke,oe)}(s._query,s.firestore._databaseId,h,e,r,a)}}function bo(s,e,r){if("string"==typeof(r=(0,St.m9)(r))){if(""===r)throw new ht(Qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ja(e)&&-1!==r.indexOf("/"))throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(Ln.fromString(r));if(!Nt.isDocumentKey(a))throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Rs(s,new Nt(a))}if(r instanceof Gi)return Rs(s,r._key);throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dm(r)}.`)}function Ty(s,e){if(!Array.isArray(s)||0===s.length)throw new ht(Qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new ht(Qe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vv(s,e,r){if(!r.isEqual(e))throw new ht(Qe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}const fE={maxAttempts:5};class A_{convertValue(e,r="none"){switch(Xt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(P(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw jt()}}convertObject(e,r){const a={};return wl(e.fields,(h,_)=>{a[h]=this.convertValue(_,r)}),a}convertGeoPoint(e){return new lg(Br(e.latitude),Br(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=J(e);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(fe(e));default:return null}}convertTimestamp(e){const r=Ws(e);return new dr(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=Ln.fromString(e);yn(Ch(a));const h=new Le(a.get(1),a.get(3)),_=new Nt(a.popFirst(5));return h.isEqual(r)||kr(`Document ${_} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),_}}function x_(s,e,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,a}class Ev extends A_{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,r)}}class Sy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=th(e)}set(e,r,a){this._verifyNotCommitted();const h=ul(e,this._firestore),_=x_(h.converter,r,a),C=Kh(this._dataReader,"WriteBatch.set",h._key,_,null!==h.converter,a);return this._mutations.push(C.toMutation(h._key,Bi.none())),this}update(e,r,a,...h){this._verifyNotCommitted();const _=ul(e,this._firestore);let C;return C="string"==typeof(r=(0,St.m9)(r))||r instanceof Va?Zf(this._dataReader,"WriteBatch.update",_._key,r,a,h):Im(this._dataReader,"WriteBatch.update",_._key,r),this._mutations.push(C.toMutation(_._key,Bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=ul(e,this._firestore);return this._mutations=this._mutations.concat(new Iu(r._key,Bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ht(Qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ul(s,e){if((s=(0,St.m9)(s)).firestore!==e)throw new ht(Qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class Yf extends A_{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,r)}}function R_(s,e,r){s=Ar(s,Gi);const a=Ar(s.firestore,Ti),h=x_(s.converter,e,r);return Ba(a,[Kh(th(a),"setDoc",s._key,h,null!==s.converter,r).toMutation(s._key,Bi.none())])}function Ac(s,e,r,...a){s=Ar(s,Gi);const h=Ar(s.firestore,Ti),_=th(h);let C;return C="string"==typeof(e=(0,St.m9)(e))||e instanceof Va?Zf(_,"updateDoc",s._key,e,r,a):Im(_,"updateDoc",s._key,e),Ba(h,[C.toMutation(s._key,Bi.exists(!0))])}function xc(s,...e){var r,a,h;s=(0,St.m9)(s);let _={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||pm(e[C])||(_=e[C],C++);const x={includeMetadataChanges:_.includeMetadataChanges};if(pm(e[C])){const be=e[C];e[C]=null===(r=be.next)||void 0===r?void 0:r.bind(be),e[C+1]=null===(a=be.error)||void 0===a?void 0:a.bind(be),e[C+2]=null===(h=be.complete)||void 0===h?void 0:h.bind(be)}let H,q,oe;if(s instanceof Gi)q=Ar(s.firestore,Ti),oe=$c(s._key.path),H={next:be=>{e[C]&&e[C](N_(q,s,be))},error:e[C+1],complete:e[C+2]};else{const be=Ar(s,wa);q=Ar(be.firestore,Ti),oe=be._query;const Ke=new Yf(q);H={next:at=>{e[C]&&e[C](new kn(q,Ke,be,at))},error:e[C+1],complete:e[C+2]},Wi(s._query)}return function(be,Ke,at,mt){const qt=new ig(mt),pn=new Vf(Ke,qt,at);return be.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return od(yield ol(be),pn)})),()=>{qt.Tc(),be.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return $p(yield ol(be),pn)}))}}(zr(q),oe,x,H)}function Ba(s,e){return function(r,a){const h=new mi;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(s,e,r){return Bh.apply(this,arguments)}(yield dd(r),a,h)})),h.promise}(zr(s),e)}function N_(s,e,r){const a=r.docs.get(e._key),h=new Yf(s);return new Ut(s,h,e._key,a,new Ft(r.hasPendingWrites,r.fromCache),e.converter)}class Iv extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=th(e)}get(e){const r=ul(e,this._firestore),a=new Ev(this._firestore);return this._transaction.lookup([r._key]).then(h=>{if(!h||1!==h.length)return jt();const _=h[0];if(_.isFoundDocument())return new Oe(this._firestore,a,_.key,_,r.converter);if(_.isNoDocument())return new Oe(this._firestore,a,r._key,null,r.converter);throw jt()})}set(e,r,a){const h=ul(e,this._firestore),_=x_(h.converter,r,a),C=Kh(this._dataReader,"Transaction.set",h._key,_,null!==h.converter,a);return this._transaction.set(h._key,C),this}update(e,r,a,...h){const _=ul(e,this._firestore);let C;return C="string"==typeof(r=(0,St.m9)(r))||r instanceof Va?Zf(this._dataReader,"Transaction.update",_._key,r,a,h):Im(this._dataReader,"Transaction.update",_._key,r),this._transaction.update(_._key,C),this}delete(e){const r=ul(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=ul(e,this._firestore),a=new Yf(this._firestore);return super.get(e).then(h=>new Ut(this._firestore,a,r._key,h._document,new Ft(!1,!1),r.converter))}}function hg(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ht("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function Av(){if("undefined"==typeof Uint8Array)throw new ht("unimplemented","Uint8Arrays are not available in this environment.")}function xy(){if("undefined"==typeof atob)throw new ht("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(s,e=!0){da=_t.SDK_VERSION,(0,_t._registerComponent)(new Wt.wA("firestore",(r,{options:a})=>{const h=r.getProvider("app").getImmediate(),_=new Ti(h,new L(r.getProvider("auth-internal")),new Se(r.getProvider("app-check-internal")));return a=Object.assign({useFetchStreams:e},a),_._setSettings(a),_},"PUBLIC")),(0,_t.registerVersion)(na,"3.4.13",s),(0,_t.registerVersion)(na,"3.4.13","esm2017")}();class fg{constructor(e){this._delegate=e}static fromBase64String(e){return xy(),new fg(al.fromBase64String(e))}static fromUint8Array(e){return Av(),new fg(al.fromUint8Array(e))}toBase64(){return xy(),this._delegate.toBase64()}toUint8Array(){return Av(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tm(s){return function(s,e){if("object"!=typeof s||null===s)return!1;const r=s;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(s)}class Ry{enableIndexedDbPersistence(e,r){return function(s,e){_m(s=Ar(s,Ti));const r=zr(s),a=s._freezeSettings(),h=new iu;return vy(r,h,new zo(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function(s){_m(s=Ar(s,Ti));const e=zr(s),r=s._freezeSettings(),a=new iu;return vy(e,a,new um(a,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(s){if(s._initialized&&!s._terminated)throw new ht(Qe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mi;return s._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(r=(0,Ce.Z)(function*(a){if(!no.V())return Promise.resolve();const h=a+"main";yield no.delete(h)}),function(a){return r.apply(this,arguments)})(Fg(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Ny{constructor(e,r,a){this._delegate=r,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof Le||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&_o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,a={}){!function(s,e,r,a={}){var h;const _=(s=Ar(s,qh))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&_o("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${r}`,ssl:!1})),a.mockUserToken){let C,x;if("string"==typeof a.mockUserToken)C=a.mockUserToken,x=li.MOCK_USER;else{C=(0,St.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const H=a.mockUserToken.sub||a.mockUserToken.user_id;if(!H)throw new ht(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new li(H)}s._authCredentials=new I(new N(C,x))}}(this._delegate,e,r,a)}enableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield Qd(s),r=yield Jd(s);return e.setNetworkEnabled(!0),function(a){const h=Vt(a);return h.lu.delete(0),Rf(h)}(r)}))}(zr(s=Ar(s,Ti)))}(this._delegate)}disableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield Qd(s),r=yield Jd(s);return e.setNetworkEnabled(!1),(a=(0,Ce.Z)(function*(h){const _=Vt(h);_.lu.add(0),yield jl(_),_._u.set("Offline")}),function(h){return a.apply(this,arguments)})(r);var a}))}(zr(s=Ar(s,Ti)))}(this._delegate)}enablePersistence(e){let r=!1,a=!1;return e&&(r=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,y_("synchronizeTabs",r,"experimentalForceOwningTab",a)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(s){return function(e){const r=new mi;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(s,e){return rm.apply(this,arguments)}(yield dd(e),r)})),r.promise}(zr(s=Ar(s,Ti)))}(this._delegate)}onSnapshotsInSync(e){return function(s,e){return function(s,e){const r=new ig(e);return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return a=yield ol(s),h=r,Vt(a).Tu.add(h),void h.next();var a,h})),()=>{r.Tc(),s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return a=yield ol(s),h=r,void Vt(a).Tu.delete(h);var a,h}))}}(zr(s=Ar(s,Ti)),pm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ht("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pg(this,C_(this._delegate,e))}catch(r){throw ou(r,"collection()","Firestore.collection()")}}doc(e){try{return new ll(this,fm(this._delegate,e))}catch(r){throw ou(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new au(this,function(s,e){if(s=Ar(s,qh),cm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ht(Qe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wa(s,null,(r=e,new jo(Ln.emptyPath(),r)));var r}(this._delegate,e))}catch(r){throw ou(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(s,e,r){s=Ar(s,Ti);const a=Object.assign(Object.assign({},fE),r);return function(h){if(h.maxAttempts<1)throw new ht(Qe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(s,e,r){const a=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const h=yield(_=s,Sc(_).then(C=>C.datastore));var _;new zl(s.asyncQueue,h,r,e,a).run()})),a.promise}(zr(s),h=>e(new Iv(s,h)),a)}(this._delegate,r=>e(new My(this,r)))}batch(){return zr(this._delegate),new Py(new Sy(this._delegate,e=>Ba(this._delegate,e)))}loadBundle(e){return function(s,e){const r=zr(s=Ar(s,Ti)),a=new _y;return function(s,e,r,a){const h=function(_,C){let x;return x="string"==typeof _?(new TextEncoder).encode(_):_,H=function(H,q){if(H instanceof Uint8Array)return zh(H,q);if(H instanceof ArrayBuffer)return zh(new Uint8Array(H),q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new h_(H,C);var H}(r,wc(e));s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(s,e,r){const a=Vt(s);var h;(h=(0,Ce.Z)(function*(_,C,x){try{const H=yield C.getMetadata();if(yield function(Ke,at){const mt=Vt(Ke),qt=qs(at.createTime);return mt.persistence.runTransaction("hasNewerBundle","readonly",pn=>mt.Ds.getBundleMetadata(pn,at.id)).then(pn=>!!pn&&pn.createTime.compareTo(qt)>=0)}(_.localStore,H))return yield C.close(),x._completeWith({taskState:"Success",documentsLoaded:(Ke=H).totalDocuments,bytesLoaded:Ke.totalBytes,totalDocuments:Ke.totalDocuments,totalBytes:Ke.totalBytes}),Promise.resolve(new Set);x._updateProgress(Yg(H));const q=new Zg(H,_.localStore,C.wt);let oe=yield C.fc();for(;oe;){const Ke=yield q.Nu(oe);Ke&&x._updateProgress(Ke),oe=yield C.fc()}const be=yield q.complete();return yield Fa(_,be.Mu,void 0),yield function(Ke,at){const mt=Vt(Ke);return mt.persistence.runTransaction("Save bundle","readwrite",qt=>mt.Ds.saveBundleMetadata(qt,at))}(_.localStore,H),x._completeWith(be.progress),Promise.resolve(be.Ou)}catch(H){return _o("SyncEngine",`Loading bundle failed with ${H}`),x._failWith(H),Promise.resolve(new Set)}var Ke}),function(_,C,x){return h.apply(this,arguments)})(a,e,r).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield dd(s),h,a)}))}(r,s._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function(s,e){return function(s,e){return s.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(r,a){const h=Vt(r);return h.persistence.runTransaction("Get named query","readonly",_=>h.Ds.getNamedQuery(_,a))}(yield cd(s),e)}))}(zr(s=Ar(s,Ti)),e).then(r=>r?new wa(s,null,r.query):null)}(this._delegate,e).then(r=>r?new au(this,r):null)}}class Sm extends A_{constructor(e){super(),this.firestore=e}convertBytes(e){return new fg(new al(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return ll.forKey(r,this.firestore,null)}}class My{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new Sm(e)}get(e){const r=Qf(e);return this._delegate.get(r).then(a=>new Am(this._firestore,new Ut(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,r.converter)))}set(e,r,a){const h=Qf(e);return a?(hg("Transaction.set",a),this._delegate.set(h,r,a)):this._delegate.set(h,r),this}update(e,r,a,...h){const _=Qf(e);return 2===arguments.length?this._delegate.update(_,r):this._delegate.update(_,r,a,...h),this}delete(e){const r=Qf(e);return this._delegate.delete(r),this}}class Py{constructor(e){this._delegate=e}set(e,r,a){const h=Qf(e);return a?(hg("WriteBatch.set",a),this._delegate.set(h,r,a)):this._delegate.set(h,r),this}update(e,r,a,...h){const _=Qf(e);return 2===arguments.length?this._delegate.update(_,r):this._delegate.update(_,r,a,...h),this}delete(e){const r=Qf(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Yh{constructor(e,r,a){this._firestore=e,this._userDataWriter=r,this._delegate=a}fromFirestore(e,r){const a=new On(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xm(this._firestore,a),null!=r?r:{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const a=Yh.INSTANCES;let h=a.get(e);h||(h=new WeakMap,a.set(e,h));let _=h.get(r);return _||(_=new Yh(e,new Sm(e),r),h.set(r,_)),_}}Yh.INSTANCES=new WeakMap;class ll{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Sm(e)}static forPath(e,r,a){if(e.length%2!=0)throw new ht("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ll(r,new Gi(r._delegate,a,new Nt(e)))}static forKey(e,r,a){return new ll(r,new Gi(r._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new pg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pg(this.firestore,C_(this._delegate,e))}catch(r){throw ou(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Gi&&gy(this._delegate,e)}set(e,r){r=hg("DocumentReference.set",r);try{return r?R_(this._delegate,e,r):R_(this._delegate,e)}catch(a){throw ou(a,"setDoc()","DocumentReference.set()")}}update(e,r,...a){try{return 1===arguments.length?Ac(this._delegate,e):Ac(this._delegate,e,r,...a)}catch(h){throw ou(h,"updateDoc()","DocumentReference.update()")}}delete(){return function(s){return Ba(Ar(s.firestore,Ti),[new Iu(s._key,Bi.none())])}(this._delegate)}onSnapshot(...e){const r=Rv(e),a=Nv(e,h=>new Am(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return xc(this._delegate,r,a)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(s){s=Ar(s,Gi);const e=Ar(s.firestore,Ti),r=zr(e),a=new Yf(e);return function(s,e){const r=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(a=(0,Ce.Z)(function*(h,_,C){try{const x=yield function(H,q){const oe=Vt(H);return oe.persistence.runTransaction("read document","readonly",be=>oe.localDocuments.getDocument(be,q))}(h,_);x.isFoundDocument()?C.resolve(x):x.isNoDocument()?C.resolve(null):C.reject(new ht(Qe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const H=sd(x,`Failed to get document '${_} from cache`);C.reject(H)}}),function(h,_,C){return a.apply(this,arguments)})(yield cd(s),e,r);var a})),r.promise}(r,s._key).then(h=>new Ut(e,a,s._key,h,new Ft(null!==h&&h.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Ar(s,Gi);const e=Ar(s.firestore,Ti);return og(zr(e),s._key,{source:"server"}).then(r=>N_(e,s,r))}(this._delegate):function(s){s=Ar(s,Gi);const e=Ar(s.firestore,Ti);return og(zr(e),s._key).then(r=>N_(e,s,r))}(this._delegate),r.then(a=>new Am(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new ll(this.firestore,this._delegate.withConverter(e?Yh.getInstance(this.firestore,e):null))}}function ou(s,e,r){return s.message=s.message.replace(e,r),s}function Rv(s){for(const e of s)if("object"==typeof e&&!Tm(e))return e;return{}}function Nv(s,e){var r,a;let h;return h=Tm(s[0])?s[0]:Tm(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:_=>{h.next&&h.next(e(_))},error:null===(r=h.error)||void 0===r?void 0:r.bind(h),complete:null===(a=h.complete)||void 0===a?void 0:a.bind(h)}}class Am{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new ll(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return Zs(this._delegate,e._delegate)}}class xm extends Am{data(e){const r=this._delegate.data(e);return function(s,e){s||jt()}(void 0!==r),r}}class au{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Sm(e)}where(e,r,a){try{return new au(this.firestore,Ua(this._delegate,function(s,e,r){const a=e,h=nt("where",s);return new fd(h,a,r)}(e,r,a)))}catch(h){throw ou(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new au(this.firestore,Ua(this._delegate,function(s,e="asc"){const r=e,a=nt("orderBy",s);return new Zh(a,r)}(e,r)))}catch(a){throw ou(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new au(this.firestore,Ua(this._delegate,function(s){return hm("limit",s),new Iy("limit",s,"F")}(e)))}catch(r){throw ou(r,"limit()","Query.limit()")}}limitToLast(e){try{return new au(this.firestore,Ua(this._delegate,function(s){return hm("limitToLast",s),new Iy("limitToLast",s,"L")}(e)))}catch(r){throw ou(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new au(this.firestore,Ua(this._delegate,function(...s){return new Dy("startAt",s,!0)}(...e)))}catch(r){throw ou(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new au(this.firestore,Ua(this._delegate,function(...s){return new Dy("startAfter",s,!1)}(...e)))}catch(r){throw ou(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new au(this.firestore,Ua(this._delegate,function(...s){return new mv("endBefore",s,!1)}(...e)))}catch(r){throw ou(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new au(this.firestore,Ua(this._delegate,function(...s){return new mv("endAt",s,!0)}(...e)))}catch(r){throw ou(r,"endAt()","Query.endAt()")}}isEqual(e){return b_(this._delegate,e._delegate)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(s){s=Ar(s,wa);const e=Ar(s.firestore,Ti),r=zr(e),a=new Yf(e);return function(s,e){const r=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(a=(0,Ce.Z)(function*(h,_,C){try{const x=yield Ec(h,_,!0),H=new o_(_,x.ji),q=H.Ku(x.documents),oe=H.applyChanges(q,!1);C.resolve(oe.snapshot)}catch(x){const H=sd(x,`Failed to execute query '${_} against cache`);C.reject(H)}}),function(h,_,C){return a.apply(this,arguments)})(yield cd(s),e,r);var a})),r.promise}(r,s._query).then(h=>new kn(e,a,s,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Ar(s,wa);const e=Ar(s.firestore,Ti),r=zr(e),a=new Yf(e);return ag(r,s._query,{source:"server"}).then(h=>new kn(e,a,s,h))}(this._delegate):function(s){s=Ar(s,wa);const e=Ar(s.firestore,Ti),r=zr(e),a=new Yf(e);return Wi(s._query),ag(r,s._query).then(h=>new kn(e,a,s,h))}(this._delegate),r.then(a=>new Oy(this.firestore,new kn(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const r=Rv(e),a=Nv(e,h=>new Oy(this.firestore,new kn(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return xc(this._delegate,r,a)}withConverter(e){return new au(this.firestore,this._delegate.withConverter(e?Yh.getInstance(this.firestore,e):null))}}class bE{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new xm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Oy{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new au(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new bE(this._firestore,r))}forEach(e,r){this._delegate.forEach(a=>{e.call(r,new xm(this._firestore,a))})}isEqual(e){return Zs(this._delegate,e._delegate)}}class pg extends au{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ll(this.firestore,e):null}doc(e){try{return new ll(this.firestore,void 0===e?fm(this._delegate):fm(this._delegate,e))}catch(r){throw ou(r,"doc()","CollectionReference.doc()")}}add(e){return function(s,e){const r=Ar(s.firestore,Ti),a=fm(s),h=x_(s.converter,e);return Ba(r,[Kh(th(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,Bi.exists(!1))]).then(()=>a)}(this._delegate,e).then(r=>new ll(this.firestore,r))}isEqual(e){return gy(this._delegate,e._delegate)}withConverter(e){return new pg(this.firestore,this._delegate.withConverter(e?Yh.getInstance(this.firestore,e):null))}}function Qf(s){return Ar(s,Gi)}class ky{constructor(...e){this._delegate=new Va(...e)}static documentId(){return new ky(Fr.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof Va&&this._delegate._internalPath.isEqual(e._internalPath)}}class Jf{constructor(e){this._delegate=e}static serverTimestamp(){const e=new nh("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Jf(e)}static delete(){const e=new Kf("deleteField");return e._methodName="FieldValue.delete",new Jf(e)}static arrayUnion(...e){const r=function(...s){return new by("arrayUnion",s)}(...e);return r._methodName="FieldValue.arrayUnion",new Jf(r)}static arrayRemove(...e){const r=function(...s){return new Cm("arrayRemove",s)}(...e);return r._methodName="FieldValue.arrayRemove",new Jf(r)}static increment(e){const r=function(s){return new bm("increment",s)}(e);return r._methodName="FieldValue.increment",new Jf(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IE={Firestore:Ny,GeoPoint:lg,Timestamp:dr,Blob:fg,Transaction:My,WriteBatch:Py,DocumentReference:ll,DocumentSnapshot:Am,Query:au,QueryDocumentSnapshot:xm,QuerySnapshot:Oy,CollectionReference:pg,FieldPath:ky,FieldValue:Jf,setLogLevel:function(s){!function(s){ra.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function(s){(function(s,e){s.INTERNAL.registerComponent(new Wt.wA("firestore-compat",r=>((e,r)=>new Ny(e,r,new Ry))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},IE)))})(s),s.registerVersion("@firebase/firestore-compat","0.1.22")}(Be.Z);var Qh=z(8006),SE=z(905),AE=z(7841);function Fy(s,e){return function(s,e=U.z){return new ie.y(r=>{let a;return null!=e?e.schedule(()=>{a=s.onSnapshot({includeMetadataChanges:!0},r)}):a=s.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=a&&a()}})}(s,e)}function P_(s,e){return Fy(s,e).pipe((0,pe.U)(r=>({payload:r,type:"query"})))}function Rm(s,e){return P_(s,e).pipe((0,ce.O)(void 0),he(),(0,pe.U)(([r,a])=>{const h=a.payload.docChanges(),_=h.map(C=>({type:C.type,payload:C}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((C,x)=>{const H=h.find(oe=>oe.doc.ref.isEqual(C.ref)),q=null==r?void 0:r.payload.docs.find(oe=>oe.ref.isEqual(C.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(C.metadata)||!H&&q&&JSON.stringify(q.metadata)===JSON.stringify(C.metadata)||_.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:C}})}),_}))}function Ly(s,e,r){return Rm(s,r).pipe((0,$e.R)((a,h)=>function(s,e,r){return e.forEach(a=>{r.indexOf(a.type)>-1&&(s=function(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return O_(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=s.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return O_(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return O_(s,e.oldIndex,1)}return s}(s,a))}),s}(a,h.map(_=>_.payload),e),[]),(0,Ye.x)(),(0,pe.U)(a=>a.map(h=>({type:h.type,payload:h}))))}function O_(s,e,r,...a){const h=s.slice();return h.splice(e,r,...a),h}function k_(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class Vy{constructor(e,r,a){this.ref=e,this.query=r,this.afs=a}stateChanges(e){let r=Rm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,pe.U)(a=>a.filter(h=>e.indexOf(h.type)>-1)))),r.pipe((0,ce.O)(void 0),he(),(0,it.h)(([a,h])=>h.length>0||!a),(0,pe.U)(([a,h])=>h),de.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$e.R)((r,a)=>[...r,...a],[]))}snapshotChanges(e){const r=k_(e);return Ly(this.query,r,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return P_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),de.iC)}get(e){return(0,Re.D)(this.query.get(e)).pipe(de.iC)}add(e){return this.ref.add(e)}doc(e){return new Jh(this.ref.doc(e),this.afs)}}class Jh{constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const a=this.ref.collection(e),{ref:h,query:_}=RE(a,r);return new Vy(h,_,this.afs)}snapshotChanges(){return function(s,e){return Fy(s,e).pipe((0,ce.O)(void 0),he(),(0,pe.U)(([r,a])=>a.exists?(null==r?void 0:r.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pe.U)(({payload:r})=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data()))}get(e){return(0,Re.D)(this.ref.get(e)).pipe(de.iC)}}class xE{constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Rm(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)),(0,it.h)(r=>r.length>0),de.iC):Rm(this.query,this.afs.schedulers.outsideAngular).pipe(de.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$e.R)((r,a)=>[...r,...a],[]))}snapshotChanges(e){const r=k_(e);return Ly(this.query,r,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return P_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(a=>a.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),de.iC)}get(e){return(0,Re.D)(this.query.get(e)).pipe(de.iC)}}const Fv=new T.OlP("angularfire2.enableFirestorePersistence"),Xf=new T.OlP("angularfire2.firestore.persistenceSettings"),H0=new T.OlP("angularfire2.firestore.settings"),Uy=new T.OlP("angularfire2.firestore.use-emulator");function RE(s,e=(r=>r)){return{query:e(s),ref:s}}let By=(()=>{class s{constructor(r,a,h,_,C,x,H,q,oe,be,Ke,at,mt,qt,pn,ti,fs){this.schedulers=H;const Si=(0,ze.on)(r,x,a),Io=oe;be&&(0,Qh.nw)(Si,x,Ke,mt,qt,pn,at,ti),[this.firestore,this.persistenceEnabled$]=(0,ze.cc)(`${Si.name}.firestore`,"AngularFirestore",Si.name,()=>{const vi=x.runOutsideAngular(()=>Si.firestore());if(_&&vi.settings(_),Io&&vi.useEmulator(...Io),h&&!(0,Ct.PM)(C)){const Os=()=>{try{return(0,Re.D)(vi.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(ja){return"undefined"!=typeof console&&console.warn(ja),(0,Ae.of)(!1)}};return[vi,x.runOutsideAngular(Os)]}return[vi,(0,Ae.of)(!1)]},[_,Io,h])}collection(r,a){let h;h="string"==typeof r?this.firestore.collection(r):r;const{ref:_,query:C}=RE(h,a),x=this.schedulers.ngZone.run(()=>_);return new Vy(x,C,this)}collectionGroup(r,a){const h=a||(C=>C),_=this.firestore.collectionGroup(r);return new xE(h(_),this)}doc(r){let a;a="string"==typeof r?this.firestore.doc(r):r;const h=this.schedulers.ngZone.run(()=>a);return new Jh(h,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(r){return new(r||s)(T.LFG(ze.Dh),T.LFG(ze.xv,8),T.LFG(Fv,8),T.LFG(H0,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(de.HU),T.LFG(Xf,8),T.LFG(Uy,8),T.LFG(Qh.zQ,8),T.LFG(Qh.Qv,8),T.LFG(Qh.L6,8),T.LFG(Qh._Q,8),T.LFG(Qh.rT,8),T.LFG(Qh.lh,8),T.LFG(Qh.f7,8),T.LFG(SE.nm,8))},s.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),Lv=(()=>{class s{constructor(){AE.Z.registerVersion("angularfire",de.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:s,providers:[{provide:Fv,useValue:!0},{provide:Xf,useValue:r}]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=T.oAB({type:s}),s.\u0275inj=T.cJS({providers:[By]}),s})()},8939:(Ot,Ge,z)=>{"use strict";z.d(Ge,{hO:()=>$e,xv:()=>we,Dh:()=>he,GT:()=>de,cc:()=>Ye,on:()=>se,pX:()=>Ae});var T=z(7716),U=z(7841),ie=z(6913);Ot=z.hmd(Ot);const Re=["ngOnDestroy"],Ae=(We,Be,Ce,_t={})=>new Proxy(We,{get:(Wt,nn)=>Ce.runOutsideAngular(()=>{var St;if(We[nn])return(null===(St=null==_t?void 0:_t.spy)||void 0===St?void 0:St.get)&&_t.spy.get(nn,We[nn]),We[nn];if(Re.indexOf(nn)>-1)return()=>{};const fn=Be.toPromise().then(ct=>{const Fe=ct&&ct[nn];return"function"==typeof Fe?Fe.bind(ct):Fe&&Fe.then?Fe.then(bt=>Ce.run(()=>bt)):Ce.run(()=>Fe)});return new Proxy(()=>{},{get:(ct,Fe)=>fn[Fe],apply:(ct,Fe,bt)=>fn.then(ot=>{var Mt;const Jt=ot&&ot(...bt);return(null===(Mt=null==_t?void 0:_t.spy)||void 0===Mt?void 0:Mt.apply)&&_t.spy.apply(nn,bt,Jt),Jt})})})}),de=(We,Be)=>{Be.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(_t=>{Object.defineProperty(We.prototype,_t,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,_t))})})};class Me{constructor(Be){return Be}}const he=new T.OlP("angularfire2.app.options"),we=new T.OlP("angularfire2.app.name");function se(We,Be,Ce){const Wt="object"==typeof Ce&&Ce||{};Wt.name=Wt.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const St=U.Z.apps.filter(fn=>fn&&fn.name===Wt.name)[0]||Be.runOutsideAngular(()=>U.Z.initializeApp(We,Wt));try{JSON.stringify(We)!==JSON.stringify(St.options)&&ce("error",`${St.name} Firebase App already initialized with different options${Ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(fn){}return new Me(St)}const ce=(We,...Be)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[We](...Be)},pe={provide:Me,useFactory:se,deps:[he,T.R0b,[new T.FiY,we]]};let $e=(()=>{class We{constructor(Ce){U.Z.registerVersion("angularfire",ie.q4.full,"core"),U.Z.registerVersion("angularfire",ie.q4.full,"app-compat"),U.Z.registerVersion("angular",T.q4F.full,Ce.toString())}static initializeApp(Ce,_t){return{ngModule:We,providers:[{provide:he,useValue:Ce},{provide:we,useValue:_t}]}}}return We.\u0275fac=function(Ce){return new(Ce||We)(T.LFG(T.Lbi))},We.\u0275mod=T.oAB({type:We}),We.\u0275inj=T.cJS({providers:[pe]}),We})();function Ye(We,Be,Ce,_t,Wt){const[,nn,St]=globalThis.\u0275AngularfireInstanceCache.find(fn=>fn[0]===We)||[];if(nn)return function(We,Be){try{return We.toString()===Be.toString()}catch(Ce){return We===Be}}(Wt,St)||(Ct("error",`${Be} was already initialized on the ${Ce} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),Ct("warn",{is:Wt,was:St})),nn;{const fn=_t();return globalThis.\u0275AngularfireInstanceCache.push([We,fn,Wt]),fn}}const ze=!!Ot.hot,Ct=(We,...Be)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[We](...Be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6913:(Ot,Ge,z)=>{"use strict";z.d(Ge,{q4:()=>no,iC:()=>Xr,fc:()=>Uo,HU:()=>es,vb:()=>wl,JM:()=>lh});var T=z(7716),U=z(2329),ie=z(8239),Re=z(8026),Ae=z(3854),de=z(3910),Me=z(5422),he=z(3173);const we="@firebase/installations",se="0.5.12",pe=`w:${se}`,$e="FIS_v2",Be=new Ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(P){return P instanceof Ae.ZR&&P.code.includes("request-failed")}function _t({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Wt(P){return{token:P.token,requestStatus:2,expiresIn:ot(P.expiresIn),creationTime:Date.now()}}function nn(P,$){return St.apply(this,arguments)}function St(){return(St=(0,ie.Z)(function*(P,$){const fe=(yield $.json()).error;return Be.create("request-failed",{requestName:P,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function fn({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function ct(P,{refreshToken:$}){const J=fn(P);return J.append("Authorization",function(P){return`${$e} ${P}`}($)),J}function Fe(P){return bt.apply(this,arguments)}function bt(){return(bt=(0,ie.Z)(function*(P){const $=yield P();return $.status>=500&&$.status<600?P():$})).apply(this,arguments)}function ot(P){return Number(P.replace("s","000"))}function Jt(P,$){return It.apply(this,arguments)}function It(){return(It=(0,ie.Z)(function*({appConfig:P,heartbeatServiceProvider:$},{fid:J}){const fe=_t(P),Pe=fn(P),Le=$.getImmediate({optional:!0});if(Le){const zt=yield Le.getHeartbeatsHeader();zt&&Pe.append("x-firebase-client",zt)}const Lt={method:"POST",headers:Pe,body:JSON.stringify({fid:J,authVersion:$e,appId:P.appId,sdkVersion:pe})},Yt=yield Fe(()=>fetch(fe,Lt));if(Yt.ok){const zt=yield Yt.json();return{fid:zt.fid||J,registrationStatus:2,refreshToken:zt.refreshToken,authToken:Wt(zt.authToken)}}throw yield nn("Create Installation",Yt)})).apply(this,arguments)}function ur(P){return new Promise($=>{setTimeout($,P)})}const Ur=/^[cdef][\w-]{21}$/;function gn(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const J=function(P){return function(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Ur.test(J)?J:""}catch(P){return""}}function mn(P){return`${P.appName}!${P.appId}`}const cn=new Map;function Zt(P,$){const J=mn(P);an(J,$),function(P,$){const J=(!gr&&"BroadcastChannel"in self&&(gr=new BroadcastChannel("[Firebase] FID Change"),gr.onmessage=P=>{an(P.data.key,P.data.fid)}),gr);J&&J.postMessage({key:P,fid:$}),0===cn.size&&gr&&(gr.close(),gr=null)}(J,$)}function an(P,$){const J=cn.get(P);if(J)for(const fe of J)fe($)}let gr=null;const Mn="firebase-installations-store";let et=null;function un(){return et||(et=(0,he.X3)("firebase-installations-database",1,{upgrade:(P,$)=>{0===$&&P.createObjectStore(Mn)}})),et}function xt(P,$){return jn.apply(this,arguments)}function jn(){return(jn=(0,ie.Z)(function*(P,$){const J=mn(P),Pe=(yield un()).transaction(Mn,"readwrite"),Le=Pe.objectStore(Mn),lt=yield Le.get(J);return yield Le.put($,J),yield Pe.done,(!lt||lt.fid!==$.fid)&&Zt(P,$.fid),$})).apply(this,arguments)}function or(P){return xn.apply(this,arguments)}function xn(){return(xn=(0,ie.Z)(function*(P){const $=mn(P),fe=(yield un()).transaction(Mn,"readwrite");yield fe.objectStore(Mn).delete($),yield fe.done})).apply(this,arguments)}function xr(P,$){return vr.apply(this,arguments)}function vr(){return(vr=(0,ie.Z)(function*(P,$){const J=mn(P),Pe=(yield un()).transaction(Mn,"readwrite"),Le=Pe.objectStore(Mn),lt=yield Le.get(J),Lt=$(lt);return void 0===Lt?yield Le.delete(J):yield Le.put(Lt,J),yield Pe.done,Lt&&(!lt||lt.fid!==Lt.fid)&&Zt(P,Lt.fid),Lt})).apply(this,arguments)}function br(P){return hr.apply(this,arguments)}function hr(){return(hr=(0,ie.Z)(function*(P){let $;const J=yield xr(P.appConfig,fe=>{const Pe=Is(fe),Le=Yn(P,Pe);return $=Le.registrationPromise,Le.installationEntry});return""===J.fid?{installationEntry:yield $}:{installationEntry:J,registrationPromise:$}})).apply(this,arguments)}function Is(P){return Dt(P||{fid:gn(),registrationStatus:0})}function Yn(P,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(Be.create("app-offline"))};const J={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},fe=function(P,$){return rn.apply(this,arguments)}(P,J);return{installationEntry:J,registrationPromise:fe}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:xi(P)}:{installationEntry:$}}function rn(){return(rn=(0,ie.Z)(function*(P,$){try{const J=yield Jt(P,$);return xt(P.appConfig,J)}catch(J){throw Ce(J)&&409===J.customData.serverCode?yield or(P.appConfig):yield xt(P.appConfig,{fid:$.fid,registrationStatus:0}),J}})).apply(this,arguments)}function xi(P){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,ie.Z)(function*(P){let $=yield fi(P.appConfig);for(;1===$.registrationStatus;)yield ur(100),$=yield fi(P.appConfig);if(0===$.registrationStatus){const{installationEntry:J,registrationPromise:fe}=yield br(P);return fe||J}return $})).apply(this,arguments)}function fi(P){return xr(P,$=>{if(!$)throw Be.create("installation-not-found");return Dt($)})}function Dt(P){return function(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function qr(P,$){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,ie.Z)(function*({appConfig:P,heartbeatServiceProvider:$},J){const fe=Tn(P,J),Pe=ct(P,J),Le=$.getImmediate({optional:!0});if(Le){const zt=yield Le.getHeartbeatsHeader();zt&&Pe.append("x-firebase-client",zt)}const Lt={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:pe,appId:P.appId}})},Yt=yield Fe(()=>fetch(fe,Lt));if(Yt.ok)return Wt(yield Yt.json());throw yield nn("Generate Auth Token",Yt)})).apply(this,arguments)}function Tn(P,{fid:$}){return`${_t(P)}/${$}/authTokens:generate`}function ye(P){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,ie.Z)(function*(P,$=!1){let J;const fe=yield xr(P.appConfig,Le=>{if(!on(Le))throw Be.create("not-registered");const lt=Le.authToken;if(!$&&tn(lt))return Le;if(1===lt.requestStatus)return J=ge(P,$),Le;{if(!navigator.onLine)throw Be.create("app-offline");const Lt=Ri(Le);return J=rt(P,Lt),Lt}});return J?yield J:fe.authToken})).apply(this,arguments)}function ge(P,$){return ve.apply(this,arguments)}function ve(){return(ve=(0,ie.Z)(function*(P,$){let J=yield De(P.appConfig);for(;1===J.authToken.requestStatus;)yield ur(100),J=yield De(P.appConfig);const fe=J.authToken;return 0===fe.requestStatus?ye(P,$):fe})).apply(this,arguments)}function De(P){return xr(P,$=>{if(!on($))throw Be.create("not-registered");return function(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function rt(P,$){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,ie.Z)(function*(P,$){try{const J=yield qr(P,$),fe=Object.assign(Object.assign({},$),{authToken:J});return yield xt(P.appConfig,fe),J}catch(J){if(!Ce(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const fe=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield xt(P.appConfig,fe)}else yield or(P.appConfig);throw J}})).apply(this,arguments)}function on(P){return void 0!==P&&2===P.registrationStatus}function tn(P){return 2===P.requestStatus&&!function(P){const $=Date.now();return $<P.creationTime||P.creationTime+P.expiresIn<$+36e5}(P)}function Ri(P){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:$})}function Ni(){return(Ni=(0,ie.Z)(function*(P){const $=P,{installationEntry:J,registrationPromise:fe}=yield br($);return fe?fe.catch(console.error):ye($).catch(console.error),J.fid})).apply(this,arguments)}function is(){return(is=(0,ie.Z)(function*(P,$=!1){const J=P;return yield ps(J),(yield ye(J,$)).token})).apply(this,arguments)}function ps(P){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,ie.Z)(function*(P){const{registrationPromise:$}=yield br(P);$&&(yield $)})).apply(this,arguments)}function Bn(P){return Be.create("missing-app-config-values",{valueName:P})}const Hr="installations";(0,Re._registerComponent)(new de.wA(Hr,P=>{const $=P.getProvider("app").getImmediate(),J=function(P){if(!P||!P.options)throw Bn("App Configuration");if(!P.name)throw Bn("App Name");const $=["projectId","apiKey","appId"];for(const J of $)if(!P.options[J])throw Bn(J);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}($);return{app:$,appConfig:J,heartbeatServiceProvider:(0,Re._getProvider)($,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Re._registerComponent)(new de.wA("installations-internal",P=>{const $=P.getProvider("app").getImmediate(),J=(0,Re._getProvider)($,Hr).getImmediate();return{getId:()=>function(P){return Ni.apply(this,arguments)}(J),getToken:Pe=>function(P){return is.apply(this,arguments)}(J,Pe)}},"PRIVATE")),(0,Re.registerVersion)(we,se),(0,Re.registerVersion)(we,se,"esm2017");const si="@firebase/remote-config",Or=new Ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class So{constructor($,J,fe,Pe){this.client=$,this.storage=J,this.storageCache=fe,this.logger=Pe}isCachedDataFresh($,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-J,Pe=fe<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${Pe}.`),Pe}fetch($){var J=this;return(0,ie.Z)(function*(){const[fe,Pe]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(Pe&&J.isCachedDataFresh($.cacheMaxAgeMillis,fe))return Pe;$.eTag=Pe&&Pe.eTag;const Le=yield J.client.fetch($),lt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Le.status&&lt.push(J.storage.setLastSuccessfulFetchResponse(Le)),yield Promise.all(lt),Le})()}}function Gr(P=navigator){return P.languages&&P.languages[0]||P.language}class Fi{constructor($,J,fe,Pe,Le,lt){this.firebaseInstallations=$,this.sdkVersion=J,this.namespace=fe,this.projectId=Pe,this.apiKey=Le,this.appId=lt}fetch($){var J=this;return(0,ie.Z)(function*(){var fe,Pe,Le;const[lt,Lt]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),zt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,Hn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},Xt={sdk_version:J.sdkVersion,app_instance_id:lt,app_instance_id_token:Lt,app_id:J.appId,language_code:Gr()},Tr={method:"POST",headers:Hn,body:JSON.stringify(Xt)},Pr=fetch(zt,Tr),bi=new Promise((jr,Za)=>{$.signal.addEventListener(()=>{const bl=new Error("The operation was aborted.");bl.name="AbortError",Za(bl)})});let Sr;try{yield Promise.race([Pr,bi]),Sr=yield Pr}catch(jr){let Za="fetch-client-network";throw"AbortError"===(null===(fe=jr)||void 0===fe?void 0:fe.name)&&(Za="fetch-timeout"),Or.create(Za,{originalErrorMessage:null===(Pe=jr)||void 0===Pe?void 0:Pe.message})}let Eo=Sr.status;const _u=Sr.headers.get("ETag")||void 0;let Rs,zs;if(200===Sr.status){let jr;try{jr=yield Sr.json()}catch(Za){throw Or.create("fetch-client-parse",{originalErrorMessage:null===(Le=Za)||void 0===Le?void 0:Le.message})}Rs=jr.entries,zs=jr.state}if("INSTANCE_STATE_UNSPECIFIED"===zs?Eo=500:"NO_CHANGE"===zs?Eo=304:("NO_TEMPLATE"===zs||"EMPTY_CONFIG"===zs)&&(Rs={}),304!==Eo&&200!==Eo)throw Or.create("fetch-status",{httpStatus:Eo});return{status:Eo,eTag:_u,config:Rs}})()}}class Te{constructor($,J){this.client=$,this.storage=J}fetch($){var J=this;return(0,ie.Z)(function*(){const fe=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch($,fe)})()}attemptFetch($,{throttleEndTimeMillis:J,backoffCount:fe}){var Pe=this;return(0,ie.Z)(function*(){yield function(P,$){return new Promise((J,fe)=>{const Pe=Math.max($-Date.now(),0),Le=setTimeout(J,Pe);P.addEventListener(()=>{clearTimeout(Le),fe(Or.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,J);try{const Le=yield Pe.client.fetch($);return yield Pe.storage.deleteThrottleMetadata(),Le}catch(Le){if(!function(P){if(!(P instanceof Ae.ZR&&P.customData))return!1;const $=Number(P.customData.httpStatus);return 429===$||500===$||503===$||504===$}(Le))throw Le;const lt={throttleEndTimeMillis:Date.now()+(0,Ae.$s)(fe),backoffCount:fe+1};return yield Pe.storage.setThrottleMetadata(lt),Pe.attemptFetch($,lt)}})()}}class Et{constructor($,J,fe,Pe,Le){this.app=$,this._client=J,this._storageCache=fe,this._storage=Pe,this._logger=Le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kt(P,$){var J;const fe=P.target.error||void 0;return Or.create($,{originalErrorMessage:fe&&(null===(J=fe)||void 0===J?void 0:J.message)})}const re="app_namespace_store";class os{constructor($,J,fe,Pe=function(){return new Promise((P,$)=>{var J;try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=Pe=>{$(kt(Pe,"storage-open"))},fe.onsuccess=Pe=>{P(Pe.target.result)},fe.onupgradeneeded=Pe=>{0===Pe.oldVersion&&Pe.target.result.createObjectStore(re,{keyPath:"compositeKey"})}}catch(fe){$(Or.create("storage-open",{originalErrorMessage:null===(J=fe)||void 0===J?void 0:J.message}))}})}()){this.appId=$,this.appName=J,this.namespace=fe,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var J=this;return(0,ie.Z)(function*(){const fe=yield J.openDbPromise;return new Promise((Pe,Le)=>{var lt;const Yt=fe.transaction([re],"readonly").objectStore(re),zt=J.createCompositeKey($);try{const Hn=Yt.get(zt);Hn.onerror=Xt=>{Le(kt(Xt,"storage-get"))},Hn.onsuccess=Xt=>{const Tr=Xt.target.result;Pe(Tr?Tr.value:void 0)}}catch(Hn){Le(Or.create("storage-get",{originalErrorMessage:null===(lt=Hn)||void 0===lt?void 0:lt.message}))}})})()}set($,J){var fe=this;return(0,ie.Z)(function*(){const Pe=yield fe.openDbPromise;return new Promise((Le,lt)=>{var Lt;const zt=Pe.transaction([re],"readwrite").objectStore(re),Hn=fe.createCompositeKey($);try{const Xt=zt.put({compositeKey:Hn,value:J});Xt.onerror=Tr=>{lt(kt(Tr,"storage-set"))},Xt.onsuccess=()=>{Le()}}catch(Xt){lt(Or.create("storage-set",{originalErrorMessage:null===(Lt=Xt)||void 0===Lt?void 0:Lt.message}))}})})()}delete($){var J=this;return(0,ie.Z)(function*(){const fe=yield J.openDbPromise;return new Promise((Pe,Le)=>{var lt;const Yt=fe.transaction([re],"readwrite").objectStore(re),zt=J.createCompositeKey($);try{const Hn=Yt.delete(zt);Hn.onerror=Xt=>{Le(kt(Xt,"storage-delete"))},Hn.onsuccess=()=>{Pe()}}catch(Hn){Le(Or.create("storage-delete",{originalErrorMessage:null===(lt=Hn)||void 0===lt?void 0:lt.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class _s{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,ie.Z)(function*(){const J=$.storage.getLastFetchStatus(),fe=$.storage.getLastSuccessfulFetchTimestampMillis(),Pe=$.storage.getActiveConfig(),Le=yield J;Le&&($.lastFetchStatus=Le);const lt=yield fe;lt&&($.lastSuccessfulFetchTimestampMillis=lt);const Lt=yield Pe;Lt&&($.activeConfig=Lt)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function uo(){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,ie.Z)(function*(){if(!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch(P){return!1}})).apply(this,arguments)}(0,Re._registerComponent)(new de.wA("remote-config",function($,{instanceIdentifier:J}){const fe=$.getProvider("app").getImmediate(),Pe=$.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Or.create("registration-window");if(!(0,Ae.hl)())throw Or.create("indexed-db-unavailable");const{projectId:Le,apiKey:lt,appId:Lt}=fe.options;if(!Le)throw Or.create("registration-project-id");if(!lt)throw Or.create("registration-api-key");if(!Lt)throw Or.create("registration-app-id");const Yt=new os(Lt,fe.name,J=J||"firebase"),zt=new _s(Yt),Hn=new Me.Yd(si);Hn.logLevel=Me.in.ERROR;const Xt=new Fi(Pe,Re.SDK_VERSION,J,Le,lt,Lt),Tr=new Te(Xt,Yt),Pr=new So(Tr,Yt,zt,Hn),bi=new Et(fe,Pr,zt,Yt,Hn);return function(P){const $=(0,Ae.m9)(P);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(bi),bi},"PUBLIC").setMultipleInstances(!0)),(0,Re.registerVersion)(si,"0.3.11"),(0,Re.registerVersion)(si,"0.3.11","esm2017");const lo="/firebase-messaging-sw.js",hl="/firebase-cloud-messaging-push-scope",Js="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",us="google.c.a.c_id",ua="google.c.a.c_l",Zo="google.c.a.ts",Fs="google.c.a.e";var ys=(()=>{return(P=ys||(ys={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",ys;var P})();function zi(P){const $=new Uint8Array(P);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zr(P){const J=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(J),Pe=new Uint8Array(fe.length);for(let Le=0;Le<fe.length;++Le)Pe[Le]=fe.charCodeAt(Le);return Pe}const co="fcm_token_details_db",Ki="fcm_token_object_Store";function hi(P){return yr.apply(this,arguments)}function yr(){return yr=(0,ie.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Le=>Le.name).includes(co))return null;let $=null;return(yield(0,he.X3)(co,5,{upgrade:(fe=(0,ie.Z)(function*(Pe,Le,lt,Lt){var Yt;if(Le<2||!Pe.objectStoreNames.contains(Ki))return;const zt=Lt.objectStore(Ki),Hn=yield zt.index("fcmSenderId").get(P);if(yield zt.clear(),Hn)if(2===Le){const Xt=Hn;if(!Xt.auth||!Xt.p256dh||!Xt.endpoint)return;$={token:Xt.fcmToken,createTime:null!==(Yt=Xt.createTime)&&void 0!==Yt?Yt:Date.now(),subscriptionOptions:{auth:Xt.auth,p256dh:Xt.p256dh,endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:"string"==typeof Xt.vapidKey?Xt.vapidKey:zi(Xt.vapidKey)}}}else if(3===Le){const Xt=Hn;$={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:zi(Xt.auth),p256dh:zi(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:zi(Xt.vapidKey)}}}else if(4===Le){const Xt=Hn;$={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:zi(Xt.auth),p256dh:zi(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:zi(Xt.vapidKey)}}}}),function(Le,lt,Lt,Yt){return fe.apply(this,arguments)})})).close(),yield(0,he.Lj)(co),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Vs($)?$:null;var fe}),yr.apply(this,arguments)}function Vs(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:$}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}const Us="firebase-messaging-store";let Ss=null;function V(){return Ss||(Ss=(0,he.X3)("firebase-messaging-database",1,{upgrade:(P,$)=>{0===$&&P.createObjectStore(Us)}})),Ss}function Q(P){return B.apply(this,arguments)}function B(){return(B=(0,ie.Z)(function*(P){const $=F(P),fe=yield(yield V()).transaction(Us).objectStore(Us).get($);if(fe)return fe;{const Pe=yield hi(P.appConfig.senderId);if(Pe)return yield te(P,Pe),Pe}})).apply(this,arguments)}function te(P,$){return me.apply(this,arguments)}function me(){return(me=(0,ie.Z)(function*(P,$){const J=F(P),Pe=(yield V()).transaction(Us,"readwrite");return yield Pe.objectStore(Us).put($,J),yield Pe.done,$})).apply(this,arguments)}function qe(P){return Je.apply(this,arguments)}function Je(){return(Je=(0,ie.Z)(function*(P){const $=F(P),fe=(yield V()).transaction(Us,"readwrite");yield fe.objectStore(Us).delete($),yield fe.done})).apply(this,arguments)}function F({appConfig:P}){return P.appId}const R=new Ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Y(P,$){return ke.apply(this,arguments)}function ke(){return(ke=(0,ie.Z)(function*(P,$){var J;const fe=yield Vi(P),Pe=Ht($),Le={method:"POST",headers:fe,body:JSON.stringify(Pe)};let lt;try{lt=yield(yield fetch(Yr(P.appConfig),Le)).json()}catch(Lt){throw R.create("token-subscribe-failed",{errorInfo:null===(J=Lt)||void 0===J?void 0:J.toString()})}if(lt.error)throw R.create("token-subscribe-failed",{errorInfo:lt.error.message});if(!lt.token)throw R.create("token-subscribe-no-token");return lt.token})).apply(this,arguments)}function yt(P,$){return ln.apply(this,arguments)}function ln(){return(ln=(0,ie.Z)(function*(P,$){var J;const fe=yield Vi(P),Pe=Ht($.subscriptionOptions),Le={method:"PATCH",headers:fe,body:JSON.stringify(Pe)};let lt;try{lt=yield(yield fetch(`${Yr(P.appConfig)}/${$.token}`,Le)).json()}catch(Lt){throw R.create("token-update-failed",{errorInfo:null===(J=Lt)||void 0===J?void 0:J.toString()})}if(lt.error)throw R.create("token-update-failed",{errorInfo:lt.error.message});if(!lt.token)throw R.create("token-update-no-token");return lt.token})).apply(this,arguments)}function er(P,$){return Li.apply(this,arguments)}function Li(){return(Li=(0,ie.Z)(function*(P,$){var J;const Pe={method:"DELETE",headers:yield Vi(P)};try{const lt=yield(yield fetch(`${Yr(P.appConfig)}/${$}`,Pe)).json();if(lt.error)throw R.create("token-unsubscribe-failed",{errorInfo:lt.error.message})}catch(Le){throw R.create("token-unsubscribe-failed",{errorInfo:null===(J=Le)||void 0===J?void 0:J.toString()})}})).apply(this,arguments)}function Yr({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function Vi(P){return cr.apply(this,arguments)}function cr(){return(cr=(0,ie.Z)(function*({appConfig:P,installations:$}){const J=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function Ht({p256dh:P,auth:$,endpoint:J,vapidKey:fe}){const Pe={web:{endpoint:J,auth:$,p256dh:P}};return fe!==Js&&(Pe.web.applicationPubKey=fe),Pe}const Qo=6048e5;function Jo(P){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,ie.Z)(function*(P){const $=yield vs(P.swRegistration,P.vapidKey),J={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:$.endpoint,auth:zi($.getKey("auth")),p256dh:zi($.getKey("p256dh"))},fe=yield Q(P.firebaseDependencies);if(fe){if(Vu(fe.subscriptionOptions,J))return Date.now()>=fe.createTime+Qo?Mc(P,{token:fe.token,createTime:Date.now(),subscriptionOptions:J}):fe.token;try{yield er(P.firebaseDependencies,fe.token)}catch(Pe){console.warn(Pe)}return dt(P.firebaseDependencies,J)}return dt(P.firebaseDependencies,J)})).apply(this,arguments)}function Da(P){return uu.apply(this,arguments)}function uu(){return(uu=(0,ie.Z)(function*(P){const $=yield Q(P.firebaseDependencies);$&&(yield er(P.firebaseDependencies,$.token),yield qe(P.firebaseDependencies));const J=yield P.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()})).apply(this,arguments)}function Mc(P,$){return lu.apply(this,arguments)}function lu(){return(lu=(0,ie.Z)(function*(P,$){try{const J=yield yt(P.firebaseDependencies,$),fe=Object.assign(Object.assign({},$),{token:J,createTime:Date.now()});return yield te(P.firebaseDependencies,fe),J}catch(J){throw yield Da(P),J}})).apply(this,arguments)}function dt(P,$){return $n.apply(this,arguments)}function $n(){return($n=(0,ie.Z)(function*(P,$){const fe={token:yield Y(P,$),createTime:Date.now(),subscriptionOptions:$};return yield te(P,fe),fe.token})).apply(this,arguments)}function vs(P,$){return wr.apply(this,arguments)}function wr(){return(wr=(0,ie.Z)(function*(P,$){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zr($)})})).apply(this,arguments)}function Vu(P,$){return $.vapidKey===P.vapidKey&&$.endpoint===P.endpoint&&$.auth===P.auth&&$.p256dh===P.p256dh}function la(P){const $={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function(P,$){if(!$.notification)return;P.notification={};const J=$.notification.title;J&&(P.notification.title=J);const fe=$.notification.body;fe&&(P.notification.body=fe);const Pe=$.notification.image;Pe&&(P.notification.image=Pe)}($,P),function(P,$){!$.data||(P.data=$.data)}($,P),function(P,$){var J,fe,Pe,Le,lt;if(!$.fcmOptions&&!(null===(J=$.notification)||void 0===J?void 0:J.click_action))return;P.fcmOptions={};const Lt=null!==(Pe=null===(fe=$.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==Pe?Pe:null===(Le=$.notification)||void 0===Le?void 0:Le.click_action;Lt&&(P.fcmOptions.link=Lt);const Yt=null===(lt=$.fcmOptions)||void 0===lt?void 0:lt.analytics_label;Yt&&(P.fcmOptions.analyticsLabel=Yt)}($,P),$}function Uu(P){return"object"==typeof P&&!!P&&us in P}function Kl(P,$){const J=[];for(let fe=0;fe<P.length;fe++)J.push(P.charAt(fe)),fe<$.length&&J.push($.charAt(fe));return J.join("")}function No(P){return R.create("missing-app-config-values",{valueName:P})}Kl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Kl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ci{constructor($,J,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pe=function(P){if(!P||!P.options)throw No("App Configuration Object");if(!P.name)throw No("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:J}=P;for(const fe of $)if(!J[fe])throw No(fe);return{appName:P.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:Pe,installations:J,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function Bs(P){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,ie.Z)(function*(P){var $;try{P.swRegistration=yield navigator.serviceWorker.register(lo,{scope:hl}),P.swRegistration.update().catch(()=>{})}catch(J){throw R.create("failed-service-worker-registration",{browserErrorMessage:null===($=J)||void 0===$?void 0:$.message})}})).apply(this,arguments)}function fo(P,$){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,ie.Z)(function*(P,$){if(!$&&!P.swRegistration&&(yield Bs(P)),$||!P.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw R.create("invalid-sw-registration");P.swRegistration=$}})).apply(this,arguments)}function Bu(P,$){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,ie.Z)(function*(P,$){$?P.vapidKey=$:P.vapidKey||(P.vapidKey=Js)})).apply(this,arguments)}function eo(){return(eo=(0,ie.Z)(function*(P,$){if(!navigator)throw R.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw R.create("permission-blocked");return yield Bu(P,null==$?void 0:$.vapidKey),yield fo(P,null==$?void 0:$.serviceWorkerRegistration),Jo(P)})).apply(this,arguments)}function js(P,$,J){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,ie.Z)(function*(P,$,J){const fe=fl($);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:J[us],message_name:J[ua],message_time:J[Zo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fl(P){switch(P){case ys.NOTIFICATION_CLICKED:return"notification_open";case ys.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Mo(){return(Mo=(0,ie.Z)(function*(P,$){const J=$.data;if(!J.isFirebaseMessaging)return;P.onMessageHandler&&J.messageType===ys.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(la(J)):P.onMessageHandler.next(la(J)));const fe=J.data;Uu(fe)&&"1"===fe[Fs]&&(yield js(P,J.messageType,fe))})).apply(this,arguments)}const Xo="@firebase/messaging";function du(){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,ie.Z)(function*(){try{yield(0,Ae.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,Ae.hl)()&&(0,Ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Re._registerComponent)(new de.wA("messaging",P=>{const $=new Ci(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function(P,$){return Mo.apply(this,arguments)}($,J)),$},"PUBLIC")),(0,Re._registerComponent)(new de.wA("messaging-internal",P=>{const $=P.getProvider("messaging").getImmediate();return{getToken:fe=>function(P,$){return eo.apply(this,arguments)}($,fe)}},"PRIVATE")),(0,Re.registerVersion)(Xo,"0.9.16"),(0,Re.registerVersion)(Xo,"0.9.16","esm2017");const ca="analytics",hu="firebase_id",Aa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",go="https://www.googletagmanager.com/gtag/js",ui=new Me.Yd("@firebase/analytics");function fu(P){return Promise.all(P.map($=>$.catch(J=>J)))}function Gu(P,$){const J=document.createElement("script");J.src=`${go}?l=${P}&id=${$}`,J.async=!0,document.head.appendChild(J)}function Po(P,$,J,fe,Pe,Le){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,ie.Z)(function*(P,$,J,fe,Pe,Le){const lt=fe[Pe];try{if(lt)yield $[lt];else{const Yt=(yield fu(J)).find(zt=>zt.measurementId===Pe);Yt&&(yield $[Yt.appId])}}catch(Lt){ui.error(Lt)}P("config",Pe,Le)})).apply(this,arguments)}function _l(P,$,J,fe,Pe){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,ie.Z)(function*(P,$,J,fe,Pe){try{let Le=[];if(Pe&&Pe.send_to){let lt=Pe.send_to;Array.isArray(lt)||(lt=[lt]);const Lt=yield fu(J);for(const Yt of lt){const zt=Lt.find(Xt=>Xt.measurementId===Yt),Hn=zt&&$[zt.appId];if(!Hn){Le=[];break}Le.push(Hn)}}0===Le.length&&(Le=Object.values($)),yield Promise.all(Le),P("event",fe,Pe||{})}catch(Le){ui.error(Le)}})).apply(this,arguments)}function Xi(){const P=window.document.getElementsByTagName("script");for(const $ of Object.values(P))if($.src&&$.src.includes(go))return $;return null}const Gs=new Ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),qa=new class{constructor($={},J=1e3){this.throttleMetadata=$,this.intervalMillis=J}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,J){this.throttleMetadata[$]=J}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function yl(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function Yl(P){return ta.apply(this,arguments)}function ta(){return(ta=(0,ie.Z)(function*(P){var $;const{appId:J,apiKey:fe}=P,Pe={method:"GET",headers:yl(fe)},Le=Aa.replace("{app-id}",J),lt=yield fetch(Le,Pe);if(200!==lt.status&&304!==lt.status){let Lt="";try{const Yt=yield lt.json();(null===($=Yt.error)||void 0===$?void 0:$.message)&&(Lt=Yt.error.message)}catch(Yt){}throw Gs.create("config-fetch-failed",{httpStatus:lt.status,responseMessage:Lt})}return lt.json()})).apply(this,arguments)}function tf(P){return ws.apply(this,arguments)}function ws(){return(ws=(0,ie.Z)(function*(P,$=qa,J){const{appId:fe,apiKey:Pe,measurementId:Le}=P.options;if(!fe)throw Gs.create("no-app-id");if(!Pe){if(Le)return{measurementId:Le,appId:fe};throw Gs.create("no-api-key")}const lt=$.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Lt=new ra;return setTimeout((0,ie.Z)(function*(){Lt.abort()}),void 0!==J?J:6e4),vl({appId:fe,apiKey:Pe,measurementId:Le},lt,Lt,$)})).apply(this,arguments)}function vl(P,$,J){return na.apply(this,arguments)}function na(){return(na=(0,ie.Z)(function*(P,{throttleEndTimeMillis:$,backoffCount:J},fe,Pe=qa){var Le,lt;const{appId:Lt,measurementId:Yt}=P;try{yield li(fe,$)}catch(zt){if(Yt)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yt} provided in the "measurementId" field in the local Firebase config. [${null===(Le=zt)||void 0===Le?void 0:Le.message}]`),{appId:Lt,measurementId:Yt};throw zt}try{const zt=yield Yl(P);return Pe.deleteThrottleMetadata(Lt),zt}catch(zt){const Hn=zt;if(!da(Hn)){if(Pe.deleteThrottleMetadata(Lt),Yt)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yt} provided in the "measurementId" field in the local Firebase config. [${null==Hn?void 0:Hn.message}]`),{appId:Lt,measurementId:Yt};throw zt}const Xt=503===Number(null===(lt=null==Hn?void 0:Hn.customData)||void 0===lt?void 0:lt.httpStatus)?(0,Ae.$s)(J,Pe.intervalMillis,30):(0,Ae.$s)(J,Pe.intervalMillis),Tr={throttleEndTimeMillis:Date.now()+Xt,backoffCount:J+1};return Pe.setThrottleMetadata(Lt,Tr),ui.debug(`Calling attemptFetch again in ${Xt} millis`),vl(P,Tr,fe,Pe)}})).apply(this,arguments)}function li(P,$){return new Promise((J,fe)=>{const Pe=Math.max($-Date.now(),0),Le=setTimeout(J,Pe);P.addEventListener(()=>{clearTimeout(Le),fe(Gs.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}function da(P){if(!(P instanceof Ae.ZR&&P.customData))return!1;const $=Number(P.customData.httpStatus);return 429===$||500===$||503===$||504===$}class ra{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let Wu,ht;function pt(){return(pt=(0,ie.Z)(function*(P,$,J,fe,Pe){if(Pe&&Pe.global)P("event",J,fe);else{const Le=yield $;P("event",J,Object.assign(Object.assign({},fe),{send_to:Le}))}})).apply(this,arguments)}function mi(P){ht=P}function N(P){Wu=P}function S(){return I.apply(this,arguments)}function I(){return(I=(0,ie.Z)(function*(){var P;if(!(0,Ae.hl)())return ui.warn(Gs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ae.eu)()}catch($){return ui.warn(Gs.create("indexeddb-unavailable",{errorInfo:null===(P=$)||void 0===P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function G(){return(G=(0,ie.Z)(function*(P,$,J,fe,Pe,Le,lt){var Lt;const Yt=tf(P);Yt.then(Pr=>{J[Pr.measurementId]=Pr.appId,P.options.measurementId&&Pr.measurementId!==P.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Pr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Pr=>ui.error(Pr)),$.push(Yt);const zt=S().then(Pr=>{if(Pr)return fe.getId()}),[Hn,Xt]=yield Promise.all([Yt,zt]);Xi()||Gu(Le,Hn.measurementId),ht&&(Pe("consent","default",ht),mi(void 0)),Pe("js",new Date);const Tr=null!==(Lt=null==lt?void 0:lt.config)&&void 0!==Lt?Lt:{};return Tr.origin="firebase",Tr.update=!0,null!=Xt&&(Tr[hu]=Xt),Pe("config",Hn.measurementId,Tr),Wu&&(Pe("set",Wu),N(void 0)),Hn.measurementId})).apply(this,arguments)}class ee{constructor($){this.app=$}_delete(){return delete le[this.app.options.appId],Promise.resolve()}}let le={},Se=[];const st={};let vt,bn,Gt="dataLayer",Rn=!1;function As(P,$,J){!function(){const P=[];if((0,Ae.ru)()&&P.push("This is a browser extension environment."),(0,Ae.zI)()||P.push("Cookies are not available."),P.length>0){const $=P.map((fe,Pe)=>`(${Pe+1}) ${fe}`).join(" "),J=Gs.create("invalid-analytics-context",{errorInfo:$});ui.warn(J.message)}}();const fe=P.options.appId;if(!fe)throw Gs.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw Gs.create("no-api-key");ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=le[fe])throw Gs.create("already-exists",{id:fe});if(!Rn){!function(P){let $=[];Array.isArray(window[P])?$=window[P]:window[P]=$}(Gt);const{wrappedGtag:Le,gtagCore:lt}=function(P,$,J,fe,Pe){let Le=function(...lt){window[fe].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(Le=window[Pe]),window[Pe]=function(P,$,J,fe){function Le(){return(Le=(0,ie.Z)(function*(lt,Lt,Yt){try{"event"===lt?yield _l(P,$,J,Lt,Yt):"config"===lt?yield Po(P,$,J,fe,Lt,Yt):"consent"===lt?P("consent","update",Yt):P("set",Lt)}catch(zt){ui.error(zt)}})).apply(this,arguments)}return function(lt,Lt,Yt){return Le.apply(this,arguments)}}(Le,P,$,J),{gtagCore:Le,wrappedGtag:window[Pe]}}(le,Se,st,Gt,"gtag");bn=Le,vt=lt,Rn=!0}return le[fe]=function(P,$,J,fe,Pe,Le,lt){return G.apply(this,arguments)}(P,Se,st,$,vt,Gt,J),new ee(P)}function Fr(){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,ie.Z)(function*(){if((0,Ae.ru)()||!(0,Ae.zI)()||!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch(P){return!1}})).apply(this,arguments)}const ia="@firebase/analytics";(0,Re._registerComponent)(new de.wA(ca,($,{options:J})=>As($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,Re._registerComponent)(new de.wA("analytics-internal",function($){try{const J=$.getProvider(ca).getImmediate();return{logEvent:(fe,Pe,Le)=>function(P,$,J,fe){P=(0,Ae.m9)(P),function(P,$,J,fe,Pe){return pt.apply(this,arguments)}(bn,le[P.app.options.appId],$,J,fe).catch(Pe=>ui.error(Pe))}(J,fe,Pe,Le)}}catch(J){throw Gs.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,Re.registerVersion)(ia,"0.8.0"),(0,Re.registerVersion)(ia,"0.8.0","esm2017");var rf=z(7771),zu=z(3637),mu=z(3342),Ze=z(309),_i=z(3101);const no=new T.GfV("7.4.1"),qu="__angularfire_symbol__analyticsIsSupportedValue",El="__angularfire_symbol__analyticsIsSupported",yo="__angularfire_symbol__remoteConfigIsSupportedValue",vo="__angularfire_symbol__remoteConfigIsSupported",Cs="__angularfire_symbol__messagingIsSupportedValue",Ku="__angularfire_symbol__messagingIsSupported";function lh(P,$,J){if($){if(1===$.length)return $[0];const Le=$.filter(lt=>lt.app===J);if(1===Le.length)return Le[0]}return J.container.getProvider(P).getImmediate({optional:!0})}globalThis[El]||(globalThis[El]=Fr().then(P=>globalThis[qu]=P).catch(()=>globalThis[qu]=!1)),globalThis[Ku]||(globalThis[Ku]=du().then(P=>globalThis[Cs]=P).catch(()=>globalThis[Cs]=!1)),globalThis[vo]||(globalThis[vo]=uo().then(P=>globalThis[yo]=P).catch(()=>globalThis[yo]=!1));const wl=(P,$)=>{const J=$?[$]:(0,U.C6)(),fe=[];return J.forEach(Pe=>{Pe.container.getProvider(P).instances.forEach(lt=>{fe.includes(lt)||fe.push(lt)})}),fe};function Cl(){}class Jr{constructor($,J=rf.N){this.zone=$,this.delegate=J}now(){return this.delegate.now()}schedule($,J,fe){const Pe=this.zone;return this.delegate.schedule(function(lt){Pe.runGuarded(()=>{$.apply(this,[lt])})},J,fe)}}class xs{constructor($){this.zone=$,this.task=null}call($,J){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cl,{},Cl,Cl)),J.pipe((0,mu.b)({next:fe,complete:fe,error:fe})).subscribe($).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let es=(()=>{class P{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new Jr(Zone.current)),this.insideAngular=J.run(()=>new Jr(Zone.current,zu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(J){return new(J||P)(T.LFG(T.R0b))},P.\u0275prov=T.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Vn(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function Uo(P){return P.pipe((0,Ze.QV)(Vn().outsideAngular))}function Xr(P){return Vn(),function(P){return function(J){return(J=J.lift(new xs(P.ngZone))).pipe((0,_i.R)(P.outsideAngular),(0,Ze.QV)(P.insideAngular))}}(Vn())(P)}},665:(Ot,Ge,z)=>{"use strict";z.d(Ge,{Fj:()=>We,qu:()=>qe,u:()=>Er,sg:()=>xe,u5:()=>B,JU:()=>pe,JJ:()=>xn,JL:()=>xr,On:()=>wi,UX:()=>te,Q7:()=>zi,kI:()=>St});var T=z(7716),U=z(8583),ie=z(7574),Re=z(9796),Ae=z(8002),de=z(1555),Me=z(4402);function we(F,O){return new ie.y(R=>{const Y=F.length;if(0===Y)return void R.complete();const ke=new Array(Y);let yt=0,ln=0;for(let er=0;er<Y;er++){const Li=(0,Me.D)(F[er]);let Yr=!1;R.add(Li.subscribe({next:Vi=>{Yr||(Yr=!0,ln++),ke[er]=Vi},error:Vi=>R.error(Vi),complete:()=>{yt++,(yt===Y||!Yr)&&(ln===Y&&R.next(O?O.reduce((Vi,cr,Ht)=>(Vi[cr]=ke[Ht],Vi),{}):ke),R.complete())}}))}})}let se=(()=>{class F{constructor(R,Y){this._renderer=R,this._elementRef=Y,this.onChange=ke=>{},this.onTouched=()=>{}}setProperty(R,Y){this._renderer.setProperty(this._elementRef.nativeElement,R,Y)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}}return F.\u0275fac=function(R){return new(R||F)(T.Y36(T.Qsj),T.Y36(T.SBq))},F.\u0275dir=T.lG2({type:F}),F})(),ce=(()=>{class F extends se{}return F.\u0275fac=function(){let O;return function(Y){return(O||(O=T.n5z(F)))(Y||F)}}(),F.\u0275dir=T.lG2({type:F,features:[T.qOj]}),F})();const pe=new T.OlP("NgValueAccessor"),it={provide:pe,useExisting:(0,T.Gpc)(()=>We),multi:!0},Ct=new T.OlP("CompositionEventMode");let We=(()=>{class F extends se{constructor(R,Y,ke){super(R,Y),this._compositionMode=ke,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const F=(0,U.q)()?(0,U.q)().getUserAgent():"";return/android (\d+)/.test(F.toLowerCase())}())}writeValue(R){this.setProperty("value",null==R?"":R)}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}}return F.\u0275fac=function(R){return new(R||F)(T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(Ct,8))},F.\u0275dir=T.lG2({type:F,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(R,Y){1&R&&T.NdJ("input",function(yt){return Y._handleInput(yt.target.value)})("blur",function(){return Y.onTouched()})("compositionstart",function(){return Y._compositionStart()})("compositionend",function(yt){return Y._compositionEnd(yt.target.value)})},features:[T._Bn([it]),T.qOj]}),F})();function Be(F){return null==F||0===F.length}function Ce(F){return null!=F&&"number"==typeof F.length}const _t=new T.OlP("NgValidators"),Wt=new T.OlP("NgAsyncValidators"),nn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class St{static min(O){return F=O,O=>{if(Be(O.value)||Be(F))return null;const R=parseFloat(O.value);return!isNaN(R)&&R<F?{min:{min:F,actual:O.value}}:null};var F}static max(O){return F=O,O=>{if(Be(O.value)||Be(F))return null;const R=parseFloat(O.value);return!isNaN(R)&&R>F?{max:{max:F,actual:O.value}}:null};var F}static required(O){return Fe(O)}static requiredTrue(O){return!0===O.value?null:{required:!0}}static email(O){return Be((F=O).value)||nn.test(F.value)?null:{email:!0};var F}static minLength(O){return F=O,O=>Be(O.value)||!Ce(O.value)?null:O.value.length<F?{minlength:{requiredLength:F,actualLength:O.value.length}}:null;var F}static maxLength(O){return F=O,O=>Ce(O.value)&&O.value.length>F?{maxlength:{requiredLength:F,actualLength:O.value.length}}:null;var F}static pattern(O){return function(F){if(!F)return ur;let O,R;return"string"==typeof F?(R="","^"!==F.charAt(0)&&(R+="^"),R+=F,"$"!==F.charAt(F.length-1)&&(R+="$"),O=new RegExp(R)):(R=F.toString(),O=F),Y=>{if(Be(Y.value))return null;const ke=Y.value;return O.test(ke)?null:{pattern:{requiredPattern:R,actualValue:ke}}}}(O)}static nullValidator(O){return null}static compose(O){return cn(O)}static composeAsync(O){return en(O)}}function Fe(F){return Be(F.value)?{required:!0}:null}function ur(F){return null}function Vr(F){return null!=F}function Ur(F){const O=(0,T.QGY)(F)?(0,Me.D)(F):F;return(0,T.CqO)(O),O}function ni(F){let O={};return F.forEach(R=>{O=null!=R?Object.assign(Object.assign({},O),R):O}),0===Object.keys(O).length?null:O}function gn(F,O){return O.map(R=>R(F))}function mn(F){return F.map(O=>function(F){return!F.validate}(O)?O:R=>O.validate(R))}function cn(F){if(!F)return null;const O=F.filter(Vr);return 0==O.length?null:function(R){return ni(gn(R,O))}}function Zt(F){return null!=F?cn(mn(F)):null}function en(F){if(!F)return null;const O=F.filter(Vr);return 0==O.length?null:function(R){return function(...F){if(1===F.length){const O=F[0];if((0,Re.k)(O))return we(O,null);if((0,de.K)(O)&&Object.getPrototypeOf(O)===Object.prototype){const R=Object.keys(O);return we(R.map(Y=>O[Y]),R)}}if("function"==typeof F[F.length-1]){const O=F.pop();return we(F=1===F.length&&(0,Re.k)(F[0])?F[0]:F,null).pipe((0,Ae.U)(R=>O(...R)))}return we(F,null)}(gn(R,O).map(Ur)).pipe((0,Ae.U)(ni))}}function Bt(F){return null!=F?en(mn(F)):null}function an(F,O){return null===F?[O]:Array.isArray(F)?[...F,O]:[F,O]}function Fn(F){return F._rawValidators}function gr(F){return F._rawAsyncValidators}function _n(F){return F?Array.isArray(F)?F:[F]:[]}function Nn(F,O){return Array.isArray(F)?F.includes(O):F===O}function ir(F,O){const R=_n(O);return _n(F).forEach(ke=>{Nn(R,ke)||R.push(ke)}),R}function ri(F,O){return _n(O).filter(R=>!Nn(F,R))}let Mn=(()=>{class F{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Zt(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,Y){return!!this.control&&this.control.hasError(R,Y)}getError(R,Y){return this.control?this.control.getError(R,Y):null}}return F.\u0275fac=function(R){return new(R||F)},F.\u0275dir=T.lG2({type:F}),F})(),et=(()=>{class F extends Mn{get formDirective(){return null}get path(){return null}}return F.\u0275fac=function(){let O;return function(Y){return(O||(O=T.n5z(F)))(Y||F)}}(),F.\u0275dir=T.lG2({type:F,features:[T.qOj]}),F})();class un extends Mn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xt{constructor(O){this._cd=O}is(O){var R,Y,ke;return"submitted"===O?!!(null===(R=this._cd)||void 0===R?void 0:R.submitted):!!(null===(ke=null===(Y=this._cd)||void 0===Y?void 0:Y.control)||void 0===ke?void 0:ke[O])}}let xn=(()=>{class F extends xt{constructor(R){super(R)}}return F.\u0275fac=function(R){return new(R||F)(T.Y36(un,2))},F.\u0275dir=T.lG2({type:F,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(R,Y){2&R&&T.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))},features:[T.qOj]}),F})(),xr=(()=>{class F extends xt{constructor(R){super(R)}}return F.\u0275fac=function(R){return new(R||F)(T.Y36(et,10))},F.\u0275dir=T.lG2({type:F,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(R,Y){2&R&&T.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))("ng-submitted",Y.is("submitted"))},features:[T.qOj]}),F})();function qr(F,O){return[...O.path,F]}function Dn(F,O){ge(F,O),O.valueAccessor.writeValue(F.value),function(F,O){O.valueAccessor.registerOnChange(R=>{F._pendingValue=R,F._pendingChange=!0,F._pendingDirty=!0,"change"===F.updateOn&&Tt(F,O)})}(F,O),function(F,O){const R=(Y,ke)=>{O.valueAccessor.writeValue(Y),ke&&O.viewToModelUpdate(Y)};F.registerOnChange(R),O._registerOnDestroy(()=>{F._unregisterOnChange(R)})}(F,O),function(F,O){O.valueAccessor.registerOnTouched(()=>{F._pendingTouched=!0,"blur"===F.updateOn&&F._pendingChange&&Tt(F,O),"submit"!==F.updateOn&&F.markAsTouched()})}(F,O),function(F,O){if(O.valueAccessor.setDisabledState){const R=Y=>{O.valueAccessor.setDisabledState(Y)};F.registerOnDisabledChange(R),O._registerOnDestroy(()=>{F._unregisterOnDisabledChange(R)})}}(F,O)}function Tn(F,O,R=!0){const Y=()=>{};O.valueAccessor&&(O.valueAccessor.registerOnChange(Y),O.valueAccessor.registerOnTouched(Y)),ve(F,O),F&&(O._invokeOnDestroyCallbacks(),F._registerOnCollectionChange(()=>{}))}function ye(F,O){F.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange(O)})}function ge(F,O){const R=Fn(F);null!==O.validator?F.setValidators(an(R,O.validator)):"function"==typeof R&&F.setValidators([R]);const Y=gr(F);null!==O.asyncValidator?F.setAsyncValidators(an(Y,O.asyncValidator)):"function"==typeof Y&&F.setAsyncValidators([Y]);const ke=()=>F.updateValueAndValidity();ye(O._rawValidators,ke),ye(O._rawAsyncValidators,ke)}function ve(F,O){let R=!1;if(null!==F){if(null!==O.validator){const ke=Fn(F);if(Array.isArray(ke)&&ke.length>0){const yt=ke.filter(ln=>ln!==O.validator);yt.length!==ke.length&&(R=!0,F.setValidators(yt))}}if(null!==O.asyncValidator){const ke=gr(F);if(Array.isArray(ke)&&ke.length>0){const yt=ke.filter(ln=>ln!==O.asyncValidator);yt.length!==ke.length&&(R=!0,F.setAsyncValidators(yt))}}}const Y=()=>{};return ye(O._rawValidators,Y),ye(O._rawAsyncValidators,Y),R}function Tt(F,O){F._pendingDirty&&F.markAsDirty(),F.setValue(F._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(F._pendingValue),F._pendingChange=!1}function ii(F,O){if(!F.hasOwnProperty("model"))return!1;const R=F.model;return!!R.isFirstChange()||!Object.is(O,R.currentValue)}function is(F,O){if(!O)return null;let R,Y,ke;return Array.isArray(O),O.forEach(yt=>{yt.constructor===We?R=yt:function(F){return Object.getPrototypeOf(F.constructor)===ce}(yt)?Y=yt:ke=yt}),ke||Y||R||null}function ps(F,O){const R=F.indexOf(O);R>-1&&F.splice(R,1)}const Qn="VALID",ar="INVALID",Ir="PENDING",sn="DISABLED";function Rr(F){return(Hr(F)?F.validators:F)||null}function At(F){return Array.isArray(F)?Zt(F):F||null}function vn(F,O){return(Hr(O)?O.asyncValidators:F)||null}function Bn(F){return Array.isArray(F)?Bt(F):F||null}function Hr(F){return null!=F&&!Array.isArray(F)&&"object"==typeof F}class mr{constructor(O,R){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=O,this._rawAsyncValidators=R,this._composedValidatorFn=At(this._rawValidators),this._composedAsyncValidatorFn=Bn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===Qn}get invalid(){return this.status===ar}get pending(){return this.status==Ir}get disabled(){return this.status===sn}get enabled(){return this.status!==sn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._rawValidators=O,this._composedValidatorFn=At(O)}setAsyncValidators(O){this._rawAsyncValidators=O,this._composedAsyncValidatorFn=Bn(O)}addValidators(O){this.setValidators(ir(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(ir(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(ri(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(ri(O,this._rawAsyncValidators))}hasValidator(O){return Nn(this._rawValidators,O)}hasAsyncValidator(O){return Nn(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(R=>{R.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(R=>{R.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=Ir,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const R=this._parentMarkedDirty(O.onlySelf);this.status=sn,this.errors=null,this._forEachChild(Y=>{Y.disable(Object.assign(Object.assign({},O),{onlySelf:!0}))}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},O),{skipPristineCheck:R})),this._onDisabledChange.forEach(Y=>Y(!0))}enable(O={}){const R=this._parentMarkedDirty(O.onlySelf);this.status=Qn,this._forEachChild(Y=>{Y.enable(Object.assign(Object.assign({},O),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},O),{skipPristineCheck:R})),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qn||this.status===Ir)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sn:Qn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=Ir,this._hasOwnPendingAsyncValidator=!0;const R=Ur(this.asyncValidator(this));this._asyncValidationSubscription=R.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,R={}){this.errors=O,this._updateControlsErrors(!1!==R.emitEvent)}get(O){return function(F,O,R){if(null==O||(Array.isArray(O)||(O=O.split(".")),Array.isArray(O)&&0===O.length))return null;let Y=F;return O.forEach(ke=>{Y=Y instanceof Nr?Y.controls.hasOwnProperty(ke)?Y.controls[ke]:null:Y instanceof Jn&&Y.at(ke)||null}),Y}(this,O)}getError(O,R){const Y=R?this.get(R):this;return Y&&Y.errors?Y.errors[O]:null}hasError(O,R){return!!this.getError(O,R)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new T.vpe,this.statusChanges=new T.vpe}_calculateStatus(){return this._allControlsDisabled()?sn:this.errors?ar:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ir)?Ir:this._anyControlsHaveStatus(ar)?ar:Qn}_anyControlsHaveStatus(O){return this._anyControls(R=>R.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_isBoxedValue(O){return"object"==typeof O&&null!==O&&2===Object.keys(O).length&&"value"in O&&"disabled"in O}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){Hr(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class En extends mr{constructor(O=null,R,Y){super(Rr(R),vn(Y,R)),this._onChange=[],this._applyFormState(O),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(O,R={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue(O,R={}){this.setValue(O,R)}reset(O=null,R={}){this._applyFormState(O),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){ps(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){ps(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){this._isBoxedValue(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}}class Nr extends mr{constructor(O,R,Y){super(Rr(R),vn(Y,R)),this.controls=O,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,R){return this.controls[O]?this.controls[O]:(this.controls[O]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl(O,R,Y={}){this.registerControl(O,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl(O,R={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl(O,R,Y={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],R&&this.registerControl(O,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,R={}){this._checkAllValuesPresent(O),Object.keys(O).forEach(Y=>{this._throwIfControlMissing(Y),this.controls[Y].setValue(O[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(O,R={}){null!=O&&(Object.keys(O).forEach(Y=>{this.controls[Y]&&this.controls[Y].patchValue(O[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(O={},R={}){this._forEachChild((Y,ke)=>{Y.reset(O[ke],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this._reduceChildren({},(O,R,Y)=>(O[Y]=R instanceof En?R.value:R.getRawValue(),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(R,Y)=>!!Y._syncPendingControls()||R);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_throwIfControlMissing(O){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[O])throw new Error(`Cannot find form control with name: ${O}.`)}_forEachChild(O){Object.keys(this.controls).forEach(R=>{const Y=this.controls[R];Y&&O(Y,R)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const R of Object.keys(this.controls)){const Y=this.controls[R];if(this.contains(R)&&O(Y))return!0}return!1}_reduceValue(){return this._reduceChildren({},(O,R,Y)=>((R.enabled||this.disabled)&&(O[Y]=R.value),O))}_reduceChildren(O,R){let Y=O;return this._forEachChild((ke,yt)=>{Y=R(Y,ke,yt)}),Y}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(O){this._forEachChild((R,Y)=>{if(void 0===O[Y])throw new Error(`Must supply a value for form control with name: '${Y}'.`)})}}class Jn extends mr{constructor(O,R,Y){super(Rr(R),vn(Y,R)),this.controls=O,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[O]}push(O,R={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}insert(O,R,Y={}){this.controls.splice(O,0,R),this._registerControl(R),this.updateValueAndValidity({emitEvent:Y.emitEvent})}removeAt(O,R={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),this.updateValueAndValidity({emitEvent:R.emitEvent})}setControl(O,R,Y={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),R&&(this.controls.splice(O,0,R),this._registerControl(R)),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,R={}){this._checkAllValuesPresent(O),O.forEach((Y,ke)=>{this._throwIfControlMissing(ke),this.at(ke).setValue(Y,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(O,R={}){null!=O&&(O.forEach((Y,ke)=>{this.at(ke)&&this.at(ke).patchValue(Y,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(O=[],R={}){this._forEachChild((Y,ke)=>{Y.reset(O[ke],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this.controls.map(O=>O instanceof En?O.value:O.getRawValue())}clear(O={}){this.controls.length<1||(this._forEachChild(R=>R._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_syncPendingControls(){let O=this.controls.reduce((R,Y)=>!!Y._syncPendingControls()||R,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_throwIfControlMissing(O){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(O))throw new Error(`Cannot find form control at index ${O}`)}_forEachChild(O){this.controls.forEach((R,Y)=>{O(R,Y)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(R=>R.enabled&&O(R))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_checkAllValuesPresent(O){this._forEachChild((R,Y)=>{if(void 0===O[Y])throw new Error(`Must supply a value for form control at index: ${Y}.`)})}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}}const Sn={provide:un,useExisting:(0,T.Gpc)(()=>wi)},To=(()=>Promise.resolve(null))();let wi=(()=>{class F extends un{constructor(R,Y,ke,yt){super(),this.control=new En,this._registered=!1,this.update=new T.vpe,this._parent=R,this._setValidators(Y),this._setAsyncValidators(ke),this.valueAccessor=is(0,yt)}ngOnChanges(R){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in R&&this._updateDisabled(R),ii(R,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?qr(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Dn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(R){To.then(()=>{this.control.setValue(R,{emitViewToModelChange:!1})})}_updateDisabled(R){const Y=R.isDisabled.currentValue,ke=""===Y||Y&&"false"!==Y;To.then(()=>{ke&&!this.control.disabled?this.control.disable():!ke&&this.control.disabled&&this.control.enable()})}}return F.\u0275fac=function(R){return new(R||F)(T.Y36(et,9),T.Y36(_t,10),T.Y36(Wt,10),T.Y36(pe,10))},F.\u0275dir=T.lG2({type:F,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T._Bn([Sn]),T.qOj,T.TTD]}),F})(),Ys=(()=>{class F{}return F.\u0275fac=function(R){return new(R||F)},F.\u0275mod=T.oAB({type:F}),F.\u0275inj=T.cJS({}),F})();const So=new T.OlP("NgModelWithFormControlWarning"),Ao={provide:et,useExisting:(0,T.Gpc)(()=>xe)};let xe=(()=>{class F extends et{constructor(R,Y){super(),this.validators=R,this.asyncValidators=Y,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new T.vpe,this._setValidators(R),this._setAsyncValidators(Y)}ngOnChanges(R){this._checkFormPresent(),R.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ve(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(R){const Y=this.form.get(R.path);return Dn(Y,R),Y.updateValueAndValidity({emitEvent:!1}),this.directives.push(R),Y}getControl(R){return this.form.get(R.path)}removeControl(R){Tn(R.control||null,R,!1),ps(this.directives,R)}addFormGroup(R){this._setUpFormContainer(R)}removeFormGroup(R){this._cleanUpFormContainer(R)}getFormGroup(R){return this.form.get(R.path)}addFormArray(R){this._setUpFormContainer(R)}removeFormArray(R){this._cleanUpFormContainer(R)}getFormArray(R){return this.form.get(R.path)}updateModel(R,Y){this.form.get(R.path).setValue(Y)}onSubmit(R){return this.submitted=!0,function(F,O){F._syncPendingControls(),O.forEach(R=>{const Y=R.control;"submit"===Y.updateOn&&Y._pendingChange&&(R.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(R),!1}onReset(){this.resetForm()}resetForm(R){this.form.reset(R),this.submitted=!1}_updateDomValue(){this.directives.forEach(R=>{const Y=R.control,ke=this.form.get(R.path);Y!==ke&&(Tn(Y||null,R),ke instanceof En&&(Dn(ke,R),R.control=ke))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(R){const Y=this.form.get(R.path);(function(F,O){ge(F,O)})(Y,R),Y.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(R){if(this.form){const Y=this.form.get(R.path);Y&&function(F,O){return ve(F,O)}(Y,R)&&Y.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ge(this.form,this),this._oldForm&&ve(this._oldForm,this)}_checkFormPresent(){}}return F.\u0275fac=function(R){return new(R||F)(T.Y36(_t,10),T.Y36(Wt,10))},F.\u0275dir=T.lG2({type:F,selectors:[["","formGroup",""]],hostBindings:function(R,Y){1&R&&T.NdJ("submit",function(yt){return Y.onSubmit(yt)})("reset",function(){return Y.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Ao]),T.qOj,T.TTD]}),F})();const re={provide:un,useExisting:(0,T.Gpc)(()=>Er)};let Er=(()=>{class F extends un{constructor(R,Y,ke,yt,ln){super(),this._ngModelWarningConfig=ln,this._added=!1,this.update=new T.vpe,this._ngModelWarningSent=!1,this._parent=R,this._setValidators(Y),this._setAsyncValidators(ke),this.valueAccessor=is(0,yt)}set isDisabled(R){}ngOnChanges(R){this._added||this._setUpControl(),ii(R,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}get path(){return qr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return F.\u0275fac=function(R){return new(R||F)(T.Y36(et,13),T.Y36(_t,10),T.Y36(Wt,10),T.Y36(pe,10),T.Y36(So,8))},F.\u0275dir=T.lG2({type:F,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[T._Bn([re]),T.qOj,T.TTD]}),F._ngModelWarningSentOnce=!1,F})();const Ls={provide:_t,useExisting:(0,T.Gpc)(()=>zi),multi:!0};let zi=(()=>{class F{constructor(){this._required=!1}get required(){return this._required}set required(R){this._required=null!=R&&!1!==R&&"false"!=`${R}`,this._onChange&&this._onChange()}validate(R){return this.required?Fe(R):null}registerOnValidatorChange(R){this._onChange=R}}return F.\u0275fac=function(R){return new(R||F)},F.\u0275dir=T.lG2({type:F,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(R,Y){2&R&&T.uIk("required",Y.required?"":null)},inputs:{required:"required"},features:[T._Bn([Ls])]}),F})(),Q=(()=>{class F{}return F.\u0275fac=function(R){return new(R||F)},F.\u0275mod=T.oAB({type:F}),F.\u0275inj=T.cJS({imports:[[Ys]]}),F})(),B=(()=>{class F{}return F.\u0275fac=function(R){return new(R||F)},F.\u0275mod=T.oAB({type:F}),F.\u0275inj=T.cJS({imports:[Q]}),F})(),te=(()=>{class F{static withConfig(R){return{ngModule:F,providers:[{provide:So,useValue:R.warnOnNgModelWithFormControl}]}}}return F.\u0275fac=function(R){return new(R||F)},F.\u0275mod=T.oAB({type:F}),F.\u0275inj=T.cJS({imports:[Q]}),F})(),qe=(()=>{class F{group(R,Y=null){const ke=this._reduceControls(R);let er,yt=null,ln=null;return null!=Y&&(function(F){return void 0!==F.asyncValidators||void 0!==F.validators||void 0!==F.updateOn}(Y)?(yt=null!=Y.validators?Y.validators:null,ln=null!=Y.asyncValidators?Y.asyncValidators:null,er=null!=Y.updateOn?Y.updateOn:void 0):(yt=null!=Y.validator?Y.validator:null,ln=null!=Y.asyncValidator?Y.asyncValidator:null)),new Nr(ke,{asyncValidators:ln,updateOn:er,validators:yt})}control(R,Y,ke){return new En(R,Y,ke)}array(R,Y,ke){const yt=R.map(ln=>this._createControl(ln));return new Jn(yt,Y,ke)}_reduceControls(R){const Y={};return Object.keys(R).forEach(ke=>{Y[ke]=this._createControl(R[ke])}),Y}_createControl(R){return R instanceof En||R instanceof Nr||R instanceof Jn?R:Array.isArray(R)?this.control(R[0],R.length>1?R[1]:null,R.length>2?R[2]:null):this.control(R)}}return F.\u0275fac=function(R){return new(R||F)},F.\u0275prov=(0,T.Yz7)({factory:function(){return new F},token:F,providedIn:te}),F})()},5002:(Ot,Ge,z)=>{"use strict";z.d(Ge,{Od:()=>Pc,yS:()=>Hs,Bz:()=>ra,lC:()=>ko});var T=z(8583),U=z(7716),ie=z(9765),Re=z(7971);class Ae extends ie.xQ{constructor(S){super(),this._value=S}get value(){return this.getValue()}_subscribe(S){const I=super._subscribe(S);return I&&!I.closed&&S.next(this._value),I}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Re.N;return this._value}next(S){super.next(this._value=S)}}var de=z(4869),Me=z(9796),he=z(5197),we=z(509),se=z(6693);const ce={};class $e{constructor(S){this.resultSelector=S}call(S,I){return I.subscribe(new Ye(S,this.resultSelector))}}class Ye extends he.L{constructor(S,I){super(S),this.resultSelector=I,this.active=0,this.values=[],this.observables=[]}_next(S){this.values.push(ce),this.observables.push(S)}_complete(){const S=this.observables,I=S.length;if(0===I)this.destination.complete();else{this.active=I,this.toRespond=I;for(let L=0;L<I;L++)this.add((0,we.D)(this,S[L],void 0,L))}}notifyComplete(S){0==(this.active-=1)&&this.destination.complete()}notifyNext(S,I,L){const G=this.values,le=this.toRespond?G[L]===ce?--this.toRespond:this.toRespond:0;G[L]=I,0===le&&(this.resultSelector?this._tryResultSelector(G):this.destination.next(G.slice()))}_tryResultSelector(S){let I;try{I=this.resultSelector.apply(this,S)}catch(L){return void this.destination.error(L)}this.destination.next(I)}}var it=z(7574),ze=z(4402),Ct=z(9193);function We(N){return new it.y(S=>{let I;try{I=N()}catch(G){return void S.error(G)}return(I?(0,ze.D)(I):(0,Ct.c)()).subscribe(S)})}var Be=z(5917),Ce=z(3410),_t=z(8071),Wt=z(2441),nn=z(5345);function St(N){return function(I){const L=new fn(N),G=I.lift(L);return L.caught=G}}class fn{constructor(S){this.selector=S}call(S,I){return I.subscribe(new ct(S,this.selector,this.caught))}}class ct extends nn.Ds{constructor(S,I,L){super(S),this.selector=I,this.caught=L}error(S){if(!this.isStopped){let I;try{I=this.selector(S,this.caught)}catch(ee){return void super.error(ee)}this._unsubscribeAndRecycle();const L=new nn.IY(this);this.add(L);const G=(0,nn.ft)(I,L);G!==L&&this.add(G)}}}var Fe=z(9773);function bt(N,S){return(0,Fe.zg)(N,S,1)}var ot=z(5435),Mt=z(7393),Jt=z(7108);function It(N){return function(I){return 0===N?(0,Ct.c)():I.lift(new ur(N))}}class ur{constructor(S){if(this.total=S,this.total<0)throw new Jt.W}call(S,I){return I.subscribe(new Vr(S,this.total))}}class Vr extends Mt.L{constructor(S,I){super(S),this.total=I,this.ring=new Array,this.count=0}_next(S){const I=this.ring,L=this.total,G=this.count++;I.length<L?I.push(S):I[G%L]=S}_complete(){const S=this.destination;let I=this.count;if(I>0){const L=this.count>=this.total?this.total:this.count,G=this.ring;for(let ee=0;ee<L;ee++){const le=I++%L;S.next(G[le])}}S.complete()}}var Ur=z(4635),ni=z(5242),gn=z(4487),mn=z(5319);class Zt{constructor(S){this.callback=S}call(S,I){return I.subscribe(new en(S,this.callback))}}class en extends Mt.L{constructor(S,I){super(S),this.add(new mn.w(I))}}var Bt=z(8002),an=z(3190),Fn=z(5257),gr=z(9761),_n=z(2145),Nn=z(8049),ir=z(3342),ri=z(1307),Mn=z(3282);class et{constructor(S,I){this.id=S,this.url=I}}class un extends et{constructor(S,I,L="imperative",G=null){super(S,I),this.navigationTrigger=L,this.restoredState=G}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xt extends et{constructor(S,I,L){super(S,I),this.urlAfterRedirects=L}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jn extends et{constructor(S,I,L){super(S,I),this.reason=L}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class or extends et{constructor(S,I,L){super(S,I),this.error=L}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xn extends et{constructor(S,I,L,G){super(S,I),this.urlAfterRedirects=L,this.state=G}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xr extends et{constructor(S,I,L,G){super(S,I),this.urlAfterRedirects=L,this.state=G}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends et{constructor(S,I,L,G,ee){super(S,I),this.urlAfterRedirects=L,this.state=G,this.shouldActivate=ee}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class br extends et{constructor(S,I,L,G){super(S,I),this.urlAfterRedirects=L,this.state=G}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hr extends et{constructor(S,I,L,G){super(S,I),this.urlAfterRedirects=L,this.state=G}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is{constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yn{constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pt{constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rn{constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xi{constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ds{constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fi{constructor(S,I,L){this.routerEvent=S,this.position=I,this.anchor=L}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Dt="primary";class zn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I[0]:I}return null}getAll(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function qr(N){return new zn(N)}const Dn="ngNavigationCancelingError";function Tn(N){const S=Error("NavigationCancelingError: "+N);return S[Dn]=!0,S}function Ie(N,S,I){const L=I.path.split("/");if(L.length>N.length||"full"===I.pathMatch&&(S.hasChildren()||L.length<N.length))return null;const G={};for(let ee=0;ee<L.length;ee++){const le=L[ee],Se=N[ee];if(le.startsWith(":"))G[le.substring(1)]=Se;else if(le!==Se.path)return null}return{consumed:N.slice(0,L.length),posParams:G}}function ve(N,S){const I=N?Object.keys(N):void 0,L=S?Object.keys(S):void 0;if(!I||!L||I.length!=L.length)return!1;let G;for(let ee=0;ee<I.length;ee++)if(G=I[ee],!De(N[G],S[G]))return!1;return!0}function De(N,S){if(Array.isArray(N)&&Array.isArray(S)){if(N.length!==S.length)return!1;const I=[...N].sort(),L=[...S].sort();return I.every((G,ee)=>L[ee]===G)}return N===S}function rt(N){return Array.prototype.concat.apply([],N)}function Tt(N){return N.length>0?N[N.length-1]:null}function tn(N,S){for(const I in N)N.hasOwnProperty(I)&&S(N[I],I)}function Un(N){return(0,U.CqO)(N)?N:(0,U.QGY)(N)?(0,ze.D)(Promise.resolve(N)):(0,Be.of)(N)}const Cn={exact:function is(N,S,I){if(!At(N.segments,S.segments)||!ar(N.segments,S.segments,I)||N.numberOfChildren!==S.numberOfChildren)return!1;for(const L in S.children)if(!N.children[L]||!is(N.children[L],S.children[L],I))return!1;return!0},subset:Ko},ii={exact:function(N,S){return ve(N,S)},subset:function(N,S){return Object.keys(S).length<=Object.keys(N).length&&Object.keys(S).every(I=>De(N[I],S[I]))},ignored:()=>!0};function Ni(N,S,I){return Cn[I.paths](N.root,S.root,I.matrixParams)&&ii[I.queryParams](N.queryParams,S.queryParams)&&!("exact"===I.fragment&&N.fragment!==S.fragment)}function Ko(N,S,I){return Qn(N,S,S.segments,I)}function Qn(N,S,I,L){if(N.segments.length>I.length){const G=N.segments.slice(0,I.length);return!(!At(G,I)||S.hasChildren()||!ar(G,I,L))}if(N.segments.length===I.length){if(!At(N.segments,I)||!ar(N.segments,I,L))return!1;for(const G in S.children)if(!N.children[G]||!Ko(N.children[G],S.children[G],L))return!1;return!0}{const G=I.slice(0,N.segments.length),ee=I.slice(N.segments.length);return!!(At(N.segments,G)&&ar(N.segments,G,L)&&N.children[Dt])&&Qn(N.children[Dt],S,ee,L)}}function ar(N,S,I){return S.every((L,G)=>ii[I](N[G].parameters,L.parameters))}class Ir{constructor(S,I,L){this.root=S,this.queryParams=I,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qr(this.queryParams)),this._queryParamMap}toString(){return mr.serialize(this)}}class sn{constructor(S,I){this.segments=S,this.children=I,this.parent=null,tn(I,(L,G)=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return En(this)}}class pi{constructor(S,I){this.path=S,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=qr(this.parameters)),this._parameterMap}toString(){return Or(this)}}function At(N,S){return N.length===S.length&&N.every((I,L)=>I.path===S[L].path)}class Bn{}class Hr{parse(S){const I=new wi(S);return new Ir(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(S){const I=`/${Nr(S.root,!0)}`,L=function(N){const S=Object.keys(N).map(I=>{const L=N[I];return Array.isArray(L)?L.map(G=>`${si(I)}=${si(G)}`).join("&"):`${si(I)}=${si(L)}`}).filter(I=>!!I);return S.length?`?${S.join("&")}`:""}(S.queryParams);var N;return`${I}${L}${"string"==typeof S.fragment?`#${N=S.fragment,encodeURI(N)}`:""}`}}const mr=new Hr;function En(N){return N.segments.map(S=>Or(S)).join("/")}function Nr(N,S){if(!N.hasChildren())return En(N);if(S){const I=N.children[Dt]?Nr(N.children[Dt],!1):"",L=[];return tn(N.children,(G,ee)=>{ee!==Dt&&L.push(`${ee}:${Nr(G,!1)}`)}),L.length>0?`${I}(${L.join("//")})`:I}{const I=function(N,S){let I=[];return tn(N.children,(L,G)=>{G===Dt&&(I=I.concat(S(L,G)))}),tn(N.children,(L,G)=>{G!==Dt&&(I=I.concat(S(L,G)))}),I}(N,(L,G)=>G===Dt?[Nr(N.children[Dt],!1)]:[`${G}:${Nr(L,!1)}`]);return 1===Object.keys(N.children).length&&null!=N.children[Dt]?`${En(N)}/${I[0]}`:`${En(N)}/(${I.join("//")})`}}function Jn(N){return encodeURIComponent(N).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function si(N){return Jn(N).replace(/%3B/gi,";")}function dn(N){return Jn(N).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dr(N){return decodeURIComponent(N)}function Ei(N){return Dr(N.replace(/\+/g,"%20"))}function Or(N){return`${dn(N.path)}${function(N){return Object.keys(N).map(S=>`;${dn(S)}=${dn(N[S])}`).join("")}(N.parameters)}`}const Ts=/^[^\/()?;=#]+/;function Oi(N){const S=N.match(Ts);return S?S[0]:""}const ki=/^[^=?&#]+/,Do=/^[^?&#]+/;class wi{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(S.length>0||Object.keys(I).length>0)&&(L[Dt]=new sn(S,I)),L}parseSegment(){const S=Oi(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(S),new pi(Dr(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const I=Oi(this.remaining);if(!I)return;this.capture(I);let L="";if(this.consumeOptional("=")){const G=Oi(this.remaining);G&&(L=G,this.capture(L))}S[Dr(I)]=Dr(L)}parseQueryParam(S){const I=function(N){const S=N.match(ki);return S?S[0]:""}(this.remaining);if(!I)return;this.capture(I);let L="";if(this.consumeOptional("=")){const le=function(N){const S=N.match(Do);return S?S[0]:""}(this.remaining);le&&(L=le,this.capture(L))}const G=Ei(I),ee=Ei(L);if(S.hasOwnProperty(G)){let le=S[G];Array.isArray(le)||(le=[le],S[G]=le),le.push(ee)}else S[G]=ee}parseParens(S){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=Oi(this.remaining),G=this.remaining[L.length];if("/"!==G&&")"!==G&&";"!==G)throw new Error(`Cannot parse url '${this.url}'`);let ee;L.indexOf(":")>-1?(ee=L.substr(0,L.indexOf(":")),this.capture(ee),this.capture(":")):S&&(ee=Dt);const le=this.parseChildren();I[ee]=1===Object.keys(le).length?le[Dt]:new sn([],le),this.consumeOptional("//")}return I}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new Error(`Expected "${S}".`)}}class ao{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const I=this.pathFromRoot(S);return I.length>1?I[I.length-2]:null}children(S){const I=ss(S,this._root);return I?I.children.map(L=>L.value):[]}firstChild(S){const I=ss(S,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(S){const I=gi(S,this._root);return I.length<2?[]:I[I.length-2].children.map(G=>G.value).filter(G=>G!==S)}pathFromRoot(S){return gi(S,this._root).map(I=>I.value)}}function ss(N,S){if(N===S.value)return S;for(const I of S.children){const L=ss(N,I);if(L)return L}return null}function gi(N,S){if(N===S.value)return[S];for(const I of S.children){const L=gi(N,I);if(L.length)return L.unshift(S),L}return[]}class oi{constructor(S,I){this.value=S,this.children=I}toString(){return`TreeNode(${this.value})`}}function lr(N){const S={};return N&&N.children.forEach(I=>S[I.value.outlet]=I),S}class Ys extends ao{constructor(S,I){super(S),this.snapshot=I,Ao(this,S)}toString(){return this.snapshot.toString()}}function ms(N,S){const I=function(N,S){const le=new Gr([],{},{},"",{},Dt,S,null,N.root,-1,{});return new Fi("",new oi(le,[]))}(N,S),L=new Ae([new pi("",{})]),G=new Ae({}),ee=new Ae({}),le=new Ae({}),Se=new Ae(""),st=new Xn(L,G,le,Se,ee,Dt,S,I.root);return st.snapshot=I.root,new Ys(new oi(st,[]),I)}class Xn{constructor(S,I,L,G,ee,le,Se,st){this.url=S,this.params=I,this.queryParams=L,this.fragment=G,this.data=ee,this.outlet=le,this.component=Se,this._futureSnapshot=st}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Bt.U)(S=>qr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Bt.U)(S=>qr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qs(N,S="emptyOnly"){const I=N.pathFromRoot;let L=0;if("always"!==S)for(L=I.length-1;L>=1;){const G=I[L],ee=I[L-1];if(G.routeConfig&&""===G.routeConfig.path)L--;else{if(ee.component)break;L--}}return function(N){return N.reduce((S,I)=>({params:Object.assign(Object.assign({},S.params),I.params),data:Object.assign(Object.assign({},S.data),I.data),resolve:Object.assign(Object.assign({},S.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(L))}class Gr{constructor(S,I,L,G,ee,le,Se,st,Gt,Pn,vt){this.url=S,this.params=I,this.queryParams=L,this.fragment=G,this.data=ee,this.outlet=le,this.component=Se,this.routeConfig=st,this._urlSegment=Gt,this._lastPathIndex=Pn,this._resolve=vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fi extends ao{constructor(S,I){super(I),this.url=S,Ao(this,I)}toString(){return xe(this._root)}}function Ao(N,S){S.value._routerState=N,S.children.forEach(I=>Ao(N,I))}function xe(N){const S=N.children.length>0?` { ${N.children.map(xe).join(", ")} } `:"";return`${N.value}${S}`}function Te(N){if(N.snapshot){const S=N.snapshot,I=N._futureSnapshot;N.snapshot=I,ve(S.queryParams,I.queryParams)||N.queryParams.next(I.queryParams),S.fragment!==I.fragment&&N.fragment.next(I.fragment),ve(S.params,I.params)||N.params.next(I.params),function(N,S){if(N.length!==S.length)return!1;for(let I=0;I<N.length;++I)if(!ve(N[I],S[I]))return!1;return!0}(S.url,I.url)||N.url.next(I.url),ve(S.data,I.data)||N.data.next(I.data)}else N.snapshot=N._futureSnapshot,N.data.next(N._futureSnapshot.data)}function Ve(N,S){const I=ve(N.params,S.params)&&function(N,S){return At(N,S)&&N.every((I,L)=>ve(I.parameters,S[L].parameters))}(N.url,S.url);return I&&!(!N.parent!=!S.parent)&&(!N.parent||Ve(N.parent,S.parent))}function Et(N,S,I){if(I&&N.shouldReuseRoute(S.value,I.value.snapshot)){const L=I.value;L._futureSnapshot=S.value;const G=function(N,S,I){return S.children.map(L=>{for(const G of I.children)if(N.shouldReuseRoute(L.value,G.value.snapshot))return Et(N,L,G);return Et(N,L)})}(N,S,I);return new oi(L,G)}{if(N.shouldAttach(S.value)){const ee=N.retrieve(S.value);if(null!==ee){const le=ee.route;return kt(S,le),le}}const L=function(N){return new Xn(new Ae(N.url),new Ae(N.params),new Ae(N.queryParams),new Ae(N.fragment),new Ae(N.data),N.outlet,N.component,N)}(S.value),G=S.children.map(ee=>Et(N,ee));return new oi(L,G)}}function kt(N,S){if(N.value.routeConfig!==S.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(N.children.length!==S.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");S.value._futureSnapshot=N.value;for(let I=0;I<N.children.length;++I)kt(N.children[I],S.children[I])}function ai(N){return"object"==typeof N&&null!=N&&!N.outlets&&!N.segmentPath}function os(N){return"object"==typeof N&&null!=N&&N.outlets}function _s(N,S,I,L,G){let ee={};return L&&tn(L,(le,Se)=>{ee[Se]=Array.isArray(le)?le.map(st=>`${st}`):`${le}`}),new Ir(I.root===N?S:_r(I.root,N,S),ee,G)}function _r(N,S,I){const L={};return tn(N.children,(G,ee)=>{L[ee]=G===S?I:_r(G,S,I)}),new sn(N.segments,L)}class as{constructor(S,I,L){if(this.isAbsolute=S,this.numberOfDoubleDots=I,this.commands=L,S&&L.length>0&&ai(L[0]))throw new Error("Root segment cannot have matrix parameters");const G=L.find(os);if(G&&G!==Tt(L))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uo{constructor(S,I,L){this.segmentGroup=S,this.processChildren=I,this.index=L}}function Js(N,S,I){if(N||(N=new sn([],{})),0===N.segments.length&&N.hasChildren())return Xs(N,S,I);const L=function(N,S,I){let L=0,G=S;const ee={match:!1,pathIndex:0,commandIndex:0};for(;G<N.segments.length;){if(L>=I.length)return ee;const le=N.segments[G],Se=I[L];if(os(Se))break;const st=`${Se}`,Gt=L<I.length-1?I[L+1]:null;if(G>0&&void 0===st)break;if(st&&Gt&&"object"==typeof Gt&&void 0===Gt.outlets){if(!Ls(st,Gt,le))return ee;L+=2}else{if(!Ls(st,{},le))return ee;L++}G++}return{match:!0,pathIndex:G,commandIndex:L}}(N,S,I),G=I.slice(L.commandIndex);if(L.match&&L.pathIndex<N.segments.length){const ee=new sn(N.segments.slice(0,L.pathIndex),{});return ee.children[Dt]=new sn(N.segments.slice(L.pathIndex),N.children),Xs(ee,0,G)}return L.match&&0===G.length?new sn(N.segments,{}):L.match&&!N.hasChildren()?ua(N,S,I):L.match?Xs(N,0,G):ua(N,S,I)}function Xs(N,S,I){if(0===I.length)return new sn(N.segments,{});{const L=function(N){return os(N[0])?N[0].outlets:{[Dt]:N}}(I),G={};return tn(L,(ee,le)=>{"string"==typeof ee&&(ee=[ee]),null!==ee&&(G[le]=Js(N.children[le],S,ee))}),tn(N.children,(ee,le)=>{void 0===L[le]&&(G[le]=ee)}),new sn(N.segments,G)}}function ua(N,S,I){const L=N.segments.slice(0,S);let G=0;for(;G<I.length;){const ee=I[G];if(os(ee)){const st=Zo(ee.outlets);return new sn(L,st)}if(0===G&&ai(I[0])){L.push(new pi(N.segments[S].path,Fs(I[0]))),G++;continue}const le=os(ee)?ee.outlets[Dt]:`${ee}`,Se=G<I.length-1?I[G+1]:null;le&&Se&&ai(Se)?(L.push(new pi(le,Fs(Se))),G+=2):(L.push(new pi(le,{})),G++)}return new sn(L,{})}function Zo(N){const S={};return tn(N,(I,L)=>{"string"==typeof I&&(I=[I]),null!==I&&(S[L]=ua(new sn([],{}),0,I))}),S}function Fs(N){const S={};return tn(N,(I,L)=>S[L]=`${I}`),S}function Ls(N,S,I){return N==I.path&&ve(S,I.parameters)}class zi{constructor(S,I,L,G){this.routeReuseStrategy=S,this.futureState=I,this.currState=L,this.forwardEvent=G}activate(S){const I=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,L,S),Te(this.futureState.root),this.activateChildRoutes(I,L,S)}deactivateChildRoutes(S,I,L){const G=lr(I);S.children.forEach(ee=>{const le=ee.value.outlet;this.deactivateRoutes(ee,G[le],L),delete G[le]}),tn(G,(ee,le)=>{this.deactivateRouteAndItsChildren(ee,L)})}deactivateRoutes(S,I,L){const G=S.value,ee=I?I.value:null;if(G===ee)if(G.component){const le=L.getContext(G.outlet);le&&this.deactivateChildRoutes(S,I,le.children)}else this.deactivateChildRoutes(S,I,L);else ee&&this.deactivateRouteAndItsChildren(I,L)}deactivateRouteAndItsChildren(S,I){this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,I):this.deactivateRouteAndOutlet(S,I)}detachAndStoreRouteSubtree(S,I){const L=I.getContext(S.value.outlet);if(L&&L.outlet){const G=L.outlet.detach(),ee=L.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:G,route:S,contexts:ee})}}deactivateRouteAndOutlet(S,I){const L=I.getContext(S.value.outlet),G=L&&S.value.component?L.children:I,ee=lr(S);for(const le of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[le],G);L&&L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated(),L.attachRef=null,L.resolver=null,L.route=null)}activateChildRoutes(S,I,L){const G=lr(I);S.children.forEach(ee=>{this.activateRoutes(ee,G[ee.value.outlet],L),this.forwardEvent(new Ds(ee.value.snapshot))}),S.children.length&&this.forwardEvent(new rn(S.value.snapshot))}activateRoutes(S,I,L){const G=S.value,ee=I?I.value:null;if(Te(G),G===ee)if(G.component){const le=L.getOrCreateContext(G.outlet);this.activateChildRoutes(S,I,le.children)}else this.activateChildRoutes(S,I,L);else if(G.component){const le=L.getOrCreateContext(G.outlet);if(this.routeReuseStrategy.shouldAttach(G.snapshot)){const Se=this.routeReuseStrategy.retrieve(G.snapshot);this.routeReuseStrategy.store(G.snapshot,null),le.children.onOutletReAttached(Se.contexts),le.attachRef=Se.componentRef,le.route=Se.route.value,le.outlet&&le.outlet.attach(Se.componentRef,Se.route.value),Zr(Se.route)}else{const Se=function(N){for(let S=N.parent;S;S=S.parent){const I=S.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(G.snapshot),st=Se?Se.module.componentFactoryResolver:null;le.attachRef=null,le.route=G,le.resolver=st,le.outlet&&le.outlet.activateWith(G,st),this.activateChildRoutes(S,null,le.children)}}else this.activateChildRoutes(S,null,L)}}function Zr(N){Te(N.value),N.children.forEach(Zr)}class qi{constructor(S,I){this.routes=S,this.module=I}}function Ki(N){return"function"==typeof N}function yr(N){return N instanceof Ir}const Ss=Symbol("INITIAL_VALUE");function V(){return(0,an.w)(N=>function(...N){let S,I;return(0,de.K)(N[N.length-1])&&(I=N.pop()),"function"==typeof N[N.length-1]&&(S=N.pop()),1===N.length&&(0,Me.k)(N[0])&&(N=N[0]),(0,se.n)(N,I).lift(new $e(S))}(N.map(S=>S.pipe((0,Fn.q)(1),(0,gr.O)(Ss)))).pipe((0,_n.R)((S,I)=>{let L=!1;return I.reduce((G,ee,le)=>G!==Ss?G:(ee===Ss&&(L=!0),L||!1!==ee&&le!==I.length-1&&!yr(ee)?G:ee),S)},Ss),(0,ot.h)(S=>S!==Ss),(0,Bt.U)(S=>yr(S)?S:!0===S),(0,Fn.q)(1)))}let Q=(()=>{class N{}return N.\u0275fac=function(I){return new(I||N)},N.\u0275cmp=U.Xpm({type:N,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,L){1&I&&U._UZ(0,"router-outlet")},directives:function(){return[ko]},encapsulation:2}),N})();function B(N,S=""){for(let I=0;I<N.length;I++){const L=N[I];te(L,me(S,L))}}function te(N,S){N.children&&B(N.children,S)}function me(N,S){return S?N||S.path?N&&!S.path?`${N}/`:!N&&S.path?S.path:`${N}/${S.path}`:"":N}function qe(N){const S=N.children&&N.children.map(qe),I=S?Object.assign(Object.assign({},N),{children:S}):Object.assign({},N);return!I.component&&(S||I.loadChildren)&&I.outlet&&I.outlet!==Dt&&(I.component=Q),I}function Je(N){return N.outlet||Dt}function F(N,S){const I=N.filter(L=>Je(L)===S);return I.push(...N.filter(L=>Je(L)!==S)),I}const O={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function R(N,S,I){var L;if(""===S.path)return"full"===S.pathMatch&&(N.hasChildren()||I.length>0)?Object.assign({},O):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ee=(S.matcher||Ie)(I,N,S);if(!ee)return Object.assign({},O);const le={};tn(ee.posParams,(st,Gt)=>{le[Gt]=st.path});const Se=ee.consumed.length>0?Object.assign(Object.assign({},le),ee.consumed[ee.consumed.length-1].parameters):le;return{matched:!0,consumedSegments:ee.consumed,lastChild:ee.consumed.length,parameters:Se,positionalParamSegments:null!==(L=ee.posParams)&&void 0!==L?L:{}}}function Y(N,S,I,L,G="corrected"){if(I.length>0&&function(N,S,I){return I.some(L=>Li(N,S,L)&&Je(L)!==Dt)}(N,I,L)){const le=new sn(S,function(N,S,I,L){const G={};G[Dt]=L,L._sourceSegment=N,L._segmentIndexShift=S.length;for(const ee of I)if(""===ee.path&&Je(ee)!==Dt){const le=new sn([],{});le._sourceSegment=N,le._segmentIndexShift=S.length,G[Je(ee)]=le}return G}(N,S,L,new sn(I,N.children)));return le._sourceSegment=N,le._segmentIndexShift=S.length,{segmentGroup:le,slicedSegments:[]}}if(0===I.length&&function(N,S,I){return I.some(L=>Li(N,S,L))}(N,I,L)){const le=new sn(N.segments,function(N,S,I,L,G,ee){const le={};for(const Se of L)if(Li(N,I,Se)&&!G[Je(Se)]){const st=new sn([],{});st._sourceSegment=N,st._segmentIndexShift="legacy"===ee?N.segments.length:S.length,le[Je(Se)]=st}return Object.assign(Object.assign({},G),le)}(N,S,I,L,N.children,G));return le._sourceSegment=N,le._segmentIndexShift=S.length,{segmentGroup:le,slicedSegments:I}}const ee=new sn(N.segments,N.children);return ee._sourceSegment=N,ee._segmentIndexShift=S.length,{segmentGroup:ee,slicedSegments:I}}function Li(N,S,I){return(!(N.hasChildren()||S.length>0)||"full"!==I.pathMatch)&&""===I.path}function Yr(N,S,I,L){return!!(Je(N)===L||L!==Dt&&Li(S,I,N))&&("**"===N.path||R(S,N,I).matched)}function Vi(N,S,I){return 0===S.length&&!N.children[I]}class cr{constructor(S){this.segmentGroup=S||null}}class Ht{constructor(S){this.urlTree=S}}function Qo(N){return new it.y(S=>S.error(new cr(N)))}function Jo(N){return new it.y(S=>S.error(new Ht(N)))}function Ia(N){return new it.y(S=>S.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${N}'`)))}class Mc{constructor(S,I,L,G,ee){this.configLoader=I,this.urlSerializer=L,this.urlTree=G,this.config=ee,this.allowRedirects=!0,this.ngModule=S.get(U.h0i)}apply(){const S=Y(this.urlTree.root,[],[],this.config).segmentGroup,I=new sn(S.segments,S.children);return this.expandSegmentGroup(this.ngModule,this.config,I,Dt).pipe((0,Bt.U)(ee=>this.createUrlTree(dt(ee),this.urlTree.queryParams,this.urlTree.fragment))).pipe(St(ee=>{if(ee instanceof Ht)return this.allowRedirects=!1,this.match(ee.urlTree);throw ee instanceof cr?this.noMatchError(ee):ee}))}match(S){return this.expandSegmentGroup(this.ngModule,this.config,S.root,Dt).pipe((0,Bt.U)(G=>this.createUrlTree(dt(G),S.queryParams,S.fragment))).pipe(St(G=>{throw G instanceof cr?this.noMatchError(G):G}))}noMatchError(S){return new Error(`Cannot match any routes. URL Segment: '${S.segmentGroup}'`)}createUrlTree(S,I,L){const G=S.segments.length>0?new sn([],{[Dt]:S}):S;return new Ir(G,I,L)}expandSegmentGroup(S,I,L,G){return 0===L.segments.length&&L.hasChildren()?this.expandChildren(S,I,L).pipe((0,Bt.U)(ee=>new sn([],ee))):this.expandSegment(S,L,I,L.segments,G,!0)}expandChildren(S,I,L){const G=[];for(const ee of Object.keys(L.children))"primary"===ee?G.unshift(ee):G.push(ee);return(0,ze.D)(G).pipe(bt(ee=>{const le=L.children[ee],Se=F(I,ee);return this.expandSegmentGroup(S,Se,le,ee).pipe((0,Bt.U)(st=>({segment:st,outlet:ee})))}),(0,_n.R)((ee,le)=>(ee[le.outlet]=le.segment,ee),{}),function(N,S){const I=arguments.length>=2;return L=>L.pipe(N?(0,ot.h)((G,ee)=>N(G,ee,L)):gn.y,It(1),I?(0,ni.d)(S):(0,Ur.T)(()=>new Ce.K))}())}expandSegment(S,I,L,G,ee,le){return(0,ze.D)(L).pipe(bt(Se=>this.expandSegmentAgainstRoute(S,I,L,Se,G,ee,le).pipe(St(Gt=>{if(Gt instanceof cr)return(0,Be.of)(null);throw Gt}))),(0,Nn.P)(Se=>!!Se),St((Se,st)=>{if(Se instanceof Ce.K||"EmptyError"===Se.name){if(Vi(I,G,ee))return(0,Be.of)(new sn([],{}));throw new cr(I)}throw Se}))}expandSegmentAgainstRoute(S,I,L,G,ee,le,Se){return Yr(G,I,ee,le)?void 0===G.redirectTo?this.matchSegmentAgainstRoute(S,I,G,ee,le):Se&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,I,L,G,ee,le):Qo(I):Qo(I)}expandSegmentAgainstRouteUsingRedirect(S,I,L,G,ee,le){return"**"===G.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,L,G,le):this.expandRegularSegmentAgainstRouteUsingRedirect(S,I,L,G,ee,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,I,L,G){const ee=this.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?Jo(ee):this.lineralizeSegments(L,ee).pipe((0,Fe.zg)(le=>{const Se=new sn(le,{});return this.expandSegment(S,Se,I,le,G,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,I,L,G,ee,le){const{matched:Se,consumedSegments:st,lastChild:Gt,positionalParamSegments:Pn}=R(I,G,ee);if(!Se)return Qo(I);const vt=this.applyRedirectCommands(st,G.redirectTo,Pn);return G.redirectTo.startsWith("/")?Jo(vt):this.lineralizeSegments(G,vt).pipe((0,Fe.zg)(bn=>this.expandSegment(S,I,L,bn.concat(ee.slice(Gt)),le,!1)))}matchSegmentAgainstRoute(S,I,L,G,ee){if("**"===L.path)return L.loadChildren?(L._loadedConfig?(0,Be.of)(L._loadedConfig):this.configLoader.load(S.injector,L)).pipe((0,Bt.U)(bn=>(L._loadedConfig=bn,new sn(G,{})))):(0,Be.of)(new sn(G,{}));const{matched:le,consumedSegments:Se,lastChild:st}=R(I,L,G);if(!le)return Qo(I);const Gt=G.slice(st);return this.getChildConfig(S,L,G).pipe((0,Fe.zg)(vt=>{const bn=vt.module,Rn=vt.routes,{segmentGroup:dr,slicedSegments:$t}=Y(I,Se,Gt,Rn),As=new sn(dr.segments,dr.children);if(0===$t.length&&As.hasChildren())return this.expandChildren(bn,Rn,As).pipe((0,Bt.U)(Nt=>new sn(Se,Nt)));if(0===Rn.length&&0===$t.length)return(0,Be.of)(new sn(Se,{}));const Ln=Je(L)===ee;return this.expandSegment(bn,As,Rn,$t,Ln?Dt:ee,!0).pipe((0,Bt.U)(Fr=>new sn(Se.concat(Fr.segments),Fr.children)))}))}getChildConfig(S,I,L){return I.children?(0,Be.of)(new qi(I.children,S)):I.loadChildren?void 0!==I._loadedConfig?(0,Be.of)(I._loadedConfig):this.runCanLoadGuards(S.injector,I,L).pipe((0,Fe.zg)(G=>{return G?this.configLoader.load(S.injector,I).pipe((0,Bt.U)(ee=>(I._loadedConfig=ee,ee))):(N=I,new it.y(S=>S.error(Tn(`Cannot load children because the guard of the route "path: '${N.path}'" returned false`))));var N})):(0,Be.of)(new qi([],S))}runCanLoadGuards(S,I,L){const G=I.canLoad;if(!G||0===G.length)return(0,Be.of)(!0);const ee=G.map(le=>{const Se=S.get(le);let st;if((N=Se)&&Ki(N.canLoad))st=Se.canLoad(I,L);else{if(!Ki(Se))throw new Error("Invalid CanLoad guard");st=Se(I,L)}var N;return Un(st)});return(0,Be.of)(ee).pipe(V(),(0,ir.b)(le=>{if(!yr(le))return;const Se=Tn(`Redirecting to "${this.urlSerializer.serialize(le)}"`);throw Se.url=le,Se}),(0,Bt.U)(le=>!0===le))}lineralizeSegments(S,I){let L=[],G=I.root;for(;;){if(L=L.concat(G.segments),0===G.numberOfChildren)return(0,Be.of)(L);if(G.numberOfChildren>1||!G.children[Dt])return Ia(S.redirectTo);G=G.children[Dt]}}applyRedirectCommands(S,I,L){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),S,L)}applyRedirectCreatreUrlTree(S,I,L,G){const ee=this.createSegmentGroup(S,I.root,L,G);return new Ir(ee,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(S,I){const L={};return tn(S,(G,ee)=>{if("string"==typeof G&&G.startsWith(":")){const Se=G.substring(1);L[ee]=I[Se]}else L[ee]=G}),L}createSegmentGroup(S,I,L,G){const ee=this.createSegments(S,I.segments,L,G);let le={};return tn(I.children,(Se,st)=>{le[st]=this.createSegmentGroup(S,Se,L,G)}),new sn(ee,le)}createSegments(S,I,L,G){return I.map(ee=>ee.path.startsWith(":")?this.findPosParam(S,ee,G):this.findOrReturn(ee,L))}findPosParam(S,I,L){const G=L[I.path.substring(1)];if(!G)throw new Error(`Cannot redirect to '${S}'. Cannot find '${I.path}'.`);return G}findOrReturn(S,I){let L=0;for(const G of I){if(G.path===S.path)return I.splice(L),G;L++}return S}}function dt(N){const S={};for(const L of Object.keys(N.children)){const ee=dt(N.children[L]);(ee.segments.length>0||ee.hasChildren())&&(S[L]=ee)}return function(N){if(1===N.numberOfChildren&&N.children[Dt]){const S=N.children[Dt];return new sn(N.segments.concat(S.segments),S.children)}return N}(new sn(N.segments,S))}class vs{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class wr{constructor(S,I){this.component=S,this.route=I}}function Vu(N,S,I){const L=N._root;return Qr(L,S?S._root:null,I,[L.value])}function Es(N,S,I){const L=function(N){if(!N)return null;for(let S=N.parent;S;S=S.parent){const I=S.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(S);return(L?L.module.injector:I).get(N)}function Qr(N,S,I,L,G={canDeactivateChecks:[],canActivateChecks:[]}){const ee=lr(S);return N.children.forEach(le=>{(function(N,S,I,L,G={canDeactivateChecks:[],canActivateChecks:[]}){const ee=N.value,le=S?S.value:null,Se=I?I.getContext(N.value.outlet):null;if(le&&ee.routeConfig===le.routeConfig){const st=function(N,S,I){if("function"==typeof I)return I(N,S);switch(I){case"pathParamsChange":return!At(N.url,S.url);case"pathParamsOrQueryParamsChange":return!At(N.url,S.url)||!ve(N.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ve(N,S)||!ve(N.queryParams,S.queryParams);default:return!Ve(N,S)}}(le,ee,ee.routeConfig.runGuardsAndResolvers);st?G.canActivateChecks.push(new vs(L)):(ee.data=le.data,ee._resolvedData=le._resolvedData),Qr(N,S,ee.component?Se?Se.children:null:I,L,G),st&&Se&&Se.outlet&&Se.outlet.isActivated&&G.canDeactivateChecks.push(new wr(Se.outlet.component,le))}else le&&ls(S,Se,G),G.canActivateChecks.push(new vs(L)),Qr(N,null,ee.component?Se?Se.children:null:I,L,G)})(le,ee[le.value.outlet],I,L.concat([le.value]),G),delete ee[le.value.outlet]}),tn(ee,(le,Se)=>ls(le,I.getContext(Se),G)),G}function ls(N,S,I){const L=lr(N),G=N.value;tn(L,(ee,le)=>{ls(ee,G.component?S?S.children.getContext(le):null:S,I)}),I.canDeactivateChecks.push(new wr(G.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,G))}class cu{}function eo(N){return new it.y(S=>S.error(N))}class Ta{constructor(S,I,L,G,ee,le){this.rootComponentType=S,this.config=I,this.urlTree=L,this.url=G,this.paramsInheritanceStrategy=ee,this.relativeLinkResolution=le}recognize(){const S=Y(this.urlTree.root,[],[],this.config.filter(le=>void 0===le.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,S,Dt);if(null===I)return null;const L=new Gr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),G=new oi(L,I),ee=new Fi(this.url,G);return this.inheritParamsAndData(ee._root),ee}inheritParamsAndData(S){const I=S.value,L=Qs(I,this.paramsInheritanceStrategy);I.params=Object.freeze(L.params),I.data=Object.freeze(L.data),S.children.forEach(G=>this.inheritParamsAndData(G))}processSegmentGroup(S,I,L){return 0===I.segments.length&&I.hasChildren()?this.processChildren(S,I):this.processSegment(S,I,I.segments,L)}processChildren(S,I){const L=[];for(const ee of Object.keys(I.children)){const le=I.children[ee],Se=F(S,ee),st=this.processSegmentGroup(Se,le,ee);if(null===st)return null;L.push(...st)}const G=Xo(L);return G.sort((S,I)=>S.value.outlet===Dt?-1:I.value.outlet===Dt?1:S.value.outlet.localeCompare(I.value.outlet)),G}processSegment(S,I,L,G){for(const ee of S){const le=this.processSegmentAgainstRoute(ee,I,L,G);if(null!==le)return le}return Vi(I,L,G)?[]:null}processSegmentAgainstRoute(S,I,L,G){if(S.redirectTo||!Yr(S,I,L,G))return null;let ee,le=[],Se=[];if("**"===S.path){const Rn=L.length>0?Tt(L).parameters:{};ee=new Gr(L,Rn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ml(S),Je(S),S.component,S,gl(I),$s(I)+L.length,du(S))}else{const Rn=R(I,S,L);if(!Rn.matched)return null;le=Rn.consumedSegments,Se=L.slice(Rn.lastChild),ee=new Gr(le,Rn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ml(S),Je(S),S.component,S,gl(I),$s(I)+le.length,du(S))}const st=(N=S).children?N.children:N.loadChildren?N._loadedConfig.routes:[],{segmentGroup:Gt,slicedSegments:Pn}=Y(I,le,Se,st.filter(Rn=>void 0===Rn.redirectTo),this.relativeLinkResolution);var N;if(0===Pn.length&&Gt.hasChildren()){const Rn=this.processChildren(st,Gt);return null===Rn?null:[new oi(ee,Rn)]}if(0===st.length&&0===Pn.length)return[new oi(ee,[])];const vt=Je(S)===G,bn=this.processSegment(st,Gt,Pn,vt?Dt:G);return null===bn?null:[new oi(ee,bn)]}}function Mo(N){const S=N.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function Xo(N){const S=[],I=new Set;for(const L of N){if(!Mo(L)){S.push(L);continue}const G=S.find(ee=>L.value.routeConfig===ee.value.routeConfig);void 0!==G?(G.children.push(...L.children),I.add(G)):S.push(L)}for(const L of I){const G=Xo(L.children);S.push(new oi(L.value,G))}return S.filter(L=>!I.has(L))}function gl(N){let S=N;for(;S._sourceSegment;)S=S._sourceSegment;return S}function $s(N){let S=N,I=S._segmentIndexShift?S._segmentIndexShift:0;for(;S._sourceSegment;)S=S._sourceSegment,I+=S._segmentIndexShift?S._segmentIndexShift:0;return I-1}function ml(N){return N.data||{}}function du(N){return N.resolve||{}}function Mr(N){return(0,an.w)(S=>{const I=N(S);return I?(0,ze.D)(I).pipe((0,Bt.U)(()=>S)):(0,Be.of)(S)})}class _d extends class{shouldDetach(S){return!1}store(S,I){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,I){return S.routeConfig===I.routeConfig}}{}const ca=new U.OlP("ROUTES");class hu{constructor(S,I,L,G){this.loader=S,this.compiler=I,this.onLoadStartListener=L,this.onLoadEndListener=G}load(S,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const G=this.loadModuleFactory(I.loadChildren).pipe((0,Bt.U)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(I);const le=ee.create(S);return new qi(rt(le.injector.get(ca,void 0,U.XFs.Self|U.XFs.Optional)).map(qe),le)}),St(ee=>{throw I._loader$=void 0,ee}));return I._loader$=new Wt.c(G,()=>new ie.xQ).pipe((0,ri.x)()),I._loader$}loadModuleFactory(S){return"string"==typeof S?(0,ze.D)(this.loader.load(S)):Un(S()).pipe((0,Fe.zg)(I=>I instanceof U.YKP?(0,Be.of)(I):(0,ze.D)(this.compiler.compileModuleAsync(I))))}}class Qi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new po,this.attachRef=null}}class po{constructor(){this.contexts=new Map}onChildOutletCreated(S,I){const L=this.getOrCreateContext(S);L.outlet=I,this.contexts.set(S,L)}onChildOutletDestroyed(S){const I=this.getContext(S);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let I=this.getContext(S);return I||(I=new Qi,this.contexts.set(S,I)),I}getContext(S){return this.contexts.get(S)||null}}class go{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,I){return S}}function ui(N){throw N}function fu(N,S,I){return S.parse("/")}function Gu(N,S){return(0,Be.of)(null)}const Ui={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Po={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ji=(()=>{class N{constructor(I,L,G,ee,le,Se,st,Gt){this.rootComponentType=I,this.urlSerializer=L,this.rootContexts=G,this.location=ee,this.config=Gt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ie.xQ,this.errorHandler=ui,this.malformedUriErrorHandler=fu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Gu,afterPreactivation:Gu},this.urlHandlingStrategy=new go,this.routeReuseStrategy=new _d,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=le.get(U.h0i),this.console=le.get(U.c2e);const bn=le.get(U.R0b);this.isNgZoneEnabled=bn instanceof U.R0b&&U.R0b.isInAngularZone(),this.resetConfig(Gt),this.currentUrlTree=new Ir(new sn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hu(Se,st,Rn=>this.triggerEvent(new Is(Rn)),Rn=>this.triggerEvent(new Yn(Rn))),this.routerState=ms(this.currentUrlTree,this.rootComponentType),this.transitions=new Ae({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const L=this.events;return I.pipe((0,ot.h)(G=>0!==G.id),(0,Bt.U)(G=>Object.assign(Object.assign({},G),{extractedUrl:this.urlHandlingStrategy.extract(G.rawUrl)})),(0,an.w)(G=>{let ee=!1,le=!1;return(0,Be.of)(G).pipe((0,ir.b)(Se=>{this.currentNavigation={id:Se.id,initialUrl:Se.currentRawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,an.w)(Se=>{const st=this.browserUrlTree.toString(),Gt=!this.navigated||Se.extractedUrl.toString()!==st||st!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Gt)&&this.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return Oo(Se.source)&&(this.browserUrlTree=Se.extractedUrl),(0,Be.of)(Se).pipe((0,an.w)(vt=>{const bn=this.transitions.getValue();return L.next(new un(vt.id,this.serializeUrl(vt.extractedUrl),vt.source,vt.restoredState)),bn!==this.transitions.getValue()?Ct.E:Promise.resolve(vt)}),function(N,S,I,L){return(0,an.w)(G=>function(N,S,I,L,G){return new Mc(N,S,I,L,G).apply()}(N,S,I,G.extractedUrl,L).pipe((0,Bt.U)(ee=>Object.assign(Object.assign({},G),{urlAfterRedirects:ee}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ir.b)(vt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:vt.urlAfterRedirects})}),function(N,S,I,L,G){return(0,Fe.zg)(ee=>function(N,S,I,L,G="emptyOnly",ee="legacy"){try{const le=new Ta(N,S,I,L,G,ee).recognize();return null===le?eo(new cu):(0,Be.of)(le)}catch(le){return eo(le)}}(N,S,ee.urlAfterRedirects,I(ee.urlAfterRedirects),L,G).pipe((0,Bt.U)(le=>Object.assign(Object.assign({},ee),{targetSnapshot:le}))))}(this.rootComponentType,this.config,vt=>this.serializeUrl(vt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ir.b)(vt=>{"eager"===this.urlUpdateStrategy&&(vt.extras.skipLocationChange||this.setBrowserUrl(vt.urlAfterRedirects,vt),this.browserUrlTree=vt.urlAfterRedirects);const bn=new xn(vt.id,this.serializeUrl(vt.extractedUrl),this.serializeUrl(vt.urlAfterRedirects),vt.targetSnapshot);L.next(bn)}));if(Gt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:bn,extractedUrl:Rn,source:dr,restoredState:$t,extras:As}=Se,Ln=new un(bn,this.serializeUrl(Rn),dr,$t);L.next(Ln);const Fo=ms(Rn,this.rootComponentType).snapshot;return(0,Be.of)(Object.assign(Object.assign({},Se),{targetSnapshot:Fo,urlAfterRedirects:Rn,extras:Object.assign(Object.assign({},As),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Se.rawUrl,this.browserUrlTree=Se.urlAfterRedirects,Se.resolve(null),Ct.E}),Mr(Se=>{const{targetSnapshot:st,id:Gt,extractedUrl:Pn,rawUrl:vt,extras:{skipLocationChange:bn,replaceUrl:Rn}}=Se;return this.hooks.beforePreactivation(st,{navigationId:Gt,appliedUrlTree:Pn,rawUrlTree:vt,skipLocationChange:!!bn,replaceUrl:!!Rn})}),(0,ir.b)(Se=>{const st=new xr(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot);this.triggerEvent(st)}),(0,Bt.U)(Se=>Object.assign(Object.assign({},Se),{guards:Vu(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)})),function(N,S){return(0,Fe.zg)(I=>{const{targetSnapshot:L,currentSnapshot:G,guards:{canActivateChecks:ee,canDeactivateChecks:le}}=I;return 0===le.length&&0===ee.length?(0,Be.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function(N,S,I,L){return(0,ze.D)(N).pipe((0,Fe.zg)(G=>function(N,S,I,L,G){const ee=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,Be.of)(!0);const le=ee.map(Se=>{const st=Es(Se,S,G);let Gt;if(function(N){return N&&Ki(N.canDeactivate)}(st))Gt=Un(st.canDeactivate(N,S,I,L));else{if(!Ki(st))throw new Error("Invalid CanDeactivate guard");Gt=Un(st(N,S,I,L))}return Gt.pipe((0,Nn.P)())});return(0,Be.of)(le).pipe(V())}(G.component,G.route,I,S,L)),(0,Nn.P)(G=>!0!==G,!0))}(le,L,G,N).pipe((0,Fe.zg)(Se=>Se&&function(N){return"boolean"==typeof N}(Se)?function(N,S,I,L){return(0,ze.D)(S).pipe(bt(G=>(0,_t.z)(function(N,S){return null!==N&&S&&S(new Pt(N)),(0,Be.of)(!0)}(G.route.parent,L),function(N,S){return null!==N&&S&&S(new xi(N)),(0,Be.of)(!0)}(G.route,L),function(N,S,I){const L=S[S.length-1],ee=S.slice(0,S.length-1).reverse().map(le=>function(N){const S=N.routeConfig?N.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:N,guards:S}:null}(le)).filter(le=>null!==le).map(le=>We(()=>{const Se=le.guards.map(st=>{const Gt=Es(st,le.node,I);let Pn;if(function(N){return N&&Ki(N.canActivateChild)}(Gt))Pn=Un(Gt.canActivateChild(L,N));else{if(!Ki(Gt))throw new Error("Invalid CanActivateChild guard");Pn=Un(Gt(L,N))}return Pn.pipe((0,Nn.P)())});return(0,Be.of)(Se).pipe(V())}));return(0,Be.of)(ee).pipe(V())}(N,G.path,I),function(N,S,I){const L=S.routeConfig?S.routeConfig.canActivate:null;if(!L||0===L.length)return(0,Be.of)(!0);const G=L.map(ee=>We(()=>{const le=Es(ee,S,I);let Se;if(function(N){return N&&Ki(N.canActivate)}(le))Se=Un(le.canActivate(S,N));else{if(!Ki(le))throw new Error("Invalid CanActivate guard");Se=Un(le(S,N))}return Se.pipe((0,Nn.P)())}));return(0,Be.of)(G).pipe(V())}(N,G.route,I))),(0,Nn.P)(G=>!0!==G,!0))}(L,ee,N,S):(0,Be.of)(Se)),(0,Bt.U)(Se=>Object.assign(Object.assign({},I),{guardsResult:Se})))})}(this.ngModule.injector,Se=>this.triggerEvent(Se)),(0,ir.b)(Se=>{if(yr(Se.guardsResult)){const Gt=Tn(`Redirecting to "${this.serializeUrl(Se.guardsResult)}"`);throw Gt.url=Se.guardsResult,Gt}const st=new vr(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.triggerEvent(st)}),(0,ot.h)(Se=>!!Se.guardsResult||(this.restoreHistory(Se),this.cancelNavigationTransition(Se,""),!1)),Mr(Se=>{if(Se.guards.canActivateChecks.length)return(0,Be.of)(Se).pipe((0,ir.b)(st=>{const Gt=new br(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(Gt)}),(0,an.w)(st=>{let Gt=!1;return(0,Be.of)(st).pipe(function(N,S){return(0,Fe.zg)(I=>{const{targetSnapshot:L,guards:{canActivateChecks:G}}=I;if(!G.length)return(0,Be.of)(I);let ee=0;return(0,ze.D)(G).pipe(bt(le=>function(N,S,I,L){return function(N,S,I,L){const G=Object.keys(N);if(0===G.length)return(0,Be.of)({});const ee={};return(0,ze.D)(G).pipe((0,Fe.zg)(le=>function(N,S,I,L){const G=Es(N,S,L);return Un(G.resolve?G.resolve(S,I):G(S,I))}(N[le],S,I,L).pipe((0,ir.b)(Se=>{ee[le]=Se}))),It(1),(0,Fe.zg)(()=>Object.keys(ee).length===G.length?(0,Be.of)(ee):Ct.E))}(N._resolve,N,S,L).pipe((0,Bt.U)(ee=>(N._resolvedData=ee,N.data=Object.assign(Object.assign({},N.data),Qs(N,I).resolve),null)))}(le.route,L,N,S)),(0,ir.b)(()=>ee++),It(1),(0,Fe.zg)(le=>ee===G.length?(0,Be.of)(I):Ct.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ir.b)({next:()=>Gt=!0,complete:()=>{Gt||(this.restoreHistory(st),this.cancelNavigationTransition(st,"At least one route resolver didn't emit any value."))}}))}),(0,ir.b)(st=>{const Gt=new hr(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(Gt)}))}),Mr(Se=>{const{targetSnapshot:st,id:Gt,extractedUrl:Pn,rawUrl:vt,extras:{skipLocationChange:bn,replaceUrl:Rn}}=Se;return this.hooks.afterPreactivation(st,{navigationId:Gt,appliedUrlTree:Pn,rawUrlTree:vt,skipLocationChange:!!bn,replaceUrl:!!Rn})}),(0,Bt.U)(Se=>{const st=function(N,S,I){const L=Et(N,S._root,I?I._root:void 0);return new Ys(L,S)}(this.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return Object.assign(Object.assign({},Se),{targetRouterState:st})}),(0,ir.b)(Se=>{this.currentUrlTree=Se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Se.urlAfterRedirects,Se.rawUrl),this.routerState=Se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Se),this.browserUrlTree=Se.urlAfterRedirects)}),((N,S,I)=>(0,Bt.U)(L=>(new zi(S,L.targetRouterState,L.currentRouterState,I).activate(N),L)))(this.rootContexts,this.routeReuseStrategy,Se=>this.triggerEvent(Se)),(0,ir.b)({next(){ee=!0},complete(){ee=!0}}),function(N){return S=>S.lift(new Zt(N))}(()=>{var Se;if(!ee&&!le){const st=`Navigation ID ${G.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(G),this.cancelNavigationTransition(G,st)):this.cancelNavigationTransition(G,st)}(null===(Se=this.currentNavigation)||void 0===Se?void 0:Se.id)===G.id&&(this.currentNavigation=null)}),St(Se=>{if(le=!0,function(N){return N&&N[Dn]}(Se)){const st=yr(Se.url);st||(this.navigated=!0,this.restoreHistory(G,!0));const Gt=new jn(G.id,this.serializeUrl(G.extractedUrl),Se.message);L.next(Gt),st?setTimeout(()=>{const Pn=this.urlHandlingStrategy.merge(Se.url,this.rawUrlTree),vt={skipLocationChange:G.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oo(G.source)};this.scheduleNavigation(Pn,"imperative",null,vt,{resolve:G.resolve,reject:G.reject,promise:G.promise})},0):G.resolve(!1)}else{this.restoreHistory(G,!0);const st=new or(G.id,this.serializeUrl(G.extractedUrl),Se);L.next(st);try{G.resolve(this.errorHandler(Se))}catch(Gt){G.reject(Gt)}}return Ct.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}getTransition(){const I=this.transitions.value;return I.urlAfterRedirects=this.browserUrlTree,I}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const L=this.extractLocationChangeInfoFromEvent(I);this.shouldScheduleNavigation(this.lastLocationChangeInfo,L)&&setTimeout(()=>{const{source:G,state:ee,urlTree:le}=L,Se={replaceUrl:!0};if(ee){const st=Object.assign({},ee);delete st.navigationId,delete st.\u0275routerPageId,0!==Object.keys(st).length&&(Se.state=st)}this.scheduleNavigation(le,G,ee,Se)},0),this.lastLocationChangeInfo=L}))}extractLocationChangeInfoFromEvent(I){var L;return{source:"popstate"===I.type?"popstate":"hashchange",urlTree:this.parseUrl(I.url),state:(null===(L=I.state)||void 0===L?void 0:L.navigationId)?I.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(I,L){if(!I)return!0;const G=L.urlTree.toString()===I.urlTree.toString();return L.transitionId!==I.transitionId||!G||!("hashchange"===L.source&&"popstate"===I.source||"popstate"===L.source&&"hashchange"===I.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){B(I),this.config=I.map(qe),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,L={}){const{relativeTo:G,queryParams:ee,fragment:le,queryParamsHandling:Se,preserveFragment:st}=L,Gt=G||this.routerState.root,Pn=st?this.currentUrlTree.fragment:le;let vt=null;switch(Se){case"merge":vt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ee);break;case"preserve":vt=this.currentUrlTree.queryParams;break;default:vt=ee||null}return null!==vt&&(vt=this.removeEmptyProps(vt)),function(N,S,I,L,G){if(0===I.length)return _s(S.root,S.root,S,L,G);const ee=function(N){if("string"==typeof N[0]&&1===N.length&&"/"===N[0])return new as(!0,0,N);let S=0,I=!1;const L=N.reduce((G,ee,le)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const Se={};return tn(ee.outlets,(st,Gt)=>{Se[Gt]="string"==typeof st?st.split("/"):st}),[...G,{outlets:Se}]}if(ee.segmentPath)return[...G,ee.segmentPath]}return"string"!=typeof ee?[...G,ee]:0===le?(ee.split("/").forEach((Se,st)=>{0==st&&"."===Se||(0==st&&""===Se?I=!0:".."===Se?S++:""!=Se&&G.push(Se))}),G):[...G,ee]},[]);return new as(I,S,L)}(I);if(ee.toRoot())return _s(S.root,new sn([],{}),S,L,G);const le=function(N,S,I){if(N.isAbsolute)return new uo(S.root,!0,0);if(-1===I.snapshot._lastPathIndex){const ee=I.snapshot._urlSegment;return new uo(ee,ee===S.root,0)}const L=ai(N.commands[0])?0:1;return function(N,S,I){let L=N,G=S,ee=I;for(;ee>G;){if(ee-=G,L=L.parent,!L)throw new Error("Invalid number of '../'");G=L.segments.length}return new uo(L,!1,G-ee)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+L,N.numberOfDoubleDots)}(ee,S,N),Se=le.processChildren?Xs(le.segmentGroup,le.index,ee.commands):Js(le.segmentGroup,le.index,ee.commands);return _s(le.segmentGroup,Se,S,L,G)}(Gt,this.currentUrlTree,I,vt,null!=Pn?Pn:null)}navigateByUrl(I,L={skipLocationChange:!1}){const G=yr(I)?I:this.parseUrl(I),ee=this.urlHandlingStrategy.merge(G,this.rawUrlTree);return this.scheduleNavigation(ee,"imperative",null,L)}navigate(I,L={skipLocationChange:!1}){return function(N){for(let S=0;S<N.length;S++){const I=N[S];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${S}`)}}(I),this.navigateByUrl(this.createUrlTree(I,L),L)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let L;try{L=this.urlSerializer.parse(I)}catch(G){L=this.malformedUriErrorHandler(G,this.urlSerializer,I)}return L}isActive(I,L){let G;if(G=!0===L?Object.assign({},Ui):!1===L?Object.assign({},Po):L,yr(I))return Ni(this.currentUrlTree,I,G);const ee=this.parseUrl(I);return Ni(this.currentUrlTree,ee,G)}removeEmptyProps(I){return Object.keys(I).reduce((L,G)=>{const ee=I[G];return null!=ee&&(L[G]=ee),L},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new xt(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,L,G,ee,le){var Se,st;if(this.disposed)return Promise.resolve(!1);const Gt=this.getTransition(),Pn=Oo(L)&&Gt&&!Oo(Gt.source),Rn=(this.lastSuccessfulId===Gt.id||this.currentNavigation?Gt.rawUrl:Gt.urlAfterRedirects).toString()===I.toString();if(Pn&&Rn)return Promise.resolve(!0);let dr,$t,As;le?(dr=le.resolve,$t=le.reject,As=le.promise):As=new Promise((Fr,Nt)=>{dr=Fr,$t=Nt});const Ln=++this.navigationId;let Fo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(G=this.location.getState()),Fo=G&&G.\u0275routerPageId?G.\u0275routerPageId:ee.replaceUrl||ee.skipLocationChange?null!==(Se=this.browserPageId)&&void 0!==Se?Se:0:(null!==(st=this.browserPageId)&&void 0!==st?st:0)+1):Fo=0,this.setTransition({id:Ln,targetPageId:Fo,source:L,restoredState:G,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:ee,resolve:dr,reject:$t,promise:As,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),As.catch(Fr=>Promise.reject(Fr))}setBrowserUrl(I,L){const G=this.urlSerializer.serialize(I),ee=Object.assign(Object.assign({},L.extras.state),this.generateNgRouterState(L.id,L.targetPageId));this.location.isCurrentPathEqualTo(G)||L.extras.replaceUrl?this.location.replaceState(G,"",ee):this.location.go(G,"",ee)}restoreHistory(I,L=!1){var G,ee;if("computed"===this.canceledNavigationResolution){const le=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(G=this.currentNavigation)||void 0===G?void 0:G.finalUrl)||0===le?this.currentUrlTree===(null===(ee=this.currentNavigation)||void 0===ee?void 0:ee.finalUrl)&&0===le&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(le)}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,L){const G=new jn(I.id,this.serializeUrl(I.extractedUrl),L);this.triggerEvent(G),I.resolve(!1)}generateNgRouterState(I,L){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:L}:{navigationId:I}}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(U.DyG),U.LFG(Bn),U.LFG(po),U.LFG(T.Ye),U.LFG(U.zs3),U.LFG(U.v3s),U.LFG(U.Sil),U.LFG(void 0))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})();function Oo(N){return"imperative"!==N}let mo=(()=>{class N{constructor(I,L,G,ee,le){this.router=I,this.route=L,this.commands=[],this.onChanges=new ie.xQ,null==G&&ee.setAttribute(le.nativeElement,"tabindex","0")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:[]}onClick(){const I={skipLocationChange:Xi(this.skipLocationChange),replaceUrl:Xi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xi(this.preserveFragment)})}}return N.\u0275fac=function(I){return new(I||N)(U.Y36(Ji),U.Y36(Xn),U.$8M("tabindex"),U.Y36(U.Qsj),U.Y36(U.SBq))},N.\u0275dir=U.lG2({type:N,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,L){1&I&&U.NdJ("click",function(){return L.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[U.TTD]}),N})(),Hs=(()=>{class N{constructor(I,L,G){this.router=I,this.route=L,this.locationStrategy=G,this.commands=[],this.onChanges=new ie.xQ,this.subscription=I.events.subscribe(ee=>{ee instanceof xt&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:[]}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,L,G,ee,le){if(0!==I||L||G||ee||le||"string"==typeof this.target&&"_self"!=this.target)return!0;const Se={skipLocationChange:Xi(this.skipLocationChange),replaceUrl:Xi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Se),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xi(this.preserveFragment)})}}return N.\u0275fac=function(I){return new(I||N)(U.Y36(Ji),U.Y36(Xn),U.Y36(T.S$))},N.\u0275dir=U.lG2({type:N,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,L){1&I&&U.NdJ("click",function(ee){return L.onClick(ee.button,ee.ctrlKey,ee.shiftKey,ee.altKey,ee.metaKey)}),2&I&&(U.Ikx("href",L.href,U.LSH),U.uIk("target",L.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[U.TTD]}),N})();function Xi(N){return""===N||!!N}let Pc=(()=>{class N{constructor(I,L,G,ee,le,Se){this.router=I,this.element=L,this.renderer=G,this.cdr=ee,this.link=le,this.linkWithHref=Se,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=I.events.subscribe(st=>{st instanceof xt&&this.update()})}ngAfterContentInit(){(0,Be.of)(this.links.changes,this.linksWithHrefs.changes,(0,Be.of)(null)).pipe((0,Mn.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var I;null===(I=this.linkInputChangesSubscription)||void 0===I||I.unsubscribe();const L=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(G=>!!G).map(G=>G.onChanges);this.linkInputChangesSubscription=(0,ze.D)(L).pipe((0,Mn.J)()).subscribe(G=>{this.isActive!==this.isLinkActive(this.router)(G)&&this.update()})}set routerLinkActive(I){const L=Array.isArray(I)?I:I.split(" ");this.classes=L.filter(G=>!!G)}ngOnChanges(I){this.update()}ngOnDestroy(){var I;this.routerEventsSubscription.unsubscribe(),null===(I=this.linkInputChangesSubscription)||void 0===I||I.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const I=this.hasActiveLinks();this.isActive!==I&&(this.isActive=I,this.cdr.markForCheck(),this.classes.forEach(L=>{I?this.renderer.addClass(this.element.nativeElement,L):this.renderer.removeClass(this.element.nativeElement,L)}))})}isLinkActive(I){const L=function(N){return!!N.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return G=>I.isActive(G.urlTree,L)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.linkWithHref&&I(this.linkWithHref)||this.links.some(I)||this.linksWithHrefs.some(I)}}return N.\u0275fac=function(I){return new(I||N)(U.Y36(Ji),U.Y36(U.SBq),U.Y36(U.Qsj),U.Y36(U.sBO),U.Y36(mo,8),U.Y36(Hs,8))},N.\u0275dir=U.lG2({type:N,selectors:[["","routerLinkActive",""]],contentQueries:function(I,L,G){if(1&I&&(U.Suo(G,mo,5),U.Suo(G,Hs,5)),2&I){let ee;U.iGM(ee=U.CRH())&&(L.links=ee),U.iGM(ee=U.CRH())&&(L.linksWithHrefs=ee)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[U.TTD]}),N})(),ko=(()=>{class N{constructor(I,L,G,ee,le){this.parentContexts=I,this.location=L,this.resolver=G,this.changeDetector=le,this.activated=null,this._activatedRoute=null,this.activateEvents=new U.vpe,this.deactivateEvents=new U.vpe,this.name=ee||Dt,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,I}attach(I,L){this.activated=I,this._activatedRoute=L,this.location.insert(I.hostView)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,L){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const le=(L=L||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),Se=this.parentContexts.getOrCreateContext(this.name).children,st=new Oc(I,Se,this.location.injector);this.activated=this.location.createComponent(le,this.location.length,st),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return N.\u0275fac=function(I){return new(I||N)(U.Y36(po),U.Y36(U.s_b),U.Y36(U._Vd),U.$8M("name"),U.Y36(U.sBO))},N.\u0275dir=U.lG2({type:N,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),N})();class Oc{constructor(S,I,L){this.route=S,this.childContexts=I,this.parent=L}get(S,I){return S===Xn?this.route:S===po?this.childContexts:this.parent.get(S,I)}}class Zl{}class yl{preload(S,I){return(0,Be.of)(null)}}let Yl=(()=>{class N{constructor(I,L,G,ee,le){this.router=I,this.injector=ee,this.preloadingStrategy=le,this.loader=new hu(L,G,Gt=>I.triggerEvent(new Is(Gt)),Gt=>I.triggerEvent(new Yn(Gt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ot.h)(I=>I instanceof xt),bt(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(U.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,L){const G=[];for(const ee of L)if(ee.loadChildren&&!ee.canLoad&&ee._loadedConfig){const le=ee._loadedConfig;G.push(this.processRoutes(le.module,le.routes))}else ee.loadChildren&&!ee.canLoad?G.push(this.preloadConfig(I,ee)):ee.children&&G.push(this.processRoutes(I,ee.children));return(0,ze.D)(G).pipe((0,Mn.J)(),(0,Bt.U)(ee=>{}))}preloadConfig(I,L){return this.preloadingStrategy.preload(L,()=>(L._loadedConfig?(0,Be.of)(L._loadedConfig):this.loader.load(I.injector,L)).pipe((0,Fe.zg)(ee=>(L._loadedConfig=ee,this.processRoutes(ee.module,ee.routes)))))}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(Ji),U.LFG(U.v3s),U.LFG(U.Sil),U.LFG(U.zs3),U.LFG(Zl))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})(),ta=(()=>{class N{constructor(I,L,G={}){this.router=I,this.viewportScroller=L,this.options=G,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},G.scrollPositionRestoration=G.scrollPositionRestoration||"disabled",G.anchorScrolling=G.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof un?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof xt&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof fi&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,L){this.router.triggerEvent(new fi(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(Ji),U.LFG(T.EM),U.LFG(void 0))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})();const ws=new U.OlP("ROUTER_CONFIGURATION"),vl=new U.OlP("ROUTER_FORROOT_GUARD"),li=[T.Ye,{provide:Bn,useClass:Hr},{provide:Ji,useFactory:function(N,S,I,L,G,ee,le,Se={},st,Gt){const Pn=new Ji(null,N,S,I,L,G,ee,rt(le));return st&&(Pn.urlHandlingStrategy=st),Gt&&(Pn.routeReuseStrategy=Gt),function(N,S){N.errorHandler&&(S.errorHandler=N.errorHandler),N.malformedUriErrorHandler&&(S.malformedUriErrorHandler=N.malformedUriErrorHandler),N.onSameUrlNavigation&&(S.onSameUrlNavigation=N.onSameUrlNavigation),N.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=N.paramsInheritanceStrategy),N.relativeLinkResolution&&(S.relativeLinkResolution=N.relativeLinkResolution),N.urlUpdateStrategy&&(S.urlUpdateStrategy=N.urlUpdateStrategy)}(Se,Pn),Se.enableTracing&&Pn.events.subscribe(vt=>{var bn,Rn;null===(bn=console.group)||void 0===bn||bn.call(console,`Router Event: ${vt.constructor.name}`),console.log(vt.toString()),console.log(vt),null===(Rn=console.groupEnd)||void 0===Rn||Rn.call(console)}),Pn},deps:[Bn,po,T.Ye,U.zs3,U.v3s,U.Sil,ca,ws,[class{},new U.FiY],[class{},new U.FiY]]},po,{provide:Xn,useFactory:function(N){return N.routerState.root},deps:[Ji]},{provide:U.v3s,useClass:U.EAV},Yl,yl,class{preload(S,I){return I().pipe(St(()=>(0,Be.of)(null)))}},{provide:ws,useValue:{enableTracing:!1}}];function da(){return new U.PXZ("Router",Ji)}let ra=(()=>{class N{constructor(I,L){}static forRoot(I,L){return{ngModule:N,providers:[li,kr(I),{provide:vl,useFactory:pt,deps:[[Ji,new U.FiY,new U.tp0]]},{provide:ws,useValue:L||{}},{provide:T.S$,useFactory:kc,deps:[T.lw,[new U.tBr(T.mr),new U.FiY],ws]},{provide:ta,useFactory:Wu,deps:[Ji,T.EM,ws]},{provide:Zl,useExisting:L&&L.preloadingStrategy?L.preloadingStrategy:yl},{provide:U.PXZ,multi:!0,useFactory:da},[yn,{provide:U.ip1,multi:!0,useFactory:Ql,deps:[yn]},{provide:Qe,useFactory:Vt,deps:[yn]},{provide:U.tb,multi:!0,useExisting:Qe}]]}}static forChild(I){return{ngModule:N,providers:[kr(I)]}}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(vl,8),U.LFG(Ji,8))},N.\u0275mod=U.oAB({type:N}),N.\u0275inj=U.cJS({}),N})();function Wu(N,S,I){return I.scrollOffset&&S.setOffset(I.scrollOffset),new ta(N,S,I)}function kc(N,S,I={}){return I.useHash?new T.Do(N,S):new T.b0(N,S)}function pt(N){return"guarded"}function kr(N){return[{provide:U.deG,multi:!0,useValue:N},{provide:ca,multi:!0,useValue:N}]}let yn=(()=>{class N{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ie.xQ}appInitializer(){return this.injector.get(T.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let L=null;const G=new Promise(Se=>L=Se),ee=this.injector.get(Ji),le=this.injector.get(ws);return"disabled"===le.initialNavigation?(ee.setUpLocationChangeListener(),L(!0)):"enabled"===le.initialNavigation||"enabledBlocking"===le.initialNavigation?(ee.hooks.afterPreactivation=()=>this.initNavigation?(0,Be.of)(null):(this.initNavigation=!0,L(!0),this.resultOfPreactivationDone),ee.initialNavigation()):L(!0),G})}bootstrapListener(I){const L=this.injector.get(ws),G=this.injector.get(Yl),ee=this.injector.get(ta),le=this.injector.get(Ji),Se=this.injector.get(U.z2F);I===Se.components[0]&&(("enabledNonBlocking"===L.initialNavigation||void 0===L.initialNavigation)&&le.initialNavigation(),G.setUpPreloading(),ee.init(),le.resetRootComponentType(Se.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(U.zs3))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})();function Ql(N){return N.appInitializer.bind(N)}function Vt(N){return N.bootstrapListener.bind(N)}const Qe=new U.OlP("Router Initializer")},3854:(Ot,Ge,z)=>{"use strict";z.d(Ge,{BH:()=>$e,LL:()=>It,ZR:()=>Jt,gQ:()=>et,zI:()=>bt,hu:()=>U,g5:()=>ie,US:()=>de,tV:()=>we,h$:()=>Me,L:()=>he,$s:()=>zn,r3:()=>en,Sg:()=>Ye,ne:()=>un,p$:()=>se,vZ:()=>gr,ZB:()=>ce,gK:()=>vr,pd:()=>Mn,m9:()=>Tn,z$:()=>it,GJ:()=>Zt,jU:()=>We,ru:()=>Be,d:()=>_t,xb:()=>an,w1:()=>Wt,hl:()=>ct,uI:()=>ze,UG:()=>Ct,Yr:()=>St,b$:()=>Ce,G6:()=>fn,Mn:()=>nn,w9:()=>cn,cI:()=>Ur,UI:()=>Fn,xO:()=>ir,zd:()=>ri,DV:()=>Bt,ug:()=>Pt,dS:()=>Yn,Pz:()=>ni,Dv:()=>xr,Wj:()=>hr,lb:()=>Is,eu:()=>Fe});const U=function(ye,Ie){if(!ye)throw ie(Ie)},ie=function(ye){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ye)},Re=function(ye){const Ie=[];let ge=0;for(let ve=0;ve<ye.length;ve++){let De=ye.charCodeAt(ve);De<128?Ie[ge++]=De:De<2048?(Ie[ge++]=De>>6|192,Ie[ge++]=63&De|128):55296==(64512&De)&&ve+1<ye.length&&56320==(64512&ye.charCodeAt(ve+1))?(De=65536+((1023&De)<<10)+(1023&ye.charCodeAt(++ve)),Ie[ge++]=De>>18|240,Ie[ge++]=De>>12&63|128,Ie[ge++]=De>>6&63|128,Ie[ge++]=63&De|128):(Ie[ge++]=De>>12|224,Ie[ge++]=De>>6&63|128,Ie[ge++]=63&De|128)}return Ie},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,Ie){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let De=0;De<ye.length;De+=3){const rt=ye[De],Tt=De+1<ye.length,on=Tt?ye[De+1]:0,tn=De+2<ye.length,Un=tn?ye[De+2]:0;let ii=(15&on)<<2|Un>>6,Ni=63&Un;tn||(Ni=64,Tt||(ii=64)),ve.push(ge[rt>>2],ge[(3&rt)<<4|on>>4],ge[ii],ge[Ni])}return ve.join("")},encodeString(ye,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(ye):this.encodeByteArray(Re(ye),Ie)},decodeString(ye,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(ye):function(ye){const Ie=[];let ge=0,ve=0;for(;ge<ye.length;){const De=ye[ge++];if(De<128)Ie[ve++]=String.fromCharCode(De);else if(De>191&&De<224){const rt=ye[ge++];Ie[ve++]=String.fromCharCode((31&De)<<6|63&rt)}else if(De>239&&De<365){const tn=((7&De)<<18|(63&ye[ge++])<<12|(63&ye[ge++])<<6|63&ye[ge++])-65536;Ie[ve++]=String.fromCharCode(55296+(tn>>10)),Ie[ve++]=String.fromCharCode(56320+(1023&tn))}else{const rt=ye[ge++],Tt=ye[ge++];Ie[ve++]=String.fromCharCode((15&De)<<12|(63&rt)<<6|63&Tt)}}return Ie.join("")}(this.decodeStringToByteArray(ye,Ie))},decodeStringToByteArray(ye,Ie){this.init_();const ge=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let De=0;De<ye.length;){const rt=ge[ye.charAt(De++)],on=De<ye.length?ge[ye.charAt(De)]:0;++De;const Un=De<ye.length?ge[ye.charAt(De)]:64;++De;const Cn=De<ye.length?ge[ye.charAt(De)]:64;if(++De,null==rt||null==on||null==Un||null==Cn)throw Error();ve.push(rt<<2|on>>4),64!==Un&&(ve.push(on<<4&240|Un>>2),64!==Cn&&ve.push(Un<<6&192|Cn))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}},Me=function(ye){const Ie=Re(ye);return de.encodeByteArray(Ie,!0)},he=function(ye){return Me(ye).replace(/\./g,"")},we=function(ye){try{return de.decodeString(ye,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function se(ye){return ce(void 0,ye)}function ce(ye,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return Ie}for(const ge in Ie)!Ie.hasOwnProperty(ge)||!pe(ge)||(ye[ge]=ce(ye[ge],Ie[ge]));return ye}function pe(ye){return"__proto__"!==ye}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ie,ge)=>{this.resolve=Ie,this.reject=ge})}wrapCallback(Ie){return(ge,ve)=>{ge?this.reject(ge):this.resolve(ve),"function"==typeof Ie&&(this.promise.catch(()=>{}),1===Ie.length?Ie(ge):Ie(ge,ve))}}}function Ye(ye,Ie){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=Ie||"demo-project",De=ye.iat||0,rt=ye.sub||ye.user_id;if(!rt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Tt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:De,exp:De+3600,auth_time:De,sub:rt,user_id:rt,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Tt)),""].join(".")}function it(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ye){return!1}}function We(){return"object"==typeof self&&self.self===self}function Be(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _t(){return it().indexOf("Electron/")>=0}function Wt(){const ye=it();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function nn(){return it().indexOf("MSAppHost/")>=0}function St(){return!1}function fn(){return!Ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ct(){return"object"==typeof indexedDB}function Fe(){return new Promise((ye,Ie)=>{try{let ge=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",De=self.indexedDB.open(ve);De.onsuccess=()=>{De.result.close(),ge||self.indexedDB.deleteDatabase(ve),ye(!0)},De.onupgradeneeded=()=>{ge=!1},De.onerror=()=>{var rt;Ie((null===(rt=De.error)||void 0===rt?void 0:rt.message)||"")}}catch(ge){Ie(ge)}})}function bt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Jt extends Error{constructor(Ie,ge,ve){super(ge),this.code=Ie,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(Ie,ge,ve){this.service=Ie,this.serviceName=ge,this.errors=ve}create(Ie,...ge){const ve=ge[0]||{},De=`${this.service}/${Ie}`,rt=this.errors[Ie],Tt=rt?function(ye,Ie){return ye.replace(Vr,(ge,ve)=>{const De=Ie[ve];return null!=De?String(De):`<${ve}?>`})}(rt,ve):"Error";return new Jt(De,`${this.serviceName}: ${Tt} (${De}).`,ve)}}const Vr=/\{\$([^}]+)}/g;function Ur(ye){return JSON.parse(ye)}function ni(ye){return JSON.stringify(ye)}const gn=function(ye){let Ie={},ge={},ve={},De="";try{const rt=ye.split(".");Ie=Ur(we(rt[0])||""),ge=Ur(we(rt[1])||""),De=rt[2],ve=ge.d||{},delete ge.d}catch(rt){}return{header:Ie,claims:ge,data:ve,signature:De}},cn=function(ye){const ge=gn(ye).claims;return!!ge&&"object"==typeof ge&&ge.hasOwnProperty("iat")},Zt=function(ye){const Ie=gn(ye).claims;return"object"==typeof Ie&&!0===Ie.admin};function en(ye,Ie){return Object.prototype.hasOwnProperty.call(ye,Ie)}function Bt(ye,Ie){if(Object.prototype.hasOwnProperty.call(ye,Ie))return ye[Ie]}function an(ye){for(const Ie in ye)if(Object.prototype.hasOwnProperty.call(ye,Ie))return!1;return!0}function Fn(ye,Ie,ge){const ve={};for(const De in ye)Object.prototype.hasOwnProperty.call(ye,De)&&(ve[De]=Ie.call(ge,ye[De],De,ye));return ve}function gr(ye,Ie){if(ye===Ie)return!0;const ge=Object.keys(ye),ve=Object.keys(Ie);for(const De of ge){if(!ve.includes(De))return!1;const rt=ye[De],Tt=Ie[De];if(_n(rt)&&_n(Tt)){if(!gr(rt,Tt))return!1}else if(rt!==Tt)return!1}for(const De of ve)if(!ge.includes(De))return!1;return!0}function _n(ye){return null!==ye&&"object"==typeof ye}function ir(ye){const Ie=[];for(const[ge,ve]of Object.entries(ye))Array.isArray(ve)?ve.forEach(De=>{Ie.push(encodeURIComponent(ge)+"="+encodeURIComponent(De))}):Ie.push(encodeURIComponent(ge)+"="+encodeURIComponent(ve));return Ie.length?"&"+Ie.join("&"):""}function ri(ye){const Ie={};return ye.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[De,rt]=ve.split("=");Ie[decodeURIComponent(De)]=decodeURIComponent(rt)}}),Ie}function Mn(ye){const Ie=ye.indexOf("?");if(!Ie)return"";const ge=ye.indexOf("#",Ie);return ye.substring(Ie,ge>0?ge:void 0)}class et{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ie,ge){ge||(ge=0);const ve=this.W_;if("string"==typeof Ie)for(let Cn=0;Cn<16;Cn++)ve[Cn]=Ie.charCodeAt(ge)<<24|Ie.charCodeAt(ge+1)<<16|Ie.charCodeAt(ge+2)<<8|Ie.charCodeAt(ge+3),ge+=4;else for(let Cn=0;Cn<16;Cn++)ve[Cn]=Ie[ge]<<24|Ie[ge+1]<<16|Ie[ge+2]<<8|Ie[ge+3],ge+=4;for(let Cn=16;Cn<80;Cn++){const ii=ve[Cn-3]^ve[Cn-8]^ve[Cn-14]^ve[Cn-16];ve[Cn]=4294967295&(ii<<1|ii>>>31)}let Un,Ri,De=this.chain_[0],rt=this.chain_[1],Tt=this.chain_[2],on=this.chain_[3],tn=this.chain_[4];for(let Cn=0;Cn<80;Cn++){Cn<40?Cn<20?(Un=on^rt&(Tt^on),Ri=1518500249):(Un=rt^Tt^on,Ri=1859775393):Cn<60?(Un=rt&Tt|on&(rt|Tt),Ri=2400959708):(Un=rt^Tt^on,Ri=3395469782);const ii=(De<<5|De>>>27)+Un+tn+Ri+ve[Cn]&4294967295;tn=on,on=Tt,Tt=4294967295&(rt<<30|rt>>>2),rt=De,De=ii}this.chain_[0]=this.chain_[0]+De&4294967295,this.chain_[1]=this.chain_[1]+rt&4294967295,this.chain_[2]=this.chain_[2]+Tt&4294967295,this.chain_[3]=this.chain_[3]+on&4294967295,this.chain_[4]=this.chain_[4]+tn&4294967295}update(Ie,ge){if(null==Ie)return;void 0===ge&&(ge=Ie.length);const ve=ge-this.blockSize;let De=0;const rt=this.buf_;let Tt=this.inbuf_;for(;De<ge;){if(0===Tt)for(;De<=ve;)this.compress_(Ie,De),De+=this.blockSize;if("string"==typeof Ie){for(;De<ge;)if(rt[Tt]=Ie.charCodeAt(De),++Tt,++De,Tt===this.blockSize){this.compress_(rt),Tt=0;break}}else for(;De<ge;)if(rt[Tt]=Ie[De],++Tt,++De,Tt===this.blockSize){this.compress_(rt),Tt=0;break}}this.inbuf_=Tt,this.total_+=ge}digest(){const Ie=[];let ge=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let De=this.blockSize-1;De>=56;De--)this.buf_[De]=255&ge,ge/=256;this.compress_(this.buf_);let ve=0;for(let De=0;De<5;De++)for(let rt=24;rt>=0;rt-=8)Ie[ve]=this.chain_[De]>>rt&255,++ve;return Ie}}function un(ye,Ie){const ge=new xt(ye,Ie);return ge.subscribe.bind(ge)}class xt{constructor(Ie,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{Ie(this)}).catch(ve=>{this.error(ve)})}next(Ie){this.forEachObserver(ge=>{ge.next(Ie)})}error(Ie){this.forEachObserver(ge=>{ge.error(Ie)}),this.close(Ie)}complete(){this.forEachObserver(Ie=>{Ie.complete()}),this.close()}subscribe(Ie,ge,ve){let De;if(void 0===Ie&&void 0===ge&&void 0===ve)throw new Error("Missing Observer.");De=function(ye,Ie){if("object"!=typeof ye||null===ye)return!1;for(const ge of["next","error","complete"])if(ge in ye&&"function"==typeof ye[ge])return!0;return!1}(Ie)?Ie:{next:Ie,error:ge,complete:ve},void 0===De.next&&(De.next=xn),void 0===De.error&&(De.error=xn),void 0===De.complete&&(De.complete=xn);const rt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?De.error(this.finalError):De.complete()}catch(Tt){}}),this.observers.push(De),rt}unsubscribeOne(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ie){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,Ie)}sendOne(Ie,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ie])try{ge(this.observers[Ie])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(Ie){this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xn(){}const xr=function(ye,Ie,ge,ve){let De;if(ve<Ie?De="at least "+Ie:ve>ge&&(De=0===ge?"none":"no more than "+ge),De)throw new Error(ye+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+De+".")};function vr(ye,Ie){return`${ye} failed: ${Ie} argument `}function hr(ye,Ie,ge,ve){if((!ve||ge)&&"function"!=typeof ge)throw new Error(vr(ye,Ie)+"must be a valid function.")}function Is(ye,Ie,ge,ve){if((!ve||ge)&&("object"!=typeof ge||null===ge))throw new Error(vr(ye,Ie)+"must be a valid context object.")}const Yn=function(ye){const Ie=[];let ge=0;for(let ve=0;ve<ye.length;ve++){let De=ye.charCodeAt(ve);if(De>=55296&&De<=56319){const rt=De-55296;ve++,U(ve<ye.length,"Surrogate pair missing trail surrogate."),De=65536+(rt<<10)+(ye.charCodeAt(ve)-56320)}De<128?Ie[ge++]=De:De<2048?(Ie[ge++]=De>>6|192,Ie[ge++]=63&De|128):De<65536?(Ie[ge++]=De>>12|224,Ie[ge++]=De>>6&63|128,Ie[ge++]=63&De|128):(Ie[ge++]=De>>18|240,Ie[ge++]=De>>12&63|128,Ie[ge++]=De>>6&63|128,Ie[ge++]=63&De|128)}return Ie},Pt=function(ye){let Ie=0;for(let ge=0;ge<ye.length;ge++){const ve=ye.charCodeAt(ge);ve<128?Ie++:ve<2048?Ie+=2:ve>=55296&&ve<=56319?(Ie+=4,ge++):Ie+=3}return Ie};function zn(ye,Ie=1e3,ge=2){const ve=Ie*Math.pow(ge,ye),De=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+De)}function Tn(ye){return ye&&ye._delegate?ye._delegate:ye}},2329:(Ot,Ge,z)=>{"use strict";z.d(Ge,{Mq:()=>T.getApp,C6:()=>T.getApps});var T=z(8026);(0,T.registerVersion)("firebase","9.9.1","app")},7841:(Ot,Ge,z)=>{"use strict";z.d(Ge,{Z:()=>T.Z});var T=z(3394);T.Z.registerVersion("firebase","9.9.1","app-compat")},1530:(Ot,Ge,z)=>{"use strict";z.r(Ge);var T=z(8239),U=z(3394),ie=z(3854),Re=z(8026);function he(E,g){var m={};for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&g.indexOf(b)<0&&(m[b]=E[b]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(b=Object.getOwnPropertySymbols(E);j<b.length;j++)g.indexOf(b[j])<0&&Object.prototype.propertyIsEnumerable.call(E,b[j])&&(m[b[j]]=E[b[j]])}return m}var It=z(5422),ur=z(3910);const Zt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},en=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Bt=new ie.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fn=new It.Yd("@firebase/auth");function gr(E,...g){Fn.logLevel<=It.in.ERROR&&Fn.error(`Auth (${Re.SDK_VERSION}): ${E}`,...g)}function _n(E,...g){throw Mn(E,...g)}function Nn(E,...g){return Mn(E,...g)}function ir(E,g,m){const b=Object.assign(Object.assign({},en()),{[g]:m});return new ie.LL("auth","Firebase",b).create(g,{appName:E.name})}function ri(E,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&_n(E,"argument-error"),ir(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mn(E,...g){if("string"!=typeof E){const m=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(m,...b)}return Bt.create(E,...g)}function et(E,g,...m){if(!E)throw Mn(g,...m)}function un(E){const g="INTERNAL ASSERTION FAILED: "+E;throw gr(g),new Error(g)}function xt(E,g){E||un(g)}const jn=new Map;function or(E){xt(E instanceof Function,"Expected a class definition");let g=jn.get(E);return g?(xt(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,jn.set(E,g),g)}function vr(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function br(){return"http:"===hr()||"https:"===hr()}function hr(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Pt{constructor(g,m){this.shortDelay=g,this.longDelay=m,xt(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,ie.uI)()||(0,ie.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(br()||(0,ie.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function rn(E,g){xt(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class xi{static initialize(g,m,b){this.fetchImpl=g,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ds={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fi=new Pt(3e4,6e4);function Dt(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function zn(E,g,m,b){return qr.apply(this,arguments)}function qr(){return(qr=(0,T.Z)(function*(E,g,m,b,j={}){return Dn(E,j,(0,T.Z)(function*(){let Z={},_e={};b&&("GET"===g?_e=b:Z={body:JSON.stringify(b)});const je=(0,ie.xO)(Object.assign({key:E.config.apiKey},_e)).slice(1),wt=yield E._getAdditionalHeaders();return wt["Content-Type"]="application/json",E.languageCode&&(wt["X-Firebase-Locale"]=E.languageCode),xi.fetch()(ge(E,E.config.apiHost,m,je),Object.assign({method:g,headers:wt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function Dn(E,g,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,T.Z)(function*(E,g,m){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},Ds),g);try{const j=new ve(E),Z=yield Promise.race([m(),j.promise]);j.clearNetworkTimeout();const _e=yield Z.json();if("needConfirmation"in _e)throw De(E,"account-exists-with-different-credential",_e);if(Z.ok&&!("errorMessage"in _e))return _e;{const je=Z.ok?_e.errorMessage:_e.error.message,[wt,ft]=je.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wt)throw De(E,"credential-already-in-use",_e);if("EMAIL_EXISTS"===wt)throw De(E,"email-already-in-use",_e);if("USER_DISABLED"===wt)throw De(E,"user-disabled",_e);const Kt=b[wt]||wt.toLowerCase().replace(/[_\s]+/g,"-");if(ft)throw ir(E,Kt,ft);_n(E,Kt)}}catch(j){if(j instanceof ie.ZR)throw j;_n(E,"network-request-failed")}})).apply(this,arguments)}function ye(E,g,m,b){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,T.Z)(function*(E,g,m,b,j={}){const Z=yield zn(E,g,m,b,j);return"mfaPendingCredential"in Z&&_n(E,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function ge(E,g,m,b){const j=`${g}${m}?${b}`;return E.config.emulator?rn(E.config,j):`${E.config.apiScheme}://${j}`}class ve{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(Nn(this.auth,"network-request-failed")),fi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function De(E,g,m){const b={appName:E.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const j=Nn(E,g,b);return j.customData._tokenResponse=m,j}function Tt(){return(Tt=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function on(E,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Un(E,g){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Cn(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function ks(){return(ks=(0,T.Z)(function*(E,g=!1){const m=(0,ie.m9)(E),b=yield m.getIdToken(g),j=ps(b);et(j&&j.exp&&j.auth_time&&j.iat,m.auth,"internal-error");const Z="object"==typeof j.firebase?j.firebase:void 0,_e=null==Z?void 0:Z.sign_in_provider;return{claims:j,token:b,authTime:Cn(is(j.auth_time)),issuedAtTime:Cn(is(j.iat)),expirationTime:Cn(is(j.exp)),signInProvider:_e||null,signInSecondFactor:(null==Z?void 0:Z.sign_in_second_factor)||null}})).apply(this,arguments)}function is(E){return 1e3*Number(E)}function ps(E){var g;const[m,b,j]=E.split(".");if(void 0===m||void 0===b||void 0===j)return gr("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,ie.tV)(b);return Z?JSON.parse(Z):(gr("Failed to decode base64 JWT payload"),null)}catch(Z){return gr("Caught error parsing JWT payload as JSON",null===(g=Z)||void 0===g?void 0:g.toString()),null}}function Qn(E,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,T.Z)(function*(E,g,m=!1){if(m)return g;try{return yield g}catch(b){throw b instanceof ie.ZR&&Ir(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function Ir({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class sn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const j=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,j)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,T.Z)(function*(){yield m.iteration()}),b)}iteration(){var g=this;return(0,T.Z)(function*(){var m;try{yield g.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(m=b)||void 0===m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class pi{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cn(this.lastLoginAt),this.creationTime=Cn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(E){return At.apply(this,arguments)}function At(){return(At=(0,T.Z)(function*(E){var g;const m=E.auth,b=yield E.getIdToken(),j=yield Qn(E,Un(m,{idToken:b}));et(null==j?void 0:j.users.length,m,"internal-error");const Z=j.users[0];E._notifyReloadListener(Z);const _e=(null===(g=Z.providerUserInfo)||void 0===g?void 0:g.length)?mr(Z.providerUserInfo):[],je=Hr(E.providerData,_e),Kt=!!E.isAnonymous&&!(E.email&&Z.passwordHash||(null==je?void 0:je.length)),Qt={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:je,metadata:new pi(Z.createdAt,Z.lastLoginAt),isAnonymous:Kt};Object.assign(E,Qt)})).apply(this,arguments)}function Bn(){return(Bn=(0,T.Z)(function*(E){const g=(0,ie.m9)(E);yield Rr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Hr(E,g){return[...E.filter(b=>!g.some(j=>j.providerId===b.providerId)),...g]}function mr(E){return E.map(g=>{var{providerId:m}=g,b=he(g,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Nr(){return(Nr=(0,T.Z)(function*(E,g){const m=yield Dn(E,{},(0,T.Z)(function*(){const b=(0,ie.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:j,apiKey:Z}=E.config,_e=ge(E,j,"/v1/token",`key=${Z}`),je=yield E._getAdditionalHeaders();return je["Content-Type"]="application/x-www-form-urlencoded",xi.fetch()(_e,{method:"POST",headers:je,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Jn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){et(g.idToken,"internal-error"),et(void 0!==g.idToken,"internal-error"),et(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(E){const g=ps(E);return et(g,"internal-error"),et(void 0!==g.exp,"internal-error"),et(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var b=this;return(0,T.Z)(function*(){return et(!b.accessToken||b.refreshToken,g,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var b=this;return(0,T.Z)(function*(){const{accessToken:j,refreshToken:Z,expiresIn:_e}=yield function(E,g){return Nr.apply(this,arguments)}(g,m);b.updateTokensAndExpiration(j,Z,Number(_e))})()}updateTokensAndExpiration(g,m,b){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,m){const{refreshToken:b,accessToken:j,expirationTime:Z}=m,_e=new Jn;return b&&(et("string"==typeof b,"internal-error",{appName:g}),_e.refreshToken=b),j&&(et("string"==typeof j,"internal-error",{appName:g}),_e.accessToken=j),Z&&(et("number"==typeof Z,"internal-error",{appName:g}),_e.expirationTime=Z),_e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Jn,this.toJSON())}_performRefresh(){return un("not implemented")}}function si(E,g){et("string"==typeof E||void 0===E,"internal-error",{appName:g})}class Mi{constructor(g){var{uid:m,auth:b,stsTokenManager:j}=g,Z=he(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=j,this.accessToken=j.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new pi(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,T.Z)(function*(){const b=yield Qn(m,m.stsTokenManager.getToken(m.auth,g));return et(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(g){return function(E){return ks.apply(this,arguments)}(this,g)}reload(){return function(E){return Bn.apply(this,arguments)}(this)}_assign(g){this!==g&&(et(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Mi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var b=this;return(0,T.Z)(function*(){let j=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),j=!0),m&&(yield Rr(b)),yield b.auth._persistUserIfCurrent(b),j&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,T.Z)(function*(){const m=yield g.getIdToken();return yield Qn(g,function(E,g){return Tt.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var b,j,Z,_e,je,wt,ft,Kt;const Qt=null!==(b=m.displayName)&&void 0!==b?b:void 0,pr=null!==(j=m.email)&&void 0!==j?j:void 0,Ks=null!==(Z=m.phoneNumber)&&void 0!==Z?Z:void 0,kl=null!==(_e=m.photoURL)&&void 0!==_e?_e:void 0,Kc=null!==(je=m.tenantId)&&void 0!==je?je:void 0,Ef=null!==(wt=m._redirectEventId)&&void 0!==wt?wt:void 0,Md=null!==(ft=m.createdAt)&&void 0!==ft?ft:void 0,bh=null!==(Kt=m.lastLoginAt)&&void 0!==Kt?Kt:void 0,{uid:pc,emailVerified:Pd,isAnonymous:Ih,providerData:Zc,stsTokenManager:Dh}=m;et(pc&&Dh,g,"internal-error");const Yc=Jn.fromJSON(this.name,Dh);et("string"==typeof pc,g,"internal-error"),si(Qt,g.name),si(pr,g.name),et("boolean"==typeof Pd,g,"internal-error"),et("boolean"==typeof Ih,g,"internal-error"),si(Ks,g.name),si(kl,g.name),si(Kc,g.name),si(Ef,g.name),si(Md,g.name),si(bh,g.name);const aa=new Mi({uid:pc,auth:g,email:pr,emailVerified:Pd,displayName:Qt,isAnonymous:Ih,photoURL:kl,phoneNumber:Ks,tenantId:Kc,stsTokenManager:Yc,createdAt:Md,lastLoginAt:bh});return Zc&&Array.isArray(Zc)&&(aa.providerData=Zc.map(Qc=>Object.assign({},Qc))),Ef&&(aa._redirectEventId=Ef),aa}static _fromIdTokenResponse(g,m,b=!1){return(0,T.Z)(function*(){const j=new Jn;j.updateFromServerResponse(m);const Z=new Mi({uid:m.localId,auth:g,stsTokenManager:j,isAnonymous:b});return yield Rr(Z),Z})()}}const Dr=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(m,b){var j=this;return(0,T.Z)(function*(){j.storage[m]=b})()}_get(m){var b=this;return(0,T.Z)(function*(){const j=b.storage[m];return void 0===j?null:j})()}_remove(m){var b=this;return(0,T.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return E.type="NONE",E})();function Ei(E,g,m){return`firebase:${E}:${g}:${m}`}class Or{constructor(g,m,b){this.persistence=g,this.auth=m,this.userKey=b;const{config:j,name:Z}=this.auth;this.fullUserKey=Ei(this.userKey,j.apiKey,Z),this.fullPersistenceKey=Ei("persistence",j.apiKey,Z),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,T.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?Mi._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,T.Z)(function*(){if(m.persistence===g)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,b="authUser"){return(0,T.Z)(function*(){if(!m.length)return new Or(or(Dr),g,b);const j=(yield Promise.all(m.map(function(){var ft=(0,T.Z)(function*(Kt){if(yield Kt._isAvailable())return Kt});return function(Kt){return ft.apply(this,arguments)}}()))).filter(ft=>ft);let Z=j[0]||or(Dr);const _e=Ei(b,g.config.apiKey,g.name);let je=null;for(const ft of m)try{const Kt=yield ft._get(_e);if(Kt){const Qt=Mi._fromJSON(g,Kt);ft!==Z&&(je=Qt),Z=ft;break}}catch(Kt){}const wt=j.filter(ft=>ft._shouldAllowMigration);return Z._shouldAllowMigration&&wt.length?(Z=wt[0],je&&(yield Z._set(_e,je.toJSON())),yield Promise.all(m.map(function(){var ft=(0,T.Z)(function*(Kt){if(Kt!==Z)try{yield Kt._remove(_e)}catch(Qt){}});return function(Kt){return ft.apply(this,arguments)}}())),new Or(Z,g,b)):new Or(Z,g,b)})()}}function gs(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ki(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Pi(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Do(g))return"Blackberry";if(To(g))return"Webos";if(Ts(g))return"Safari";if((g.includes("chrome/")||Oi(g))&&!g.includes("edge/"))return"Chrome";if(Sn(g))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Pi(E=(0,ie.z$)()){return/firefox\//i.test(E)}function Ts(E=(0,ie.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Oi(E=(0,ie.z$)()){return/crios\//i.test(E)}function ki(E=(0,ie.z$)()){return/iemobile/i.test(E)}function Sn(E=(0,ie.z$)()){return/android/i.test(E)}function Do(E=(0,ie.z$)()){return/blackberry/i.test(E)}function To(E=(0,ie.z$)()){return/webos/i.test(E)}function wi(E=(0,ie.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function oi(E=(0,ie.z$)()){return wi(E)||Sn(E)||To(E)||Do(E)||/windows phone/i.test(E)||ki(E)}function Ys(E,g=[]){let m;switch(E){case"Browser":m=gs((0,ie.z$)());break;case"Worker":m=`${gs((0,ie.z$)())}-${E}`;break;default:m=E}const b=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${Re.SDK_VERSION}/${b}`}class ms{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const b=Z=>new Promise((_e,je)=>{try{_e(g(Z))}catch(wt){je(wt)}});b.onAbort=m,this.queue.push(b);const j=this.queue.length-1;return()=>{this.queue[j]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,T.Z)(function*(){var b;if(m.auth.currentUser===g)return;const j=[];try{for(const Z of m.queue)yield Z(g),Z.onAbort&&j.push(Z.onAbort)}catch(Z){j.reverse();for(const _e of j)try{_e()}catch(je){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=Z)||void 0===b?void 0:b.message})}})()}}class Kr{constructor(g,m,b){this.app=g,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new ms(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,m){var b=this;return m&&(this._popupRedirectResolver=or(m)),this._initializationPromise=this.queue((0,T.Z)(function*(){var j,Z;if(!b._deleted&&(b.persistenceManager=yield Or.create(b,g),!b._deleted)){if(null===(j=b._popupRedirectResolver)||void 0===j?void 0:j._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(_e){}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(Z=b.currentUser)||void 0===Z?void 0:Z.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,T.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,T.Z)(function*(){var b;const j=yield m.assertedPersistence.getCurrentUser();let Z=j,_e=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const je=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,wt=null==Z?void 0:Z._redirectEventId,ft=yield m.tryRedirectSignIn(g);(!je||je===wt)&&(null==ft?void 0:ft.user)&&(Z=ft.user,_e=!0)}if(!Z)return m.directlySetCurrentUser(null);if(!Z._redirectEventId){if(_e)try{yield m.beforeStateQueue.runMiddleware(Z)}catch(je){Z=j,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(je))}return Z?m.reloadAndSetCurrentUserOrClear(Z):m.directlySetCurrentUser(null)}return et(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===Z._redirectEventId?m.directlySetCurrentUser(Z):m.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(g){var m=this;return(0,T.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(j){yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,T.Z)(function*(){var b;try{yield Rr(g)}catch(j){if("auth/network-request-failed"!==(null===(b=j)||void 0===b?void 0:b.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,T.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,T.Z)(function*(){const b=g?(0,ie.m9)(g):null;return b&&et(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(g,m=!1){var b=this;return(0,T.Z)(function*(){if(!b._deleted)return g&&et(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,T.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,T.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,T.Z)(function*(){yield m.assertedPersistence.setPersistence(or(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new ie.LL("auth","Firebase",g())}onAuthStateChanged(g,m,b){return this.registerStateListener(this.authStateSubscription,g,m,b)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,b){return this.registerStateListener(this.idTokenSubscription,g,m,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var b=this;return(0,T.Z)(function*(){const j=yield b.getOrInitRedirectPersistenceManager(m);return null===g?j.removeCurrentUser():j.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,T.Z)(function*(){if(!m.redirectPersistenceManager){const b=g&&or(g)||m._popupRedirectResolver;et(b,m,"argument-error"),m.redirectPersistenceManager=yield Or.create(m,[or(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,T.Z)(function*(){var b,j;return m._isInitialized&&(yield m.queue((0,T.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===g?m._currentUser:(null===(j=m.redirectUser)||void 0===j?void 0:j._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,T.Z)(function*(){if(g===m.currentUser)return m.queue((0,T.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,b,j){if(this._deleted)return()=>{};const Z="function"==typeof m?m:m.next.bind(m),_e=this._isInitialized?Promise.resolve():this._initializationPromise;return et(_e,this,"internal-error"),_e.then(()=>Z(this.currentUser)),"function"==typeof m?g.addObserver(m,b,j):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,T.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ys(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,T.Z)(function*(){var m;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const j=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return j&&(b["X-Firebase-Client"]=j),b})()}}function Xn(E){return(0,ie.m9)(E)}class Qs{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,ie.ne)(m=>this.observer=m)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gr(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function Ao(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class Te{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return un("not implemented")}_getIdTokenResponse(g){return un("not implemented")}_linkToIdToken(g,m){return un("not implemented")}_getReauthenticationResolver(g){return un("not implemented")}}function Ve(E,g){return tt.apply(this,arguments)}function tt(){return(tt=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:resetPassword",Dt(E,g))})).apply(this,arguments)}function Et(E,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function re(E,g){return Er.apply(this,arguments)}function Er(){return(Er=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:update",Dt(E,g))})).apply(this,arguments)}function ai(){return(ai=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signInWithPassword",Dt(E,g))})).apply(this,arguments)}function os(E,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:sendOobCode",Dt(E,g))})).apply(this,arguments)}function _r(E,g){return as.apply(this,arguments)}function as(){return(as=(0,T.Z)(function*(E,g){return os(E,g)})).apply(this,arguments)}function xo(E,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,T.Z)(function*(E,g){return os(E,g)})).apply(this,arguments)}function Ro(E,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,T.Z)(function*(E,g){return os(E,g)})).apply(this,arguments)}function hl(E,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,T.Z)(function*(E,g){return os(E,g)})).apply(this,arguments)}function us(){return(us=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signInWithEmailLink",Dt(E,g))})).apply(this,arguments)}function Zo(){return(Zo=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signInWithEmailLink",Dt(E,g))})).apply(this,arguments)}class Fs extends Te{constructor(g,m,b,j=null){super("password",b),this._email=g,this._password=m,this._tenantId=j}static _fromEmailAndPassword(g,m){return new Fs(g,m,"password")}static _fromEmailAndCode(g,m,b=null){return new Fs(g,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,T.Z)(function*(){switch(m.signInMethod){case"password":return function(E,g){return ai.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(E,g){return us.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:_n(g,"internal-error")}})()}_linkToIdToken(g,m){var b=this;return(0,T.Z)(function*(){switch(b.signInMethod){case"password":return Et(g,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(E,g){return Zo.apply(this,arguments)}(g,{idToken:m,email:b._email,oobCode:b._password});default:_n(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ls(E,g){return ys.apply(this,arguments)}function ys(){return(ys=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signInWithIdp",Dt(E,g))})).apply(this,arguments)}class Zr extends Te{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Zr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):_n("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:j}=m,Z=he(m,["providerId","signInMethod"]);if(!b||!j)return null;const _e=new Zr(b,j);return _e.idToken=Z.idToken||void 0,_e.accessToken=Z.accessToken||void 0,_e.secret=Z.secret,_e.nonce=Z.nonce,_e.pendingToken=Z.pendingToken||null,_e}_getIdTokenResponse(g){return Ls(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,Ls(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ls(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,ie.xO)(m)}return g}}function co(E,g){return qi.apply(this,arguments)}function qi(){return(qi=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:sendVerificationCode",Dt(E,g))})).apply(this,arguments)}function hi(){return(hi=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signInWithPhoneNumber",Dt(E,g))})).apply(this,arguments)}function Vs(){return(Vs=(0,T.Z)(function*(E,g){const m=yield ye(E,"POST","/v1/accounts:signInWithPhoneNumber",Dt(E,g));if(m.temporaryProof)throw De(E,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Yo={USER_NOT_FOUND:"user-not-found"};function Us(){return(Us=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signInWithPhoneNumber",Dt(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Yo)})).apply(this,arguments)}class Ss extends Te{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Ss({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Ss({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function(E,g){return hi.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function(E,g){return Vs.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(E,g){return Us.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:b,verificationCode:j}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:b,code:j}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:b,phoneNumber:j,temporaryProof:Z}=g;return b||m||j||Z?new Ss({verificationId:m,verificationCode:b,phoneNumber:j,temporaryProof:Z}):null}}class B{constructor(g){var m,b,j,Z,_e,je;const wt=(0,ie.zd)((0,ie.pd)(g)),ft=null!==(m=wt.apiKey)&&void 0!==m?m:null,Kt=null!==(b=wt.oobCode)&&void 0!==b?b:null,Qt=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(j=wt.mode)&&void 0!==j?j:null);et(ft&&Kt&&Qt,"argument-error"),this.apiKey=ft,this.operation=Qt,this.code=Kt,this.continueUrl=null!==(Z=wt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(_e=wt.languageCode)&&void 0!==_e?_e:null,this.tenantId=null!==(je=wt.tenantId)&&void 0!==je?je:null}static parseLink(g){const m=function(E){const g=(0,ie.zd)((0,ie.pd)(E)).link,m=g?(0,ie.zd)((0,ie.pd)(g)).deep_link_id:null,b=(0,ie.zd)((0,ie.pd)(E)).deep_link_id;return(b?(0,ie.zd)((0,ie.pd)(b)).link:null)||b||m||g||E}(g);try{return new B(m)}catch(b){return null}}}let me=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(m,b){return Fs._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const j=B.parseLink(b);return et(j,"argument-error"),Fs._fromEmailAndCode(m,j.code,j.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class qe{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Je extends qe{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class F extends Je{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return et("providerId"in m&&"signInMethod"in m,"argument-error"),Zr._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return et(g.idToken||g.accessToken,"argument-error"),Zr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return F.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return F.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:j,pendingToken:Z,nonce:_e,providerId:je}=g;if(!b&&!j&&!m&&!Z||!je)return null;try{return new F(je)._credential({idToken:m,accessToken:b,nonce:_e,pendingToken:Z})}catch(wt){return null}}}let O=(()=>{class E extends Je{constructor(){super("facebook.com")}static credential(m){return Zr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),R=(()=>{class E extends Je{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Zr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:j}=m;if(!b&&!j)return null;try{return E.credential(b,j)}catch(Z){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Y=(()=>{class E extends Je{constructor(){super("github.com")}static credential(m){return Zr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class yt extends Te{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Ls(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,Ls(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ls(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:j,pendingToken:Z}=m;return b&&j&&Z&&b===j?new yt(b,Z):null}static _create(g,m){return new yt(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class er extends qe{constructor(g){et(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return er.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return er.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=yt.fromJSON(g);return et(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:b}=g;if(!m||!b)return null;try{return yt._create(b,m)}catch(j){return null}}}let Li=(()=>{class E extends Je{constructor(){super("twitter.com")}static credential(m,b){return Zr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:j}=m;if(!b||!j)return null;try{return E.credential(b,j)}catch(Z){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Yr(E,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signUp",Dt(E,g))})).apply(this,arguments)}class cr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,b,j=!1){return(0,T.Z)(function*(){const Z=yield Mi._fromIdTokenResponse(g,b,j),_e=Ht(b);return new cr({user:Z,providerId:_e,_tokenResponse:b,operationType:m})})()}static _forOperation(g,m,b){return(0,T.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const j=Ht(b);return new cr({user:g,providerId:j,_tokenResponse:b,operationType:m})})()}}function Ht(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Jo(){return(Jo=(0,T.Z)(function*(E){var g;const m=Xn(E);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new cr({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield Yr(m,{returnSecureToken:!0}),j=yield cr._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(j.user),j})).apply(this,arguments)}class Ia extends ie.ZR{constructor(g,m,b,j){var Z;super(m.code,m.message),this.operationType=b,this.user=j,Object.setPrototypeOf(this,Ia.prototype),this.customData={appName:g.name,tenantId:null!==(Z=g.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,m,b,j){return new Ia(g,m,b,j)}}function Da(E,g,m,b){return("reauthenticate"===g?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?Ia._fromErrorAndOperation(E,Z,g,b):Z})}function uu(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function lu(){return(lu=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E);yield vs(!0,m,g);const{providerUserInfo:b}=yield on(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),j=uu(b||[]);return m.providerData=m.providerData.filter(Z=>j.has(Z.providerId)),j.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function dt(E,g){return $n.apply(this,arguments)}function $n(){return($n=(0,T.Z)(function*(E,g,m=!1){const b=yield Qn(E,g._linkToIdToken(E.auth,yield E.getIdToken()),m);return cr._forOperation(E,"link",b)})).apply(this,arguments)}function vs(E,g,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,T.Z)(function*(E,g,m){yield Rr(g);const j=!1===E?"provider-already-linked":"no-such-provider";et(uu(g.providerData).has(m)===E,g.auth,j)})).apply(this,arguments)}function Vu(E,g){return la.apply(this,arguments)}function la(){return(la=(0,T.Z)(function*(E,g,m=!1){var b;const{auth:j}=E,Z="reauthenticate";try{const _e=yield Qn(E,Da(j,Z,g,E),m);et(_e.idToken,j,"internal-error");const je=ps(_e.idToken);et(je,j,"internal-error");const{sub:wt}=je;return et(E.uid===wt,j,"user-mismatch"),cr._forOperation(E,Z,_e)}catch(_e){throw"auth/user-not-found"===(null===(b=_e)||void 0===b?void 0:b.code)&&_n(j,"user-mismatch"),_e}})).apply(this,arguments)}function Es(E,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,T.Z)(function*(E,g,m=!1){const b="signIn",j=yield Da(E,b,g),Z=yield cr._fromIdTokenResponse(E,b,j);return m||(yield E._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function Qr(E,g){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,T.Z)(function*(E,g){return Es(Xn(E),g)})).apply(this,arguments)}function Kl(E,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E);return yield vs(!1,m,g.providerId),dt(m,g)})).apply(this,arguments)}function No(E,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,T.Z)(function*(E,g){return Vu((0,ie.m9)(E),g)})).apply(this,arguments)}function Bs(E,g){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,T.Z)(function*(E,g){return ye(E,"POST","/v1/accounts:signInWithCustomToken",Dt(E,g))})).apply(this,arguments)}function Zi(){return(Zi=(0,T.Z)(function*(E,g){const m=Xn(E),b=yield Bs(m,{token:g,returnSecureToken:!0}),j=yield cr._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(j.user),j})).apply(this,arguments)}class Bu{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Wr._fromServerResponse(g,m):_n(g,"internal-error")}}class Wr extends Bu{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Wr(m)}}function cu(E,g,m){var b;et((null===(b=m.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),et(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(et(m.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(et(m.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function js(){return(js=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j={requestType:"PASSWORD_RESET",email:g};m&&cu(b,j,m),yield xo(b,j)})).apply(this,arguments)}function fl(){return(fl=(0,T.Z)(function*(E,g,m){yield Ve((0,ie.m9)(E),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Mo(){return(Mo=(0,T.Z)(function*(E,g){yield re((0,ie.m9)(E),{oobCode:g})})).apply(this,arguments)}function Xo(E,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E),b=yield Ve(m,{oobCode:g}),j=b.requestType;switch(et(j,m,"internal-error"),j){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":et(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":et(b.mfaInfo,m,"internal-error");default:et(b.email,m,"internal-error")}let Z=null;return b.mfaInfo&&(Z=Bu._fromServerResponse(Xn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:Z},operation:j}})).apply(this,arguments)}function $s(){return($s=(0,T.Z)(function*(E,g){const{data:m}=yield Xo((0,ie.m9)(E),g);return m.email})).apply(this,arguments)}function du(){return(du=(0,T.Z)(function*(E,g,m){const b=Xn(E),j=yield Yr(b,{returnSecureToken:!0,email:g,password:m}),Z=yield cr._fromIdTokenResponse(b,"signIn",j);return yield b._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function za(){return(za=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j={requestType:"EMAIL_SIGNIN",email:g};et(m.handleCodeInApp,b,"argument-error"),m&&cu(b,j,m),yield Ro(b,j)})).apply(this,arguments)}function Mr(){return(Mr=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j=me.credentialWithLink(g,m||vr());return et(j._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Qr(b,j)})).apply(this,arguments)}function $u(E,g){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:createAuthUri",Dt(E,g))})).apply(this,arguments)}function ca(){return(ca=(0,T.Z)(function*(E,g){const b={identifier:g,continueUri:br()?vr():"http://localhost"},{signinMethods:j}=yield $u((0,ie.m9)(E),b);return j||[]})).apply(this,arguments)}function Qi(){return(Qi=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E),j={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&cu(m.auth,j,g);const{email:Z}=yield _r(m.auth,j);Z!==E.email&&(yield E.reload())})).apply(this,arguments)}function Aa(){return(Aa=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};m&&cu(b.auth,Z,m);const{email:_e}=yield hl(b.auth,Z);_e!==E.email&&(yield E.reload())})).apply(this,arguments)}function go(E,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,T.Z)(function*(E,g){return zn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Gu(){return(Gu=(0,T.Z)(function*(E,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const b=(0,ie.m9)(E),Z={idToken:yield b.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},_e=yield Qn(b,go(b.auth,Z));b.displayName=_e.displayName||null,b.photoURL=_e.photoUrl||null;const je=b.providerData.find(({providerId:wt})=>"password"===wt);je&&(je.displayName=b.displayName,je.photoURL=b.photoURL),yield b._updateTokensIfNecessary(_e)})).apply(this,arguments)}function Ji(E,g,m){return _l.apply(this,arguments)}function _l(){return(_l=(0,T.Z)(function*(E,g,m){const{auth:b}=E,Z={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(Z.email=g),m&&(Z.password=m);const _e=yield Qn(E,Et(b,Z));yield E._updateTokensIfNecessary(_e,!0)})).apply(this,arguments)}class mo{constructor(g,m,b={}){this.isNewUser=g,this.providerId=m,this.profile=b}}class Hs extends mo{constructor(g,m,b,j){super(g,m,b),this.username=j}}class Xi extends mo{constructor(g,m){super(g,"facebook.com",m)}}class Pc extends Hs{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Gs extends mo{constructor(g,m){super(g,"google.com",m)}}class ko extends Hs{constructor(g,m,b){super(g,"twitter.com",m,b)}}function Oc(E){const{user:g,_tokenResponse:m}=E;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(E){var g,m;if(!E)return null;const{providerId:b}=E,j=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},Z=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const _e=null===(m=null===(g=ps(E.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(_e)return new mo(Z,"anonymous"!==_e&&"custom"!==_e?_e:null)}if(!b)return null;switch(b){case"facebook.com":return new Xi(Z,j);case"github.com":return new Pc(Z,j);case"google.com":return new Gs(Z,j);case"twitter.com":return new ko(Z,j,E.screenName||null);case"custom":case"anonymous":return new mo(Z,null);default:return new mo(Z,b,j)}}(m)}class li{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new li("enroll",g)}static _fromMfaPendingCredential(g){return new li("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,b;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return li._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(b=g.multiFactorSession)||void 0===b?void 0:b.idToken)return li._fromIdtoken(g.multiFactorSession.idToken)}return null}}class da{constructor(g,m,b){this.session=g,this.hints=m,this.signInResolver=b}static _fromError(g,m){const b=Xn(g),j=m.customData._serverResponse,Z=(j.mfaInfo||[]).map(je=>Bu._fromServerResponse(b,je));et(j.mfaPendingCredential,b,"internal-error");const _e=li._fromMfaPendingCredential(j.mfaPendingCredential);return new da(_e,Z,function(){var je=(0,T.Z)(function*(wt){const ft=yield wt._process(b,_e);delete j.mfaInfo,delete j.mfaPendingCredential;const Kt=Object.assign(Object.assign({},j),{idToken:ft.idToken,refreshToken:ft.refreshToken});switch(m.operationType){case"signIn":const Qt=yield cr._fromIdTokenResponse(b,m.operationType,Kt);return yield b._updateCurrentUser(Qt.user),Qt;case"reauthenticate":return et(m.user,b,"internal-error"),cr._forOperation(m.user,m.operationType,Kt);default:_n(b,"internal-error")}});return function(wt){return je.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,T.Z)(function*(){return m.signInResolver(g)})()}}function Wu(E,g){return zn(E,"POST","/v2/accounts/mfaEnrollment:start",Dt(E,g))}class kr{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>Bu._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new kr(g)}getSession(){var g=this;return(0,T.Z)(function*(){return li._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var b=this;return(0,T.Z)(function*(){const j=g,Z=yield b.getSession(),_e=yield Qn(b.user,j._process(b.user.auth,Z,m));return yield b.user._updateTokensIfNecessary(_e),b.user.reload()})()}unenroll(g){var m=this;return(0,T.Z)(function*(){var b;const j="string"==typeof g?g:g.uid,Z=yield m.user.getIdToken(),_e=yield Qn(m.user,function(E,g){return zn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(E,g))}(m.user.auth,{idToken:Z,mfaEnrollmentId:j}));m.enrolledFactors=m.enrolledFactors.filter(({uid:je})=>je!==j),yield m.user._updateTokensIfNecessary(_e);try{yield m.user.reload()}catch(je){if("auth/user-token-expired"!==(null===(b=je)||void 0===b?void 0:b.code))throw je}})()}}const _o=new WeakMap,jt="__sak";class yn{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(jt,"1"),this.storage.removeItem(jt),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const mi=(()=>{class E extends yn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,ie.z$)();return Ts(E)||wi(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=oi(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const j=this.storage.getItem(b),Z=this.localCache[b];j!==Z&&m(b,Z,j)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((je,wt,ft)=>{this.notifyListeners(je,ft)});const j=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const je=this.storage.getItem(j);if(m.newValue!==je)null!==m.newValue?this.storage.setItem(j,m.newValue):this.storage.removeItem(j);else if(this.localCache[j]===m.newValue&&!b)return}const Z=()=>{const je=this.storage.getItem(j);!b&&this.localCache[j]===je||this.notifyListeners(j,je)},_e=this.storage.getItem(j);(0,ie.w1)()&&10===document.documentMode&&_e!==m.newValue&&m.newValue!==m.oldValue?setTimeout(Z,10):Z()}notifyListeners(m,b){this.localCache[m]=b;const j=this.listeners[m];if(j)for(const Z of Array.from(j))Z(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,j)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:j}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var j=()=>super._set,Z=this;return(0,T.Z)(function*(){yield j().call(Z,m,b),Z.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,j=this;return(0,T.Z)(function*(){const Z=yield b().call(j,m);return j.localCache[m]=JSON.stringify(Z),Z})()}_remove(m){var b=()=>super._remove,j=this;return(0,T.Z)(function*(){yield b().call(j,m),delete j.localCache[m]})()}}return E.type="LOCAL",E})(),S=(()=>{class E extends yn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return E.type="SESSION",E})();let L=(()=>{class E{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(Z=>Z.isListeningto(m));if(b)return b;const j=new E(m);return this.receivers.push(j),j}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,T.Z)(function*(){const j=m,{eventId:Z,eventType:_e,data:je}=j.data,wt=b.handlersMap[_e];if(!(null==wt?void 0:wt.size))return;j.ports[0].postMessage({status:"ack",eventId:Z,eventType:_e});const ft=Array.from(wt).map(function(){var Qt=(0,T.Z)(function*(pr){return pr(j.origin,je)});return function(pr){return Qt.apply(this,arguments)}}()),Kt=yield function(E){return Promise.all(E.map(function(){var g=(0,T.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return g.apply(this,arguments)}}()))}(ft);j.ports[0].postMessage({status:"done",eventId:Z,eventType:_e,response:Kt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function G(E="",g=10){let m="";for(let b=0;b<g;b++)m+=Math.floor(10*Math.random());return E+m}class ee{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,b=50){var j=this;return(0,T.Z)(function*(){const Z="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let _e,je;return new Promise((wt,ft)=>{const Kt=G("",20);Z.port1.start();const Qt=setTimeout(()=>{ft(new Error("unsupported_event"))},b);je={messageChannel:Z,onMessage(pr){const Ks=pr;if(Ks.data.eventId===Kt)switch(Ks.data.status){case"ack":clearTimeout(Qt),_e=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(_e),wt(Ks.data.response);break;default:clearTimeout(Qt),clearTimeout(_e),ft(new Error("invalid_response"))}}},j.handlers.add(je),Z.port1.addEventListener("message",je.onMessage),j.target.postMessage({eventType:g,eventId:Kt,data:m},[Z.port2])}).finally(()=>{je&&j.removeMessageHandler(je)})})()}}function le(){return window}function st(){return void 0!==le().WorkerGlobalScope&&"function"==typeof le().importScripts}function Pn(){return(Pn=(0,T.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Rn="firebaseLocalStorageDb",$t="firebaseLocalStorage",As="fbase_key";class Ln{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Fo(E,g){return E.transaction([$t],g?"readwrite":"readonly").objectStore($t)}function Nt(){const E=indexedDB.open(Rn,1);return new Promise((g,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore($t,{keyPath:As})}catch(j){m(j)}}),E.addEventListener("success",(0,T.Z)(function*(){const b=E.result;b.objectStoreNames.contains($t)?g(b):(b.close(),yield function(){const E=indexedDB.deleteDatabase(Rn);return new Ln(E).toPromise()}(),g(yield Nt()))}))})}function ci(E,g,m){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,T.Z)(function*(E,g,m){const b=Fo(E,!0).put({[As]:g,value:m});return new Ln(b).toPromise()})).apply(this,arguments)}function Jl(){return(Jl=(0,T.Z)(function*(E,g){const m=Fo(E,!1).get(g),b=yield new Ln(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Lc(E,g){const m=Fo(E,!0).delete(g);return new Ln(m).toPromise()}const gu=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,T.Z)(function*(){return m.db||(m.db=yield Nt()),m.db})()}_withRetries(m){var b=this;return(0,T.Z)(function*(){let j=0;for(;;)try{const Z=yield b._openDb();return yield m(Z)}catch(Z){if(j++>3)throw Z;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,T.Z)(function*(){return st()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,T.Z)(function*(){m.receiver=L._getInstance(st()?self:null),m.receiver._subscribe("keyChanged",function(){var b=(0,T.Z)(function*(j,Z){return{keyProcessed:(yield m._poll()).includes(Z.key)}});return function(j,Z){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,T.Z)(function*(j,Z){return["keyChanged"]});return function(j,Z){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,T.Z)(function*(){var b,j;if(m.activeServiceWorker=yield function(){return Pn.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ee(m.activeServiceWorker);const Z=yield m.sender._send("ping",{},800);!Z||(null===(b=Z[0])||void 0===b?void 0:b.fulfilled)&&(null===(j=Z[0])||void 0===j?void 0:j.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,T.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch(j){}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Nt();return yield ci(m,jt,"1"),yield Lc(m,jt),!0}catch(m){}return!1})()}_withPendingWrite(m){var b=this;return(0,T.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var j=this;return(0,T.Z)(function*(){return j._withPendingWrite((0,T.Z)(function*(){return yield j._withRetries(Z=>ci(Z,m,b)),j.localCache[m]=b,j.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,T.Z)(function*(){const j=yield b._withRetries(Z=>function(E,g){return Jl.apply(this,arguments)}(Z,m));return b.localCache[m]=j,j})()}_remove(m){var b=this;return(0,T.Z)(function*(){return b._withPendingWrite((0,T.Z)(function*(){return yield b._withRetries(j=>Lc(j,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,T.Z)(function*(){const b=yield m._withRetries(_e=>{const je=Fo(_e,!1).getAll();return new Ln(je).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const j=[],Z=new Set;for(const{fbase_key:_e,value:je}of b)Z.add(_e),JSON.stringify(m.localCache[_e])!==JSON.stringify(je)&&(m.notifyListeners(_e,je),j.push(_e));for(const _e of Object.keys(m.localCache))m.localCache[_e]&&!Z.has(_e)&&(m.notifyListeners(_e,null),j.push(_e));return j})()}notifyListeners(m,b){this.localCache[m]=b;const j=this.listeners[m];if(j)for(const Z of Array.from(j))Z(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function nf(E,g){return zn(E,"POST","/v2/accounts/mfaSignIn:start",Dt(E,g))}function mu(){return(mu=(0,T.Z)(function*(E){return(yield zn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _i(E){return new Promise((g,m)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=g,b.onerror=j=>{const Z=Nn("internal-error");Z.customData=j,m(Z)},b.type="text/javascript",b.charset="UTF-8",function(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(b)})}function no(E){return`__${E}${Math.floor(1e6*Math.random())}`}const yo=1e12;class vo{constructor(g){this.auth=g,this.counter=yo,this._widgets=new Map}render(g,m){const b=this.counter;return this._widgets.set(b,new Cs(g,this.auth.name,m||{})),this.counter++,b}reset(g){var m;const b=g||yo;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(g){var m;return(null===(m=this._widgets.get(g||yo))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,T.Z)(function*(){var b;return null===(b=m._widgets.get(g||yo))||void 0===b||b.execute(),""})()}}class Cs{constructor(g,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const j="string"==typeof g?document.getElementById(g):g;et(j,"argument-error",{appName:m}),this.container=j,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}();const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Lo=no("rcb"),Zu=new Pt(3e4,6e4);class Vo{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=le().grecaptcha)||void 0===g?void 0:g.render)}load(g,m=""){return et((E=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(le().grecaptcha):new Promise((b,j)=>{const Z=le().setTimeout(()=>{j(Nn(g,"network-request-failed"))},Zu.get());le()[Lo]=()=>{le().clearTimeout(Z),delete le()[Lo];const je=le().grecaptcha;if(!je)return void j(Nn(g,"internal-error"));const wt=je.render;je.render=(ft,Kt)=>{const Qt=wt(ft,Kt);return this.counter++,Qt},this.hostLanguage=m,b(je)},_i(`https://www.google.com/recaptcha/api.js??${(0,ie.xO)({onload:Lo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(Z),j(Nn(g,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!!(null===(m=le().grecaptcha)||void 0===m?void 0:m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wl{load(g){return(0,T.Z)(function*(){return new vo(g)})()}clearedOneInstance(){}}const Cl="recaptcha",Jr={theme:"light",type:"image"};class xs{constructor(g,m=Object.assign({},Jr),b){this.parameters=m,this.type=Cl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(b),this.isInvisible="invisible"===this.parameters.size,et("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const j="string"==typeof g?document.getElementById(g):g;et(j,this.auth,"argument-error"),this.container=j,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wl:new Vo,this.validateStartingState()}verify(){var g=this;return(0,T.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(m)||new Promise(Z=>{const _e=je=>{!je||(g.tokenChangeListeners.delete(_e),Z(je))};g.tokenChangeListeners.add(_e),g.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){et(!this.parameters.sitekey,this.auth,"argument-error"),et(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),et("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof g)g(m);else if("string"==typeof g){const b=le()[g];"function"==typeof b&&b(m)}}}assertNotDestroyed(){et(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,T.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,T.Z)(function*(){et(br()&&!st(),g.auth,"internal-error"),yield function(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function(E){return mu.apply(this,arguments)}(g.auth);et(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return et(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vn{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Ss._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function ro(){return(ro=(0,T.Z)(function*(E,g,m){const b=Xn(E),j=yield Ws(b,g,(0,ie.m9)(m));return new Vn(j,Z=>Qr(b,Z))})).apply(this,arguments)}function vd(){return(vd=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);yield vs(!1,b,"phone");const j=yield Ws(b.auth,g,(0,ie.m9)(m));return new Vn(j,Z=>Kl(b,Z))})).apply(this,arguments)}function Xl(){return(Xl=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j=yield Ws(b.auth,g,(0,ie.m9)(m));return new Vn(j,Z=>No(b,Z))})).apply(this,arguments)}function Ws(E,g,m){return Br.apply(this,arguments)}function Br(){return(Br=(0,T.Z)(function*(E,g,m){var b;const j=yield m.verify();try{let Z;if(et("string"==typeof j,E,"argument-error"),et(m.type===Cl,E,"argument-error"),Z="string"==typeof g?{phoneNumber:g}:g,"session"in Z){const _e=Z.session;if("phoneNumber"in Z)return et("enroll"===_e.type,E,"internal-error"),(yield Wu(E,{idToken:_e.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:j}})).phoneSessionInfo.sessionInfo;{et("signin"===_e.type,E,"internal-error");const je=(null===(b=Z.multiFactorHint)||void 0===b?void 0:b.uid)||Z.multiFactorUid;return et(je,E,"missing-multi-factor-info"),(yield nf(E,{mfaPendingCredential:_e.credential,mfaEnrollmentId:je,phoneSignInInfo:{recaptchaToken:j}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:_e}=yield co(E,{phoneNumber:Z.phoneNumber,recaptchaToken:j});return _e}}finally{m._reset()}})).apply(this,arguments)}function $(){return($=(0,T.Z)(function*(E,g){yield dt((0,ie.m9)(E),g)})).apply(this,arguments)}let J=(()=>{class E{constructor(m){this.providerId=E.PROVIDER_ID,this.auth=Xn(m)}verifyPhoneNumber(m,b){return Ws(this.auth,m,(0,ie.m9)(b))}static credential(m,b){return Ss._fromVerification(m,b)}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:j}=m;return b&&j?Ss._fromTokenResponse(b,j):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function fe(E,g){return g?or(g):(et(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Pe extends Te{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ls(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Ls(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Ls(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Le(E){return Es(E.auth,new Pe(E),E.bypassAuthState)}function lt(E){const{auth:g,user:m}=E;return et(m,g,"internal-error"),Vu(m,new Pe(E),E.bypassAuthState)}function Lt(E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,T.Z)(function*(E){const{auth:g,user:m}=E;return et(m,g,"internal-error"),dt(m,new Pe(E),E.bypassAuthState)})).apply(this,arguments)}class zt{constructor(g,m,b,j,Z=!1){this.auth=g,this.resolver=b,this.user=j,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,T.Z)(function*(b,j){g.pendingPromise={resolve:b,reject:j};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(Z){g.reject(Z)}});return function(b,j){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,T.Z)(function*(){const{urlResponse:b,sessionId:j,postBody:Z,tenantId:_e,error:je,type:wt}=g;if(je)return void m.reject(je);const ft={auth:m.auth,requestUri:b,sessionId:j,tenantId:_e||void 0,postBody:Z||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(wt)(ft))}catch(Kt){m.reject(Kt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Le;case"linkViaPopup":case"linkViaRedirect":return Lt;case"reauthViaPopup":case"reauthViaRedirect":return lt;default:_n(this.auth,"internal-error")}}resolve(g){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hn=new Pt(2e3,1e4);function Tr(){return(Tr=(0,T.Z)(function*(E,g,m){const b=Xn(E);ri(E,g,qe);const j=fe(b,m);return new _u(b,"signInViaPopup",g,j).executeNotNull()})).apply(this,arguments)}function bi(){return(bi=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);ri(b.auth,g,qe);const j=fe(b.auth,m);return new _u(b.auth,"reauthViaPopup",g,j,b).executeNotNull()})).apply(this,arguments)}function Eo(){return(Eo=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);ri(b.auth,g,qe);const j=fe(b.auth,m);return new _u(b.auth,"linkViaPopup",g,j,b).executeNotNull()})).apply(this,arguments)}let _u=(()=>{class E extends zt{constructor(m,b,j,Z,_e){super(m,b,Z,_e),this.provider=j,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var m=this;return(0,T.Z)(function*(){const b=yield m.execute();return et(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,T.Z)(function*(){xt(1===m.filter.length,"Popup operations only handle one event");const b=G();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(j=>{m.reject(j)}),m.resolver._isIframeWebStorageSupported(m.auth,j=>{j||m.reject(Nn(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,j;this.pollId=(null===(j=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===j?void 0:j.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Hn.get())};m()}}return E.currentPopupAction=null,E})();const zs=new Map;class jr extends zt{constructor(g,m,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,T.Z)(function*(){let b=zs.get(m.auth._key());if(!b){try{const Z=(yield function(E,g){return bl.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;b=()=>Promise.resolve(Z)}catch(j){b=()=>Promise.reject(j)}zs.set(m.auth._key(),b)}return m.bypassAuthState||zs.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,b=this;return(0,T.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(b,g);if("unknown"!==g.type){if(g.eventId){const j=yield b.auth._redirectUserForId(g.eventId);if(j)return b.user=j,m().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function bl(){return(bl=(0,T.Z)(function*(E,g){const m=Vc(g),b=Ya(E);if(!(yield b._isAvailable()))return!1;const j="true"===(yield b._get(m));return yield b._remove(m),j})).apply(this,arguments)}function Ed(E,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,T.Z)(function*(E,g){return Ya(E)._set(Vc(g),"true")})).apply(this,arguments)}function ec(E,g){zs.set(E._key(),g)}function Ya(E){return or(E._redirectPersistence)}function Vc(E){return Ei("pendingRedirect",E.config.apiKey,E.name)}function Qa(){return(Qa=(0,T.Z)(function*(E,g,m){const b=Xn(E);ri(E,g,qe);const j=fe(b,m);return yield Ed(j,b),j._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function Dl(){return(Dl=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);ri(b.auth,g,qe);const j=fe(b.auth,m);yield Ed(j,b.auth);const Z=yield Ms(b);return j._openRedirect(b.auth,g,"reauthViaRedirect",Z)})).apply(this,arguments)}function Tl(){return(Tl=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);ri(b.auth,g,qe);const j=fe(b.auth,m);yield vs(!1,b,g.providerId),yield Ed(j,b.auth);const Z=yield Ms(b);return j._openRedirect(b.auth,g,"linkViaRedirect",Z)})).apply(this,arguments)}function Sl(){return(Sl=(0,T.Z)(function*(E,g){return yield Xn(E)._initializationPromise,Bc(E,g,!1)})).apply(this,arguments)}function Bc(E,g){return hh.apply(this,arguments)}function hh(){return(hh=(0,T.Z)(function*(E,g,m=!1){const b=Xn(E),j=fe(b,g),_e=yield new jr(b,j,m).execute();return _e&&!m&&(delete _e.user._redirectEventId,yield b._persistUserIfCurrent(_e.user),yield b._setRedirectUser(null,g)),_e})).apply(this,arguments)}function Ms(E){return wd.apply(this,arguments)}function wd(){return(wd=(0,T.Z)(function*(E){const g=G(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class jc{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(m=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nc(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var b;if(g.error&&!nc(g)){const j=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(Nn(this.auth,j))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const b=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tc(g))}saveEventToCache(g){this.cachedEventUids.add(tc(g)),this.lastProcessedEventTime=Date.now()}}function tc(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function nc({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===(null==g?void 0:g.code)}function rp(E){return fh.apply(this,arguments)}function fh(){return(fh=(0,T.Z)(function*(E,g={}){return zn(E,"GET","/v1/projects",g)})).apply(this,arguments)}const ha=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vu=/^https?/;function Cd(){return(Cd=(0,T.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield rp(E);for(const m of g)try{if(ph(m))return}catch(b){}_n(E,"unauthorized-domain")})).apply(this,arguments)}function ph(E){const g=vr(),{protocol:m,hostname:b}=new URL(g);if(E.startsWith("chrome-extension://")){const _e=new URL(E);return""===_e.hostname&&""===b?"chrome-extension:"===m&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&_e.hostname===b}if(!vu.test(m))return!1;if(ha.test(E))return b===E;const j=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+j+"|"+j+")$","i").test(b)}const jo=new Pt(3e4,6e4);function af(){const E=le().___jsl;if(null==E?void 0:E.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}let bd=null;function gh(E){return bd=bd||function(E){return new Promise((g,m)=>{var b,j,Z;function _e(){af(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{af(),m(Nn(E,"network-request-failed"))},timeout:jo.get()})}if(null===(j=null===(b=le().gapi)||void 0===b?void 0:b.iframes)||void 0===j?void 0:j.Iframe)g(gapi.iframes.getContext());else{if(!(null===(Z=le().gapi)||void 0===Z?void 0:Z.load)){const je=no("iframefcb");return le()[je]=()=>{gapi.load?_e():m(Nn(E,"network-request-failed"))},_i(`https://apis.google.com/js/api.js?onload=${je}`).catch(wt=>m(wt))}_e()}}).catch(g=>{throw bd=null,g})}(E),bd}const mh=new Pt(5e3,15e3),fa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Id(E){const g=E.config;et(g.authDomain,E,"auth-domain-config-required");const m=g.emulator?rn(g,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:E.name,v:Re.SDK_VERSION},j=sp.get(E.config.apiHost);j&&(b.eid=j);const Z=E._getFrameworks();return Z.length&&(b.fw=Z.join(",")),`${m}?${(0,ie.xO)(b).slice(1)}`}function Hc(){return Hc=(0,T.Z)(function*(E){const g=yield gh(E),m=le().gapi;return et(m,E,"internal-error"),g.open({where:document.body,url:Id(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fa,dontclear:!0},b=>new Promise(function(){var j=(0,T.Z)(function*(Z,_e){yield b.restyle({setHideOnLeave:!1});const je=Nn(E,"network-request-failed"),wt=le().setTimeout(()=>{_e(je)},mh.get());function ft(){le().clearTimeout(wt),Z(b)}b.ping(ft).then(ft,()=>{_e(je)})});return function(Z,_e){return j.apply(this,arguments)}}()))}),Hc.apply(this,arguments)}const lf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class df{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function pa(E,g,m,b,j,Z){et(E.config.authDomain,E,"auth-domain-config-required"),et(E.config.apiKey,E,"invalid-api-key");const _e={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:b,v:Re.SDK_VERSION,eventId:j};if(g instanceof qe){g.setDefaultLanguage(E.languageCode),_e.providerId=g.providerId||"",(0,ie.xb)(g.getCustomParameters())||(_e.customParameters=JSON.stringify(g.getCustomParameters()));for(const[wt,ft]of Object.entries(Z||{}))_e[wt]=ft}if(g instanceof Je){const wt=g.getScopes().filter(ft=>""!==ft);wt.length>0&&(_e.scopes=wt.join(","))}E.tenantId&&(_e.tid=E.tenantId);const je=_e;for(const wt of Object.keys(je))void 0===je[wt]&&delete je[wt];return`${function({config:E}){return E.emulator?rn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,ie.xO)(je).slice(1)}`}const Cu="webStorageSupport";class ic extends class{constructor(g){this.factorId=g}_process(g,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,b);case"signin":return this._finalizeSignIn(g,m.credential);default:return un("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ic(g)}_finalizeEnroll(g,m,b){return function(E,g){return zn(E,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(E,g))}(g,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function(E,g){return zn(E,"POST","/v2/accounts/mfaSignIn:finalize",Dt(E,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let up=(()=>{class E{constructor(){}static assertion(m){return ic._fromCredential(m)}}return E.FACTOR_ID="phone",E})();var E,Dd="@firebase/auth";class yh{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,T.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(b=>{var j;g((null===(j=b)||void 0===j?void 0:j.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tu(){return window}function bu(){return bu=(0,T.Z)(function*(E,g,m){var b;const{BuildInfo:j}=tu();xt(g.sessionId,"AuthEvent did not contain a session ID");const Z=yield ei(g.sessionId),_e={};return wi()?_e.ibi=j.packageName:Sn()?_e.apn=j.packageName:_n(E,"operation-not-supported-in-this-environment"),j.displayName&&(_e.appDisplayName=j.displayName),_e.sessionId=Z,pa(E,m,g.type,void 0,null!==(b=g.eventId)&&void 0!==b?b:void 0,_e)}),bu.apply(this,arguments)}function xl(){return xl=(0,T.Z)(function*(E){const{BuildInfo:g}=tu(),m={};wi()?m.iosBundleId=g.packageName:Sn()?m.androidPackageName=g.packageName:_n(E,"operation-not-supported-in-this-environment"),yield rp(E,m)}),xl.apply(this,arguments)}function Kn(){return Kn=(0,T.Z)(function*(E,g,m){const{cordova:b}=tu();let j=()=>{};try{yield new Promise((Z,_e)=>{let je=null;function wt(){var Qt;Z();const pr=null===(Qt=b.plugins.browsertab)||void 0===Qt?void 0:Qt.close;"function"==typeof pr&&pr(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function ft(){je||(je=window.setTimeout(()=>{_e(Nn(E,"redirect-cancelled-by-user"))},2e3))}function Kt(){"visible"===(null==document?void 0:document.visibilityState)&&ft()}g.addPassiveListener(wt),document.addEventListener("resume",ft,!1),Sn()&&document.addEventListener("visibilitychange",Kt,!1),j=()=>{g.removePassiveListener(wt),document.removeEventListener("resume",ft,!1),document.removeEventListener("visibilitychange",Kt,!1),je&&window.clearTimeout(je)}})}finally{j()}}),Kn.apply(this,arguments)}function ei(E){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,T.Z)(function*(E){const g=Td(E),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(j=>j.toString(16).padStart(2,"0")).join("")}),Iu.apply(this,arguments)}function Td(E){if(xt(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(E);const g=new ArrayBuffer(E.length),m=new Uint8Array(g);for(let b=0;b<E.length;b++)m[b]=E.charCodeAt(b);return m}E="Browser",(0,Re._registerComponent)(new ur.wA("auth",(g,{options:m})=>{const b=g.getProvider("app").getImmediate(),j=g.getProvider("heartbeat"),{apiKey:Z,authDomain:_e}=b.options;return((je,wt)=>{et(Z&&!Z.includes(":"),"invalid-api-key",{appName:je.name}),et(!(null==_e?void 0:_e.includes(":")),"argument-error",{appName:je.name});const ft={apiKey:Z,authDomain:_e,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ys(E)},Kt=new Kr(je,wt,ft);return function(E,g){const m=(null==g?void 0:g.persistence)||[],b=(Array.isArray(m)?m:[m]).map(or);(null==g?void 0:g.errorMap)&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(b,null==g?void 0:g.popupRedirectResolver)}(Kt,m),Kt})(b,j)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,b)=>{g.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new ur.wA("auth-internal",g=>{const m=Xn(g.getProvider("auth").getImmediate());return new yh(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)(Dd,"0.20.5",void 0),(0,Re.registerVersion)(Dd,"0.20.5","esm2017");class cs extends jc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,T.Z)(function*(){yield g.initPromise})()}}function io(E){return Du.apply(this,arguments)}function Du(){return Du=(0,T.Z)(function*(E){const g=yield Rl()._get(ds(E));return g&&(yield Rl()._remove(ds(E))),g}),Du.apply(this,arguments)}function Ii(){const E=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*g.length);E.push(g.charAt(b))}return E.join("")}function Rl(){return or(mi)}function ds(E){return Ei("authEvent",E.config.apiKey,E.name)}function Na(E){if(!(null==E?void 0:E.includes("?")))return{};const[g,...m]=E.split("?");return(0,ie.zd)(m.join("?"))}function Gn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nn("no-auth-event")}}function sa(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function Wc(E=(0,ie.z$)()){return!("file:"!==sa()&&"ionic:"!==sa()&&"capacitor:"!==sa()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function ga(){try{const E=self.localStorage,g=G();if(E)return E.setItem(g,"1"),E.removeItem(g),!function(E=(0,ie.z$)()){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)||function(E=(0,ie.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,ie.hl)()}catch(E){return _f()&&(0,ie.hl)()}return!1}function _f(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $o(){return("http:"===sa()||"https:"===sa()||(0,ie.ru)()||Wc())&&!((0,ie.b$)()||(0,ie.UG)())&&ga()&&!_f()}function ac(){return Wc()&&"undefined"!=typeof document}function Rd(){return Rd=(0,T.Z)(function*(){return!!ac()&&new Promise(E=>{const g=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),E(!0)})})}),Rd.apply(this,arguments)}const hs={LOCAL:"local",NONE:"none",SESSION:"session"},lc=et,cc="persistence";function zc(E){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,T.Z)(function*(E){yield E._initializationPromise;const g=oa(),m=Ei(cc,E.config.apiKey,E.name);g&&g.setItem(m,E._getPersistence())}),Nd.apply(this,arguments)}function oa(){var E;try{return(null===(E="undefined"!=typeof window?window:null)||void 0===E?void 0:E.sessionStorage)||null}catch(g){return null}}const yf=et;class Cr{constructor(){this.browserResolver=or(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S,this._completeRedirectFn=Bc,this._overrideRedirectResult=ec}_openPopup(g,m,b,j){var Z=this;return(0,T.Z)(function*(){var _e;xt(null===(_e=Z.eventManagers[g._key()])||void 0===_e?void 0:_e.manager,"_initialize() not called before _openPopup()");const je=pa(g,m,b,vr(),j);return function(E,g,m,b=500,j=600){const Z=Math.max((window.screen.availHeight-j)/2,0).toString(),_e=Math.max((window.screen.availWidth-b)/2,0).toString();let je="";const wt=Object.assign(Object.assign({},lf),{width:b.toString(),height:j.toString(),top:Z,left:_e}),ft=(0,ie.z$)().toLowerCase();m&&(je=Oi(ft)?"_blank":m),Pi(ft)&&(g=g||"http://localhost",wt.scrollbars="yes");const Kt=Object.entries(wt).reduce((pr,[Ks,kl])=>`${pr}${Ks}=${kl},`,"");if(function(E=(0,ie.z$)()){var g;return wi(E)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(ft)&&"_self"!==je)return function(E,g){const m=document.createElement("a");m.href=E,m.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(g||"",je),new df(null);const Qt=window.open(g||"",je,Kt);et(Qt,E,"popup-blocked");try{Qt.focus()}catch(pr){}return new df(Qt)}(g,je,G())})()}_openRedirect(g,m,b,j){var Z=this;return(0,T.Z)(function*(){return yield Z._originValidation(g),E=pa(g,m,b,vr(),j),le().location.href=E,new Promise(()=>{});var E})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:j,promise:Z}=this.eventManagers[m];return j?Promise.resolve(j):(xt(Z,"If manager is not set, promise should be"),Z)}const b=this.initAndGetManager(g);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(g){var m=this;return(0,T.Z)(function*(){const b=yield function(E){return Hc.apply(this,arguments)}(g),j=new jc(g);return b.register("authEvent",Z=>(et(null==Z?void 0:Z.authEvent,g,"invalid-auth-event"),{status:j.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:j},m.iframes[g._key()]=b,j})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Cu,{type:Cu},j=>{var Z;const _e=null===(Z=null==j?void 0:j[0])||void 0===Z?void 0:Z[Cu];void 0!==_e&&m(!!_e),_n(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(E){return Cd.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return oi()||Ts()||wi()}}),this.cordovaResolver=or(class{constructor(){this._redirectPersistence=S,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bc,this._overrideRedirectResult=ec}_initialize(g){var m=this;return(0,T.Z)(function*(){const b=g._key();let j=m.eventManagers.get(b);return j||(j=new cs(g),m.eventManagers.set(b,j),m.attachCallbackListeners(g,j)),j})()}_openPopup(g){_n(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,b,j){var Z=this;return(0,T.Z)(function*(){!function(E){var g,m,b,j,Z,_e,je,wt,ft,Kt;const Qt=tu();et("function"==typeof(null===(g=null==Qt?void 0:Qt.universalLinks)||void 0===g?void 0:g.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),et(void 0!==(null===(m=null==Qt?void 0:Qt.BuildInfo)||void 0===m?void 0:m.packageName),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),et("function"==typeof(null===(Z=null===(j=null===(b=null==Qt?void 0:Qt.cordova)||void 0===b?void 0:b.plugins)||void 0===j?void 0:j.browsertab)||void 0===Z?void 0:Z.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),et("function"==typeof(null===(wt=null===(je=null===(_e=null==Qt?void 0:Qt.cordova)||void 0===_e?void 0:_e.plugins)||void 0===je?void 0:je.browsertab)||void 0===wt?void 0:wt.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),et("function"==typeof(null===(Kt=null===(ft=null==Qt?void 0:Qt.cordova)||void 0===ft?void 0:ft.InAppBrowser)||void 0===Kt?void 0:Kt.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const _e=yield Z._initialize(g);yield _e.initialized(),_e.resetRedirect(),zs.clear(),yield Z._originValidation(g);const je=function(E,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:Ii(),postBody:null,tenantId:E.tenantId,error:Nn(E,"no-auth-event")}}(g,b,j);yield function(E,g){return Rl()._set(ds(E),g)}(g,je);const wt=yield function(E,g,m){return bu.apply(this,arguments)}(g,je,m),ft=yield function(E){const{cordova:g}=tu();return new Promise(m=>{g.plugins.browsertab.isAvailable(b=>{let j=null;b?g.plugins.browsertab.openUrl(E):j=g.InAppBrowser.open(E,function(E=(0,ie.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),m(j)})})}(wt);return function(E,g,m){return Kn.apply(this,arguments)}(g,_e,ft)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(E){return xl.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:b,handleOpenURL:j,BuildInfo:Z}=tu(),_e=setTimeout((0,T.Z)(function*(){yield io(g),m.onEvent(Gn())}),500),je=function(){var Kt=(0,T.Z)(function*(Qt){clearTimeout(_e);const pr=yield io(g);let Ks=null;pr&&(null==Qt?void 0:Qt.url)&&(Ks=function(E,g){var m,b;const j=function(E){const g=Na(E),m=g.link?decodeURIComponent(g.link):void 0,b=Na(m).link,j=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Na(j).link||j||b||m||E}(g);if(j.includes("/__/auth/callback")){const Z=Na(j),_e=Z.firebaseError?function(E){try{return JSON.parse(E)}catch(g){return null}}(decodeURIComponent(Z.firebaseError)):null,je=null===(b=null===(m=null==_e?void 0:_e.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],wt=je?Nn(je):null;return wt?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:wt,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:j,postBody:null}}return null}(pr,Qt.url)),m.onEvent(Ks||Gn())});return function(pr){return Kt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,je);const wt=j,ft=`${Z.packageName.toLowerCase()}://`;tu().handleOpenURL=function(){var Kt=(0,T.Z)(function*(Qt){if(Qt.toLowerCase().startsWith(ft)&&je({url:Qt}),"function"==typeof wt)try{wt(Qt)}catch(pr){console.error(pr)}});return function(Qt){return Kt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=S,this._completeRedirectFn=Bc,this._overrideRedirectResult=ec}_initialize(g){var m=this;return(0,T.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,b,j){var Z=this;return(0,T.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(g,m,b,j)})()}_openRedirect(g,m,b,j){var Z=this;return(0,T.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(g,m,b,j)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return ac()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,T.Z)(function*(){if(g.underlyingResolver)return;const m=yield function(){return Rd.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function hp(E){return E.unwrap()}function dc(E){return hc(E)}function hc(E){const{_tokenResponse:g}=E instanceof ie.ZR?E.customData:E;if(!g)return null;if(!(E instanceof ie.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return J.credentialFromResult(E);const m=g.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=R;break;case"facebook.com":b=O;break;case"github.com":b=Y;break;case"twitter.com":b=Li;break;default:const{oauthIdToken:j,oauthAccessToken:Z,oauthTokenSecret:_e,pendingToken:je,nonce:wt}=g;return Z||_e||j||je?je?m.startsWith("saml.")?yt._create(m,je):Zr._fromParams({providerId:m,signInMethod:m,pendingToken:je,idToken:j,accessToken:Z}):new F(m).credential({idToken:j,accessToken:Z,rawNonce:wt}):null}return E instanceof ie.ZR?b.credentialFromError(E):b.credentialFromResult(E)}function ji(E,g){return g.catch(m=>{throw m instanceof ie.ZR&&function(E,g){var m,b;const j=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=g)||void 0===b?void 0:b.code))g.resolver=new Tu(E,function(E,g){var m;const b=(0,ie.m9)(E),j=g;return et(g.customData.operationType,b,"argument-error"),et(null===(m=j.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),da._fromError(b,j)}(E,g));else if(j){const Z=hc(g),_e=g;Z&&(_e.credential=Z,_e.tenantId=j.tenantId||void 0,_e.email=j.email||void 0,_e.phoneNumber=j.phoneNumber||void 0)}}(E,m),m}).then(m=>{const j=m.user;return{operationType:m.operationType,credential:dc(m),additionalUserInfo:Oc(m),user:ma.getOrCreate(j)}})}function Ml(E,g){return In.apply(this,arguments)}function In(){return In=(0,T.Z)(function*(E,g){const m=yield g;return{verificationId:m.verificationId,confirm:b=>ji(E,m.confirm(b))}}),In.apply(this,arguments)}class Tu{constructor(g,m){this.resolver=m,this.auth=function(E){return E.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return ji(hp(this.auth),this.resolver.resolveSignIn(g))}}class ma{constructor(g){this._delegate=g,this.multiFactor=function(E){const g=(0,ie.m9)(E);return _o.has(g)||_o.set(g,kr._fromUser(g)),_o.get(g)}(g)}static getOrCreate(g){return ma.USER_MAP.has(g)||ma.USER_MAP.set(g,new ma(g)),ma.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,T.Z)(function*(){return ji(m.auth,Kl(m._delegate,g))})()}linkWithPhoneNumber(g,m){var b=this;return(0,T.Z)(function*(){return Ml(b.auth,function(E,g,m){return vd.apply(this,arguments)}(b._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,T.Z)(function*(){return ji(m.auth,function(E,g,m){return Eo.apply(this,arguments)}(m._delegate,g,Cr))})()}linkWithRedirect(g){var m=this;return(0,T.Z)(function*(){return yield zc(Xn(m.auth)),function(E,g,m){return function(E,g,m){return Tl.apply(this,arguments)}(E,g,m)}(m._delegate,g,Cr)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,T.Z)(function*(){return ji(m.auth,No(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return Ml(this.auth,function(E,g,m){return Xl.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return ji(this.auth,function(E,g,m){return bi.apply(this,arguments)}(this._delegate,g,Cr))}reauthenticateWithRedirect(g){var m=this;return(0,T.Z)(function*(){return yield zc(Xn(m.auth)),function(E,g,m){return function(E,g,m){return Dl.apply(this,arguments)}(E,g,m)}(m._delegate,g,Cr)})()}sendEmailVerification(g){return function(E,g){return Qi.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,T.Z)(function*(){return yield function(E,g){return lu.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function(E,g){return Ji((0,ie.m9)(E),g,null)}(this._delegate,g)}updatePassword(g){return function(E,g){return Ji((0,ie.m9)(E),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(E,g){return $.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(E,g){return Gu.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function(E,g,m){return Aa.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ma.USER_MAP=new WeakMap;const wh=et;let yi=(()=>{class E{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=m.options;wh(j,"invalid-api-key",{appName:m.name}),wh(j,"invalid-api-key",{appName:m.name});const Z="undefined"!=typeof window?Cr:void 0;this._delegate=b.initialize({options:{persistence:Go(j,m.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(Zt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ma.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function(E,g,m){const b=Xn(E);et(b._canInitEmulator,b,"emulator-config-failed"),et(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const j=!!(null==m?void 0:m.disableWarnings),Z=Gr(g),{host:_e,port:je}=function(E){const g=Gr(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",j=/^(\[[^\]]+\])(:|$)/.exec(b);if(j){const Z=j[1];return{host:Z,port:Ao(b.substr(Z.length+1))}}{const[Z,_e]=b.split(":");return{host:Z,port:Ao(_e)}}}(g);b.config.emulator={url:`${Z}//${_e}${null===je?"":`:${je}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:_e,port:je,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:j})}),j||function(){function E(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,m,b)}applyActionCode(m){return function(E,g){return Mo.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Xo(this._delegate,m)}confirmPasswordReset(m,b){return function(E,g,m){return fl.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var j=this;return(0,T.Z)(function*(){return ji(j._delegate,function(E,g,m){return du.apply(this,arguments)}(j._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(E,g){return ca.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(E,g){const m=B.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,T.Z)(function*(){wh($o(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function(E,g){return Sl.apply(this,arguments)}(m._delegate,Cr);return b?ji(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(E,g){Xn(E)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,b,j){const{next:Z,error:_e,complete:je}=Pl(m,b,j);return this._delegate.onAuthStateChanged(Z,_e,je)}onIdTokenChanged(m,b,j){const{next:Z,error:_e,complete:je}=Pl(m,b,j);return this._delegate.onIdTokenChanged(Z,_e,je)}sendSignInLinkToEmail(m,b){return function(E,g,m){return za.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function(E,g,m){return js.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,T.Z)(function*(){let j;switch(function(E,g){lc(Object.values(hs).includes(g),E,"invalid-persistence-type"),(0,ie.b$)()?lc(g!==hs.SESSION,E,"unsupported-persistence-type"):(0,ie.UG)()?lc(g===hs.NONE,E,"unsupported-persistence-type"):_f()?lc(g===hs.NONE||g===hs.LOCAL&&(0,ie.hl)(),E,"unsupported-persistence-type"):lc(g===hs.NONE||ga(),E,"unsupported-persistence-type")}(b._delegate,m),m){case hs.SESSION:j=S;break;case hs.LOCAL:j=(yield or(gu)._isAvailable())?gu:mi;break;case hs.NONE:j=Dr;break;default:return _n("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return ji(this._delegate,function(E){return Jo.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return ji(this._delegate,Qr(this._delegate,m))}signInWithCustomToken(m){return ji(this._delegate,function(E,g){return Zi.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return ji(this._delegate,function(E,g,m){return Qr((0,ie.m9)(E),me.credential(g,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return ji(this._delegate,function(E,g,m){return Mr.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Ml(this._delegate,function(E,g,m){return ro.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,T.Z)(function*(){return wh($o(),b._delegate,"operation-not-supported-in-this-environment"),ji(b._delegate,function(E,g,m){return Tr.apply(this,arguments)}(b._delegate,m,Cr))})()}signInWithRedirect(m){var b=this;return(0,T.Z)(function*(){return wh($o(),b._delegate,"operation-not-supported-in-this-environment"),yield zc(b._delegate),function(E,g,m){return function(E,g,m){return Qa.apply(this,arguments)}(E,g,m)}(b._delegate,m,Cr)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(E,g){return $s.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=hs,E})();function Pl(E,g,m){let b=E;"function"!=typeof E&&({next:b,error:g,complete:m}=E);const j=b;return{next:_e=>j(_e&&ma.getOrCreate(_e)),error:g,complete:m}}function Go(E,g){const m=function(E,g){const m=oa();if(!m)return[];const b=Ei(cc,E,g);switch(m.getItem(b)){case hs.NONE:return[Dr];case hs.LOCAL:return[gu,S];case hs.SESSION:return[S];default:return[]}}(E,g);if("undefined"!=typeof self&&!m.includes(gu)&&m.push(gu),"undefined"!=typeof window)for(const b of[mi,S])m.includes(b)||m.push(b);return m.includes(Dr)||m.push(Dr),m}class fc{constructor(){this.providerId="phone",this._delegate=new J(hp(U.Z.auth()))}static credential(g,m){return J.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}fc.PHONE_SIGN_IN_METHOD=J.PHONE_SIGN_IN_METHOD,fc.PROVIDER_ID=J.PROVIDER_ID;const Ol=et;class vf{constructor(g,m,b=U.Z.app()){var j;Ol(null===(j=b.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new xs(g,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(E){E.INTERNAL.registerComponent(new ur.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),b=g.getProvider("auth");return new yi(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:me,FacebookAuthProvider:O,GithubAuthProvider:Y,GoogleAuthProvider:R,OAuthProvider:F,SAMLAuthProvider:er,PhoneAuthProvider:fc,PhoneMultiFactorGenerator:up,RecaptchaVerifier:vf,TwitterAuthProvider:Li,Auth:yi,AuthCredential:Te,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.2.18")}(U.Z)},7574:(Ot,Ge,z)=>{"use strict";z.d(Ge,{y:()=>ce});var T=z(7393),ie=z(9181),Re=z(6490),de=z(6554),Me=z(4487);var se=z(2494);let ce=(()=>{class $e{constructor(it){this._isScalar=!1,it&&(this._subscribe=it)}lift(it){const ze=new $e;return ze.source=this,ze.operator=it,ze}subscribe(it,ze,Ct){const{operator:We}=this,Be=function($e,Ye,it){if($e){if($e instanceof T.L)return $e;if($e[ie.b])return $e[ie.b]()}return $e||Ye||it?new T.L($e,Ye,it):new T.L(Re.c)}(it,ze,Ct);if(Be.add(We?We.call(Be,this.source):this.source||se.v.useDeprecatedSynchronousErrorHandling&&!Be.syncErrorThrowable?this._subscribe(Be):this._trySubscribe(Be)),se.v.useDeprecatedSynchronousErrorHandling&&Be.syncErrorThrowable&&(Be.syncErrorThrowable=!1,Be.syncErrorThrown))throw Be.syncErrorValue;return Be}_trySubscribe(it){try{return this._subscribe(it)}catch(ze){se.v.useDeprecatedSynchronousErrorHandling&&(it.syncErrorThrown=!0,it.syncErrorValue=ze),function($e){for(;$e;){const{closed:Ye,destination:it,isStopped:ze}=$e;if(Ye||ze)return!1;$e=it&&it instanceof T.L?it:null}return!0}(it)?it.error(ze):console.warn(ze)}}forEach(it,ze){return new(ze=pe(ze))((Ct,We)=>{let Be;Be=this.subscribe(Ce=>{try{it(Ce)}catch(_t){We(_t),Be&&Be.unsubscribe()}},We,Ct)})}_subscribe(it){const{source:ze}=this;return ze&&ze.subscribe(it)}[de.L](){return this}pipe(...it){return 0===it.length?this:function($e){return 0===$e.length?Me.y:1===$e.length?$e[0]:function(it){return $e.reduce((ze,Ct)=>Ct(ze),it)}}(it)(this)}toPromise(it){return new(it=pe(it))((ze,Ct)=>{let We;this.subscribe(Be=>We=Be,Be=>Ct(Be),()=>ze(We))})}}return $e.create=Ye=>new $e(Ye),$e})();function pe($e){if($e||($e=se.v.Promise||Promise),!$e)throw new Error("no Promise impl found");return $e}},6490:(Ot,Ge,z)=>{"use strict";z.d(Ge,{c:()=>ie});var T=z(2494),U=z(4449);const ie={closed:!0,next(Re){},error(Re){if(T.v.useDeprecatedSynchronousErrorHandling)throw Re;(0,U.z)(Re)},complete(){}}},5197:(Ot,Ge,z)=>{"use strict";z.d(Ge,{L:()=>U});var T=z(7393);class U extends T.L{notifyNext(Re,Ae,de,Me,he){this.destination.next(Ae)}notifyError(Re,Ae){this.destination.error(Re)}notifyComplete(Re){this.destination.complete()}}},9765:(Ot,Ge,z)=>{"use strict";z.d(Ge,{Yc:()=>Me,xQ:()=>he});var T=z(7574),U=z(7393),ie=z(5319),Re=z(7971),Ae=z(8858),de=z(9181);class Me extends U.L{constructor(ce){super(ce),this.destination=ce}}let he=(()=>{class se extends T.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[de.b](){return new Me(this)}lift(pe){const $e=new we(this,this);return $e.operator=pe,$e}next(pe){if(this.closed)throw new Re.N;if(!this.isStopped){const{observers:$e}=this,Ye=$e.length,it=$e.slice();for(let ze=0;ze<Ye;ze++)it[ze].next(pe)}}error(pe){if(this.closed)throw new Re.N;this.hasError=!0,this.thrownError=pe,this.isStopped=!0;const{observers:$e}=this,Ye=$e.length,it=$e.slice();for(let ze=0;ze<Ye;ze++)it[ze].error(pe);this.observers.length=0}complete(){if(this.closed)throw new Re.N;this.isStopped=!0;const{observers:pe}=this,$e=pe.length,Ye=pe.slice();for(let it=0;it<$e;it++)Ye[it].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(pe){if(this.closed)throw new Re.N;return super._trySubscribe(pe)}_subscribe(pe){if(this.closed)throw new Re.N;return this.hasError?(pe.error(this.thrownError),ie.w.EMPTY):this.isStopped?(pe.complete(),ie.w.EMPTY):(this.observers.push(pe),new Ae.W(this,pe))}asObservable(){const pe=new T.y;return pe.source=this,pe}}return se.create=(ce,pe)=>new we(ce,pe),se})();class we extends he{constructor(ce,pe){super(),this.destination=ce,this.source=pe}next(ce){const{destination:pe}=this;pe&&pe.next&&pe.next(ce)}error(ce){const{destination:pe}=this;pe&&pe.error&&this.destination.error(ce)}complete(){const{destination:ce}=this;ce&&ce.complete&&this.destination.complete()}_subscribe(ce){const{source:pe}=this;return pe?this.source.subscribe(ce):ie.w.EMPTY}}},8858:(Ot,Ge,z)=>{"use strict";z.d(Ge,{W:()=>U});var T=z(5319);class U extends T.w{constructor(Re,Ae){super(),this.subject=Re,this.subscriber=Ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Re=this.subject,Ae=Re.observers;if(this.subject=null,!Ae||0===Ae.length||Re.isStopped||Re.closed)return;const de=Ae.indexOf(this.subscriber);-1!==de&&Ae.splice(de,1)}}},7393:(Ot,Ge,z)=>{"use strict";z.d(Ge,{L:()=>Me});var T=z(9105),U=z(6490),ie=z(5319),Re=z(9181),Ae=z(2494),de=z(4449);class Me extends ie.w{constructor(se,ce,pe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=U.c;break;case 1:if(!se){this.destination=U.c;break}if("object"==typeof se){se instanceof Me?(this.syncErrorThrowable=se.syncErrorThrowable,this.destination=se,se.add(this)):(this.syncErrorThrowable=!0,this.destination=new he(this,se));break}default:this.syncErrorThrowable=!0,this.destination=new he(this,se,ce,pe)}}[Re.b](){return this}static create(se,ce,pe){const $e=new Me(se,ce,pe);return $e.syncErrorThrowable=!1,$e}next(se){this.isStopped||this._next(se)}error(se){this.isStopped||(this.isStopped=!0,this._error(se))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(se){this.destination.next(se)}_error(se){this.destination.error(se),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:se}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=se,this}}class he extends Me{constructor(se,ce,pe,$e){super(),this._parentSubscriber=se;let Ye,it=this;(0,T.m)(ce)?Ye=ce:ce&&(Ye=ce.next,pe=ce.error,$e=ce.complete,ce!==U.c&&(it=Object.create(ce),(0,T.m)(it.unsubscribe)&&this.add(it.unsubscribe.bind(it)),it.unsubscribe=this.unsubscribe.bind(this))),this._context=it,this._next=Ye,this._error=pe,this._complete=$e}next(se){if(!this.isStopped&&this._next){const{_parentSubscriber:ce}=this;Ae.v.useDeprecatedSynchronousErrorHandling&&ce.syncErrorThrowable?this.__tryOrSetError(ce,this._next,se)&&this.unsubscribe():this.__tryOrUnsub(this._next,se)}}error(se){if(!this.isStopped){const{_parentSubscriber:ce}=this,{useDeprecatedSynchronousErrorHandling:pe}=Ae.v;if(this._error)pe&&ce.syncErrorThrowable?(this.__tryOrSetError(ce,this._error,se),this.unsubscribe()):(this.__tryOrUnsub(this._error,se),this.unsubscribe());else if(ce.syncErrorThrowable)pe?(ce.syncErrorValue=se,ce.syncErrorThrown=!0):(0,de.z)(se),this.unsubscribe();else{if(this.unsubscribe(),pe)throw se;(0,de.z)(se)}}}complete(){if(!this.isStopped){const{_parentSubscriber:se}=this;if(this._complete){const ce=()=>this._complete.call(this._context);Ae.v.useDeprecatedSynchronousErrorHandling&&se.syncErrorThrowable?(this.__tryOrSetError(se,ce),this.unsubscribe()):(this.__tryOrUnsub(ce),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(se,ce){try{se.call(this._context,ce)}catch(pe){if(this.unsubscribe(),Ae.v.useDeprecatedSynchronousErrorHandling)throw pe;(0,de.z)(pe)}}__tryOrSetError(se,ce,pe){if(!Ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ce.call(this._context,pe)}catch($e){return Ae.v.useDeprecatedSynchronousErrorHandling?(se.syncErrorValue=$e,se.syncErrorThrown=!0,!0):((0,de.z)($e),!0)}return!1}_unsubscribe(){const{_parentSubscriber:se}=this;this._context=null,this._parentSubscriber=null,se.unsubscribe()}}},5319:(Ot,Ge,z)=>{"use strict";z.d(Ge,{w:()=>de});var T=z(9796),U=z(1555),ie=z(9105);const Ae=(()=>{function he(we){return Error.call(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((se,ce)=>`${ce+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we,this}return he.prototype=Object.create(Error.prototype),he})();class de{constructor(we){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,we&&(this._ctorUnsubscribe=!0,this._unsubscribe=we)}unsubscribe(){let we;if(this.closed)return;let{_parentOrParents:se,_ctorUnsubscribe:ce,_unsubscribe:pe,_subscriptions:$e}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,se instanceof de)se.remove(this);else if(null!==se)for(let Ye=0;Ye<se.length;++Ye)se[Ye].remove(this);if((0,ie.m)(pe)){ce&&(this._unsubscribe=void 0);try{pe.call(this)}catch(Ye){we=Ye instanceof Ae?Me(Ye.errors):[Ye]}}if((0,T.k)($e)){let Ye=-1,it=$e.length;for(;++Ye<it;){const ze=$e[Ye];if((0,U.K)(ze))try{ze.unsubscribe()}catch(Ct){we=we||[],Ct instanceof Ae?we=we.concat(Me(Ct.errors)):we.push(Ct)}}}if(we)throw new Ae(we)}add(we){let se=we;if(!we)return de.EMPTY;switch(typeof we){case"function":se=new de(we);case"object":if(se===this||se.closed||"function"!=typeof se.unsubscribe)return se;if(this.closed)return se.unsubscribe(),se;if(!(se instanceof de)){const $e=se;se=new de,se._subscriptions=[$e]}break;default:throw new Error("unrecognized teardown "+we+" added to Subscription.")}let{_parentOrParents:ce}=se;if(null===ce)se._parentOrParents=this;else if(ce instanceof de){if(ce===this)return se;se._parentOrParents=[ce,this]}else{if(-1!==ce.indexOf(this))return se;ce.push(this)}const pe=this._subscriptions;return null===pe?this._subscriptions=[se]:pe.push(se),se}remove(we){const se=this._subscriptions;if(se){const ce=se.indexOf(we);-1!==ce&&se.splice(ce,1)}}}var he;function Me(he){return he.reduce((we,se)=>we.concat(se instanceof Ae?se.errors:se),[])}de.EMPTY=((he=new de).closed=!0,he)},2494:(Ot,Ge,z)=>{"use strict";z.d(Ge,{v:()=>U});let T=!1;const U={Promise:void 0,set useDeprecatedSynchronousErrorHandling(ie){if(ie){const Re=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Re.stack)}else T&&console.log("RxJS: Back to a better error behavior. Thank you. <3");T=ie},get useDeprecatedSynchronousErrorHandling(){return T}}},5345:(Ot,Ge,z)=>{"use strict";z.d(Ge,{IY:()=>Re,Ds:()=>de,ft:()=>he});var T=z(7393),U=z(7574),ie=z(7444);class Re extends T.L{constructor(se){super(),this.parent=se}_next(se){this.parent.notifyNext(se)}_error(se){this.parent.notifyError(se),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class de extends T.L{notifyNext(se){this.destination.next(se)}notifyError(se){this.destination.error(se)}notifyComplete(){this.destination.complete()}}function he(we,se){if(se.closed)return;if(we instanceof U.y)return we.subscribe(se);let ce;try{ce=(0,ie.s)(we)(se)}catch(pe){se.error(pe)}return ce}},2441:(Ot,Ge,z)=>{"use strict";z.d(Ge,{c:()=>Ae,N:()=>de});var T=z(9765),U=z(7574),ie=z(5319),Re=z(1307);class Ae extends U.y{constructor(ce,pe){super(),this.source=ce,this.subjectFactory=pe,this._refCount=0,this._isComplete=!1}_subscribe(ce){return this.getSubject().subscribe(ce)}getSubject(){const ce=this._subject;return(!ce||ce.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ce=this._connection;return ce||(this._isComplete=!1,ce=this._connection=new ie.w,ce.add(this.source.subscribe(new Me(this.getSubject(),this))),ce.closed&&(this._connection=null,ce=ie.w.EMPTY)),ce}refCount(){return(0,Re.x)()(this)}}const de=(()=>{const se=Ae.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}}})();class Me extends T.Yc{constructor(ce,pe){super(ce),this.connectable=pe}_error(ce){this._unsubscribe(),super._error(ce)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ce=this.connectable;if(ce){this.connectable=null;const pe=ce._connection;ce._refCount=0,ce._subject=null,ce._connection=null,pe&&pe.unsubscribe()}}}},8071:(Ot,Ge,z)=>{"use strict";z.d(Ge,{z:()=>Re});var T=z(5917),U=z(3282);function Re(...Ae){return(0,U.J)(1)((0,T.of)(...Ae))}},9193:(Ot,Ge,z)=>{"use strict";z.d(Ge,{E:()=>U,c:()=>ie});var T=z(7574);const U=new T.y(Ae=>Ae.complete());function ie(Ae){return Ae?function(Ae){return new T.y(de=>Ae.schedule(()=>de.complete()))}(Ae):U}},4402:(Ot,Ge,z)=>{"use strict";z.d(Ge,{D:()=>it});var T=z(7574),U=z(7444),ie=z(5319),Re=z(6554),Me=z(4087),he=z(377),ce=z(4072),pe=z(9489);function it(ze,Ct){return Ct?function(ze,Ct){if(null!=ze){if(function(ze){return ze&&"function"==typeof ze[Re.L]}(ze))return function(ze,Ct){return new T.y(We=>{const Be=new ie.w;return Be.add(Ct.schedule(()=>{const Ce=ze[Re.L]();Be.add(Ce.subscribe({next(_t){Be.add(Ct.schedule(()=>We.next(_t)))},error(_t){Be.add(Ct.schedule(()=>We.error(_t)))},complete(){Be.add(Ct.schedule(()=>We.complete()))}}))})),Be})}(ze,Ct);if((0,ce.t)(ze))return function(ze,Ct){return new T.y(We=>{const Be=new ie.w;return Be.add(Ct.schedule(()=>ze.then(Ce=>{Be.add(Ct.schedule(()=>{We.next(Ce),Be.add(Ct.schedule(()=>We.complete()))}))},Ce=>{Be.add(Ct.schedule(()=>We.error(Ce)))}))),Be})}(ze,Ct);if((0,pe.z)(ze))return(0,Me.r)(ze,Ct);if(function(ze){return ze&&"function"==typeof ze[he.hZ]}(ze)||"string"==typeof ze)return function(ze,Ct){if(!ze)throw new Error("Iterable cannot be null");return new T.y(We=>{const Be=new ie.w;let Ce;return Be.add(()=>{Ce&&"function"==typeof Ce.return&&Ce.return()}),Be.add(Ct.schedule(()=>{Ce=ze[he.hZ](),Be.add(Ct.schedule(function(){if(We.closed)return;let _t,Wt;try{const nn=Ce.next();_t=nn.value,Wt=nn.done}catch(nn){return void We.error(nn)}Wt?We.complete():(We.next(_t),this.schedule())}))})),Be})}(ze,Ct)}throw new TypeError((null!==ze&&typeof ze||ze)+" is not observable")}(ze,Ct):ze instanceof T.y?ze:new T.y((0,U.s)(ze))}},6693:(Ot,Ge,z)=>{"use strict";z.d(Ge,{n:()=>Re});var T=z(7574),U=z(5015),ie=z(4087);function Re(Ae,de){return de?(0,ie.r)(Ae,de):new T.y((0,U.V)(Ae))}},6682:(Ot,Ge,z)=>{"use strict";z.d(Ge,{T:()=>Ae});var T=z(7574),U=z(4869),ie=z(3282),Re=z(6693);function Ae(...de){let Me=Number.POSITIVE_INFINITY,he=null,we=de[de.length-1];return(0,U.K)(we)?(he=de.pop(),de.length>1&&"number"==typeof de[de.length-1]&&(Me=de.pop())):"number"==typeof we&&(Me=de.pop()),null===he&&1===de.length&&de[0]instanceof T.y?de[0]:(0,ie.J)(Me)((0,Re.n)(de,he))}},5917:(Ot,Ge,z)=>{"use strict";z.d(Ge,{of:()=>Re});var T=z(4869),U=z(6693),ie=z(4087);function Re(...Ae){let de=Ae[Ae.length-1];return(0,T.K)(de)?(Ae.pop(),(0,ie.r)(Ae,de)):(0,U.n)(Ae)}},5242:(Ot,Ge,z)=>{"use strict";z.d(Ge,{d:()=>U});var T=z(7393);function U(Ae=null){return de=>de.lift(new ie(Ae))}class ie{constructor(de){this.defaultValue=de}call(de,Me){return Me.subscribe(new Re(de,this.defaultValue))}}class Re extends T.L{constructor(de,Me){super(de),this.defaultValue=Me,this.isEmpty=!0}_next(de){this.isEmpty=!1,this.destination.next(de)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(Ot,Ge,z)=>{"use strict";z.d(Ge,{x:()=>U});var T=z(7393);function U(Ae,de){return Me=>Me.lift(new ie(Ae,de))}class ie{constructor(de,Me){this.compare=de,this.keySelector=Me}call(de,Me){return Me.subscribe(new Re(de,this.compare,this.keySelector))}}class Re extends T.L{constructor(de,Me,he){super(de),this.keySelector=he,this.hasKey=!1,"function"==typeof Me&&(this.compare=Me)}compare(de,Me){return de===Me}_next(de){let Me;try{const{keySelector:we}=this;Me=we?we(de):de}catch(we){return this.destination.error(we)}let he=!1;if(this.hasKey)try{const{compare:we}=this;he=we(this.key,Me)}catch(we){return this.destination.error(we)}else this.hasKey=!0;he||(this.key=Me,this.destination.next(de))}}},5435:(Ot,Ge,z)=>{"use strict";z.d(Ge,{h:()=>U});var T=z(7393);function U(Ae,de){return function(he){return he.lift(new ie(Ae,de))}}class ie{constructor(de,Me){this.predicate=de,this.thisArg=Me}call(de,Me){return Me.subscribe(new Re(de,this.predicate,this.thisArg))}}class Re extends T.L{constructor(de,Me,he){super(de),this.predicate=Me,this.thisArg=he,this.count=0}_next(de){let Me;try{Me=this.predicate.call(this.thisArg,de,this.count++)}catch(he){return void this.destination.error(he)}Me&&this.destination.next(de)}}},8049:(Ot,Ge,z)=>{"use strict";z.d(Ge,{P:()=>Me});var T=z(3410),U=z(5435),ie=z(5257),Re=z(5242),Ae=z(4635),de=z(4487);function Me(he,we){const se=arguments.length>=2;return ce=>ce.pipe(he?(0,U.h)((pe,$e)=>he(pe,$e,ce)):de.y,(0,ie.q)(1),se?(0,Re.d)(we):(0,Ae.T)(()=>new T.K))}},8002:(Ot,Ge,z)=>{"use strict";z.d(Ge,{U:()=>U});var T=z(7393);function U(Ae,de){return function(he){if("function"!=typeof Ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return he.lift(new ie(Ae,de))}}class ie{constructor(de,Me){this.project=de,this.thisArg=Me}call(de,Me){return Me.subscribe(new Re(de,this.project,this.thisArg))}}class Re extends T.L{constructor(de,Me,he){super(de),this.project=Me,this.count=0,this.thisArg=he||this}_next(de){let Me;try{Me=this.project.call(this.thisArg,de,this.count++)}catch(he){return void this.destination.error(he)}this.destination.next(Me)}}},3282:(Ot,Ge,z)=>{"use strict";z.d(Ge,{J:()=>ie});var T=z(9773),U=z(4487);function ie(Re=Number.POSITIVE_INFINITY){return(0,T.zg)(U.y,Re)}},9773:(Ot,Ge,z)=>{"use strict";z.d(Ge,{zg:()=>Re});var T=z(8002),U=z(4402),ie=z(5345);function Re(he,we,se=Number.POSITIVE_INFINITY){return"function"==typeof we?ce=>ce.pipe(Re((pe,$e)=>(0,U.D)(he(pe,$e)).pipe((0,T.U)((Ye,it)=>we(pe,Ye,$e,it))),se)):("number"==typeof we&&(se=we),ce=>ce.lift(new Ae(he,se)))}class Ae{constructor(we,se=Number.POSITIVE_INFINITY){this.project=we,this.concurrent=se}call(we,se){return se.subscribe(new de(we,this.project,this.concurrent))}}class de extends ie.Ds{constructor(we,se,ce=Number.POSITIVE_INFINITY){super(we),this.project=se,this.concurrent=ce,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(we){this.active<this.concurrent?this._tryNext(we):this.buffer.push(we)}_tryNext(we){let se;const ce=this.index++;try{se=this.project(we,ce)}catch(pe){return void this.destination.error(pe)}this.active++,this._innerSub(se)}_innerSub(we){const se=new ie.IY(this),ce=this.destination;ce.add(se);const pe=(0,ie.ft)(we,se);pe!==se&&ce.add(pe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(we){this.destination.next(we)}notifyComplete(){const we=this.buffer;this.active--,we.length>0?this._next(we.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ot,Ge,z)=>{"use strict";z.d(Ge,{ht:()=>ce,QV:()=>we});var T=z(7393),U=z(9193),ie=z(5917),Re=z(7574);class he{constructor(Ye,it,ze){this.kind=Ye,this.value=it,this.error=ze,this.hasValue="N"===Ye}observe(Ye){switch(this.kind){case"N":return Ye.next&&Ye.next(this.value);case"E":return Ye.error&&Ye.error(this.error);case"C":return Ye.complete&&Ye.complete()}}do(Ye,it,ze){switch(this.kind){case"N":return Ye&&Ye(this.value);case"E":return it&&it(this.error);case"C":return ze&&ze()}}accept(Ye,it,ze){return Ye&&"function"==typeof Ye.next?this.observe(Ye):this.do(Ye,it,ze)}toObservable(){switch(this.kind){case"N":return(0,ie.of)(this.value);case"E":return $e=this.error,new Re.y(it=>it.error($e));case"C":return(0,U.c)()}var $e;throw new Error("unexpected notification kind value")}static createNext(Ye){return void 0!==Ye?new he("N",Ye):he.undefinedValueNotification}static createError(Ye){return new he("E",void 0,Ye)}static createComplete(){return he.completeNotification}}function we($e,Ye=0){return function(ze){return ze.lift(new se($e,Ye))}}he.completeNotification=new he("C"),he.undefinedValueNotification=new he("N",void 0);class se{constructor(Ye,it=0){this.scheduler=Ye,this.delay=it}call(Ye,it){return it.subscribe(new ce(Ye,this.scheduler,this.delay))}}class ce extends T.L{constructor(Ye,it,ze=0){super(Ye),this.scheduler=it,this.delay=ze}static dispatch(Ye){const{notification:it,destination:ze}=Ye;it.observe(ze),this.unsubscribe()}scheduleMessage(Ye){this.destination.add(this.scheduler.schedule(ce.dispatch,this.delay,new pe(Ye,this.destination)))}_next(Ye){this.scheduleMessage(he.createNext(Ye))}_error(Ye){this.scheduleMessage(he.createError(Ye)),this.unsubscribe()}_complete(){this.scheduleMessage(he.createComplete()),this.unsubscribe()}}class pe{constructor(Ye,it){this.notification=Ye,this.destination=it}}},1307:(Ot,Ge,z)=>{"use strict";z.d(Ge,{x:()=>U});var T=z(7393);function U(){return function(de){return de.lift(new ie(de))}}class ie{constructor(de){this.connectable=de}call(de,Me){const{connectable:he}=this;he._refCount++;const we=new Re(de,he),se=Me.subscribe(we);return we.closed||(we.connection=he.connect()),se}}class Re extends T.L{constructor(de,Me){super(de),this.connectable=Me}_unsubscribe(){const{connectable:de}=this;if(!de)return void(this.connection=null);this.connectable=null;const Me=de._refCount;if(Me<=0)return void(this.connection=null);if(de._refCount=Me-1,Me>1)return void(this.connection=null);const{connection:he}=this,we=de._connection;this.connection=null,we&&(!he||we===he)&&we.unsubscribe()}}},2145:(Ot,Ge,z)=>{"use strict";z.d(Ge,{R:()=>U});var T=z(7393);function U(Ae,de){let Me=!1;return arguments.length>=2&&(Me=!0),function(we){return we.lift(new ie(Ae,de,Me))}}class ie{constructor(de,Me,he=!1){this.accumulator=de,this.seed=Me,this.hasSeed=he}call(de,Me){return Me.subscribe(new Re(de,this.accumulator,this.seed,this.hasSeed))}}class Re extends T.L{constructor(de,Me,he,we){super(de),this.accumulator=Me,this._seed=he,this.hasSeed=we,this.index=0}get seed(){return this._seed}set seed(de){this.hasSeed=!0,this._seed=de}_next(de){if(this.hasSeed)return this._tryNext(de);this.seed=de,this.destination.next(de)}_tryNext(de){const Me=this.index++;let he;try{he=this.accumulator(this.seed,de,Me)}catch(we){this.destination.error(we)}this.seed=he,this.destination.next(he)}}},8819:(Ot,Ge,z)=>{"use strict";z.d(Ge,{B:()=>Me});var T=z(2441);var Re=z(1307),Ae=z(9765);function de(){return new Ae.xQ}function Me(){return he=>(0,Re.x)()(function(he,we){return function(ce){let pe;pe="function"==typeof he?he:function(){return he};const $e=Object.create(ce,T.N);return $e.source=ce,$e.subjectFactory=pe,$e}}(de)(he))}},9761:(Ot,Ge,z)=>{"use strict";z.d(Ge,{O:()=>ie});var T=z(8071),U=z(4869);function ie(...Re){const Ae=Re[Re.length-1];return(0,U.K)(Ae)?(Re.pop(),de=>(0,T.z)(Re,de,Ae)):de=>(0,T.z)(Re,de)}},3101:(Ot,Ge,z)=>{"use strict";z.d(Ge,{R:()=>Ct});var T=z(7574);let U=1;const ie=Promise.resolve(),Re={};function Ae(Be){return Be in Re&&(delete Re[Be],!0)}const de={setImmediate(Be){const Ce=U++;return Re[Ce]=!0,ie.then(()=>Ae(Ce)&&Be()),Ce},clearImmediate(Be){Ae(Be)}};var he=z(6465),se=z(6102);const $e=new class extends se.v{flush(Ce){this.active=!0,this.scheduled=void 0;const{actions:_t}=this;let Wt,nn=-1,St=_t.length;Ce=Ce||_t.shift();do{if(Wt=Ce.execute(Ce.state,Ce.delay))break}while(++nn<St&&(Ce=_t.shift()));if(this.active=!1,Wt){for(;++nn<St&&(Ce=_t.shift());)Ce.unsubscribe();throw Wt}}}(class extends he.o{constructor(Ce,_t){super(Ce,_t),this.scheduler=Ce,this.work=_t}requestAsyncId(Ce,_t,Wt=0){return null!==Wt&&Wt>0?super.requestAsyncId(Ce,_t,Wt):(Ce.actions.push(this),Ce.scheduled||(Ce.scheduled=de.setImmediate(Ce.flush.bind(Ce,null))))}recycleAsyncId(Ce,_t,Wt=0){if(null!==Wt&&Wt>0||null===Wt&&this.delay>0)return super.recycleAsyncId(Ce,_t,Wt);0===Ce.actions.length&&(de.clearImmediate(_t),Ce.scheduled=void 0)}});var Ye=z(9796);class ze extends T.y{constructor(Ce,_t=0,Wt=$e){var Be;super(),this.source=Ce,this.delayTime=_t,this.scheduler=Wt,(!(!(0,Ye.k)(Be=_t)&&Be-parseFloat(Be)+1>=0)||_t<0)&&(this.delayTime=0),(!Wt||"function"!=typeof Wt.schedule)&&(this.scheduler=$e)}static create(Ce,_t=0,Wt=$e){return new ze(Ce,_t,Wt)}static dispatch(Ce){const{source:_t,subscriber:Wt}=Ce;return this.add(_t.subscribe(Wt))}_subscribe(Ce){return this.scheduler.schedule(ze.dispatch,this.delayTime,{source:this.source,subscriber:Ce})}}function Ct(Be,Ce=0){return function(Wt){return Wt.lift(new We(Be,Ce))}}class We{constructor(Ce,_t){this.scheduler=Ce,this.delay=_t}call(Ce,_t){return new ze(_t,this.delay,this.scheduler).subscribe(Ce)}}},3190:(Ot,Ge,z)=>{"use strict";z.d(Ge,{w:()=>Re});var T=z(8002),U=z(4402),ie=z(5345);function Re(Me,he){return"function"==typeof he?we=>we.pipe(Re((se,ce)=>(0,U.D)(Me(se,ce)).pipe((0,T.U)((pe,$e)=>he(se,pe,ce,$e))))):we=>we.lift(new Ae(Me))}class Ae{constructor(he){this.project=he}call(he,we){return we.subscribe(new de(he,this.project))}}class de extends ie.Ds{constructor(he,we){super(he),this.project=we,this.index=0}_next(he){let we;const se=this.index++;try{we=this.project(he,se)}catch(ce){return void this.destination.error(ce)}this._innerSub(we)}_innerSub(he){const we=this.innerSubscription;we&&we.unsubscribe();const se=new ie.IY(this),ce=this.destination;ce.add(se),this.innerSubscription=(0,ie.ft)(he,se),this.innerSubscription!==se&&ce.add(this.innerSubscription)}_complete(){const{innerSubscription:he}=this;(!he||he.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(he){this.destination.next(he)}}},5257:(Ot,Ge,z)=>{"use strict";z.d(Ge,{q:()=>Re});var T=z(7393),U=z(7108),ie=z(9193);function Re(Me){return he=>0===Me?(0,ie.c)():he.lift(new Ae(Me))}class Ae{constructor(he){if(this.total=he,this.total<0)throw new U.W}call(he,we){return we.subscribe(new de(he,this.total))}}class de extends T.L{constructor(he,we){super(he),this.total=we,this.count=0}_next(he){const we=this.total,se=++this.count;se<=we&&(this.destination.next(he),se===we&&(this.destination.complete(),this.unsubscribe()))}}},3342:(Ot,Ge,z)=>{"use strict";z.d(Ge,{b:()=>Re});var T=z(7393);function U(){}var ie=z(9105);function Re(Me,he,we){return function(ce){return ce.lift(new Ae(Me,he,we))}}class Ae{constructor(he,we,se){this.nextOrObserver=he,this.error=we,this.complete=se}call(he,we){return we.subscribe(new de(he,this.nextOrObserver,this.error,this.complete))}}class de extends T.L{constructor(he,we,se,ce){super(he),this._tapNext=U,this._tapError=U,this._tapComplete=U,this._tapError=se||U,this._tapComplete=ce||U,(0,ie.m)(we)?(this._context=this,this._tapNext=we):we&&(this._context=we,this._tapNext=we.next||U,this._tapError=we.error||U,this._tapComplete=we.complete||U)}_next(he){try{this._tapNext.call(this._context,he)}catch(we){return void this.destination.error(we)}this.destination.next(he)}_error(he){try{this._tapError.call(this._context,he)}catch(we){return void this.destination.error(we)}this.destination.error(he)}_complete(){try{this._tapComplete.call(this._context)}catch(he){return void this.destination.error(he)}return this.destination.complete()}}},4635:(Ot,Ge,z)=>{"use strict";z.d(Ge,{T:()=>ie});var T=z(3410),U=z(7393);function ie(Me=de){return he=>he.lift(new Re(Me))}class Re{constructor(he){this.errorFactory=he}call(he,we){return we.subscribe(new Ae(he,this.errorFactory))}}class Ae extends U.L{constructor(he,we){super(he),this.errorFactory=we,this.hasValue=!1}_next(he){this.hasValue=!0,this.destination.next(he)}_complete(){if(this.hasValue)return this.destination.complete();{let he;try{he=this.errorFactory()}catch(we){he=we}this.destination.error(he)}}}function de(){return new T.K}},4087:(Ot,Ge,z)=>{"use strict";z.d(Ge,{r:()=>ie});var T=z(7574),U=z(5319);function ie(Re,Ae){return new T.y(de=>{const Me=new U.w;let he=0;return Me.add(Ae.schedule(function(){he!==Re.length?(de.next(Re[he++]),de.closed||Me.add(this.schedule())):de.complete()})),Me})}},6465:(Ot,Ge,z)=>{"use strict";z.d(Ge,{o:()=>ie});var T=z(5319);class U extends T.w{constructor(Ae,de){super()}schedule(Ae,de=0){return this}}class ie extends U{constructor(Ae,de){super(Ae,de),this.scheduler=Ae,this.work=de,this.pending=!1}schedule(Ae,de=0){if(this.closed)return this;this.state=Ae;const Me=this.id,he=this.scheduler;return null!=Me&&(this.id=this.recycleAsyncId(he,Me,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(he,this.id,de),this}requestAsyncId(Ae,de,Me=0){return setInterval(Ae.flush.bind(Ae,this),Me)}recycleAsyncId(Ae,de,Me=0){if(null!==Me&&this.delay===Me&&!1===this.pending)return de;clearInterval(de)}execute(Ae,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(Ae,de);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,de){let he,Me=!1;try{this.work(Ae)}catch(we){Me=!0,he=!!we&&we||new Error(we)}if(Me)return this.unsubscribe(),he}_unsubscribe(){const Ae=this.id,de=this.scheduler,Me=de.actions,he=Me.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==he&&Me.splice(he,1),null!=Ae&&(this.id=this.recycleAsyncId(de,Ae,null)),this.delay=null}}},6102:(Ot,Ge,z)=>{"use strict";z.d(Ge,{v:()=>U});let T=(()=>{class ie{constructor(Ae,de=ie.now){this.SchedulerAction=Ae,this.now=de}schedule(Ae,de=0,Me){return new this.SchedulerAction(this,Ae).schedule(Me,de)}}return ie.now=()=>Date.now(),ie})();class U extends T{constructor(Re,Ae=T.now){super(Re,()=>U.delegate&&U.delegate!==this?U.delegate.now():Ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Re,Ae=0,de){return U.delegate&&U.delegate!==this?U.delegate.schedule(Re,Ae,de):super.schedule(Re,Ae,de)}flush(Re){const{actions:Ae}=this;if(this.active)return void Ae.push(Re);let de;this.active=!0;do{if(de=Re.execute(Re.state,Re.delay))break}while(Re=Ae.shift());if(this.active=!1,de){for(;Re=Ae.shift();)Re.unsubscribe();throw de}}}},3637:(Ot,Ge,z)=>{"use strict";z.d(Ge,{z:()=>ie,P:()=>Re});var T=z(6465);const ie=new(z(6102).v)(T.o),Re=ie},7771:(Ot,Ge,z)=>{"use strict";z.d(Ge,{c:()=>de,N:()=>Ae});var T=z(6465),ie=z(6102);const Ae=new class extends ie.v{}(class extends T.o{constructor(he,we){super(he,we),this.scheduler=he,this.work=we}schedule(he,we=0){return we>0?super.schedule(he,we):(this.delay=we,this.state=he,this.scheduler.flush(this),this)}execute(he,we){return we>0||this.closed?super.execute(he,we):this._execute(he,we)}requestAsyncId(he,we,se=0){return null!==se&&se>0||null===se&&this.delay>0?super.requestAsyncId(he,we,se):he.flush(this)}}),de=Ae},377:(Ot,Ge,z)=>{"use strict";z.d(Ge,{hZ:()=>U});const U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ot,Ge,z)=>{"use strict";z.d(Ge,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ot,Ge,z)=>{"use strict";z.d(Ge,{b:()=>T});const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(Ot,Ge,z)=>{"use strict";z.d(Ge,{W:()=>U});const U=(()=>{function ie(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ie.prototype=Object.create(Error.prototype),ie})()},3410:(Ot,Ge,z)=>{"use strict";z.d(Ge,{K:()=>U});const U=(()=>{function ie(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return ie.prototype=Object.create(Error.prototype),ie})()},7971:(Ot,Ge,z)=>{"use strict";z.d(Ge,{N:()=>U});const U=(()=>{function ie(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ie.prototype=Object.create(Error.prototype),ie})()},4449:(Ot,Ge,z)=>{"use strict";function T(U){setTimeout(()=>{throw U},0)}z.d(Ge,{z:()=>T})},4487:(Ot,Ge,z)=>{"use strict";function T(U){return U}z.d(Ge,{y:()=>T})},9796:(Ot,Ge,z)=>{"use strict";z.d(Ge,{k:()=>T});const T=Array.isArray||(U=>U&&"number"==typeof U.length)},9489:(Ot,Ge,z)=>{"use strict";z.d(Ge,{z:()=>T});const T=U=>U&&"number"==typeof U.length&&"function"!=typeof U},9105:(Ot,Ge,z)=>{"use strict";function T(U){return"function"==typeof U}z.d(Ge,{m:()=>T})},1555:(Ot,Ge,z)=>{"use strict";function T(U){return null!==U&&"object"==typeof U}z.d(Ge,{K:()=>T})},4072:(Ot,Ge,z)=>{"use strict";function T(U){return!!U&&"function"!=typeof U.subscribe&&"function"==typeof U.then}z.d(Ge,{t:()=>T})},4869:(Ot,Ge,z)=>{"use strict";function T(U){return U&&"function"==typeof U.schedule}z.d(Ge,{K:()=>T})},7444:(Ot,Ge,z)=>{"use strict";z.d(Ge,{s:()=>ce});var T=z(5015),U=z(4449),Re=z(377),de=z(6554),he=z(9489),we=z(4072),se=z(1555);const ce=pe=>{if(pe&&"function"==typeof pe[de.L])return(pe=>$e=>{const Ye=pe[de.L]();if("function"!=typeof Ye.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ye.subscribe($e)})(pe);if((0,he.z)(pe))return(0,T.V)(pe);if((0,we.t)(pe))return(pe=>$e=>(pe.then(Ye=>{$e.closed||($e.next(Ye),$e.complete())},Ye=>$e.error(Ye)).then(null,U.z),$e))(pe);if(pe&&"function"==typeof pe[Re.hZ])return(pe=>$e=>{const Ye=pe[Re.hZ]();for(;;){let it;try{it=Ye.next()}catch(ze){return $e.error(ze),$e}if(it.done){$e.complete();break}if($e.next(it.value),$e.closed)break}return"function"==typeof Ye.return&&$e.add(()=>{Ye.return&&Ye.return()}),$e})(pe);{const Ye=`You provided ${(0,se.K)(pe)?"an invalid object":`'${pe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ye)}}},5015:(Ot,Ge,z)=>{"use strict";z.d(Ge,{V:()=>T});const T=U=>ie=>{for(let Re=0,Ae=U.length;Re<Ae&&!ie.closed;Re++)ie.next(U[Re]);ie.complete()}},509:(Ot,Ge,z)=>{"use strict";z.d(Ge,{D:()=>Ae});var T=z(7393);class U extends T.L{constructor(Me,he,we){super(),this.parent=Me,this.outerValue=he,this.outerIndex=we,this.index=0}_next(Me){this.parent.notifyNext(this.outerValue,Me,this.outerIndex,this.index++,this)}_error(Me){this.parent.notifyError(Me,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ie=z(7444),Re=z(7574);function Ae(de,Me,he,we,se=new U(de,he,we)){if(!se.closed)return Me instanceof Re.y?Me.subscribe(se):(0,ie.s)(Me)(se)}},5160:(Ot,Ge,z)=>{"use strict";var T=z(8583),U=z(7716);class ie extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Re extends ie{static makeCurrent(){(0,T.HT)(new Re)}onAndCancel(o,l,f){return o.addEventListener(l,f,!1),()=>{o.removeEventListener(l,f,!1)}}dispatchEvent(o,l){o.dispatchEvent(l)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,l){return(l=l||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,l){return"window"===l?window:"document"===l?o:"body"===l?o.body:null}getBaseHref(o){const l=(Ae=Ae||document.querySelector("base"),Ae?Ae.getAttribute("href"):null);return null==l?null:function(c){Me=Me||document.createElement("a"),Me.setAttribute("href",c);const o=Me.pathname;return"/"===o.charAt(0)?o:`/${o}`}(l)}resetBaseElement(){Ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return(0,T.Mx)(document.cookie,o)}}let Me,Ae=null;const we=new U.OlP("TRANSITION_ID"),ce=[{provide:U.ip1,useFactory:function(c,o,l){return()=>{l.get(U.CZH).donePromise.then(()=>{const f=(0,T.q)(),y=o.querySelectorAll(`style[ng-transition="${c}"]`);for(let D=0;D<y.length;D++)f.remove(y[D])})}},deps:[we,T.K0,U.zs3],multi:!0}];class pe{static init(){(0,U.VLi)(new pe)}addToWindow(o){U.dqk.getAngularTestability=(f,y=!0)=>{const D=o.findTestabilityInTree(f,y);if(null==D)throw new Error("Could not find testability for element.");return D},U.dqk.getAllAngularTestabilities=()=>o.getAllTestabilities(),U.dqk.getAllAngularRootElements=()=>o.getAllRootElements(),U.dqk.frameworkStabilizers||(U.dqk.frameworkStabilizers=[]),U.dqk.frameworkStabilizers.push(f=>{const y=U.dqk.getAllAngularTestabilities();let D=y.length,M=!1;const K=function(X){M=M||X,D--,0==D&&f(M)};y.forEach(function(X){X.whenStable(K)})})}findTestabilityInTree(o,l,f){if(null==l)return null;const y=o.getTestability(l);return null!=y?y:f?(0,T.q)().isShadowRoot(l)?this.findTestabilityInTree(o,l.host,!0):this.findTestabilityInTree(o,l.parentElement,!0):null}}let $e=(()=>{class c{build(){return new XMLHttpRequest}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();const ot=new U.OlP("EventManagerPlugins");let Mt=(()=>{class c{constructor(l,f){this._zone=f,this._eventNameToPlugin=new Map,l.forEach(y=>y.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,f,y){return this._findPluginFor(f).addEventListener(l,f,y)}addGlobalEventListener(l,f,y){return this._findPluginFor(f).addGlobalEventListener(l,f,y)}getZone(){return this._zone}_findPluginFor(l){const f=this._eventNameToPlugin.get(l);if(f)return f;const y=this._plugins;for(let D=0;D<y.length;D++){const M=y[D];if(M.supports(l))return this._eventNameToPlugin.set(l,M),M}throw new Error(`No event manager plugin found for event ${l}`)}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(ot),U.LFG(U.R0b))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();class Jt{constructor(o){this._doc=o}addGlobalEventListener(o,l,f){const y=(0,T.q)().getGlobalEventTarget(this._doc,o);if(!y)throw new Error(`Unsupported event target ${y} for event ${l}`);return this.addEventListener(y,l,f)}}let It=(()=>{class c{constructor(){this._stylesSet=new Set}addStyles(l){const f=new Set;l.forEach(y=>{this._stylesSet.has(y)||(this._stylesSet.add(y),f.add(y))}),this.onStylesAdded(f)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})(),ur=(()=>{class c extends It{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,f,y){l.forEach(D=>{const M=this._doc.createElement("style");M.textContent=D,y.push(f.appendChild(M))})}addHost(l){const f=[];this._addStylesToHost(this._stylesSet,l,f),this._hostNodes.set(l,f)}removeHost(l){const f=this._hostNodes.get(l);f&&f.forEach(Vr),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((f,y)=>{this._addStylesToHost(l,y,f)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(Vr))}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(T.K0))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();function Vr(c){(0,T.q)().remove(c)}const Ur={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ni=/%COMP%/g;function Bt(c,o,l){for(let f=0;f<o.length;f++){let y=o[f];Array.isArray(y)?Bt(c,y,l):(y=y.replace(ni,c),l.push(y))}return l}function an(c){return o=>{if("__ngUnwrap__"===o)return c;!1===c(o)&&(o.preventDefault(),o.returnValue=!1)}}let gr=(()=>{class c{constructor(l,f,y){this.eventManager=l,this.sharedStylesHost=f,this.appId=y,this.rendererByCompId=new Map,this.defaultRenderer=new _n(l)}createRenderer(l,f){if(!l||!f)return this.defaultRenderer;switch(f.encapsulation){case U.ifc.Emulated:{let y=this.rendererByCompId.get(f.id);return y||(y=new Mn(this.eventManager,this.sharedStylesHost,f,this.appId),this.rendererByCompId.set(f.id,y)),y.applyToHost(l),y}case 1:case U.ifc.ShadowDom:return new et(this.eventManager,this.sharedStylesHost,l,f);default:if(!this.rendererByCompId.has(f.id)){const y=Bt(f.id,f.styles,[]);this.sharedStylesHost.addStyles(y),this.rendererByCompId.set(f.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(Mt),U.LFG(ur),U.LFG(U.AFp))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();class _n{constructor(o){this.eventManager=o,this.data=Object.create(null)}destroy(){}createElement(o,l){return l?document.createElementNS(Ur[l]||l,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,l){o.appendChild(l)}insertBefore(o,l,f){o&&o.insertBefore(l,f)}removeChild(o,l){o&&o.removeChild(l)}selectRootElement(o,l){let f="string"==typeof o?document.querySelector(o):o;if(!f)throw new Error(`The selector "${o}" did not match any elements`);return l||(f.textContent=""),f}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,l,f,y){if(y){l=y+":"+l;const D=Ur[y];D?o.setAttributeNS(D,l,f):o.setAttribute(l,f)}else o.setAttribute(l,f)}removeAttribute(o,l,f){if(f){const y=Ur[f];y?o.removeAttributeNS(y,l):o.removeAttribute(`${f}:${l}`)}else o.removeAttribute(l)}addClass(o,l){o.classList.add(l)}removeClass(o,l){o.classList.remove(l)}setStyle(o,l,f,y){y&(U.JOm.DashCase|U.JOm.Important)?o.style.setProperty(l,f,y&U.JOm.Important?"important":""):o.style[l]=f}removeStyle(o,l,f){f&U.JOm.DashCase?o.style.removeProperty(l):o.style[l]=""}setProperty(o,l,f){o[l]=f}setValue(o,l){o.nodeValue=l}listen(o,l,f){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,l,an(f)):this.eventManager.addEventListener(o,l,an(f))}}class Mn extends _n{constructor(o,l,f,y){super(o),this.component=f;const D=Bt(y+"-"+f.id,f.styles,[]);l.addStyles(D),this.contentAttr="_ngcontent-%COMP%".replace(ni,y+"-"+f.id),this.hostAttr="_nghost-%COMP%".replace(ni,y+"-"+f.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,l){const f=super.createElement(o,l);return super.setAttribute(f,this.contentAttr,""),f}}class et extends _n{constructor(o,l,f,y){super(o),this.sharedStylesHost=l,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=Bt(y.id,y.styles,[]);for(let M=0;M<D.length;M++){const K=document.createElement("style");K.textContent=D[M],this.shadowRoot.appendChild(K)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,l){return super.appendChild(this.nodeOrShadowRoot(o),l)}insertBefore(o,l,f){return super.insertBefore(this.nodeOrShadowRoot(o),l,f)}removeChild(o,l){return super.removeChild(this.nodeOrShadowRoot(o),l)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let un=(()=>{class c extends Jt{constructor(l){super(l)}supports(l){return!0}addEventListener(l,f,y){return l.addEventListener(f,y,!1),()=>this.removeEventListener(l,f,y)}removeEventListener(l,f,y){return l.removeEventListener(f,y)}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(T.K0))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();const Yn=["alt","control","meta","shift"],rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qr={alt:c=>c.altKey,control:c=>c.ctrlKey,meta:c=>c.metaKey,shift:c=>c.shiftKey};let Dn=(()=>{class c extends Jt{constructor(l){super(l)}supports(l){return null!=c.parseEventName(l)}addEventListener(l,f,y){const D=c.parseEventName(f),M=c.eventCallback(D.fullKey,y,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(l,D.domEventName,M))}static parseEventName(l){const f=l.toLowerCase().split("."),y=f.shift();if(0===f.length||"keydown"!==y&&"keyup"!==y)return null;const D=c._normalizeKey(f.pop());let M="";if(Yn.forEach(X=>{const ue=f.indexOf(X);ue>-1&&(f.splice(ue,1),M+=X+".")}),M+=D,0!=f.length||0===D.length)return null;const K={};return K.domEventName=y,K.fullKey=M,K}static getEventFullKey(l){let f="",y=function(c){let o=c.key;if(null==o){if(o=c.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===c.location&&xi.hasOwnProperty(o)&&(o=xi[o]))}return rn[o]||o}(l);return y=y.toLowerCase()," "===y?y="space":"."===y&&(y="dot"),Yn.forEach(D=>{D!=y&&qr[D](l)&&(f+=D+".")}),f+=y,f}static eventCallback(l,f,y){return D=>{c.getEventFullKey(D)===l&&y.runGuarded(()=>f(D))}}static _normalizeKey(l){return"esc"===l?"escape":l}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(T.K0))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();const Cn=(0,U.eFA)(U._c5,"browser",[{provide:U.Lbi,useValue:T.bD},{provide:U.g9A,useValue:function(){Re.makeCurrent(),pe.init()},multi:!0},{provide:T.K0,useFactory:function(){return(0,U.RDi)(document),document},deps:[]}]),ii=[[],{provide:U.zSh,useValue:"root"},{provide:U.qLn,useFactory:function(){return new U.qLn},deps:[]},{provide:ot,useClass:un,multi:!0,deps:[T.K0,U.R0b,U.Lbi]},{provide:ot,useClass:Dn,multi:!0,deps:[T.K0]},[],{provide:gr,useClass:gr,deps:[Mt,ur,U.AFp]},{provide:U.FYo,useExisting:gr},{provide:It,useExisting:ur},{provide:ur,useClass:ur,deps:[T.K0]},{provide:U.dDg,useClass:U.dDg,deps:[U.R0b]},{provide:Mt,useClass:Mt,deps:[ot,U.R0b]},{provide:T.JF,useClass:$e,deps:[]},[]];let Ni=(()=>{class c{constructor(l){if(l)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(l){return{ngModule:c,providers:[{provide:U.AFp,useValue:l.appId},{provide:we,useExisting:U.AFp},ce]}}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(c,12))},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({providers:ii,imports:[T.ez,U.hGG]}),c})();"undefined"!=typeof window&&window;var Dr=z(5002);const Ei=[{path:"",name:"Inicio"},{path:"about-me",name:"Acerca de m\xed"},{path:"projects",name:"Proyectos"},{path:"contact-me",name:"Contacto"}],gs=function(){return{exact:!0}};function Pi(c,o){if(1&c&&(U.TgZ(0,"a",7),U._uU(1),U.qZA()),2&c){const l=o.$implicit;U.Q6J("routerLink",l.path)("routerLinkActiveOptions",U.DdM(3,gs)),U.xp6(1),U.hij(" ",l.name," ")}}function Ts(c,o){if(1&c){const l=U.EpF();U.TgZ(0,"a",10),U.NdJ("click",function(){return U.CHM(l),U.oxw(2).toggleNavbar()}),U._uU(1),U.qZA()}if(2&c){const l=o.$implicit;U.Q6J("routerLink",l.path)("routerLinkActiveOptions",U.DdM(3,gs)),U.xp6(1),U.hij(" ",l.name," ")}}function Oi(c,o){if(1&c&&(U.TgZ(0,"nav",8),U.YNc(1,Ts,2,4,"a",9),U.qZA()),2&c){const l=U.oxw();U.xp6(1),U.Q6J("ngForOf",l.navItems)}}let ki=(()=>{class c{constructor(){this.isNavbarActive=!1}get navItems(){return Ei}toggleNavbar(){this.isNavbarActive=!this.isNavbarActive}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=U.Xpm({type:c,selectors:[["layout-header"]],decls:9,vars:2,consts:[[1,"title"],[1,"dev-name"],[1,"burger-btn",3,"click"],["src","./assets/burger-button.png","alt","burger-button"],[1,"navbar-web"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],["class","navbar-mb",4,"ngIf"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],[1,"navbar-mb"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions","click",4,"ngFor","ngForOf"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions","click"]],template:function(l,f){1&l&&(U.TgZ(0,"header"),U.TgZ(1,"div",0),U.TgZ(2,"p",1),U._uU(3,"Juan Eneque"),U.qZA(),U.qZA(),U.TgZ(4,"div",2),U.NdJ("click",function(){return f.toggleNavbar()}),U._UZ(5,"img",3),U.qZA(),U.TgZ(6,"nav",4),U.YNc(7,Pi,2,4,"a",5),U.qZA(),U.qZA(),U.YNc(8,Oi,2,1,"nav",6)),2&l&&(U.xp6(7),U.Q6J("ngForOf",f.navItems),U.xp6(1),U.Q6J("ngIf",f.isNavbarActive))},directives:[T.sg,T.O5,Dr.yS,Dr.Od],styles:["header[_ngcontent-%COMP%]{padding:5px;display:grid;align-items:center;grid-template-columns:1fr 60px}@media (min-width: 600px){header[_ngcontent-%COMP%]{grid-template-columns:auto 1fr}}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .dev-icon[_ngcontent-%COMP%]{height:40px;margin:0 5px}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .dev-name[_ngcontent-%COMP%]{margin-left:10px}header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]{display:none;justify-self:right}@media (min-width: 600px){header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]{display:flex}}header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;color:#3c9d93;text-decoration:none;padding:14px 16px}header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:600;color:#fff}header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{font-weight:600}header[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]{display:flex;cursor:pointer;margin:auto;align-items:center;justify-content:center;background-color:#3c9d93;border-radius:5px;height:35px;width:35px}@media (min-width: 600px){header[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]{display:none}}.navbar-mb[_ngcontent-%COMP%]{background-color:#12293d;position:absolute;z-index:1;width:calc(100% - 18px);border-bottom-left-radius:12px;border-bottom-right-radius:12px}.navbar-mb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-size:14px;color:#84c5bf;text-decoration:none;padding:14px 16px;border-bottom:1px solid #19443b}.navbar-mb[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:600;color:#fff}"]}),c})();const Sn_socialNetwork={linkedin:"https://www.linkedin.com/in/juan-rolando-eneque-pisfil/",github:"https://github.com/JuanSW18"},Sn_firebase={projectId:"portafolio-6640d",appId:"1:428134195571:web:36ccccffbe1d27b246a506",storageBucket:"portafolio-6640d.appspot.com",locationId:"us-central",apiKey:"AIzaSyCRCZ6gmGDAcmHk_j-jG-oxNWOLynrVrH0",authDomain:"portafolio-6640d.firebaseapp.com",messagingSenderId:"428134195571"};let Do=(()=>{class c{constructor(){}openSocialNetwork(l){const y=Object.create(Sn_socialNetwork)[l];window.open(y,"_blank")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=U.Xpm({type:c,selectors:[["layout-footer"]],decls:9,vars:0,consts:[[1,"logo-box",3,"click"],["src","./assets/linkedin-logoz.png","alt","linkedin-logo",1,"logo-img"],[1,"logo-name"],["src","./assets/github-logoz.png","alt","github-logo",1,"logo-img"]],template:function(l,f){1&l&&(U.TgZ(0,"footer"),U.TgZ(1,"div",0),U.NdJ("click",function(){return f.openSocialNetwork("linkedin")}),U._UZ(2,"img",1),U.TgZ(3,"p",2),U._uU(4,"LinkedIn"),U.qZA(),U.qZA(),U.TgZ(5,"div",0),U.NdJ("click",function(){return f.openSocialNetwork("github")}),U._UZ(6,"img",3),U.TgZ(7,"p",2),U._uU(8,"Github"),U.qZA(),U.qZA(),U.qZA())},styles:["footer[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px}footer[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]{cursor:pointer;display:block;text-align:center;margin:20px}footer[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]   .logo-name[_ngcontent-%COMP%]{font-size:12px;margin:2px 0 0;color:#fff}footer[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:24px;margin:0 5px}"]}),c})();const wi=[{path:"",component:(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=U.Xpm({type:c,selectors:[["layout-main-container"]],decls:4,vars:0,consts:[[1,"main-container"]],template:function(l,f){1&l&&(U._UZ(0,"layout-header"),U.TgZ(1,"div",0),U._UZ(2,"router-outlet"),U.qZA(),U._UZ(3,"layout-footer"))},directives:[ki,Dr.lC,Do],styles:[".main-container[_ngcontent-%COMP%]{display:block;min-height:calc(90vh - 20vh);border-top:1px solid #19443b;border-bottom:1px solid #19443b}@media (min-width: 600px){.main-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;min-height:calc(90vh - 20vh)}}"]}),c})(),children:[{path:"",pathMatch:"full",loadChildren:()=>z.e(257).then(z.bind(z,4257)).then(c=>c.WelcomeModule)},{path:"about-me",loadChildren:()=>z.e(347).then(z.bind(z,347)).then(c=>c.AboutMeModule)},{path:"projects",loadChildren:()=>z.e(560).then(z.bind(z,9560)).then(c=>c.ProjectsModule)},{path:"contact-me",loadChildren:()=>z.e(273).then(z.bind(z,9273)).then(c=>c.ContactMeModule)}]}];let ao=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({imports:[[Dr.Bz.forRoot(wi,{useHash:!0})],Dr.Bz]}),c})(),ss=(()=>{class c{constructor(){this.title="portafolio"}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=U.Xpm({type:c,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(l,f){1&l&&(U.TgZ(0,"div",0),U._UZ(1,"router-outlet"),U.qZA())},directives:[Dr.lC],styles:[".container[_ngcontent-%COMP%]{min-height:90vh;background-image:url(background-blurs.519a47ec5aee2c1446f0.png);background-position:center;background-repeat:no-repeat;background-size:cover;border-radius:12px;border:1px solid #19443b}"]}),c})();var gi=z(665);let oi=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({imports:[[T.ez,gi.u5,gi.UX]]}),c})();var lr=z(8939),Ys=z(7574),ms=z(5917),Kr=z(4402),Xn=z(7393),Qs=z(3637);class Gr{constructor(o,l){this.dueTime=o,this.scheduler=l}call(o,l){return l.subscribe(new Fi(o,this.dueTime,this.scheduler))}}class Fi extends Xn.L{constructor(o,l,f){super(o),this.dueTime=l,this.scheduler=f,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(o){this.clearDebounce(),this.lastValue=o,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ao,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:o}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(o)}}clearDebounce(){const o=this.debouncedSubscription;null!==o&&(this.remove(o),o.unsubscribe(),this.debouncedSubscription=null)}}function Ao(c){c.debouncedNext()}var xe=z(8002),Te=z(3190),Ve=z(6913),tt=z(3394),Et=z(8239),kt=z(8026),re=z(3854),Er=z(3910);const Zn="firebasestorage.googleapis.com",ai="storageBucket";class _r extends re.ZR{constructor(o,l){super(as(o),`Firebase Storage: ${l} (${as(o)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}_codeEquals(o){return as(o)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(o){this.customData.serverResponse=o,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function as(c){return"storage/"+c}function xo(){return new _r("unknown","An unknown error occurred, please check the error payload for server response.")}function us(){return new _r("canceled","User canceled the upload/download.")}function Ls(){return new _r("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Zr(c){return new _r("invalid-argument",c)}function co(){return new _r("app-deleted","The Firebase app was deleted.")}function qi(c){return new _r("invalid-root-operation","The operation '"+c+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ki(c,o){return new _r("invalid-format","String does not match format '"+c+"': "+o)}function hi(c){throw new _r("internal-error","Internal error: "+c)}class yr{constructor(o,l){this.bucket=o,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const o=encodeURIComponent;return"/b/"+o(this.bucket)+"/o/"+o(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(o,l){let f;try{f=yr.makeFromUrl(o,l)}catch(y){return new yr(o,"")}if(""===f.path)return f;throw new _r("invalid-default-bucket","Invalid default bucket '"+o+"'.")}static makeFromUrl(o,l){let f=null;const y="([A-Za-z0-9.\\-_]+)",K=new RegExp("^gs://"+y+"(/(.*))?$","i");function ue(rs){rs.path_=decodeURIComponent(rs.path)}const Ue=l.replace(/[.]/g,"\\."),Wi=[{regex:K,indices:{bucket:1,path:3},postModify:function(rs){"/"===rs.path.charAt(rs.path.length-1)&&(rs.path_=rs.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ue}/v[A-Za-z0-9_]+/b/${y}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ue},{regex:new RegExp(`^https?://${l===Zn?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${y}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ue}];for(let rs=0;rs<Wi.length;rs++){const Ua=Wi[rs],fd=Ua.regex.exec(o);if(fd){let Zh=fd[Ua.indices.path];Zh||(Zh=""),f=new yr(fd[Ua.indices.bucket],Zh),Ua.postModify(f);break}}if(null==f)throw new _r("invalid-url","Invalid URL '"+o+"'.");return f}}class Vs{constructor(o){this.promise_=Promise.reject(o)}getPromise(){return this.promise_}cancel(o=!1){}}function Q(c){return"string"==typeof c||c instanceof String}function B(c){return te()&&c instanceof Blob}function te(){return"undefined"!=typeof Blob}function me(c,o,l,f){if(f<o)throw Zr(`Invalid value for '${c}'. Expected ${o} or greater.`);if(f>l)throw Zr(`Invalid value for '${c}'. Expected ${l} or less.`)}function qe(c,o,l){let f=o;return null==l&&(f=`https://${o}`),`${l}://${f}/v0${c}`}function Je(c){const o=encodeURIComponent;let l="?";for(const f in c)c.hasOwnProperty(f)&&(l=l+(o(f)+"=")+o(c[f])+"&");return l=l.slice(0,-1),l}var F=(()=>{return(c=F||(F={}))[c.NO_ERROR=0]="NO_ERROR",c[c.NETWORK_ERROR=1]="NETWORK_ERROR",c[c.ABORT=2]="ABORT",F;var c})();class O{constructor(o,l,f,y,D,M,K,X,ue,Oe,Ue){this.url_=o,this.method_=l,this.headers_=f,this.body_=y,this.successCodes_=D,this.additionalRetryCodes_=M,this.callback_=K,this.errorCallback_=X,this.timeout_=ue,this.progressCallback_=Oe,this.connectionFactory_=Ue,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((nt,Ft)=>{this.resolve_=nt,this.reject_=Ft,this.start_()})}start_(){const l=(f,y)=>{const D=this.resolve_,M=this.reject_,K=y.connection;if(y.wasSuccessCode)try{const X=this.callback_(K,K.getResponse());void 0!==X?D(X):D()}catch(X){M(X)}else if(null!==K){const X=xo();X.serverResponse=K.getErrorText(),M(this.errorCallback_?this.errorCallback_(K,X):X)}else M(y.canceled?this.appDelete_?co():us():new _r("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?l(0,new R(!1,null,!0)):this.backoffId_=function(c,o,l){let f=1,y=null,D=null,M=!1,K=0;function X(){return 2===K}let ue=!1;function Oe(...kn){ue||(ue=!0,o.apply(null,kn))}function Ue(kn){y=setTimeout(()=>{y=null,c(Ft,X())},kn)}function nt(){D&&clearTimeout(D)}function Ft(kn,...Co){if(ue)return void nt();if(kn)return nt(),void Oe.call(null,kn,...Co);if(X()||M)return nt(),void Oe.call(null,kn,...Co);let Wi;f<64&&(f*=2),1===K?(K=2,Wi=0):Wi=1e3*(f+Math.random()),Ue(Wi)}let Ut=!1;function On(kn){Ut||(Ut=!0,nt(),!ue&&(null!==y?(kn||(K=2),clearTimeout(y),Ue(0)):kn||(K=1)))}return Ue(0),D=setTimeout(()=>{M=!0,On(!0)},l),On}((f,y)=>{if(y)return void f(!1,new R(!1,null,!0));const D=this.connectionFactory_();this.pendingConnection_=D;const M=K=>{null!==this.progressCallback_&&this.progressCallback_(K.loaded,K.lengthComputable?K.total:-1)};null!==this.progressCallback_&&D.addUploadProgressListener(M),D.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&D.removeUploadProgressListener(M),this.pendingConnection_=null;const K=D.getErrorCode()===F.NO_ERROR,X=D.getStatus();if(!K||this.isRetryStatusCode_(X)){const Oe=D.getErrorCode()===F.ABORT;return void f(!1,new R(!1,null,Oe))}const ue=-1!==this.successCodes_.indexOf(X);f(!0,new R(ue,D))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(o){this.canceled_=!0,this.appDelete_=o||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(o){const l=o>=500&&o<600,y=-1!==[408,429].indexOf(o),D=-1!==this.additionalRetryCodes_.indexOf(o);return l||y||D}}class R{constructor(o,l,f){this.wasSuccessCode=o,this.connection=l,this.canceled=!!f}}function Yr(...c){const o="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==o){const l=new o;for(let f=0;f<c.length;f++)l.append(c[f]);return l.getBlob()}if(te())return new Blob(c);throw new _r("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ht={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qo{constructor(o,l){this.data=o,this.contentType=l||null}}function Jo(c,o){switch(c){case Ht.RAW:return new Qo(Ia(o));case Ht.BASE64:case Ht.BASE64URL:return new Qo(uu(c,o));case Ht.DATA_URL:return new Qo(function(c){const o=new Mc(c);return o.base64?uu(Ht.BASE64,o.rest):function(c){let o;try{o=decodeURIComponent(c)}catch(l){throw Ki(Ht.DATA_URL,"Malformed data URL.")}return Ia(o)}(o.rest)}(o),function(c){return new Mc(c).contentType}(o))}throw xo()}function Ia(c){const o=[];for(let l=0;l<c.length;l++){let f=c.charCodeAt(l);f<=127?o.push(f):f<=2047?o.push(192|f>>6,128|63&f):55296==(64512&f)?l<c.length-1&&56320==(64512&c.charCodeAt(l+1))?(f=65536|(1023&f)<<10|1023&c.charCodeAt(++l),o.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|63&f)):o.push(239,191,189):56320==(64512&f)?o.push(239,191,189):o.push(224|f>>12,128|f>>6&63,128|63&f)}return new Uint8Array(o)}function uu(c,o){switch(c){case Ht.BASE64:{const y=-1!==o.indexOf("-"),D=-1!==o.indexOf("_");if(y||D)throw Ki(c,"Invalid character '"+(y?"-":"_")+"' found: is it base64url encoded?");break}case Ht.BASE64URL:{const y=-1!==o.indexOf("+"),D=-1!==o.indexOf("/");if(y||D)throw Ki(c,"Invalid character '"+(y?"+":"/")+"' found: is it base64 encoded?");o=o.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function(c){return atob(c)}(o)}catch(y){throw Ki(c,"Invalid character found")}const f=new Uint8Array(l.length);for(let y=0;y<l.length;y++)f[y]=l.charCodeAt(y);return f}class Mc{constructor(o){this.base64=!1,this.contentType=null;const l=o.match(/^data:([^,]+)?,/);if(null===l)throw Ki(Ht.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const f=l[1]||null;null!=f&&(this.base64=function(c,o){return c.length>=o.length&&c.substring(c.length-o.length)===o}(f,";base64"),this.contentType=this.base64?f.substring(0,f.length-";base64".length):f),this.rest=o.substring(o.indexOf(",")+1)}}class vs{constructor(o,l){let f=0,y="";B(o)?(this.data_=o,f=o.size,y=o.type):o instanceof ArrayBuffer?(l?this.data_=new Uint8Array(o):(this.data_=new Uint8Array(o.byteLength),this.data_.set(new Uint8Array(o))),f=this.data_.length):o instanceof Uint8Array&&(l?this.data_=o:(this.data_=new Uint8Array(o.length),this.data_.set(o)),f=o.length),this.size_=f,this.type_=y}size(){return this.size_}type(){return this.type_}slice(o,l){if(B(this.data_)){const y=function(c,o,l){return c.webkitSlice?c.webkitSlice(o,l):c.mozSlice?c.mozSlice(o,l):c.slice?c.slice(o,l):null}(this.data_,o,l);return null===y?null:new vs(y)}{const f=new Uint8Array(this.data_.buffer,o,l-o);return new vs(f,!0)}}static getBlob(...o){if(te()){const l=o.map(f=>f instanceof vs?f.data_:f);return new vs(Yr.apply(null,l))}{const l=o.map(M=>Q(M)?Jo(Ht.RAW,M).data:M.data_);let f=0;l.forEach(M=>{f+=M.byteLength});const y=new Uint8Array(f);let D=0;return l.forEach(M=>{for(let K=0;K<M.length;K++)y[D++]=M[K]}),new vs(y,!0)}}uploadData(){return this.data_}}function wr(c){let o;try{o=JSON.parse(c)}catch(l){return null}return function(c){return"object"==typeof c&&!Array.isArray(c)}(o)?o:null}function Es(c){const o=c.lastIndexOf("/",c.length-2);return-1===o?c:c.slice(o+1)}function Ga(c,o){return o}class Qr{constructor(o,l,f,y){this.server=o,this.local=l||o,this.writable=!!f,this.xform=y||Ga}}let Uu=null;function ls(){if(Uu)return Uu;const c=[];c.push(new Qr("bucket")),c.push(new Qr("generation")),c.push(new Qr("metageneration")),c.push(new Qr("name","fullPath",!0));const l=new Qr("name");l.xform=function(D,M){return function(c){return!Q(c)||c.length<2?c:Es(c)}(M)},c.push(l);const y=new Qr("size");return y.xform=function(D,M){return void 0!==M?Number(M):M},c.push(y),c.push(new Qr("timeCreated")),c.push(new Qr("updated")),c.push(new Qr("md5Hash",null,!0)),c.push(new Qr("cacheControl",null,!0)),c.push(new Qr("contentDisposition",null,!0)),c.push(new Qr("contentEncoding",null,!0)),c.push(new Qr("contentLanguage",null,!0)),c.push(new Qr("contentType",null,!0)),c.push(new Qr("metadata","customMetadata",!0)),Uu=c,Uu}function Bs(c,o,l){const f=wr(o);return null===f?null:function(c,o,l){const f={type:"file"},y=l.length;for(let D=0;D<y;D++){const M=l[D];f[M.local]=M.xform(f,o[M.server])}return function(c,o){Object.defineProperty(c,"ref",{get:function(){const D=new yr(c.bucket,c.fullPath);return o._makeStorageReference(D)}})}(f,c),f}(c,f,l)}function fo(c,o){const l={},f=o.length;for(let y=0;y<f;y++){const D=o[y];D.writable&&(l[D.server]=c[D.local])}return JSON.stringify(l)}const Zi="prefixes";class eo{constructor(o,l,f,y){this.url=o,this.method=l,this.handler=f,this.timeout=y,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function js(c){if(!c)throw xo()}function Ta(c,o){return function(f,y){const D=Bs(c,y,o);return js(null!==D),D}}function Mo(c){return function(l,f){let y;return y=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?new _r("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new _r("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===l.getStatus()?function(c){return new _r("quota-exceeded","Quota for bucket '"+c+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(c.bucket):403===l.getStatus()?function(c){return new _r("unauthorized","User does not have permission to access '"+c+"'.")}(c.path):f,y.serverResponse=f.serverResponse,y}}function Xo(c){const o=Mo(c);return function(f,y){let D=o(f,y);return 404===f.getStatus()&&(D=function(c){return new _r("object-not-found","Object '"+c+"' does not exist.")}(c.path)),D.serverResponse=y.serverResponse,D}}function ea(c,o,l){const y=qe(o.fullServerUrl(),c.host,c._protocol),M=c.maxOperationRetryTime,K=new eo(y,"GET",Ta(c,l),M);return K.errorHandler=Xo(o),K}function gl(c,o,l,f,y){const D={};D.prefix=o.isRoot?"":o.path+"/",l&&l.length>0&&(D.delimiter=l),f&&(D.pageToken=f),y&&(D.maxResults=y);const K=qe(o.bucketOnlyServerUrl(),c.host,c._protocol),ue=c.maxOperationRetryTime,Oe=new eo(K,"GET",function(c,o){return function(f,y){const D=function(c,o,l){const f=wr(l);return null===f?null:function(c,o,l){const f={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Zi])for(const y of l[Zi]){const D=y.replace(/\/$/,""),M=c._makeStorageReference(new yr(o,D));f.prefixes.push(M)}if(l.items)for(const y of l.items){const D=c._makeStorageReference(new yr(o,y.name));f.items.push(D)}return f}(c,o,f)}(c,o,y);return js(null!==D),D}}(c,o.bucket),ue);return Oe.urlParams=D,Oe.errorHandler=Mo(o),Oe}function za(c,o,l){const f=Object.assign({},l);return f.fullPath=c.path,f.size=o.size(),f.contentType||(f.contentType=function(c,o){return o&&o.type()||"application/octet-stream"}(0,o)),f}class to{constructor(o,l,f,y){this.current=o,this.total=l,this.finalized=!!f,this.metadata=y||null}}function Mr(c,o){let l=null;try{l=c.getResponseHeader("X-Goog-Upload-Status")}catch(y){js(!1)}return js(!!l&&-1!==(o||["active"]).indexOf(l)),l}const hu={STATE_CHANGED:"state_changed"},Qi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function po(c){switch(c){case"running":case"pausing":case"canceling":return Qi.RUNNING;case"paused":return Qi.PAUSED;case"success":return Qi.SUCCESS;case"canceled":return Qi.CANCELED;default:return Qi.ERROR}}class Aa{constructor(o,l,f){if("function"==typeof o||null!=l||null!=f)this.next=o,this.error=null!=l?l:void 0,this.complete=null!=f?f:void 0;else{const D=o;this.next=D.next,this.error=D.error,this.complete=D.complete}}}function go(c){return(...o)=>{Promise.resolve().then(()=>c(...o))}}class Gu extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=F.NO_ERROR,this.sendPromise_=new Promise(o=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=F.ABORT,o()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=F.NETWORK_ERROR,o()}),this.xhr_.addEventListener("load",()=>{o()})})}send(o,l,f,y){if(this.sent_)throw hi("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,o,!0),void 0!==y)for(const D in y)y.hasOwnProperty(D)&&this.xhr_.setRequestHeader(D,y[D].toString());return void 0!==f?this.xhr_.send(f):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hi("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hi("cannot .getStatus() before sending");try{return this.xhr_.status}catch(o){return-1}}getResponse(){if(!this.sent_)throw hi("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hi("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(o){return this.xhr_.getResponseHeader(o)}addUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",o)}removeUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",o)}}{initXhr(){this.xhr_.responseType="text"}}function Ui(){return new Gu}class mo{constructor(o,l,f=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=o,this._blob=l,this._metadata=f,this._mappings=ls(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=y=>{this._request=void 0,this._chunkMultiplier=1,y._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=y,this._transition("error"))},this._metadataErrorHandler=y=>{this._request=void 0,y._codeEquals("canceled")?this.completeTransitions_():(this._error=y,this._transition("error"))},this._promise=new Promise((y,D)=>{this._resolve=y,this._reject=D,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const o=this._transferred;return l=>this._updateProgress(o+l)}_shouldDoResumable(o){return o.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(o){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,f])=>{switch(this._state){case"running":o(l,f);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((o,l)=>{const f=function(c,o,l,f,y){const D=o.bucketOnlyServerUrl(),M=za(o,f,y),K={name:M.fullPath},X=qe(D,c.host,c._protocol),Oe={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${f.size()}`,"X-Goog-Upload-Header-Content-Type":M.contentType,"Content-Type":"application/json; charset=utf-8"},Ue=fo(M,l),Ut=new eo(X,"POST",function(On){let kn;Mr(On);try{kn=On.getResponseHeader("X-Goog-Upload-URL")}catch(Co){js(!1)}return js(Q(kn)),kn},c.maxUploadRetryTime);return Ut.urlParams=K,Ut.headers=Oe,Ut.body=Ue,Ut.errorHandler=Mo(o),Ut}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(f,Ui,o,l);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._uploadUrl=D,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const o=this._uploadUrl;this._resolveToken((l,f)=>{const y=function(c,o,l,f){const X=new eo(l,"POST",function(ue){const Oe=Mr(ue,["active","final"]);let Ue=null;try{Ue=ue.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ft){js(!1)}Ue||js(!1);const nt=Number(Ue);return js(!isNaN(nt)),new to(nt,f.size(),"final"===Oe)},c.maxUploadRetryTime);return X.headers={"X-Goog-Upload-Command":"query"},X.errorHandler=Mo(o),X}(this._ref.storage,this._ref._location,o,this._blob),D=this._ref.storage._makeRequest(y,Ui,l,f);this._request=D,D.getPromise().then(M=>{this._request=void 0,this._updateProgress(M.current),this._needToFetchStatus=!1,M.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const o=262144*this._chunkMultiplier,l=new to(this._transferred,this._blob.size()),f=this._uploadUrl;this._resolveToken((y,D)=>{let M;try{M=function(c,o,l,f,y,D,M,K){const X=new to(0,0);if(M?(X.current=M.current,X.total=M.total):(X.current=0,X.total=f.size()),f.size()!==X.total)throw new _r("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const ue=X.total-X.current;let Oe=ue;y>0&&(Oe=Math.min(Oe,y));const Ue=X.current,Ut={"X-Goog-Upload-Command":Oe===ue?"upload, finalize":"upload","X-Goog-Upload-Offset":`${X.current}`},On=f.slice(Ue,Ue+Oe);if(null===On)throw Ls();const Wi=new eo(l,"POST",function(rs,Ua){const fd=Mr(rs,["active","final"]),cg=X.current+Oe,Zh=f.size();let dg;return dg="final"===fd?Ta(o,D)(rs,Ua):null,new to(cg,Zh,"final"===fd,dg)},o.maxUploadRetryTime);return Wi.headers=Ut,Wi.body=On.uploadData(),Wi.progressCallback=K||null,Wi.errorHandler=Mo(c),Wi}(this._ref._location,this._ref.storage,f,this._blob,o,this._mappings,l,this._makeProgressCallback())}catch(X){return this._error=X,void this._transition("error")}const K=this._ref.storage._makeRequest(M,Ui,y,D);this._request=K,K.getPromise().then(X=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(X.current),X.finalized?(this._metadata=X.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((o,l)=>{const f=ea(this._ref.storage,this._ref._location,this._mappings),y=this._ref.storage._makeRequest(f,Ui,o,l);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._metadata=D,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((o,l)=>{const f=function(c,o,l,f,y){const D=o.bucketOnlyServerUrl(),M={"X-Goog-Upload-Protocol":"multipart"},X=function(){let Wi="";for(let rs=0;rs<2;rs++)Wi+=Math.random().toString().slice(2);return Wi}();M["Content-Type"]="multipart/related; boundary="+X;const ue=za(o,f,y),Oe=fo(ue,l),Ft=vs.getBlob("--"+X+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Oe+"\r\n--"+X+"\r\nContent-Type: "+ue.contentType+"\r\n\r\n",f,"\r\n--"+X+"--");if(null===Ft)throw Ls();const Ut={name:ue.fullPath},On=qe(D,c.host,c._protocol),Co=c.maxUploadRetryTime,Zs=new eo(On,"POST",Ta(c,l),Co);return Zs.urlParams=Ut,Zs.headers=M,Zs.body=Ft.uploadData(),Zs.errorHandler=Mo(o),Zs}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(f,Ui,o,l);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._metadata=D,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(o){const l=this._transferred;this._transferred=o,this._transferred!==l&&this._notifyObservers()}_transition(o){if(this._state!==o)switch(o){case"canceling":case"pausing":this._state=o,void 0!==this._request&&this._request.cancel();break;case"running":const l="paused"===this._state;this._state=o,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=o,this._notifyObservers();break;case"canceled":this._error=us(),this._state=o,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const o=po(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:o,metadata:this._metadata,task:this,ref:this._ref}}on(o,l,f,y){const D=new Aa(l||void 0,f||void 0,y||void 0);return this._addObserver(D),()=>{this._removeObserver(D)}}then(o,l){return this._promise.then(o,l)}catch(o){return this.then(null,o)}_addObserver(o){this._observers.push(o),this._notifyObserver(o)}_removeObserver(o){const l=this._observers.indexOf(o);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let o=!0;switch(po(this._state)){case Qi.SUCCESS:go(this._resolve.bind(null,this.snapshot))();break;case Qi.CANCELED:case Qi.ERROR:go(this._reject.bind(null,this._error))();break;default:o=!1}o&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(o){switch(po(this._state)){case Qi.RUNNING:case Qi.PAUSED:o.next&&go(o.next.bind(o,this.snapshot))();break;case Qi.SUCCESS:o.complete&&go(o.complete.bind(o))();break;default:o.error&&go(o.error.bind(o,this._error))()}}resume(){const o="paused"===this._state||"pausing"===this._state;return o&&this._transition("running"),o}pause(){const o="running"===this._state;return o&&this._transition("pausing"),o}cancel(){const o="running"===this._state||"pausing"===this._state;return o&&this._transition("canceling"),o}}class Hs{constructor(o,l){this._service=o,this._location=l instanceof yr?l:yr.makeFromUrl(l,o.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(o,l){return new Hs(o,l)}get root(){const o=new yr(this._location.bucket,"");return this._newRef(this._service,o)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Es(this._location.path)}get storage(){return this._service}get parent(){const o=function(c){if(0===c.length)return null;const o=c.lastIndexOf("/");return-1===o?"":c.slice(0,o)}(this._location.path);if(null===o)return null;const l=new yr(this._location.bucket,o);return new Hs(this._service,l)}_throwIfRoot(o){if(""===this._location.path)throw qi(o)}}function qa(c,o,l){return yl.apply(this,arguments)}function yl(){return(yl=(0,Et.Z)(function*(c,o,l){const y=yield Yl(c,{pageToken:l});o.prefixes.push(...y.prefixes),o.items.push(...y.items),null!=y.nextPageToken&&(yield qa(c,o,y.nextPageToken))})).apply(this,arguments)}function Yl(c,o){null!=o&&"number"==typeof o.maxResults&&me("options.maxResults",1,1e3,o.maxResults);const l=o||{},f=gl(c.storage,c._location,"/",l.pageToken,l.maxResults);return c.storage.makeRequestWithTokens(f,Ui)}function ws(c){c._throwIfRoot("getDownloadURL");const o=function(c,o,l){const y=qe(o.fullServerUrl(),c.host,c._protocol),M=c.maxOperationRetryTime,K=new eo(y,"GET",function(c,o){return function(f,y){const D=Bs(c,y,o);return js(null!==D),function(c,o,l,f){const y=wr(o);if(null===y||!Q(y.downloadTokens))return null;const D=y.downloadTokens;if(0===D.length)return null;const M=encodeURIComponent;return D.split(",").map(ue=>{const Ue=c.fullPath;return qe("/b/"+M(c.bucket)+"/o/"+M(Ue),l,f)+Je({alt:"media",token:ue})})[0]}(D,y,c.host,c._protocol)}}(c,l),M);return K.errorHandler=Xo(o),K}(c.storage,c._location,ls());return c.storage.makeRequestWithTokens(o,Ui).then(l=>{if(null===l)throw new _r("no-download-url","The given file does not have any download URLs.");return l})}function na(c,o){const l=function(c,o){const l=o.split("/").filter(f=>f.length>0).join("/");return 0===c.length?l:c+"/"+l}(c._location.path,o),f=new yr(c._location.bucket,l);return new Hs(c.storage,f)}function ra(c,o){if(c instanceof kr){const l=c;if(null==l._bucket)throw new _r("no-default-bucket","No default bucket found. Did you set the '"+ai+"' property when initializing the app?");const f=new Hs(l,l._bucket);return null!=o?ra(f,o):f}return void 0!==o?na(c,o):c}function Wu(c,o){if(o&&function(c){return/^[A-Za-z]+:\/\//.test(c)}(o)){if(c instanceof kr)return function(c,o){return new Hs(c,o)}(c,o);throw Zr("To use ref(service, url), the first argument must be a Storage instance.")}return ra(c,o)}function kc(c,o){const l=null==o?void 0:o[ai];return null==l?null:yr.makeFromBucketSpec(l,c)}class kr{constructor(o,l,f,y,D){this.app=o,this._authProvider=l,this._appCheckProvider=f,this._url=y,this._firebaseVersion=D,this._bucket=null,this._host=Zn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=y?yr.makeFromBucketSpec(y,this._host):kc(this._host,this.app.options)}get host(){return this._host}set host(o){this._host=o,this._bucket=null!=this._url?yr.makeFromBucketSpec(this._url,o):kc(o,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(o){me("time",0,Number.POSITIVE_INFINITY,o),this._maxUploadRetryTime=o}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(o){me("time",0,Number.POSITIVE_INFINITY,o),this._maxOperationRetryTime=o}_getAuthToken(){var o=this;return(0,Et.Z)(function*(){if(o._overrideAuthToken)return o._overrideAuthToken;const l=o._authProvider.getImmediate({optional:!0});if(l){const f=yield l.getToken();if(null!==f)return f.accessToken}return null})()}_getAppCheckToken(){var o=this;return(0,Et.Z)(function*(){const l=o._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(o=>o.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(o){return new Hs(this,o)}_makeRequest(o,l,f,y){if(this._deleted)return new Vs(co());{const D=function(c,o,l,f,y,D){const M=Je(c.urlParams),K=c.url+M,X=Object.assign({},c.headers);return function(c,o){o&&(c["X-Firebase-GMPID"]=o)}(X,o),function(c,o){null!==o&&o.length>0&&(c.Authorization="Firebase "+o)}(X,l),function(c,o){c["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager")}(X,D),function(c,o){null!==o&&(c["X-Firebase-AppCheck"]=o)}(X,f),new O(K,c.method,X,c.body,c.successCodes,c.additionalRetryCodes,c.handler,c.errorHandler,c.timeout,c.progressCallback,y)}(o,this._appId,f,y,l,this._firebaseVersion);return this._requests.add(D),D.getPromise().then(()=>this._requests.delete(D),()=>this._requests.delete(D)),D}}makeRequestWithTokens(o,l){var f=this;return(0,Et.Z)(function*(){const[y,D]=yield Promise.all([f._getAuthToken(),f._getAppCheckToken()]);return f._makeRequest(o,l,y,D).getPromise()})()}}const _o="@firebase/storage";function G(c,o){return Wu(c=(0,re.m9)(c),o)}(0,kt._registerComponent)(new Er.wA("storage",function(c,{instanceIdentifier:o}){const l=c.getProvider("app").getImmediate(),f=c.getProvider("auth-internal"),y=c.getProvider("app-check-internal");return new kr(l,f,y,o,kt.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,kt.registerVersion)(_o,"0.9.9",""),(0,kt.registerVersion)(_o,"0.9.9","esm2017");class bn{constructor(o,l,f){this._delegate=o,this.task=l,this.ref=f}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Rn{constructor(o,l){this._delegate=o,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bn(this._delegate.snapshot,this,this._ref)}then(o,l){return this._delegate.then(f=>{if(o)return o(new bn(f,this,this._ref))},l)}on(o,l,f,y){let D;return l&&(D="function"==typeof l?M=>l(new bn(M,this,this._ref)):{next:l.next?M=>l.next(new bn(M,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(o,D,f||void 0,y||void 0)}}class dr{constructor(o,l){this._delegate=o,this._service=l}get prefixes(){return this._delegate.prefixes.map(o=>new $t(o,this._service))}get items(){return this._delegate.items.map(o=>new $t(o,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class $t{constructor(o,l){this._delegate=o,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(o){const l=function(c,o){return na(c,o)}(this._delegate,o);return new $t(l,this.storage)}get root(){return new $t(this._delegate.root,this.storage)}get parent(){const o=this._delegate.parent;return null==o?null:new $t(o,this.storage)}put(o,l){return this._throwIfRoot("put"),new Rn(function(c,o,l){return function(c,o,l){return c._throwIfRoot("uploadBytesResumable"),new mo(c,new vs(o),l)}(c=(0,re.m9)(c),o,l)}(this._delegate,o,l),this)}putString(o,l=Ht.RAW,f){this._throwIfRoot("putString");const y=Jo(l,o),D=Object.assign({},f);return null==D.contentType&&null!=y.contentType&&(D.contentType=y.contentType),new Rn(new mo(this._delegate,new vs(y.data,!0),D),this)}listAll(){return(c=this._delegate,function(c){const o={prefixes:[],items:[]};return qa(c,o).then(()=>o)}(c=(0,re.m9)(c))).then(o=>new dr(o,this.storage));var c}list(o){return function(c,o){return Yl(c=(0,re.m9)(c),o)}(this._delegate,o||void 0).then(l=>new dr(l,this.storage))}getMetadata(){return function(c){c._throwIfRoot("getMetadata");const o=ea(c.storage,c._location,ls());return c.storage.makeRequestWithTokens(o,Ui)}((0,re.m9)(this._delegate))}updateMetadata(o){return function(c,o){return function(c,o){c._throwIfRoot("updateMetadata");const l=function(c,o,l,f){const D=qe(o.fullServerUrl(),c.host,c._protocol),K=fo(l,f),ue=c.maxOperationRetryTime,Oe=new eo(D,"PATCH",Ta(c,f),ue);return Oe.headers={"Content-Type":"application/json; charset=utf-8"},Oe.body=K,Oe.errorHandler=Xo(o),Oe}(c.storage,c._location,o,ls());return c.storage.makeRequestWithTokens(l,Ui)}(c=(0,re.m9)(c),o)}(this._delegate,o)}getDownloadURL(){return ws((0,re.m9)(this._delegate))}delete(){return this._throwIfRoot("delete"),function(c){c._throwIfRoot("deleteObject");const o=function(c,o){const f=qe(o.fullServerUrl(),c.host,c._protocol),K=new eo(f,"DELETE",function(X,ue){},c.maxOperationRetryTime);return K.successCodes=[200,204],K.errorHandler=Xo(o),K}(c.storage,c._location);return c.storage.makeRequestWithTokens(o,Ui)}((0,re.m9)(this._delegate))}_throwIfRoot(o){if(""===this._delegate._location.path)throw qi(o)}}class As{constructor(o,l){this.app=o,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(o){if(Ln(o))throw Zr("ref() expected a child path but got a URL, use refFromURL instead.");return new $t(G(this._delegate,o),this)}refFromURL(o){if(!Ln(o))throw Zr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yr.makeFromUrl(o,this._delegate.host)}catch(l){throw Zr("refFromUrl() expected a valid full URL but got an invalid one.")}return new $t(G(this._delegate,o),this)}setMaxUploadRetryTime(o){this._delegate.maxUploadRetryTime=o}setMaxOperationRetryTime(o){this._delegate.maxOperationRetryTime=o}useEmulator(o,l,f={}){!function(c,o,l,f={}){!function(c,o,l,f={}){c.host=`${o}:${l}`,c._protocol="http";const{mockUserToken:y}=f;y&&(c._overrideAuthToken="string"==typeof y?y:(0,re.Sg)(y,c.app.options.projectId))}(c,o,l,f)}(this._delegate,o,l,f)}}function Ln(c){return/^[A-Za-z]+:\/\//.test(c)}function ci(c,{instanceIdentifier:o}){const l=c.getProvider("app-compat").getImmediate(),f=c.getProvider("storage").getImmediate({identifier:o});return new As(l,f)}!function(c){const o={TaskState:Qi,TaskEvent:hu,StringFormat:Ht,Storage:As,Reference:$t};c.INTERNAL.registerComponent(new Er.wA("storage-compat",ci,"PUBLIC").setServiceProps(o).setMultipleInstances(!0)),c.registerVersion("@firebase/storage-compat","0.1.17")}(tt.Z);var pu=z(905),Jl=z(7841);function uh(c){const o=function(c){return new Ys.y(o=>{const l=M=>o.next(M);l(c.snapshot);const D=c.on("state_changed",l);return c.then(M=>{l(M),o.complete()},M=>{l(c.snapshot),(M=>{o.error(M)})(M)}),function(){D()}}).pipe(function(c,o=Qs.P){return l=>l.lift(new Gr(c,o))}(0))}(c);return{task:c,then:c.then.bind(c),catch:c.catch.bind(c),pause:c.pause.bind(c),cancel:c.cancel.bind(c),resume:c.resume.bind(c),snapshotChanges:()=>o,percentageChanges:()=>o.pipe((0,xe.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function yd(c){return{getDownloadURL:()=>(0,ms.of)(void 0).pipe(Ve.fc,(0,Te.w)(()=>c.getDownloadURL()),Ve.iC),getMetadata:()=>(0,ms.of)(void 0).pipe(Ve.fc,(0,Te.w)(()=>c.getMetadata()),Ve.iC),delete:()=>(0,Kr.D)(c.delete()),child:o=>yd(c.child(o)),updateMetadata:o=>(0,Kr.D)(c.updateMetadata(o)),put:(o,l)=>uh(c.put(o,l)),putString:(o,l,f)=>uh(c.putString(o,l,f)),list:o=>(0,Kr.D)(c.list(o)),listAll:()=>(0,Kr.D)(c.listAll())}}const ia=new U.OlP("angularfire2.storageBucket"),gu=new U.OlP("angularfire2.storage.maxUploadRetryTime"),nf=new U.OlP("angularfire2.storage.maxOperationRetryTime"),rf=new U.OlP("angularfire2.storage.use-emulator");let zu=(()=>{class c{constructor(l,f,y,D,M,K,X,ue,Oe,Ue){const nt=(0,lr.on)(l,M,f);this.storage=(0,lr.cc)(`${nt.name}.storage.${y}`,"AngularFireStorage",nt.name,()=>{const Ft=M.runOutsideAngular(()=>nt.storage(y||void 0)),Ut=Oe;return Ut&&Ft.useEmulator(...Ut),X&&Ft.setMaxUploadRetryTime(X),ue&&Ft.setMaxOperationRetryTime(ue),Ft},[X,ue])}ref(l){return yd(this.storage.ref(l))}refFromURL(l){return yd(this.storage.refFromURL(l))}upload(l,f,y){return yd(this.storage.ref(l)).put(f,y)}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(lr.Dh),U.LFG(lr.xv,8),U.LFG(ia,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(Ve.HU),U.LFG(gu,8),U.LFG(nf,8),U.LFG(rf,8),U.LFG(pu.nm,8))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Ze=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({}),c})(),_i=(()=>{class c{constructor(){Jl.Z.registerVersion("angularfire",Ve.q4.full,"gcs-compat")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({providers:[zu],imports:[Ze]}),c})();var no=z(2278),qu=z(6682),El=z(8819),yo=z(2145),vo=z(7519),Cs=z(5197),Ku=z(509);class Zu{constructor(o,l){this.observables=o,this.project=l}call(o,l){return l.subscribe(new sf(o,this.observables,this.project))}}class sf extends Cs.L{constructor(o,l,f){super(o),this.observables=l,this.project=f,this.toRespond=[];const y=l.length;this.values=new Array(y);for(let D=0;D<y;D++)this.toRespond.push(D);for(let D=0;D<y;D++)this.add((0,Ku.D)(this,l[D],void 0,D))}notifyNext(o,l,f){this.values[f]=l;const y=this.toRespond;if(y.length>0){const D=y.indexOf(f);-1!==D&&y.splice(D,1)}}notifyComplete(){}_next(o){if(0===this.toRespond.length){const l=[o,...this.values];this.project?this._tryProject(l):this.destination.next(l)}}_tryProject(o){let l;try{l=this.project.apply(this,o)}catch(f){return void this.destination.error(f)}this.destination.next(l)}}class lh{constructor(o){this.predicate=o}call(o,l){return l.subscribe(new wl(o,this.predicate))}}class wl extends Xn.L{constructor(o,l){super(o),this.predicate=l,this.skipping=!0,this.index=0}_next(o){const l=this.destination;this.skipping&&this.tryCallPredicate(o),this.skipping||l.next(o)}tryCallPredicate(o){try{const l=this.predicate(o,this.index++);this.skipping=Boolean(l)}catch(l){this.destination.error(l)}}}z(1530);var Jr=z(5422);const xs="@firebase/database";let Vn="";function ch(c){Vn=c}class ro{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,l){null==l?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,re.Pz)(l))}get(o){const l=this.domStorage_.getItem(this.prefixedName_(o));return null==l?null:(0,re.cI)(l)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Uo{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,l){null==l?delete this.cache_[o]:this.cache_[o]=l}get(o){return(0,re.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const vd=function(c){try{if("undefined"!=typeof window&&void 0!==window[c]){const o=window[c];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new ro(o)}}catch(o){}return new Uo},Xr=vd("localStorage"),Xl=vd("sessionStorage"),Ws=new Jr.Yd("@firebase/database"),Br=function(){let c=1;return function(){return c++}}(),P=function(c){const o=(0,re.dS)(c),l=new re.gQ;l.update(o);const f=l.digest();return re.US.encodeByteArray(f)},$=function(...c){let o="";for(let l=0;l<c.length;l++){const f=c[l];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?o+=$.apply(null,f):o+="object"==typeof f?(0,re.Pz)(f):f,o+=" "}return o};let J=null,fe=!0;const Pe=function(c,o){(0,re.hu)(!o||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(Ws.logLevel=Jr.in.VERBOSE,J=Ws.log.bind(Ws),o&&Xl.set("logging_enabled",!0)):"function"==typeof c?J=c:(J=null,Xl.remove("logging_enabled"))},Le=function(...c){if(!0===fe&&(fe=!1,null===J&&!0===Xl.get("logging_enabled")&&Pe(!0)),J){const o=$.apply(null,c);J(o)}},lt=function(c){return function(...o){Le(c,...o)}},Lt=function(...c){const o="FIREBASE INTERNAL ERROR: "+$(...c);Ws.error(o)},Yt=function(...c){const o=`FIREBASE FATAL ERROR: ${$(...c)}`;throw Ws.error(o),new Error(o)},zt=function(...c){const o="FIREBASE WARNING: "+$(...c);Ws.warn(o)},Xt=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},Pr="[MIN_NAME]",bi="[MAX_NAME]",Sr=function(c,o){if(c===o)return 0;if(c===Pr||o===bi)return-1;if(o===Pr||c===bi)return 1;{const l=Vc(c),f=Vc(o);return null!==l?null!==f?l-f==0?c.length-o.length:l-f:-1:null!==f?1:c<o?-1:1}},Eo=function(c,o){return c===o?0:c<o?-1:1},_u=function(c,o){if(o&&c in o)return o[c];throw new Error("Missing required key ("+c+") in object: "+(0,re.Pz)(o))},Rs=function(c){if("object"!=typeof c||null===c)return(0,re.Pz)(c);const o=[];for(const f in c)o.push(f);o.sort();let l="{";for(let f=0;f<o.length;f++)0!==f&&(l+=","),l+=(0,re.Pz)(o[f]),l+=":",l+=Rs(c[o[f]]);return l+="}",l},zs=function(c,o){const l=c.length;if(l<=o)return[c];const f=[];for(let y=0;y<l;y+=o)f.push(c.substring(y,y+o>l?l:y+o));return f};function jr(c,o){for(const l in c)c.hasOwnProperty(l)&&o(l,c[l])}const Za=function(c){(0,re.hu)(!Xt(c),"Invalid JSON number");const f=1023;let y,D,M,K,X;0===c?(D=0,M=0,y=1/c==-1/0?1:0):(y=c<0,(c=Math.abs(c))>=Math.pow(2,1-f)?(K=Math.min(Math.floor(Math.log(c)/Math.LN2),f),D=K+f,M=Math.round(c*Math.pow(2,52-K)-Math.pow(2,52))):(D=0,M=Math.round(c/Math.pow(2,-1074))));const ue=[];for(X=52;X;X-=1)ue.push(M%2?1:0),M=Math.floor(M/2);for(X=11;X;X-=1)ue.push(D%2?1:0),D=Math.floor(D/2);ue.push(y?1:0),ue.reverse();const Oe=ue.join("");let Ue="";for(X=0;X<64;X+=8){let nt=parseInt(Oe.substr(X,8),2).toString(16);1===nt.length&&(nt="0"+nt),Ue+=nt}return Ue.toLowerCase()},yu=new RegExp("^-?(0*)\\d{1,10}$"),ec=-2147483648,Ya=2147483647,Vc=function(c){if(yu.test(c)){const o=Number(c);if(o>=ec&&o<=Ya)return o}return null},Il=function(c){try{c()}catch(o){setTimeout(()=>{throw zt("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},Qa=function(c,o){const l=setTimeout(c,o);return"object"==typeof l&&l.unref&&l.unref(),l};class di{constructor(o,l){this.appName_=o,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(f=>this.appCheck=f)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((l,f)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(l,f):l(null)},0)})}addTokenChangeListener(o){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(f=>f.addTokenListener(o))}notifyForInvalidToken(){zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _g{constructor(o,l,f){this.appName_=o,this.firebaseOptions_=l,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(y=>this.auth_=y)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(l=>l&&"auth/token-not-initialized"===l.code?(Le("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,f)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(l,f):l(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(l=>l.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(l=>l.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zt(o)}}let Dl=(()=>{class c{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return c.OWNER="owner",c})();const Bc=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tp="websocket",jc="long_polling";class tc{constructor(o,l,f,y,D=!1,M="",K=!1){this.secure=l,this.namespace=f,this.webSocketOnly=y,this.nodeAdmin=D,this.persistenceKey=M,this.includeNamespaceInQueryParams=K,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xr.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&Xr.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function np(c,o,l){let f;if((0,re.hu)("string"==typeof o,"typeof type must == string"),(0,re.hu)("object"==typeof l,"typeof params must == object"),o===tp)f=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(o!==jc)throw new Error("Unknown connection type: "+o);f=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(l.ns=c.namespace);const y=[];return jr(l,(D,M)=>{y.push(D+"="+M)}),f+y.join("&")}class rp{constructor(){this.counters_={}}incrementCounter(o,l=1){(0,re.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=l}get(){return(0,re.p$)(this.counters_)}}const fh={},ha={};function vu(c){const o=c.toString();return fh[o]||(fh[o]=new rp),fh[o]}class Cd{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,l){this.closeAfterResponse=o,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,l){for(this.pendingResponses[o]=l;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let y=0;y<f.length;++y)f[y]&&Il(()=>{this.onMessage_(f[y])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Al{constructor(o,l,f,y,D,M,K){this.connId=o,this.repoInfo=l,this.applicationId=f,this.appCheckToken=y,this.authToken=D,this.transportSessionId=M,this.lastSessionId=K,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=lt(o),this.stats_=vu(l),this.urlFn=X=>(this.appCheckToken&&(X.ac=this.appCheckToken),np(l,jc,X))}open(o,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Cd(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,re.Yr)()||"complete"===document.readyState)c();else{let o=!1;const l=function(){document.body?o||(o=!0,c()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _h((...D)=>{const[M,K,X,ue,Oe]=D;if(this.incrementIncomingBytes_(D),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===M)this.id=K,this.password=X;else{if("close"!==M)throw new Error("Unrecognized command received: "+M);K?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(K,()=>{this.onClosed_()})):this.onClosed_()}},(...D)=>{const[M,K]=D;this.incrementIncomingBytes_(D),this.myPacketOrderer.handleResponse(M,K)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Bc.test(location.hostname)&&(f.r="f");const y=this.urlFn(f);this.log_("Connecting via long-poll to "+y),this.scriptTagHolder.addTag(y,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Al.forceAllow_=!0}static forceDisallow(){Al.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!Al.forceAllow_&&(Al.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const l=(0,re.Pz)(o);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const f=(0,re.h$)(l),y=zs(f,1840);for(let D=0;D<y.length;D++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,y.length,y[D]),this.curSegmentNum++}addDisconnectPingFrame(o,l){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=o,f.pw=l,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const l=(0,re.Pz)(o).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class _h{constructor(o,l,f,y){if(this.onDisconnect=f,this.urlFn=y,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=o,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Br(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=_h.createIFrame_();let D="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(D='<script>document.domain="'+document.domain+'";<\/script>');const M="<html><body>"+D+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(M),this.myIFrame.doc.close()}catch(K){Le("frame writing exception"),K.stack&&Le(K.stack),Le(K)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Le("No IE domain setting required")}catch(l){const f=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,l){for(this.myID=o,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let l=this.urlFn(o),f="",y=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const M=this.pendingSegs.shift();f=f+"&seg"+y+"="+M.seg+"&ts"+y+"="+M.ts+"&d"+y+"="+M.d,y++}return l+=f,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(o,l,f){this.pendingSegs.push({seg:o,ts:l,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(o,l){this.outstandingRequests.add(l);const f=()=>{this.outstandingRequests.delete(l),this.newRequest_()},y=setTimeout(f,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(y),f()})}addTag(o,l){(0,re.Yr)()?this.doNodeLongPoll(o,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=o,f.onload=f.onreadystatechange=function(){const y=f.readyState;(!y||"loaded"===y||"complete"===y)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),l())},f.onerror=()=>{Le("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch(f){}},Math.floor(1))}}let rc=null;"undefined"!=typeof MozWebSocket?rc=MozWebSocket:"undefined"!=typeof WebSocket&&(rc=WebSocket);let Eu=(()=>{class c{constructor(l,f,y,D,M,K,X){this.connId=l,this.applicationId=y,this.appCheckToken=D,this.authToken=M,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=lt(this.connId),this.stats_=vu(f),this.connURL=c.connectionURL_(f,K,X,D,y),this.nodeAdmin=f.nodeAdmin}static connectionURL_(l,f,y,D,M){const K={v:"5"};return!(0,re.Yr)()&&"undefined"!=typeof location&&location.hostname&&Bc.test(location.hostname)&&(K.r="f"),f&&(K.s=f),y&&(K.ls=y),D&&(K.ac=D),M&&(K.p=M),np(l,tp,K)}open(l,f){this.onDisconnect=f,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xr.set("previous_websocket_failure",!0);try{let y;if((0,re.Yr)()){y={headers:{"User-Agent":`Firebase/5/${Vn}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(y.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(y.headers["X-Firebase-AppCheck"]=this.appCheckToken);const M=process.env,K=0===this.connURL.indexOf("wss://")?M.HTTPS_PROXY||M.https_proxy:M.HTTP_PROXY||M.http_proxy;K&&(y.proxy={origin:K})}this.mySock=new rc(this.connURL,[],y)}catch(y){this.log_("Error instantiating WebSocket.");const D=y.message||y.data;return D&&this.log_(D),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=y=>{this.handleIncomingFrame(y)},this.mySock.onerror=y=>{this.log_("WebSocket error.  Closing connection.");const D=y.message||y.data;D&&this.log_(D),this.onClosed_()}}start(){}static forceDisallow(){c.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(l=!0)}return!l&&null!==rc&&!c.forceDisallow_}static previouslyFailed(){return Xr.isInMemoryStorage||!0===Xr.get("previous_websocket_failure")}markConnectionHealthy(){Xr.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const y=(0,re.cI)(f);this.onMessage(y)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const f=Number(l);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const f=l.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const y=this.extractFrameCount_(f);null!==y&&this.appendFrame_(y)}}send(l){this.resetKeepAlive();const f=(0,re.Pz)(l);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const y=zs(f,16384);y.length>1&&this.sendString_(String(y.length));for(let D=0;D<y.length;D++)this.sendString_(y[D])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c})(),hf=(()=>{class c{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Al,Eu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const f=Eu&&Eu.isAvailable();let y=f&&!Eu.previouslyFailed();if(l.webSocketOnly&&(f||zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),y=!0),y)this.transports_=[Eu];else{const D=this.transports_=[];for(const M of c.ALL_TRANSPORTS)M&&M.isAvailable()&&D.push(M);c.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return c.globalTransportInitialized_=!1,c})();class tu{constructor(o,l,f,y,D,M,K,X,ue,Oe){this.id=o,this.repoInfo_=l,this.applicationId_=f,this.appCheckToken_=y,this.authToken_=D,this.onMessage_=M,this.onReady_=K,this.onDisconnect_=X,this.onKill_=ue,this.lastSessionId=Oe,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=lt("c:"+this.id+":"),this.transportManager_=new hf(l),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,f)},Math.floor(0));const y=o.healthyTimeout||0;y>0&&(this.healthyTimeout_=Qa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(y)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return l=>{o===this.conn_?this.onConnectionLost_(l):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return l=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(l):o===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const l=o.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const l=_u("t",o),f=_u("d",o);if("c"===l)this.onSecondaryControl_(f);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const l=_u("t",o),f=_u("d",o);"c"===l?this.onControl_(f):"d"===l&&this.onDataMessage_(f)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const l=_u("t",o);if("d"in o){const f=o.d;if("h"===l)this.onHandshake_(f);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let y=0;y<this.pendingDataMessages.length;++y)this.onDataMessage_(this.pendingDataMessages[y]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(f):"r"===l?this.onReset_(f):"e"===l?Lt("Server Error: "+f):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lt("Unknown control packet command: "+l)}}onHandshake_(o){const l=o.ts,f=o.v,y=o.h;this.sessionId=o.s,this.repoInfo_.host=y,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==f&&zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,f),Qa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,l){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pf{put(o,l,f,y){}merge(o,l,f,y){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,l,f){}onDisconnectMerge(o,l,f){}onDisconnectCancel(o,l){}reportStats(o){}}class lp{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,re.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...l){if(Array.isArray(this.listeners_[o])){const f=[...this.listeners_[o]];for(let y=0;y<f.length;y++)f[y].callback.apply(f[y].context,l)}}on(o,l,f){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:l,context:f});const y=this.getInitialEvent(o);y&&l.apply(f,y)}off(o,l,f){this.validateEventType_(o);const y=this.listeners_[o]||[];for(let D=0;D<y.length;D++)if(y[D].callback===l&&(!f||f===y[D].context))return void y.splice(D,1)}validateEventType_(o){(0,re.hu)(this.allowedEvents_.find(l=>l===o),"Unknown event: "+o)}}class bu extends lp{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bu}getInitialEvent(o){return(0,re.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class fr{constructor(o,l){if(void 0===l){this.pieces_=o.split("/");let f=0;for(let y=0;y<this.pieces_.length;y++)this.pieces_[y].length>0&&(this.pieces_[f]=this.pieces_[y],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=l}toString(){let o="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(o+="/"+this.pieces_[l]);return o||"/"}}function qn(){return new fr("")}function Kn(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function $r(c){return c.pieces_.length-c.pieceNum_}function ei(c){let o=c.pieceNum_;return o<c.pieces_.length&&o++,new fr(c.pieces_,o)}function Iu(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function Gc(c,o=0){return c.pieces_.slice(c.pieceNum_+o)}function cs(c){if(c.pieceNum_>=c.pieces_.length)return null;const o=[];for(let l=c.pieceNum_;l<c.pieces_.length-1;l++)o.push(c.pieces_[l]);return new fr(o,0)}function hn(c,o){const l=[];for(let f=c.pieceNum_;f<c.pieces_.length;f++)l.push(c.pieces_[f]);if(o instanceof fr)for(let f=o.pieceNum_;f<o.pieces_.length;f++)l.push(o.pieces_[f]);else{const f=o.split("/");for(let y=0;y<f.length;y++)f[y].length>0&&l.push(f[y])}return new fr(l,0)}function tr(c){return c.pieceNum_>=c.pieces_.length}function io(c,o){const l=Kn(c),f=Kn(o);if(null===l)return o;if(l===f)return io(ei(c),ei(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+c+")")}function Du(c,o){const l=Gc(c,0),f=Gc(o,0);for(let y=0;y<l.length&&y<f.length;y++){const D=Sr(l[y],f[y]);if(0!==D)return D}return l.length===f.length?0:l.length<f.length?-1:1}function cp(c,o){if($r(c)!==$r(o))return!1;for(let l=c.pieceNum_,f=o.pieceNum_;l<=c.pieces_.length;l++,f++)if(c.pieces_[l]!==o.pieces_[f])return!1;return!0}function Ii(c,o){let l=c.pieceNum_,f=o.pieceNum_;if($r(c)>$r(o))return!1;for(;l<c.pieces_.length;){if(c.pieces_[l]!==o.pieces_[f])return!1;++l,++f}return!0}class Rl{constructor(o,l){this.errorPrefix_=l,this.parts_=Gc(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,re.ug)(this.parts_[f]);Ra(this)}}function Ra(c){if(c.byteLength_>768)throw new Error(c.errorPrefix_+"has a key path longer than 768 bytes ("+c.byteLength_+").");if(c.parts_.length>32)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Na(c))}function Na(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}class ts extends lp{constructor(){let o,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",o="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const f=!document[o];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}static getInstance(){return new ts}getInitialEvent(o){return(0,re.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const Qu=1e3;let xd,sa=(()=>{class c extends pf{constructor(l,f,y,D,M,K,X,ue){if(super(),this.repoInfo_=l,this.applicationId_=f,this.onDataUpdate_=y,this.onConnectStatus_=D,this.onServerInfoUpdate_=M,this.authTokenProvider_=K,this.appCheckTokenProvider_=X,this.authOverride_=ue,this.id=c.nextPersistentConnectionId_++,this.log_=lt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qu,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ue&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ts.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&bu.getInstance().on("online",this.onOnline_,this)}sendRequest(l,f,y){const D=++this.requestNumber_,M={r:D,a:l,b:f};this.log_((0,re.Pz)(M)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(M),y&&(this.requestCBHash_[D]=y)}get(l){this.initConnection_();const f=new re.BH,y={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:y,onComplete:K=>{const X=K.d;"ok"===K.s?f.resolve(X):f.reject(X)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),f.promise}listen(l,f,y,D){this.initConnection_();const M=l._queryIdentifier,K=l._path.toString();this.log_("Listen called for "+K+" "+M),this.listens.has(K)||this.listens.set(K,new Map),(0,re.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(K).has(M),"listen() called twice for same path/queryId.");const X={onComplete:D,hashFn:f,query:l,tag:y};this.listens.get(K).set(M,X),this.connected_&&this.sendListen_(X)}sendGet_(l){const f=this.outstandingGets_[l];this.sendRequest("g",f.request,y=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(y)})}sendListen_(l){const f=l.query,y=f._path.toString(),D=f._queryIdentifier;this.log_("Listen on "+y+" for "+D);const M={p:y};l.tag&&(M.q=f._queryObject,M.t=l.tag),M.h=l.hashFn(),this.sendRequest("q",M,X=>{const ue=X.d,Oe=X.s;c.warnOnListenWarnings_(ue,f),(this.listens.get(y)&&this.listens.get(y).get(D))===l&&(this.log_("listen response",X),"ok"!==Oe&&this.removeListen_(y,D),l.onComplete&&l.onComplete(Oe,ue))})}static warnOnListenWarnings_(l,f){if(l&&"object"==typeof l&&(0,re.r3)(l,"w")){const y=(0,re.DV)(l,"w");if(Array.isArray(y)&&~y.indexOf("no_index")){const D='".indexOn": "'+f._queryParams.getIndex().toString()+'"',M=f._path.toString();zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${D} at ${M} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,re.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,f=(0,re.w9)(l)?"auth":"gauth",y={cred:l};null===this.authOverride_?y.noauth=!0:"object"==typeof this.authOverride_&&(y.authvar=this.authOverride_),this.sendRequest(f,y,D=>{const M=D.s,K=D.d||"error";this.authToken_===l&&("ok"===M?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(M,K))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const f=l.s,y=l.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,y)})}unlisten(l,f){const y=l._path.toString(),D=l._queryIdentifier;this.log_("Unlisten called for "+y+" "+D),(0,re.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(y,D)&&this.connected_&&this.sendUnlisten_(y,D,l._queryObject,f)}sendUnlisten_(l,f,y,D){this.log_("Unlisten on "+l+" for "+f);const M={p:l};D&&(M.q=y,M.t=D),this.sendRequest("n",M)}onDisconnectPut(l,f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,f,y):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:f,onComplete:y})}onDisconnectMerge(l,f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,f,y):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:f,onComplete:y})}onDisconnectCancel(l,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,f):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(l,f,y,D){const M={p:f,d:y};this.log_("onDisconnect "+l,M),this.sendRequest(l,M,K=>{D&&setTimeout(()=>{D(K.s,K.d)},Math.floor(0))})}put(l,f,y,D){this.putInternal("p",l,f,y,D)}merge(l,f,y,D){this.putInternal("m",l,f,y,D)}putInternal(l,f,y,D,M){this.initConnection_();const K={p:f,d:y};void 0!==M&&(K.h=M),this.outstandingPuts_.push({action:l,request:K,onComplete:D}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(l){const f=this.outstandingPuts_[l].action,y=this.outstandingPuts_[l].request,D=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(f,y,M=>{this.log_(f+" response",M),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),D&&D(M.s,M.d)})}reportStats(l){if(this.connected_){const f={c:l};this.log_("reportStats",f),this.sendRequest("s",f,y=>{"ok"!==y.s&&this.log_("reportStats","Error sending stats: "+y.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,re.Pz)(l));const f=l.r,y=this.requestCBHash_[f];y&&(delete this.requestCBHash_[f],y(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,f){this.log_("handleServerMessage",l,f),"d"===l?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===l?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===l?this.onListenRevoked_(f.p,f.q):"ac"===l?this.onAuthRevoked_(f.s,f.d):"apc"===l?this.onAppCheckRevoked_(f.s,f.d):"sd"===l?this.onSecurityDebugPacket_(f):Lt("Unrecognized action received from server: "+(0,re.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let f=Math.max(0,this.reconnectDelay_-l);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Et.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const f=l.onDataMessage_.bind(l),y=l.onReady_.bind(l),D=l.onRealtimeDisconnect_.bind(l),M=l.id+":"+c.nextConnectionId_++,K=l.lastSessionId;let X=!1,ue=null;const Oe=function(){ue?ue.close():(X=!0,D())};l.realtime_={close:Oe,sendRequest:function(Ft){(0,re.hu)(ue,"sendRequest call when we're not connected not allowed."),ue.sendRequest(Ft)}};const nt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Ft,Ut]=yield Promise.all([l.authTokenProvider_.getToken(nt),l.appCheckTokenProvider_.getToken(nt)]);X?Le("getToken() completed but was canceled"):(Le("getToken() completed. Creating connection."),l.authToken_=Ft&&Ft.accessToken,l.appCheckToken_=Ut&&Ut.token,ue=new tu(M,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,f,y,D,On=>{zt(On+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},K))}catch(Ft){l.log_("Failed to get token: "+Ft),X||(l.repoInfo_.nodeAdmin&&zt(Ft),Oe())}}})()}interrupt(l){Le("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){Le("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const f=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const f=this.outstandingPuts_[l];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,f){let y;y=f?f.map(M=>Rs(M)).join("$"):"default";const D=this.removeListen_(l,y);D&&D.onComplete&&D.onComplete("permission_denied")}removeListen_(l,f){const y=new fr(l).toString();let D;if(this.listens.has(y)){const M=this.listens.get(y);D=M.get(f),M.delete(f),0===M.size&&this.listens.delete(y)}else D=void 0;return D}onAuthRevoked_(l,f){Le("Auth token revoked: "+l+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,f){Le("App check token revoked: "+l+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const f of l.values())this.sendListen_(f);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let f="js";(0,re.Yr)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+f+"."+Vn.replace(/\./g,"-")]=1,(0,re.uI)()?l["framework.cordova"]=1:(0,re.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=bu.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&l}}return c.nextPersistentConnectionId_=0,c.nextConnectionId_=0,c})();class nr{constructor(o,l){this.name=o,this.node=l}static Wrap(o,l){return new nr(o,l)}}class Wc{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,l){const f=new nr(Pr,o),y=new nr(Pr,l);return 0!==this.compare(f,y)}minPost(){return nr.MIN}}class dp extends Wc{static get __EMPTY_NODE(){return xd}static set __EMPTY_NODE(o){xd=o}compare(o,l){return Sr(o.name,l.name)}isDefinedOn(o){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,l){return!1}minPost(){return nr.MIN}maxPost(){return new nr(bi,xd)}makePost(o,l){return(0,re.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new nr(o,xd)}toString(){return".key"}}const Ma=new dp;class oc{constructor(o,l,f,y,D=null){this.isReverse_=y,this.resultGenerator_=D,this.nodeStack_=[];let M=1;for(;!o.isEmpty();)if(M=l?f(o.key,l):1,y&&(M*=-1),M<0)o=this.isReverse_?o.left:o.right;else{if(0===M){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,o=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let Rd,ga=(()=>{class c{constructor(l,f,y,D,M){this.key=l,this.value=f,this.color=null!=y?y:c.RED,this.left=null!=D?D:$o.EMPTY_NODE,this.right=null!=M?M:$o.EMPTY_NODE}copy(l,f,y,D,M){return new c(null!=l?l:this.key,null!=f?f:this.value,null!=y?y:this.color,null!=D?D:this.left,null!=M?M:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,f,y){let D=this;const M=y(l,D.key);return D=M<0?D.copy(null,null,null,D.left.insert(l,f,y),null):0===M?D.copy(null,f,null,null,null):D.copy(null,null,null,null,D.right.insert(l,f,y)),D.fixUp_()}removeMin_(){if(this.left.isEmpty())return $o.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,f){let y,D;if(y=this,f(l,y.key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(l,f),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===f(l,y.key)){if(y.right.isEmpty())return $o.EMPTY_NODE;D=y.right.min_(),y=y.copy(D.key,D.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(l,f))}return y.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,f)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return c.RED=!0,c.BLACK=!1,c})();class $o{constructor(o,l=$o.EMPTY_NODE){this.comparator_=o,this.root_=l}insert(o,l){return new $o(this.comparator_,this.root_.insert(o,l,this.comparator_).copy(null,null,ga.BLACK,null,null))}remove(o){return new $o(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,ga.BLACK,null,null))}get(o){let l,f=this.root_;for(;!f.isEmpty();){if(l=this.comparator_(o,f.key),0===l)return f.value;l<0?f=f.left:l>0&&(f=f.right)}return null}getPredecessorKey(o){let l,f=this.root_,y=null;for(;!f.isEmpty();){if(l=this.comparator_(o,f.key),0===l){if(f.left.isEmpty())return y?y.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}l<0?f=f.left:l>0&&(y=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new oc(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,l){return new oc(this.root_,o,this.comparator_,!1,l)}getReverseIteratorFrom(o,l){return new oc(this.root_,o,this.comparator_,!0,l)}getReverseIterator(o){return new oc(this.root_,null,this.comparator_,!0,o)}}function ac(c,o){return Sr(c.name,o.name)}function uc(c,o){return Sr(c,o)}$o.EMPTY_NODE=new class{copy(o,l,f,y,D){return this}insert(o,l,f){return new ga(o,l,null)}remove(o,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hs=function(c){return"number"==typeof c?"number:"+Za(c):"string:"+c},lc=function(c){if(c.isLeafNode()){const o=c.val();(0,re.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,re.r3)(o,".sv"),"Priority must be a string or number.")}else(0,re.hu)(c===Rd||c.isEmpty(),"priority of unexpected type.");(0,re.hu)(c===Rd||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let cc,zc,Nd,Ho=(()=>{class c{constructor(l,f=c.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=f,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),lc(this.priorityNode_)}static set __childrenNodeConstructor(l){cc=l}static get __childrenNodeConstructor(){return cc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new c(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return tr(l)?this:".priority"===Kn(l)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,f){return null}updateImmediateChild(l,f){return".priority"===l?this.updatePriority(f):f.isEmpty()&&".priority"!==l?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,f).updatePriority(this.priorityNode_)}updateChild(l,f){const y=Kn(l);return null===y?f:f.isEmpty()&&".priority"!==y?this:((0,re.hu)(".priority"!==y||1===$r(l),".priority must be the last token in a path"),this.updateImmediateChild(y,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(ei(l),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,f){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+hs(this.priorityNode_.val())+":");const f=typeof this.value_;l+=f+":",l+="number"===f?Za(this.value_):this.value_,this.lazyHash_=P(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===c.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof c.__childrenNodeConstructor?-1:((0,re.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const f=typeof l.value_,y=typeof this.value_,D=c.VALUE_TYPE_ORDER.indexOf(f),M=c.VALUE_TYPE_ORDER.indexOf(y);return(0,re.hu)(D>=0,"Unknown leaf type: "+f),(0,re.hu)(M>=0,"Unknown leaf type: "+y),D===M?"object"===y?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:M-D}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const f=l;return this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_)}return!1}}return c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c})();const Cr=new class extends Wc{compare(o,l){const f=o.node.getPriority(),y=l.node.getPriority(),D=f.compareTo(y);return 0===D?Sr(o.name,l.name):D}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,l){return!o.getPriority().equals(l.getPriority())}minPost(){return nr.MIN}maxPost(){return new nr(bi,new Ho("[PRIORITY-POST]",Nd))}makePost(o,l){const f=zc(o);return new nr(l,new Ho("[PRIORITY-POST]",f))}toString(){return".priority"}},hp=Math.log(2);class fp{constructor(o){this.count=parseInt(Math.log(o+1)/hp,10),this.current_=this.count-1;const y=(D=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&y}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const dc=function(c,o,l,f){c.sort(o);const y=function(X,ue){const Oe=ue-X;let Ue,nt;if(0===Oe)return null;if(1===Oe)return Ue=c[X],nt=l?l(Ue):Ue,new ga(nt,Ue.node,ga.BLACK,null,null);{const Ft=parseInt(Oe/2,10)+X,Ut=y(X,Ft),On=y(Ft+1,ue);return Ue=c[Ft],nt=l?l(Ue):Ue,new ga(nt,Ue.node,ga.BLACK,Ut,On)}},K=function(X){let ue=null,Oe=null,Ue=c.length;const nt=function(Ut,On){const kn=Ue-Ut,Co=Ue;Ue-=Ut;const Zs=y(kn+1,Co),Wi=c[kn],rs=l?l(Wi):Wi;Ft(new ga(rs,Wi.node,On,null,Zs))},Ft=function(Ut){ue?(ue.left=Ut,ue=Ut):(Oe=Ut,ue=Ut)};for(let Ut=0;Ut<X.count;++Ut){const On=X.nextBitIsOne(),kn=Math.pow(2,X.count-(Ut+1));On?nt(kn,ga.BLACK):(nt(kn,ga.BLACK),nt(kn,ga.RED))}return Oe}(new fp(c.length));return new $o(f||o,K)};let qc;const hc={};class ji{constructor(o,l){this.indexes_=o,this.indexSet_=l}static get Default(){return(0,re.hu)(hc&&Cr,"ChildrenNode.ts has not been loaded"),qc=qc||new ji({".priority":hc},{".priority":Cr}),qc}get(o){const l=(0,re.DV)(this.indexes_,o);if(!l)throw new Error("No index defined for "+o);return l instanceof $o?l:null}hasIndex(o){return(0,re.r3)(this.indexSet_,o.toString())}addIndex(o,l){(0,re.hu)(o!==Ma,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let y=!1;const D=l.getIterator(nr.Wrap);let K,M=D.getNext();for(;M;)y=y||o.isDefinedOn(M.node),f.push(M),M=D.getNext();K=y?dc(f,o.getCompare()):hc;const X=o.toString(),ue=Object.assign({},this.indexSet_);ue[X]=o;const Oe=Object.assign({},this.indexes_);return Oe[X]=K,new ji(Oe,ue)}addToIndexes(o,l){const f=(0,re.UI)(this.indexes_,(y,D)=>{const M=(0,re.DV)(this.indexSet_,D);if((0,re.hu)(M,"Missing index implementation for "+D),y===hc){if(M.isDefinedOn(o.node)){const K=[],X=l.getIterator(nr.Wrap);let ue=X.getNext();for(;ue;)ue.name!==o.name&&K.push(ue),ue=X.getNext();return K.push(o),dc(K,M.getCompare())}return hc}{const K=l.get(o.name);let X=y;return K&&(X=X.remove(new nr(o.name,K))),X.insert(o,o.node)}});return new ji(f,this.indexSet_)}removeFromIndexes(o,l){const f=(0,re.UI)(this.indexes_,y=>{if(y===hc)return y;{const D=l.get(o.name);return D?y.remove(new nr(o.name,D)):y}});return new ji(f,this.indexSet_)}}let Ml,In=(()=>{class c{constructor(l,f,y){this.children_=l,this.priorityNode_=f,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&lc(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ml||(Ml=new c(new $o(uc),null,ji.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ml}updatePriority(l){return this.children_.isEmpty()?this:new c(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const f=this.children_.get(l);return null===f?Ml:f}}getChild(l){const f=Kn(l);return null===f?this:this.getImmediateChild(f).getChild(ei(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,f){if((0,re.hu)(f,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(f);{const y=new nr(l,f);let D,M;f.isEmpty()?(D=this.children_.remove(l),M=this.indexMap_.removeFromIndexes(y,this.children_)):(D=this.children_.insert(l,f),M=this.indexMap_.addToIndexes(y,this.children_));const K=D.isEmpty()?Ml:this.priorityNode_;return new c(D,K,M)}}updateChild(l,f){const y=Kn(l);if(null===y)return f;{(0,re.hu)(".priority"!==Kn(l)||1===$r(l),".priority must be the last token in a path");const D=this.getImmediateChild(y).updateChild(ei(l),f);return this.updateImmediateChild(y,D)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const f={};let y=0,D=0,M=!0;if(this.forEachChild(Cr,(K,X)=>{f[K]=X.val(l),y++,M&&c.INTEGER_REGEXP_.test(K)?D=Math.max(D,Number(K)):M=!1}),!l&&M&&D<2*y){const K=[];for(const X in f)K[X]=f[X];return K}return l&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+hs(this.getPriority().val())+":"),this.forEachChild(Cr,(f,y)=>{const D=y.hash();""!==D&&(l+=":"+f+":"+D)}),this.lazyHash_=""===l?"":P(l)}return this.lazyHash_}getPredecessorChildName(l,f,y){const D=this.resolveIndex_(y);if(D){const M=D.getPredecessorKey(new nr(l,f));return M?M.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const f=this.resolveIndex_(l);if(f){const y=f.minKey();return y&&y.name}return this.children_.minKey()}getFirstChild(l){const f=this.getFirstChildName(l);return f?new nr(f,this.children_.get(f)):null}getLastChildName(l){const f=this.resolveIndex_(l);if(f){const y=f.maxKey();return y&&y.name}return this.children_.maxKey()}getLastChild(l){const f=this.getLastChildName(l);return f?new nr(f,this.children_.get(f)):null}forEachChild(l,f){const y=this.resolveIndex_(l);return y?y.inorderTraversal(D=>f(D.name,D.node)):this.children_.inorderTraversal(f)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,f){const y=this.resolveIndex_(f);if(y)return y.getIteratorFrom(l,D=>D);{const D=this.children_.getIteratorFrom(l.name,nr.Wrap);let M=D.peek();for(;null!=M&&f.compare(M,l)<0;)D.getNext(),M=D.peek();return D}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,f){const y=this.resolveIndex_(f);if(y)return y.getReverseIteratorFrom(l,D=>D);{const D=this.children_.getReverseIteratorFrom(l.name,nr.Wrap);let M=D.peek();for(;null!=M&&f.compare(M,l)>0;)D.getNext(),M=D.peek();return D}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===ma?-1:0}withIndex(l){if(l===Ma||this.indexMap_.hasIndex(l))return this;{const f=this.indexMap_.addIndex(l,this.children_);return new c(this.children_,this.priorityNode_,f)}}isIndexed(l){return l===Ma||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const f=l;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const y=this.getIterator(Cr),D=f.getIterator(Cr);let M=y.getNext(),K=D.getNext();for(;M&&K;){if(M.name!==K.name||!M.node.equals(K.node))return!1;M=y.getNext(),K=D.getNext()}return null===M&&null===K}return!1}return!1}}resolveIndex_(l){return l===Ma?null:this.indexMap_.get(l.toString())}}return c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c})();const ma=new class extends In{constructor(){super(new $o(uc),In.EMPTY_NODE,ji.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return In.EMPTY_NODE}isEmpty(){return!1}};function yi(c,o=null){if(null===c)return In.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(o=c[".priority"]),(0,re.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new Ho(c,yi(o));if(c instanceof Array){let l=In.EMPTY_NODE;return jr(c,(f,y)=>{if((0,re.r3)(c,f)&&"."!==f.substring(0,1)){const D=yi(y);(D.isLeafNode()||!D.isEmpty())&&(l=l.updateImmediateChild(f,D))}}),l.updatePriority(yi(o))}{const l=[];let f=!1;if(jr(c,(M,K)=>{if("."!==M.substring(0,1)){const X=yi(K);X.isEmpty()||(f=f||!X.getPriority().isEmpty(),l.push(new nr(M,X)))}}),0===l.length)return In.EMPTY_NODE;const D=dc(l,ac,M=>M.name,uc);if(f){const M=dc(l,Cr.getCompare());return new In(D,yi(o),new ji({".priority":M},{".priority":Cr}))}return new In(D,yi(o),ji.Default)}}Object.defineProperties(nr,{MIN:{value:new nr(Pr,In.EMPTY_NODE)},MAX:{value:new nr(bi,ma)}}),dp.__EMPTY_NODE=In.EMPTY_NODE,Ho.__childrenNodeConstructor=In,Rd=ma,Nd=ma,function(c){zc=c}(yi);class Pl extends Wc{constructor(o){super(),this.indexPath_=o,(0,re.hu)(!tr(o)&&".priority"!==Kn(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,l){const f=this.extractChild(o.node),y=this.extractChild(l.node),D=f.compareTo(y);return 0===D?Sr(o.name,l.name):D}makePost(o,l){const f=yi(o),y=In.EMPTY_NODE.updateChild(this.indexPath_,f);return new nr(l,y)}maxPost(){const o=In.EMPTY_NODE.updateChild(this.indexPath_,ma);return new nr(bi,o)}toString(){return Gc(this.indexPath_,0).join("/")}}const fc=new class extends Wc{compare(o,l){const f=o.node.compareTo(l.node);return 0===f?Sr(o.name,l.name):f}isDefinedOn(o){return!0}indexedValueChanged(o,l){return!o.equals(l)}minPost(){return nr.MIN}maxPost(){return nr.MAX}makePost(o,l){const f=yi(o);return new nr(l,f)}toString(){return".value"}},Ol="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",E=function(){let c=0;const o=[];return function(l){const f=l===c;let y;c=l;const D=new Array(8);for(y=7;y>=0;y--)D[y]=Ol.charAt(l%64),l=Math.floor(l/64);(0,re.hu)(0===l,"Cannot push at time == 0");let M=D.join("");if(f){for(y=11;y>=0&&63===o[y];y--)o[y]=0;o[y]++}else for(y=0;y<12;y++)o[y]=Math.floor(64*Math.random());for(y=0;y<12;y++)M+=Ol.charAt(o[y]);return(0,re.hu)(20===M.length,"nextPushId: Length should be 20."),M}}(),g=function(c){if(c===""+Ya)return"-";const o=Vc(c);if(null!=o)return""+(o+1);const l=new Array(c.length);for(let M=0;M<l.length;M++)l[M]=c.charAt(M);if(l.length<786)return l.push("-"),l.join("");let f=l.length-1;for(;f>=0&&"z"===l[f];)f--;if(-1===f)return bi;const D=Ol.charAt(Ol.indexOf(l[f])+1);return l[f]=D,l.slice(0,f+1).join("")},m=function(c){if(c===""+ec)return Pr;const o=Vc(c);if(null!=o)return""+(o-1);const l=new Array(c.length);for(let f=0;f<l.length;f++)l[f]=c.charAt(f);return"-"===l[l.length-1]?1===l.length?""+Ya:(delete l[l.length-1],l.join("")):(l[l.length-1]=Ol.charAt(Ol.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function b(c){return{type:"value",snapshotNode:c}}function j(c,o){return{type:"child_added",snapshotNode:o,childName:c}}function Z(c,o){return{type:"child_removed",snapshotNode:o,childName:c}}function _e(c,o,l){return{type:"child_changed",snapshotNode:o,childName:c,oldSnap:l}}class wt{constructor(o){this.index_=o}updateChild(o,l,f,y,D,M){(0,re.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const K=o.getImmediateChild(l);return K.getChild(y).equals(f.getChild(y))&&K.isEmpty()===f.isEmpty()||(null!=M&&(f.isEmpty()?o.hasChild(l)?M.trackChildChange(Z(l,K)):(0,re.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):K.isEmpty()?M.trackChildChange(j(l,f)):M.trackChildChange(_e(l,f,K))),o.isLeafNode()&&f.isEmpty())?o:o.updateImmediateChild(l,f).withIndex(this.index_)}updateFullNode(o,l,f){return null!=f&&(o.isLeafNode()||o.forEachChild(Cr,(y,D)=>{l.hasChild(y)||f.trackChildChange(Z(y,D))}),l.isLeafNode()||l.forEachChild(Cr,(y,D)=>{if(o.hasChild(y)){const M=o.getImmediateChild(y);M.equals(D)||f.trackChildChange(_e(y,D,M))}else f.trackChildChange(j(y,D))})),l.withIndex(this.index_)}updatePriority(o,l){return o.isEmpty()?In.EMPTY_NODE:o.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ft{constructor(o){this.indexedFilter_=new wt(o.getIndex()),this.index_=o.getIndex(),this.startPost_=ft.getStartPost_(o),this.endPost_=ft.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,l,f,y,D,M){return this.matches(new nr(l,f))||(f=In.EMPTY_NODE),this.indexedFilter_.updateChild(o,l,f,y,D,M)}updateFullNode(o,l,f){l.isLeafNode()&&(l=In.EMPTY_NODE);let y=l.withIndex(this.index_);y=y.updatePriority(In.EMPTY_NODE);const D=this;return l.forEachChild(Cr,(M,K)=>{D.matches(new nr(M,K))||(y=y.updateImmediateChild(M,In.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,y,f)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const l=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),l)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const l=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),l)}return o.getIndex().maxPost()}}class Kt{constructor(o){this.rangedFilter_=new ft(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,l,f,y,D,M){return this.rangedFilter_.matches(new nr(l,f))||(f=In.EMPTY_NODE),o.getImmediateChild(l).equals(f)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,l,f,y,D,M):this.fullLimitUpdateChild_(o,l,f,D,M)}updateFullNode(o,l,f){let y;if(l.isLeafNode()||l.isEmpty())y=In.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let D;y=In.EMPTY_NODE.withIndex(this.index_),D=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let M=0;for(;D.hasNext()&&M<this.limit_;){const K=D.getNext();let X;if(X=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),K)<=0:this.index_.compare(K,this.rangedFilter_.getEndPost())<=0,!X)break;y=y.updateImmediateChild(K.name,K.node),M++}}else{let D,M,K,X;if(y=l.withIndex(this.index_),y=y.updatePriority(In.EMPTY_NODE),this.reverse_){X=y.getReverseIterator(this.index_),D=this.rangedFilter_.getEndPost(),M=this.rangedFilter_.getStartPost();const Ue=this.index_.getCompare();K=(nt,Ft)=>Ue(Ft,nt)}else X=y.getIterator(this.index_),D=this.rangedFilter_.getStartPost(),M=this.rangedFilter_.getEndPost(),K=this.index_.getCompare();let ue=0,Oe=!1;for(;X.hasNext();){const Ue=X.getNext();!Oe&&K(D,Ue)<=0&&(Oe=!0),Oe&&ue<this.limit_&&K(Ue,M)<=0?ue++:y=y.updateImmediateChild(Ue.name,In.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,y,f)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,l,f,y,D){let M;if(this.reverse_){const Ue=this.index_.getCompare();M=(nt,Ft)=>Ue(Ft,nt)}else M=this.index_.getCompare();const K=o;(0,re.hu)(K.numChildren()===this.limit_,"");const X=new nr(l,f),ue=this.reverse_?K.getFirstChild(this.index_):K.getLastChild(this.index_),Oe=this.rangedFilter_.matches(X);if(K.hasChild(l)){const Ue=K.getImmediateChild(l);let nt=y.getChildAfterChild(this.index_,ue,this.reverse_);for(;null!=nt&&(nt.name===l||K.hasChild(nt.name));)nt=y.getChildAfterChild(this.index_,nt,this.reverse_);const Ft=null==nt?1:M(nt,X);if(Oe&&!f.isEmpty()&&Ft>=0)return null!=D&&D.trackChildChange(_e(l,f,Ue)),K.updateImmediateChild(l,f);{null!=D&&D.trackChildChange(Z(l,Ue));const On=K.updateImmediateChild(l,In.EMPTY_NODE);return null!=nt&&this.rangedFilter_.matches(nt)?(null!=D&&D.trackChildChange(j(nt.name,nt.node)),On.updateImmediateChild(nt.name,nt.node)):On}}return f.isEmpty()?o:Oe&&M(ue,X)>=0?(null!=D&&(D.trackChildChange(Z(ue.name,ue.node)),D.trackChildChange(j(l,f))),K.updateImmediateChild(l,f).updateImmediateChild(ue.name,In.EMPTY_NODE)):o}}class Qt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Cr}copy(){const o=new Qt;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function Kc(c,o,l){const f=c.copy();return f.startSet_=!0,void 0===o&&(o=null),f.indexStartValue_=o,null!=l?(f.startNameSet_=!0,f.indexStartName_=l):(f.startNameSet_=!1,f.indexStartName_=""),f}function Md(c,o,l){const f=c.copy();return f.endSet_=!0,void 0===o&&(o=null),f.indexEndValue_=o,void 0!==l?(f.endNameSet_=!0,f.indexEndName_=l):(f.endNameSet_=!1,f.indexEndName_=""),f}function pc(c,o){const l=c.copy();return l.index_=o,l}function Pd(c){const o={};if(c.isDefault())return o;let l;return c.index_===Cr?l="$priority":c.index_===fc?l="$value":c.index_===Ma?l="$key":((0,re.hu)(c.index_ instanceof Pl,"Unrecognized index type!"),l=c.index_.toString()),o.orderBy=(0,re.Pz)(l),c.startSet_&&(o.startAt=(0,re.Pz)(c.indexStartValue_),c.startNameSet_&&(o.startAt+=","+(0,re.Pz)(c.indexStartName_))),c.endSet_&&(o.endAt=(0,re.Pz)(c.indexEndValue_),c.endNameSet_&&(o.endAt+=","+(0,re.Pz)(c.indexEndName_))),c.limitSet_&&(c.isViewFromLeft()?o.limitToFirst=c.limit_:o.limitToLast=c.limit_),o}function Ih(c){const o={};if(c.startSet_&&(o.sp=c.indexStartValue_,c.startNameSet_&&(o.sn=c.indexStartName_)),c.endSet_&&(o.ep=c.indexEndValue_,c.endNameSet_&&(o.en=c.indexEndName_)),c.limitSet_){o.l=c.limit_;let l=c.viewFrom_;""===l&&(l=c.isViewFromLeft()?"l":"r"),o.vf=l}return c.index_!==Cr&&(o.i=c.index_.toString()),o}class Zc extends pf{constructor(o,l,f,y){super(),this.repoInfo_=o,this.onDataUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.log_=lt("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,l){return void 0!==l?"tag$"+l:((0,re.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,l,f,y){const D=o._path.toString();this.log_("Listen called for "+D+" "+o._queryIdentifier);const M=Zc.getListenId_(o,f),K={};this.listens_[M]=K;const X=Pd(o._queryParams);this.restRequest_(D+".json",X,(ue,Oe)=>{let Ue=Oe;if(404===ue&&(Ue=null,ue=null),null===ue&&this.onDataUpdate_(D,Ue,!1,f),(0,re.DV)(this.listens_,M)===K){let nt;nt=ue?401===ue?"permission_denied":"rest_error:"+ue:"ok",y(nt,null)}})}unlisten(o,l){const f=Zc.getListenId_(o,l);delete this.listens_[f]}get(o){const l=Pd(o._queryParams),f=o._path.toString(),y=new re.BH;return this.restRequest_(f+".json",l,(D,M)=>{let K=M;404===D&&(K=null,D=null),null===D?(this.onDataUpdate_(f,K,!1,null),y.resolve(K)):y.reject(new Error(K))}),y.promise}refreshAuthToken(o){}restRequest_(o,l={},f){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([y,D])=>{y&&y.accessToken&&(l.auth=y.accessToken),D&&D.token&&(l.ac=D.token);const M=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,re.xO)(l);this.log_("Sending REST request for "+M);const K=new XMLHttpRequest;K.onreadystatechange=()=>{if(f&&4===K.readyState){this.log_("REST Response for "+M+" received. status:",K.status,"response:",K.responseText);let X=null;if(K.status>=200&&K.status<300){try{X=(0,re.cI)(K.responseText)}catch(ue){zt("Failed to parse JSON response for "+M+": "+K.responseText)}f(null,X)}else 401!==K.status&&404!==K.status&&zt("Got unsuccessful REST response for "+M+" Status: "+K.status),f(K.status);f=null}},K.open("GET",M,!0),K.send()})}}class Dh{constructor(){this.rootNode_=In.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,l){this.rootNode_=this.rootNode_.updateChild(o,l)}}function Yc(){return{value:null,children:new Map}}function aa(c,o,l){if(tr(o))c.value=l,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(o,l);else{const f=Kn(o);c.children.has(f)||c.children.set(f,Yc()),aa(c.children.get(f),o=ei(o),l)}}function Qc(c,o){if(tr(o))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;{const l=c.value;return c.value=null,l.forEachChild(Cr,(f,y)=>{aa(c,new fr(f),y)}),Qc(c,o)}}if(c.children.size>0){const l=Kn(o);return o=ei(o),c.children.has(l)&&Qc(c.children.get(l),o)&&c.children.delete(l),0===c.children.size}return!0}function Ps(c,o,l){null!==c.value?l(o,c.value):function(c,o){c.children.forEach((l,f)=>{o(f,l)})}(c,(f,y)=>{Ps(y,new fr(o.toString()+"/"+f),l)})}class Th{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),l=Object.assign({},o);return this.last_&&jr(this.last_,(f,y)=>{l[f]=l[f]-y}),this.last_=o,l}}class Lm{constructor(o,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Th(o);const f=1e4+2e4*Math.random();Qa(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const o=this.statsListener_.get(),l={};let f=!1;jr(o,(y,D)=>{D>0&&(0,re.r3)(this.statsToReport_,y)&&(l[y]=D,f=!0)}),f&&this.server_.reportStats(l),Qa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _a=(()=>(function(c){c[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_a||(_a={})),_a))();function Au(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}class Ju{constructor(o,l,f){this.path=o,this.affectedTree=l,this.revert=f,this.type=_a.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(tr(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new fr(o));return new Ju(qn(),l,this.revert)}}return(0,re.hu)(Kn(this.path)===o,"operationForChild called for unrelated child."),new Ju(ei(this.path),this.affectedTree,this.revert)}}class Xu{constructor(o,l){this.source=o,this.path=l,this.type=_a.LISTEN_COMPLETE}operationForChild(o){return tr(this.path)?new Xu(this.source,qn()):new Xu(this.source,ei(this.path))}}class mc{constructor(o,l,f){this.source=o,this.path=l,this.snap=f,this.type=_a.OVERWRITE}operationForChild(o){return tr(this.path)?new mc(this.source,qn(),this.snap.getImmediateChild(o)):new mc(this.source,ei(this.path),this.snap)}}class Fl{constructor(o,l,f){this.source=o,this.path=l,this.children=f,this.type=_a.MERGE}operationForChild(o){if(tr(this.path)){const l=this.children.subtree(new fr(o));return l.isEmpty()?null:l.value?new mc(this.source,qn(),l.value):new Fl(this.source,qn(),l)}return(0,re.hu)(Kn(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Fl(this.source,ei(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Pa{constructor(o,l,f){this.node_=o,this.fullyInitialized_=l,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(tr(o))return this.isFullyInitialized()&&!this.filtered_;const l=Kn(o);return this.isCompleteForChild(l)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Vm{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function wf(c,o,l,f,y,D){const M=f.filter(K=>K.type===l);M.sort((K,X)=>function(c,o,l){if(null==o.childName||null==l.childName)throw(0,re.g5)("Should only compare child_ events.");const f=new nr(o.childName,o.snapshotNode),y=new nr(l.childName,l.snapshotNode);return c.index_.compare(f,y)}(c,K,X)),M.forEach(K=>{const X=function(c,o,l){return"value"===o.type||"child_removed"===o.type||(o.prevName=l.getPredecessorChildName(o.childName,o.snapshotNode,c.index_)),o}(c,K,D);y.forEach(ue=>{ue.respondsTo(K.type)&&o.push(ue.createEvent(X,c.query_))})})}function _c(c,o){return{eventCache:c,serverCache:o}}function Ll(c,o,l,f){return _c(new Pa(o,l,f),c.serverCache)}function kd(c,o,l,f){return _c(c.eventCache,new Pa(o,l,f))}function Cf(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function Jc(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}let gp;class Di{constructor(o,l=(()=>(gp||(gp=new $o(Eo)),gp))()){this.value=o,this.children=l}static fromObject(o){let l=new Di(null);return jr(o,(f,y)=>{l=l.set(new fr(f),y)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,l){if(null!=this.value&&l(this.value))return{path:qn(),value:this.value};if(tr(o))return null;{const f=Kn(o),y=this.children.get(f);if(null!==y){const D=y.findRootMostMatchingPathAndValue(ei(o),l);return null!=D?{path:hn(new fr(f),D.path),value:D.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(tr(o))return this;{const l=Kn(o),f=this.children.get(l);return null!==f?f.subtree(ei(o)):new Di(null)}}set(o,l){if(tr(o))return new Di(l,this.children);{const f=Kn(o),D=(this.children.get(f)||new Di(null)).set(ei(o),l),M=this.children.insert(f,D);return new Di(this.value,M)}}remove(o){if(tr(o))return this.children.isEmpty()?new Di(null):new Di(null,this.children);{const l=Kn(o),f=this.children.get(l);if(f){const y=f.remove(ei(o));let D;return D=y.isEmpty()?this.children.remove(l):this.children.insert(l,y),null===this.value&&D.isEmpty()?new Di(null):new Di(this.value,D)}return this}}get(o){if(tr(o))return this.value;{const l=Kn(o),f=this.children.get(l);return f?f.get(ei(o)):null}}setTree(o,l){if(tr(o))return l;{const f=Kn(o),D=(this.children.get(f)||new Di(null)).setTree(ei(o),l);let M;return M=D.isEmpty()?this.children.remove(f):this.children.insert(f,D),new Di(this.value,M)}}fold(o){return this.fold_(qn(),o)}fold_(o,l){const f={};return this.children.inorderTraversal((y,D)=>{f[y]=D.fold_(hn(o,y),l)}),l(o,this.value,f)}findOnPath(o,l){return this.findOnPath_(o,qn(),l)}findOnPath_(o,l,f){const y=!!this.value&&f(l,this.value);if(y)return y;if(tr(o))return null;{const D=Kn(o),M=this.children.get(D);return M?M.findOnPath_(ei(o),hn(l,D),f):null}}foreachOnPath(o,l){return this.foreachOnPath_(o,qn(),l)}foreachOnPath_(o,l,f){if(tr(o))return this;{this.value&&f(l,this.value);const y=Kn(o),D=this.children.get(y);return D?D.foreachOnPath_(ei(o),hn(l,y),f):new Di(null)}}foreach(o){this.foreach_(qn(),o)}foreach_(o,l){this.children.inorderTraversal((f,y)=>{y.foreach_(hn(o,f),l)}),this.value&&l(o,this.value)}foreachChild(o){this.children.inorderTraversal((l,f)=>{f.value&&o(l,f.value)})}}class $i{constructor(o){this.writeTree_=o}static empty(){return new $i(new Di(null))}}function el(c,o,l){if(tr(o))return new $i(new Di(l));{const f=c.writeTree_.findRootMostValueAndPath(o);if(null!=f){const y=f.path;let D=f.value;const M=io(y,o);return D=D.updateChild(M,l),new $i(c.writeTree_.set(y,D))}{const y=new Di(l),D=c.writeTree_.setTree(o,y);return new $i(D)}}}function Vl(c,o,l){let f=c;return jr(l,(y,D)=>{f=el(f,hn(o,y),D)}),f}function Dg(c,o){if(tr(o))return $i.empty();{const l=c.writeTree_.setTree(o,new Di(null));return new $i(l)}}function Tg(c,o){return null!=Fd(c,o)}function Fd(c,o){const l=c.writeTree_.findRootMostValueAndPath(o);return null!=l?c.writeTree_.get(l.path).getChild(io(l.path,o)):null}function mp(c){const o=[],l=c.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Cr,(f,y)=>{o.push(new nr(f,y))}):c.writeTree_.children.inorderTraversal((f,y)=>{null!=y.value&&o.push(new nr(f,y.value))}),o}function xu(c,o){if(tr(o))return c;{const l=Fd(c,o);return new $i(null!=l?new Di(l):c.writeTree_.subtree(o))}}function Sg(c){return c.writeTree_.isEmpty()}function Ld(c,o){return Sh(qn(),c.writeTree_,o)}function Sh(c,o,l){if(null!=o.value)return l.updateChild(c,o.value);{let f=null;return o.children.inorderTraversal((y,D)=>{".priority"===y?((0,re.hu)(null!==D.value,"Priority writes must always be leaf nodes"),f=D.value):l=Sh(hn(c,y),D,l)}),!l.getChild(c).isEmpty()&&null!==f&&(l=l.updateChild(hn(c,".priority"),f)),l}}function An(c,o){return Ng(o,c)}function xg(c,o){if(c.snap)return Ii(c.path,o);for(const l in c.children)if(c.children.hasOwnProperty(l)&&Ii(hn(c.path,l),o))return!0;return!1}function xh(c){return c.visible}function tl(c,o,l){let f=$i.empty();for(let y=0;y<c.length;++y){const D=c[y];if(o(D)){const M=D.path;let K;if(D.snap)Ii(l,M)?(K=io(l,M),f=el(f,K,D.snap)):Ii(M,l)&&(K=io(M,l),f=el(f,qn(),D.snap.getChild(K)));else{if(!D.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(Ii(l,M))K=io(l,M),f=Vl(f,K,D.children);else if(Ii(M,l))if(K=io(M,l),tr(K))f=Vl(f,qn(),D.children);else{const X=(0,re.DV)(D.children,Kn(K));if(X){const ue=X.getChild(ei(K));f=el(f,qn(),ue)}}}}}return f}function nl(c,o,l,f,y){if(f||y){const D=xu(c.visibleWrites,o);return!y&&Sg(D)?l:y||null!=l||Tg(D,qn())?Ld(tl(c.allWrites,function(ue){return(ue.visible||y)&&(!f||!~f.indexOf(ue.writeId))&&(Ii(ue.path,o)||Ii(o,ue.path))},o),l||In.EMPTY_NODE):null}{const D=Fd(c.visibleWrites,o);if(null!=D)return D;{const M=xu(c.visibleWrites,o);return Sg(M)?l:null!=l||Tg(M,qn())?Ld(M,l||In.EMPTY_NODE):null}}}function Oa(c,o,l,f){return nl(c.writeTree,c.treePath,o,l,f)}function Ud(c,o){return function(c,o,l){let f=In.EMPTY_NODE;const y=Fd(c.visibleWrites,o);if(y)return y.isLeafNode()||y.forEachChild(Cr,(D,M)=>{f=f.updateImmediateChild(D,M)}),f;if(l){const D=xu(c.visibleWrites,o);return l.forEachChild(Cr,(M,K)=>{const X=Ld(xu(D,new fr(M)),K);f=f.updateImmediateChild(M,X)}),mp(D).forEach(M=>{f=f.updateImmediateChild(M.name,M.node)}),f}return mp(xu(c.visibleWrites,o)).forEach(M=>{f=f.updateImmediateChild(M.name,M.node)}),f}(c.writeTree,c.treePath,o)}function vp(c,o,l,f){return function(c,o,l,f,y){(0,re.hu)(f||y,"Either existingEventSnap or existingServerSnap must exist");const D=hn(o,l);if(Tg(c.visibleWrites,D))return null;{const M=xu(c.visibleWrites,D);return Sg(M)?y.getChild(l):Ld(M,y.getChild(l))}}(c.writeTree,c.treePath,o,l,f)}function Rg(c,o){return function(c,o){return Fd(c.visibleWrites,o)}(c.writeTree,hn(c.treePath,o))}function Ep(c,o,l){return function(c,o,l,f){const y=hn(o,l),D=Fd(c.visibleWrites,y);return null!=D?D:f.isCompleteForChild(l)?Ld(xu(c.visibleWrites,y),f.getNode().getImmediateChild(l)):null}(c.writeTree,c.treePath,o,l)}function wp(c,o){return Ng(hn(c.treePath,o),c.writeTree)}function Ng(c,o){return{treePath:c,writeTree:o}}class cv{constructor(){this.changeMap=new Map}trackChildChange(o){const l=o.type,f=o.childName;(0,re.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==f,"Only non-priority child changes can be tracked.");const y=this.changeMap.get(f);if(y){const D=y.type;if("child_added"===l&&"child_removed"===D)this.changeMap.set(f,_e(f,o.snapshotNode,y.snapshotNode));else if("child_removed"===l&&"child_added"===D)this.changeMap.delete(f);else if("child_removed"===l&&"child_changed"===D)this.changeMap.set(f,Z(f,y.oldSnap));else if("child_changed"===l&&"child_added"===D)this.changeMap.set(f,j(f,o.snapshotNode));else{if("child_changed"!==l||"child_changed"!==D)throw(0,re.g5)("Illegal combination of changes: "+o+" occurred after "+y);this.changeMap.set(f,_e(f,o.snapshotNode,y.oldSnap))}}else this.changeMap.set(f,o)}getChanges(){return Array.from(this.changeMap.values())}}const Pg=new class{getCompleteChild(o){return null}getChildAfterChild(o,l,f){return null}};class Cp{constructor(o,l,f=null){this.writes_=o,this.viewCache_=l,this.optCompleteServerCache_=f}getCompleteChild(o){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(o))return l.getNode().getImmediateChild(o);{const f=null!=this.optCompleteServerCache_?new Pa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ep(this.writes_,o,f)}}getChildAfterChild(o,l,f){const y=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jc(this.viewCache_),D=function(c,o,l,f,y,D){return function(c,o,l,f,y,D,M){let K;const X=xu(c.visibleWrites,o),ue=Fd(X,qn());if(null!=ue)K=ue;else{if(null==l)return[];K=Ld(X,l)}if(K=K.withIndex(M),K.isEmpty()||K.isLeafNode())return[];{const Oe=[],Ue=M.getCompare(),nt=D?K.getReverseIteratorFrom(f,M):K.getIteratorFrom(f,M);let Ft=nt.getNext();for(;Ft&&Oe.length<y;)0!==Ue(Ft,f)&&Oe.push(Ft),Ft=nt.getNext();return Oe}}(c.writeTree,c.treePath,o,l,f,y,D)}(this.writes_,y,l,1,f,o);return 0===D.length?null:D[0]}}function ty(c,o,l,f,y,D){const M=o.eventCache;if(null!=Rg(f,l))return o;{let K,X;if(tr(l))if((0,re.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const ue=Jc(o),Ue=Ud(f,ue instanceof In?ue:In.EMPTY_NODE);K=c.filter.updateFullNode(o.eventCache.getNode(),Ue,D)}else{const ue=Oa(f,Jc(o));K=c.filter.updateFullNode(o.eventCache.getNode(),ue,D)}else{const ue=Kn(l);if(".priority"===ue){(0,re.hu)(1===$r(l),"Can't have a priority with additional path components");const Oe=M.getNode();X=o.serverCache.getNode();const Ue=vp(f,l,Oe,X);K=null!=Ue?c.filter.updatePriority(Oe,Ue):M.getNode()}else{const Oe=ei(l);let Ue;if(M.isCompleteForChild(ue)){X=o.serverCache.getNode();const nt=vp(f,l,M.getNode(),X);Ue=null!=nt?M.getNode().getImmediateChild(ue).updateChild(Oe,nt):M.getNode().getImmediateChild(ue)}else Ue=Ep(f,ue,o.serverCache);K=null!=Ue?c.filter.updateChild(M.getNode(),ue,Ue,Oe,y,D):M.getNode()}}return Ll(o,K,M.isFullyInitialized()||tr(l),c.filter.filtersNodes())}}function Ip(c,o,l,f,y,D,M,K){const X=o.serverCache;let ue;const Oe=M?c.filter:c.filter.getIndexedFilter();if(tr(l))ue=Oe.updateFullNode(X.getNode(),f,null);else if(Oe.filtersNodes()&&!X.isFiltered()){const Ft=X.getNode().updateChild(l,f);ue=Oe.updateFullNode(X.getNode(),Ft,null)}else{const Ft=Kn(l);if(!X.isCompleteForPath(l)&&$r(l)>1)return o;const Ut=ei(l),kn=X.getNode().getImmediateChild(Ft).updateChild(Ut,f);ue=".priority"===Ft?Oe.updatePriority(X.getNode(),kn):Oe.updateChild(X.getNode(),Ft,kn,Ut,Pg,null)}const Ue=kd(o,ue,X.isFullyInitialized()||tr(l),Oe.filtersNodes());return ty(c,Ue,l,y,new Cp(y,Ue,D),K)}function jm(c,o,l,f,y,D,M){const K=o.eventCache;let X,ue;const Oe=new Cp(y,o,D);if(tr(l))ue=c.filter.updateFullNode(o.eventCache.getNode(),f,M),X=Ll(o,ue,!0,c.filter.filtersNodes());else{const Ue=Kn(l);if(".priority"===Ue)ue=c.filter.updatePriority(o.eventCache.getNode(),f),X=Ll(o,ue,K.isFullyInitialized(),K.isFiltered());else{const nt=ei(l),Ft=K.getNode().getImmediateChild(Ue);let Ut;if(tr(nt))Ut=f;else{const On=Oe.getCompleteChild(Ue);Ut=null!=On?".priority"===Iu(nt)&&On.getChild(cs(nt)).isEmpty()?On:On.updateChild(nt,f):In.EMPTY_NODE}X=Ft.equals(Ut)?o:Ll(o,c.filter.updateChild(K.getNode(),Ue,Ut,nt,Oe,M),K.isFullyInitialized(),c.filter.filtersNodes())}}return X}function ny(c,o){return c.eventCache.isCompleteForChild(o)}function wo(c,o,l){return l.foreach((f,y)=>{o=o.updateChild(f,y)}),o}function Hm(c,o,l,f,y,D,M,K){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let ue,X=o;ue=tr(l)?f:new Di(null).setTree(l,f);const Oe=o.serverCache.getNode();return ue.children.inorderTraversal((Ue,nt)=>{if(Oe.hasChild(Ue)){const Ut=wo(0,o.serverCache.getNode().getImmediateChild(Ue),nt);X=Ip(c,X,new fr(Ue),Ut,y,D,M,K)}}),ue.children.inorderTraversal((Ue,nt)=>{const Ft=!o.serverCache.isCompleteForChild(Ue)&&void 0===nt.value;if(!Oe.hasChild(Ue)&&!Ft){const On=wo(0,o.serverCache.getNode().getImmediateChild(Ue),nt);X=Ip(c,X,new fr(Ue),On,y,D,M,K)}}),X}class Gm{constructor(o,l){this.query_=o,this.eventRegistrations_=[];const f=this.query_._queryParams,y=new wt(f.getIndex()),D=function(c){return c.loadsAllData()?new wt(c.getIndex()):c.hasLimit()?new Kt(c):new ft(c)}(f);this.processor_=function(c){return{filter:c}}(D);const M=l.serverCache,K=l.eventCache,X=y.updateFullNode(In.EMPTY_NODE,M.getNode(),null),ue=D.updateFullNode(In.EMPTY_NODE,K.getNode(),null),Oe=new Pa(X,M.isFullyInitialized(),y.filtersNodes()),Ue=new Pa(ue,K.isFullyInitialized(),D.filtersNodes());this.viewCache_=_c(Ue,Oe),this.eventGenerator_=new Vm(this.query_)}get query(){return this.query_}}function zm(c,o){const l=Jc(c.viewCache_);return l&&(c.query._queryParams.loadsAllData()||!tr(o)&&!l.getImmediateChild(Kn(o)).isEmpty())?l.getChild(o):null}function Df(c){return 0===c.eventRegistrations_.length}function rl(c,o,l){const f=[];if(l){(0,re.hu)(null==o,"A cancel should cancel all event registrations.");const y=c.query._path;c.eventRegistrations_.forEach(D=>{const M=D.createCancelEvent(l,y);M&&f.push(M)})}if(o){let y=[];for(let D=0;D<c.eventRegistrations_.length;++D){const M=c.eventRegistrations_[D];if(M.matches(o)){if(o.hasAnyCallback()){y=y.concat(c.eventRegistrations_.slice(D+1));break}}else y.push(M)}c.eventRegistrations_=y}else c.eventRegistrations_=[];return f}function Bd(c,o,l,f){o.type===_a.MERGE&&null!==o.source.queryId&&((0,re.hu)(Jc(c.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(Cf(c.viewCache_),"Missing event cache, even though we have a server cache"));const y=c.viewCache_,D=function(c,o,l,f,y){const D=new cv;let M,K;if(l.type===_a.OVERWRITE){const ue=l;ue.source.fromUser?M=jm(c,o,ue.path,ue.snap,f,y,D):((0,re.hu)(ue.source.fromServer,"Unknown source."),K=ue.source.tagged||o.serverCache.isFiltered()&&!tr(ue.path),M=Ip(c,o,ue.path,ue.snap,f,y,K,D))}else if(l.type===_a.MERGE){const ue=l;ue.source.fromUser?M=function(c,o,l,f,y,D,M){let K=o;return f.foreach((X,ue)=>{const Oe=hn(l,X);ny(o,Kn(Oe))&&(K=jm(c,K,Oe,ue,y,D,M))}),f.foreach((X,ue)=>{const Oe=hn(l,X);ny(o,Kn(Oe))||(K=jm(c,K,Oe,ue,y,D,M))}),K}(c,o,ue.path,ue.children,f,y,D):((0,re.hu)(ue.source.fromServer,"Unknown source."),K=ue.source.tagged||o.serverCache.isFiltered(),M=Hm(c,o,ue.path,ue.children,f,y,K,D))}else if(l.type===_a.ACK_USER_WRITE){const ue=l;M=ue.revert?function(c,o,l,f,y,D){let M;if(null!=Rg(f,l))return o;{const K=new Cp(f,o,y),X=o.eventCache.getNode();let ue;if(tr(l)||".priority"===Kn(l)){let Oe;if(o.serverCache.isFullyInitialized())Oe=Oa(f,Jc(o));else{const Ue=o.serverCache.getNode();(0,re.hu)(Ue instanceof In,"serverChildren would be complete if leaf node"),Oe=Ud(f,Ue)}ue=c.filter.updateFullNode(X,Oe,D)}else{const Oe=Kn(l);let Ue=Ep(f,Oe,o.serverCache);null==Ue&&o.serverCache.isCompleteForChild(Oe)&&(Ue=X.getImmediateChild(Oe)),ue=null!=Ue?c.filter.updateChild(X,Oe,Ue,ei(l),K,D):o.eventCache.getNode().hasChild(Oe)?c.filter.updateChild(X,Oe,In.EMPTY_NODE,ei(l),K,D):X,ue.isEmpty()&&o.serverCache.isFullyInitialized()&&(M=Oa(f,Jc(o)),M.isLeafNode()&&(ue=c.filter.updateFullNode(ue,M,D)))}return M=o.serverCache.isFullyInitialized()||null!=Rg(f,qn()),Ll(o,ue,M,c.filter.filtersNodes())}}(c,o,ue.path,f,y,D):function(c,o,l,f,y,D,M){if(null!=Rg(y,l))return o;const K=o.serverCache.isFiltered(),X=o.serverCache;if(null!=f.value){if(tr(l)&&X.isFullyInitialized()||X.isCompleteForPath(l))return Ip(c,o,l,X.getNode().getChild(l),y,D,K,M);if(tr(l)){let ue=new Di(null);return X.getNode().forEachChild(Ma,(Oe,Ue)=>{ue=ue.set(new fr(Oe),Ue)}),Hm(c,o,l,ue,y,D,K,M)}return o}{let ue=new Di(null);return f.foreach((Oe,Ue)=>{const nt=hn(l,Oe);X.isCompleteForPath(nt)&&(ue=ue.set(Oe,X.getNode().getChild(nt)))}),Hm(c,o,l,ue,y,D,K,M)}}(c,o,ue.path,ue.affectedTree,f,y,D)}else{if(l.type!==_a.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+l.type);M=function(c,o,l,f,y){const D=o.serverCache;return ty(c,kd(o,D.getNode(),D.isFullyInitialized()||tr(l),D.isFiltered()),l,f,Pg,y)}(c,o,l.path,f,D)}const X=D.getChanges();return function(c,o,l){const f=o.eventCache;if(f.isFullyInitialized()){const y=f.getNode().isLeafNode()||f.getNode().isEmpty(),D=Cf(c);(l.length>0||!c.eventCache.isFullyInitialized()||y&&!f.getNode().equals(D)||!f.getNode().getPriority().equals(D.getPriority()))&&l.push(b(Cf(o)))}}(o,M,X),{viewCache:M,changes:X}}(c.processor_,y,o,l,f);return function(c,o){(0,re.hu)(o.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(o.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,D.viewCache),(0,re.hu)(D.viewCache.serverCache.isFullyInitialized()||!y.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=D.viewCache,Fg(c,D.changes,D.viewCache.eventCache.getNode(),null)}function Fg(c,o,l,f){return function(c,o,l,f){const y=[],D=[];return o.forEach(M=>{"child_changed"===M.type&&c.index_.indexedValueChanged(M.oldSnap,M.snapshotNode)&&D.push(function(c,o){return{type:"child_moved",snapshotNode:o,childName:c}}(M.childName,M.snapshotNode))}),wf(c,y,"child_removed",o,f,l),wf(c,y,"child_added",o,f,l),wf(c,y,"child_moved",D,f,l),wf(c,y,"child_changed",o,f,l),wf(c,y,"value",o,f,l),y}(c.eventGenerator_,o,l,f?[f]:c.eventRegistrations_)}let ed,Hd;class Lg{constructor(){this.views=new Map}}function vc(c,o,l,f){const y=o.source.queryId;if(null!==y){const D=c.views.get(y);return(0,re.hu)(null!=D,"SyncTree gave us an op for an invalid query."),Bd(D,o,l,f)}{let D=[];for(const M of c.views.values())D=D.concat(Bd(M,o,l,f));return D}}function td(c,o,l,f,y){const M=c.views.get(o._queryIdentifier);if(!M){let K=Oa(l,y?f:null),X=!1;K?X=!0:f instanceof In?(K=Ud(l,f),X=!1):(K=In.EMPTY_NODE,X=!1);const ue=_c(new Pa(K,X,!1),new Pa(f,y,!1));return new Gm(o,ue)}return M}function jd(c){const o=[];for(const l of c.views.values())l.query._queryParams.loadsAllData()||o.push(l);return o}function nu(c,o){let l=null;for(const f of c.views.values())l=l||zm(f,o);return l}function $d(c,o){return o._queryParams.loadsAllData()?Ec(c):c.views.get(o._queryIdentifier)}function nd(c,o){return null!=$d(c,o)}function il(c){return null!=Ec(c)}function Ec(c){for(const o of c.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let ry=1;class Sf{constructor(o){this.listenProvider_=o,this.syncPointTree_=new Di(null),this.pendingWriteTree_={visibleWrites:$i.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ym(c,o,l,f,y){return function(c,o,l,f,y){(0,re.hu)(f>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===y&&(y=!0),c.allWrites.push({path:o,snap:l,writeId:f,visible:y}),y&&(c.visibleWrites=el(c.visibleWrites,o,l)),c.lastWriteId=f}(c.pendingWriteTree_,o,l,f,y),y?rd(c,new mc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,l)):[]}function Bl(c,o,l=!1){const f=function(c,o){for(let l=0;l<c.allWrites.length;l++){const f=c.allWrites[l];if(f.writeId===o)return f}return null}(c.pendingWriteTree_,o);if(function(c,o){const l=c.allWrites.findIndex(K=>K.writeId===o);(0,re.hu)(l>=0,"removeWrite called with nonexistent writeId.");const f=c.allWrites[l];c.allWrites.splice(l,1);let y=f.visible,D=!1,M=c.allWrites.length-1;for(;y&&M>=0;){const K=c.allWrites[M];K.visible&&(M>=l&&xg(K,f.path)?y=!1:Ii(f.path,K.path)&&(D=!0)),M--}return!!y&&(D?(function(c){c.visibleWrites=tl(c.allWrites,xh,qn()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(f.snap?c.visibleWrites=Dg(c.visibleWrites,f.path):jr(f.children,X=>{c.visibleWrites=Dg(c.visibleWrites,hn(f.path,X))}),!0))}(c.pendingWriteTree_,o)){let D=new Di(null);return null!=f.snap?D=D.set(qn(),!0):jr(f.children,M=>{D=D.set(new fr(M),!0)}),rd(c,new Ju(f.path,D,l))}return[]}function Ph(c,o,l){return rd(c,new mc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,l))}function so(c,o,l,f){const y=o._path,D=c.syncPointTree_.get(y);let M=[];if(D&&("default"===o._queryIdentifier||nd(D,o))){const K=function(c,o,l,f){const y=o._queryIdentifier,D=[];let M=[];const K=il(c);if("default"===y)for(const[X,ue]of c.views.entries())M=M.concat(rl(ue,l,f)),Df(ue)&&(c.views.delete(X),ue.query._queryParams.loadsAllData()||D.push(ue.query));else{const X=c.views.get(y);X&&(M=M.concat(rl(X,l,f)),Df(X)&&(c.views.delete(y),X.query._queryParams.loadsAllData()||D.push(X.query)))}return K&&!il(c)&&D.push(new((0,re.hu)(ed,"Reference.ts has not been loaded"),ed)(o._repo,o._path)),{removed:D,events:M}}(D,o,l,f);(function(c){return 0===c.views.size})(D)&&(c.syncPointTree_=c.syncPointTree_.remove(y));const X=K.removed;M=K.events;const ue=-1!==X.findIndex(Ue=>Ue._queryParams.loadsAllData()),Oe=c.syncPointTree_.findOnPath(y,(Ue,nt)=>il(nt));if(ue&&!Oe){const Ue=c.syncPointTree_.subtree(y);if(!Ue.isEmpty()){const nt=function(c){return c.fold((o,l,f)=>{if(l&&il(l))return[Ec(l)];{let y=[];return l&&(y=jd(l)),jr(f,(D,M)=>{y=y.concat(M)}),y}})}(Ue);for(let Ft=0;Ft<nt.length;++Ft){const Ut=nt[Ft],On=Ut.query,kn=xf(c,Ut);c.listenProvider_.startListening(Oh(On),wc(c,On),kn.hashFn,kn.onComplete)}}}if(!Oe&&X.length>0&&!f)if(ue){const Ue=null;c.listenProvider_.stopListening(Oh(o),Ue)}else X.forEach(Ue=>{const nt=c.queryToTagMap.get(Gd(Ue));c.listenProvider_.stopListening(Oh(Ue),nt)});!function(c,o){for(let l=0;l<o.length;++l){const f=o[l];if(!f._queryParams.loadsAllData()){const y=Gd(f),D=c.queryToTagMap.get(y);c.queryToTagMap.delete(y),c.tagToQueryMap.delete(D)}}}(c,X)}return M}function Rp(c,o,l,f){const y=Mp(c,f);if(null!=y){const D=Pp(y),M=D.path,K=D.queryId,X=io(M,o);return Hg(c,M,new mc(Au(K),X,l))}return[]}function Jm(c,o){const l=c._path;let f=null,y=!1;o.syncPointTree_.foreachOnPath(l,(ue,Oe)=>{const Ue=io(ue,l);f=f||nu(Oe,Ue),y=y||il(Oe)});let M,D=o.syncPointTree_.get(l);D?(y=y||il(D),f=f||nu(D,qn())):(D=new Lg,o.syncPointTree_=o.syncPointTree_.set(l,D)),null!=f?M=!0:(M=!1,f=In.EMPTY_NODE,o.syncPointTree_.subtree(l).foreachChild((Oe,Ue)=>{const nt=nu(Ue,qn());nt&&(f=f.updateImmediateChild(Oe,nt))}));const K=nd(D,c);if(!K&&!c._queryParams.loadsAllData()){const ue=Gd(c);(0,re.hu)(!o.queryToTagMap.has(ue),"View does not exist, but we have a tag");const Oe=ry++;o.queryToTagMap.set(ue,Oe),o.tagToQueryMap.set(Oe,ue)}return{syncPoint:D,writesCache:An(o.pendingWriteTree_,l),serverCache:f,serverCacheComplete:M,foundAncestorDefaultView:y,viewAlreadyExists:K}}function Bg(c,o,l){const{syncPoint:f,serverCache:y,writesCache:D,serverCacheComplete:M,viewAlreadyExists:K,foundAncestorDefaultView:X}=Jm(o,c);let ue=function(c,o,l,f,y,D){const M=td(c,o,f,y,D);return c.views.has(o._queryIdentifier)||c.views.set(o._queryIdentifier,M),function(c,o){c.eventRegistrations_.push(o)}(M,l),function(c,o){const l=c.viewCache_.eventCache,f=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Cr,(D,M)=>{f.push(j(D,M))}),l.isFullyInitialized()&&f.push(b(l.getNode())),Fg(c,f,l.getNode(),o)}(M,l)}(f,o,l,D,y,M);if(!K&&!X){const Oe=$d(f,o);ue=ue.concat(function(c,o,l){const f=o._path,y=wc(c,o),D=xf(c,l),M=c.listenProvider_.startListening(Oh(o),y,D.hashFn,D.onComplete),K=c.syncPointTree_.subtree(f);if(y)(0,re.hu)(!il(K.value),"If we're adding a query, it shouldn't be shadowed");else{const X=K.fold((ue,Oe,Ue)=>{if(!tr(ue)&&Oe&&il(Oe))return[Ec(Oe).query];{let nt=[];return Oe&&(nt=nt.concat(jd(Oe).map(Ft=>Ft.query))),jr(Ue,(Ft,Ut)=>{nt=nt.concat(Ut)}),nt}});for(let ue=0;ue<X.length;++ue){const Oe=X[ue];c.listenProvider_.stopListening(Oh(Oe),wc(c,Oe))}}return M}(c,o,Oe))}return ue}function Np(c,o,l){const y=c.pendingWriteTree_,D=c.syncPointTree_.findOnPath(o,(M,K)=>{const ue=nu(K,io(M,o));if(ue)return ue});return nl(y,o,D,l,!0)}function rd(c,o){return jg(o,c.syncPointTree_,null,An(c.pendingWriteTree_,qn()))}function jg(c,o,l,f){if(tr(c.path))return $g(c,o,l,f);{const y=o.get(qn());null==l&&null!=y&&(l=nu(y,qn()));let D=[];const M=Kn(c.path),K=c.operationForChild(M),X=o.children.get(M);if(X&&K){const ue=l?l.getImmediateChild(M):null,Oe=wp(f,M);D=D.concat(jg(K,X,ue,Oe))}return y&&(D=D.concat(vc(y,c,f,l))),D}}function $g(c,o,l,f){const y=o.get(qn());null==l&&null!=y&&(l=nu(y,qn()));let D=[];return o.children.inorderTraversal((M,K)=>{const X=l?l.getImmediateChild(M):null,ue=wp(f,M),Oe=c.operationForChild(M);Oe&&(D=D.concat($g(Oe,K,X,ue)))}),y&&(D=D.concat(vc(y,c,f,l))),D}function xf(c,o){const l=o.query,f=wc(c,l);return{hashFn:()=>(function(c){return c.viewCache_.serverCache.getNode()}(o)||In.EMPTY_NODE).hash(),onComplete:y=>{if("ok"===y)return f?function(c,o,l){const f=Mp(c,l);if(f){const y=Pp(f),D=y.path,M=y.queryId,K=io(D,o);return Hg(c,D,new Xu(Au(M),K))}return[]}(c,l._path,f):function(c,o){return rd(c,new Xu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(c,l._path);{const D=function(c,o){let l="Unknown Error";"too_big"===c?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?l="Client doesn't have permission to access the desired data.":"unavailable"===c&&(l="The service is unavailable");const f=new Error(c+" at "+o._path.toString()+": "+l);return f.code=c.toUpperCase(),f}(y,l);return so(c,l,null,D)}}}}function wc(c,o){const l=Gd(o);return c.queryToTagMap.get(l)}function Gd(c){return c._path.toString()+"$"+c._queryIdentifier}function Mp(c,o){return c.tagToQueryMap.get(o)}function Pp(c){const o=c.indexOf("$");return(0,re.hu)(-1!==o&&o<c.length-1,"Bad queryKey."),{queryId:c.substr(o+1),path:new fr(c.substr(0,o))}}function Hg(c,o,l){const f=c.syncPointTree_.get(o);return(0,re.hu)(f,"Missing sync point for query tag that we're tracking"),vc(f,l,An(c.pendingWriteTree_,o),null)}function Oh(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new((0,re.hu)(Hd,"Reference.ts has not been loaded"),Hd)(c._repo,c._path):c}class jl{constructor(o){this.node_=o}getImmediateChild(o){const l=this.node_.getImmediateChild(o);return new jl(l)}node(){return this.node_}}class Nf{constructor(o,l){this.syncTree_=o,this.path_=l}getImmediateChild(o){const l=hn(this.path_,o);return new Nf(this.syncTree_,l)}node(){return Np(this.syncTree_,this.path_)}}const Mf=function(c,o,l){return c&&"object"==typeof c?((0,re.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?kp(c[".sv"],o,l):"object"==typeof c[".sv"]?e_(c[".sv"],o):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},kp=function(c,o,l){if("timestamp"===c)return l.timestamp;(0,re.hu)(!1,"Unexpected server value: "+c)},e_=function(c,o,l){c.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));const f=c.increment;"number"!=typeof f&&(0,re.hu)(!1,"Unexpected increment value: "+f);const y=o.node();if((0,re.hu)(null!=y,"Expected ChildrenNode.EMPTY_NODE for nulls"),!y.isLeafNode())return f;const M=y.getValue();return"number"!=typeof M?f:M+f},Fp=function(c,o,l,f){return Nu(o,new Nf(l,c),f)},Pf=function(c,o,l){return Nu(c,new jl(o),l)};function Nu(c,o,l){const f=c.getPriority().val(),y=Mf(f,o.getImmediateChild(".priority"),l);let D;if(c.isLeafNode()){const M=c,K=Mf(M.getValue(),o,l);return K!==M.getValue()||y!==M.getPriority().val()?new Ho(K,yi(y)):c}{const M=c;return D=M,y!==M.getPriority().val()&&(D=D.updatePriority(new Ho(y))),M.forEachChild(Cr,(K,X)=>{const ue=Nu(X,o.getImmediateChild(K),l);ue!==X&&(D=D.updateImmediateChild(K,ue))}),D}}class Lp{constructor(o="",l=null,f={children:{},childCount:0}){this.name=o,this.parent=l,this.node=f}}function Vp(c,o){let l=o instanceof fr?o:new fr(o),f=c,y=Kn(l);for(;null!==y;){const D=(0,re.DV)(f.node.children,y)||{children:{},childCount:0};f=new Lp(y,f,D),l=ei(l),y=Kn(l)}return f}function Mu(c){return c.node.value}function Of(c,o){c.node.value=o,$l(c)}function Up(c){return c.node.childCount>0}function id(c,o){jr(c.node.children,(l,f)=>{o(new Lp(l,c,f))})}function kh(c,o,l,f){l&&!f&&o(c),id(c,y=>{kh(y,o,!0,f)}),l&&f&&o(c)}function Fh(c){return new fr(null===c.parent?c.name:Fh(c.parent)+"/"+c.name)}function $l(c){null!==c.parent&&function(c,o,l){const f=function(c){return void 0===Mu(c)&&!Up(c)}(l),y=(0,re.r3)(c.node.children,o);f&&y?(delete c.node.children[o],c.node.childCount--,$l(c)):!f&&!y&&(c.node.children[o]=l.node,c.node.childCount++,$l(c))}(c.parent,c.name,c)}const oy=/[\[\].#$\/\u0000-\u001F\u007F]/,n_=/[\[\].#$\u0000-\u001F\u007F]/,kf=10485760,Lh=function(c){return"string"==typeof c&&0!==c.length&&!oy.test(c)},zg=function(c){return"string"==typeof c&&0!==c.length&&!n_.test(c)},ru=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!Xt(c)||c&&"object"==typeof c&&(0,re.r3)(c,".sv")},ya=function(c,o,l,f){f&&void 0===o||Ff((0,re.gK)(c,"value"),o,l)},Ff=function(c,o,l){const f=l instanceof fr?new Rl(l,c):l;if(void 0===o)throw new Error(c+"contains undefined "+Na(f));if("function"==typeof o)throw new Error(c+"contains a function "+Na(f)+" with contents = "+o.toString());if(Xt(o))throw new Error(c+"contains "+o.toString()+" "+Na(f));if("string"==typeof o&&o.length>kf/3&&(0,re.ug)(o)>kf)throw new Error(c+"contains a string greater than "+kf+" utf8 bytes "+Na(f)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let y=!1,D=!1;if(jr(o,(M,K)=>{if(".value"===M)y=!0;else if(".priority"!==M&&".sv"!==M&&(D=!0,!Lh(M)))throw new Error(c+" contains an invalid key ("+M+") "+Na(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(c,o){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(o),c.byteLength_+=(0,re.ug)(o),Ra(c)})(f,M),Ff(c,K,f),function(c){const o=c.parts_.pop();c.byteLength_-=(0,re.ug)(o),c.parts_.length>0&&(c.byteLength_-=1)}(f)}),y&&D)throw new Error(c+' contains ".value" child '+Na(f)+" in addition to actual children.")}},ay=function(c,o,l,f){if(f&&void 0===o)return;const y=(0,re.gK)(c,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(y+" must be an object containing the children to replace.");const D=[];jr(o,(M,K)=>{const X=new fr(M);if(Ff(y,K,hn(l,X)),".priority"===Iu(X)&&!ru(K))throw new Error(y+"contains an invalid value for '"+X.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");D.push(X)}),function(c,o){let l,f;for(l=0;l<o.length;l++){f=o[l];const D=Gc(f);for(let M=0;M<D.length;M++)if((".priority"!==D[M]||M!==D.length-1)&&!Lh(D[M]))throw new Error(c+"contains an invalid key ("+D[M]+") in path "+f.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(Du);let y=null;for(l=0;l<o.length;l++){if(f=o[l],null!==y&&Ii(y,f))throw new Error(c+"contains a path "+y.toString()+" that is ancestor of another path "+f.toString());y=f}}(y,D)},Hl=function(c,o,l){if(!l||void 0!==o){if(Xt(o))throw new Error((0,re.gK)(c,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ru(o))throw new Error((0,re.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wd=function(c,o,l,f){if(!(f&&void 0===l||Lh(l)))throw new Error((0,re.gK)(c,o)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sl=function(c,o,l,f){if(!(f&&void 0===l||zg(l)))throw new Error((0,re.gK)(c,o)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ka=function(c,o){if(".info"===Kn(o))throw new Error(c+" failed = Can't modify data under /.info/")},Cc=function(c,o){const l=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!Lh(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==l.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),zg(c)}(l))throw new Error((0,re.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vh(c,o){let l=null;for(let f=0;f<o.length;f++){const y=o[f],D=y.getPath();null!==l&&!cp(D,l.path)&&(c.eventLists_.push(l),l=null),null===l&&(l={events:[],path:D}),l.events.push(y)}l&&c.eventLists_.push(l)}function sd(c,o,l){Vh(c,l),Lf(c,f=>cp(f,o))}function Wo(c,o,l){Vh(c,l),Lf(c,f=>Ii(f,o)||Ii(o,f))}function Lf(c,o){c.recursionDepth_++;let l=!0;for(let f=0;f<c.eventLists_.length;f++){const y=c.eventLists_[f];y&&(o(y.path)?(Uh(c.eventLists_[f]),c.eventLists_[f]=null):l=!1)}l&&(c.eventLists_=[]),c.recursionDepth_--}function Uh(c){for(let o=0;o<c.events.length;o++){const l=c.events[o];if(null!==l){c.events[o]=null;const f=l.getEventRunner();J&&Le("event: "+l.toString()),Il(f)}}}const r_="repo_interrupt";class od{constructor(o,l,f,y){this.repoInfo_=o,this.forceRestClient_=l,this.authTokenProvider_=f,this.appCheckProvider_=y,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yc(),this.transactionQueueTree_=new Lp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $p(c){const l=c.infoData_.getNode(new fr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function qd(c){return function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c}({timestamp:$p(c)})}function Kd(c,o,l,f,y){c.dataUpdateCount++;const D=new fr(o);l=c.interceptServerDataCallback_?c.interceptServerDataCallback_(o,l):l;let M=[];if(y)if(f){const X=(0,re.UI)(l,ue=>yi(ue));M=function(c,o,l,f){const y=Mp(c,f);if(y){const D=Pp(y),M=D.path,K=D.queryId,X=io(M,o),ue=Di.fromObject(l);return Hg(c,M,new Fl(Au(K),X,ue))}return[]}(c.serverSyncTree_,D,X,y)}else{const X=yi(l);M=Rp(c.serverSyncTree_,D,X,y)}else if(f){const X=(0,re.UI)(l,ue=>yi(ue));M=function(c,o,l){const f=Di.fromObject(l);return rd(c,new Fl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,f))}(c.serverSyncTree_,D,X)}else{const X=yi(l);M=Ph(c.serverSyncTree_,D,X)}let K=D;M.length>0&&(K=Pu(c,D)),Wo(c.eventQueue_,K,M)}function s_(c,o){Vf(c,"connected",o),!1===o&&function(c){Gl(c,"onDisconnectEvents");const o=qd(c),l=Yc();Ps(c.onDisconnect_,qn(),(y,D)=>{const M=Fp(y,D,c.serverSyncTree_,o);aa(l,y,M)});let f=[];Ps(l,qn(),(y,D)=>{f=f.concat(Ph(c.serverSyncTree_,y,D));const M=nm(c,y);Pu(c,M)}),c.onDisconnect_=Yc(),Wo(c.eventQueue_,qn(),f)}(c)}function Vf(c,o,l){const f=new fr("/.info/"+o),y=yi(l);c.infoData_.updateSnapshot(f,y);const D=Ph(c.infoSyncTree_,f,y);Wo(c.eventQueue_,f,D)}function Hp(c){return c.nextWriteId_++}function uy(c,o){const l=function(c,o){const l=o._path;let f=null;c.syncPointTree_.foreachOnPath(l,(ue,Oe)=>{const Ue=io(ue,l);f=f||nu(Oe,Ue)});let y=c.syncPointTree_.get(l);y?f=f||nu(y,qn()):(y=new Lg,c.syncPointTree_=c.syncPointTree_.set(l,y));const D=null!=f,M=D?new Pa(f,!0,!1):null;return function(c){return Cf(c.viewCache_)}(td(y,o,An(c.pendingWriteTree_,o._path),D?M.getNode():In.EMPTY_NODE,D))}(c.serverSyncTree_,o);return null!=l?Promise.resolve(l):c.server_.get(o).then(f=>{const y=yi(f).withIndex(o._queryParams.getIndex());if(o._queryParams.loadsAllData())Ph(c.serverSyncTree_,o._path,y);else{const M=function(c,o){const{syncPoint:l,serverCache:f,writesCache:y,serverCacheComplete:D}=Jm(o,c),M=td(l,o,y,f,D);return l.views.has(o._queryIdentifier)||l.views.set(o._queryIdentifier,M),o._queryParams.loadsAllData()?null:wc(c,o)}(c.serverSyncTree_,o);Rp(c.serverSyncTree_,o._path,y,M)}return so(c.serverSyncTree_,o,null).length>0&&Gl(c,"unexpected cancel events in repoGetValue"),y},f=>(Gl(c,"get for query "+(0,re.Pz)(o)+" failed: "+f),Promise.reject(new Error(f))))}function Zg(c,o,l,f,y){Gl(c,"set",{path:o.toString(),value:l,priority:f});const D=qd(c),M=yi(l,f),K=Np(c.serverSyncTree_,o),X=Pf(M,K,D),ue=Hp(c),Oe=Ym(c.serverSyncTree_,o,X,ue,!0);Vh(c.eventQueue_,Oe),c.server_.put(o.toString(),M.val(!0),(nt,Ft)=>{const Ut="ok"===nt;Ut||zt("set at "+o+" failed: "+nt);const On=Bl(c.serverSyncTree_,ue,!Ut);Wo(c.eventQueue_,o,On),Dc(0,y,nt,Ft)});const Ue=nm(c,o);Pu(c,Ue),Wo(c.eventQueue_,Ue,[])}function Gp(c,o,l){c.server_.onDisconnectCancel(o.toString(),(f,y)=>{"ok"===f&&Qc(c.onDisconnect_,o),Dc(0,l,f,y)})}function o_(c,o,l,f){const y=yi(l);c.server_.onDisconnectPut(o.toString(),y.val(!0),(D,M)=>{"ok"===D&&aa(c.onDisconnect_,o,y),Dc(0,f,D,M)})}function a_(c,o,l){let f;f=".info"===Kn(o._path)?so(c.infoSyncTree_,o,l):so(c.serverSyncTree_,o,l),sd(c.eventQueue_,o._path,f)}function Wp(c){c.persistentConnection_&&c.persistentConnection_.interrupt(r_)}function Gl(c,...o){let l="";c.persistentConnection_&&(l=c.persistentConnection_.id+":"),Le(l,...o)}function Dc(c,o,l,f){o&&Il(()=>{if("ok"===l)o(null);else{const y=(l||"error").toUpperCase();let D=y;f&&(D+=": "+f);const M=new Error(D);M.code=y,o(M)}})}function qp(c,o,l){return Np(c.serverSyncTree_,o,l)||In.EMPTY_NODE}function Bh(c,o=c.transactionQueueTree_){if(o||Zd(c,o),Mu(o)){const l=Uf(c,o);(0,re.hu)(l.length>0,"Sending zero length transaction queue"),l.every(y=>0===y.status)&&function(c,o,l){const f=l.map(ue=>ue.currentWriteId),y=qp(c,o,f);let D=y;const M=y.hash();for(let ue=0;ue<l.length;ue++){const Oe=l[ue];(0,re.hu)(0===Oe.status,"tryToSendTransactionQueue_: items in queue should all be run."),Oe.status=1,Oe.retryCount++;const Ue=io(o,Oe.path);D=D.updateChild(Ue,Oe.currentOutputSnapshotRaw)}const K=D.val(!0),X=o;c.server_.put(X.toString(),K,ue=>{Gl(c,"transaction put response",{path:X.toString(),status:ue});let Oe=[];if("ok"===ue){const Ue=[];for(let nt=0;nt<l.length;nt++)l[nt].status=2,Oe=Oe.concat(Bl(c.serverSyncTree_,l[nt].currentWriteId)),l[nt].onComplete&&Ue.push(()=>l[nt].onComplete(null,!0,l[nt].currentOutputSnapshotResolved)),l[nt].unwatcher();Zd(c,Vp(c.transactionQueueTree_,o)),Bh(c,c.transactionQueueTree_),Wo(c.eventQueue_,o,Oe);for(let nt=0;nt<Ue.length;nt++)Il(Ue[nt])}else{if("datastale"===ue)for(let Ue=0;Ue<l.length;Ue++)l[Ue].status=3===l[Ue].status?4:0;else{zt("transaction at "+X.toString()+" failed: "+ue);for(let Ue=0;Ue<l.length;Ue++)l[Ue].status=4,l[Ue].abortReason=ue}Pu(c,o)}},M)}(c,Fh(o),l)}else Up(o)&&id(o,l=>{Bh(c,l)})}function Pu(c,o){const l=em(c,o),f=Fh(l);return function(c,o,l){if(0===o.length)return;const f=[];let y=[];const M=o.filter(K=>0===K.status).map(K=>K.currentWriteId);for(let K=0;K<o.length;K++){const X=o[K],ue=io(l,X.path);let Ue,Oe=!1;if((0,re.hu)(null!==ue,"rerunTransactionsUnderNode_: relativePath should not be null."),4===X.status)Oe=!0,Ue=X.abortReason,y=y.concat(Bl(c.serverSyncTree_,X.currentWriteId,!0));else if(0===X.status)if(X.retryCount>=25)Oe=!0,Ue="maxretry",y=y.concat(Bl(c.serverSyncTree_,X.currentWriteId,!0));else{const nt=qp(c,X.path,M);X.currentInputSnapshot=nt;const Ft=o[K].update(nt.val());if(void 0!==Ft){Ff("transaction failed: Data returned ",Ft,X.path);let Ut=yi(Ft);"object"==typeof Ft&&null!=Ft&&(0,re.r3)(Ft,".priority")||(Ut=Ut.updatePriority(nt.getPriority()));const kn=X.currentWriteId,Co=qd(c),Zs=Pf(Ut,nt,Co);X.currentOutputSnapshotRaw=Ut,X.currentOutputSnapshotResolved=Zs,X.currentWriteId=Hp(c),M.splice(M.indexOf(kn),1),y=y.concat(Ym(c.serverSyncTree_,X.path,Zs,X.currentWriteId,X.applyLocally)),y=y.concat(Bl(c.serverSyncTree_,kn,!0))}else Oe=!0,Ue="nodata",y=y.concat(Bl(c.serverSyncTree_,X.currentWriteId,!0))}Wo(c.eventQueue_,l,y),y=[],Oe&&(o[K].status=2,setTimeout(o[K].unwatcher,Math.floor(0)),o[K].onComplete&&f.push("nodata"===Ue?()=>o[K].onComplete(null,!1,o[K].currentInputSnapshot):()=>o[K].onComplete(new Error(Ue),!1,null)))}Zd(c,c.transactionQueueTree_);for(let K=0;K<f.length;K++)Il(f[K]);Bh(c,c.transactionQueueTree_)}(c,Uf(c,l),f),f}function em(c,o){let l,f=c.transactionQueueTree_;for(l=Kn(o);null!==l&&void 0===Mu(f);)f=Vp(f,l),l=Kn(o=ei(o));return f}function Uf(c,o){const l=[];return tm(c,o,l),l.sort((f,y)=>f.order-y.order),l}function tm(c,o,l){const f=Mu(o);if(f)for(let y=0;y<f.length;y++)l.push(f[y]);id(o,y=>{tm(c,y,l)})}function Zd(c,o){const l=Mu(o);if(l){let f=0;for(let y=0;y<l.length;y++)2!==l[y].status&&(l[f]=l[y],f++);l.length=f,Of(o,l.length>0?l:void 0)}id(o,f=>{Zd(c,f)})}function nm(c,o){const l=Fh(em(c,o)),f=Vp(c.transactionQueueTree_,o);return function(c,o,l){let f=c.parent;for(;null!==f;){if(o(f))return!0;f=f.parent}}(f,y=>{Bf(c,y)}),Bf(c,f),kh(f,y=>{Bf(c,y)}),l}function Bf(c,o){const l=Mu(o);if(l){const f=[];let y=[],D=-1;for(let M=0;M<l.length;M++)3===l[M].status||(1===l[M].status?((0,re.hu)(D===M-1,"All SENT items should be at beginning of queue."),D=M,l[M].status=3,l[M].abortReason="set"):((0,re.hu)(0===l[M].status,"Unexpected transaction status in abort"),l[M].unwatcher(),y=y.concat(Bl(c.serverSyncTree_,l[M].currentWriteId,!0)),l[M].onComplete&&f.push(l[M].onComplete.bind(null,new Error("set"),!1,null))));-1===D?Of(o,void 0):l.length=D+1,Wo(c.eventQueue_,Fh(o),y);for(let M=0;M<f.length;M++)Il(f[M])}}const jh=function(c,o){const l=l_(c),f=l.namespace;return"firebase.com"===l.domain&&Yt(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==l.domain&&Yt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tc(l.host,l.secure,f,"ws"===l.scheme||"wss"===l.scheme,o,"",f!==l.subdomain),path:new fr(l.pathString)}},l_=function(c){let o="",l="",f="",y="",D="",M=!0,K="https",X=443;if("string"==typeof c){let ue=c.indexOf("//");ue>=0&&(K=c.substring(0,ue-1),c=c.substring(ue+2));let Oe=c.indexOf("/");-1===Oe&&(Oe=c.length);let Ue=c.indexOf("?");-1===Ue&&(Ue=c.length),o=c.substring(0,Math.min(Oe,Ue)),Oe<Ue&&(y=function(c){let o="";const l=c.split("/");for(let f=0;f<l.length;f++)if(l[f].length>0){let y=l[f];try{y=decodeURIComponent(y.replace(/\+/g," "))}catch(D){}o+="/"+y}return o}(c.substring(Oe,Ue)));const nt=function(c){const o={};"?"===c.charAt(0)&&(c=c.substring(1));for(const l of c.split("&")){if(0===l.length)continue;const f=l.split("=");2===f.length?o[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):zt(`Invalid query segment '${l}' in query '${c}'`)}return o}(c.substring(Math.min(c.length,Ue)));ue=o.indexOf(":"),ue>=0?(M="https"===K||"wss"===K,X=parseInt(o.substring(ue+1),10)):ue=o.length;const Ft=o.slice(0,ue);if("localhost"===Ft.toLowerCase())l="localhost";else if(Ft.split(".").length<=2)l=Ft;else{const Ut=o.indexOf(".");f=o.substring(0,Ut).toLowerCase(),l=o.substring(Ut+1),D=f}"ns"in nt&&(D=nt.ns)}return{host:o,port:X,domain:l,subdomain:f,secure:M,scheme:K,pathString:y,namespace:D}};class ad{constructor(o,l,f,y){this.eventType=o,this.eventRegistration=l,this.snapshot=f,this.prevName=y}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Pz)(this.snapshot.exportVal())}}class im{constructor(o,l,f){this.eventRegistration=o,this.error=l,this.path=f}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Zp{constructor(o,l){this.snapshotCallback=o,this.cancelCallback=l}onValue(o,l){this.snapshotCallback.call(null,o,l)}onCancel(o){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class cy{constructor(o,l){this._repo=o,this._path=l}cancel(){const o=new re.BH;return Gp(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){ka("OnDisconnect.remove",this._path);const o=new re.BH;return o_(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){ka("OnDisconnect.set",this._path),ya("OnDisconnect.set",o,this._path,!1);const l=new re.BH;return o_(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}setWithPriority(o,l){ka("OnDisconnect.setWithPriority",this._path),ya("OnDisconnect.setWithPriority",o,this._path,!1),Hl("OnDisconnect.setWithPriority",l,!1);const f=new re.BH;return function(c,o,l,f,y){const D=yi(l,f);c.server_.onDisconnectPut(o.toString(),D.val(!0),(M,K)=>{"ok"===M&&aa(c.onDisconnect_,o,D),Dc(0,y,M,K)})}(this._repo,this._path,o,l,f.wrapCallback(()=>{})),f.promise}update(o){ka("OnDisconnect.update",this._path),ay("OnDisconnect.update",o,this._path,!1);const l=new re.BH;return function(c,o,l,f){if((0,re.xb)(l))return Le("onDisconnect().update() called with empty data.  Don't do anything."),void Dc(0,f,"ok",void 0);c.server_.onDisconnectMerge(o.toString(),l,(y,D)=>{"ok"===y&&jr(l,(M,K)=>{const X=yi(K);aa(c.onDisconnect_,hn(o,M),X)}),Dc(0,f,y,D)})}(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}}class va{constructor(o,l,f,y){this._repo=o,this._path=l,this._queryParams=f,this._orderByCalled=y}get key(){return tr(this._path)?null:Iu(this._path)}get ref(){return new Ea(this._repo,this._path)}get _queryIdentifier(){const o=Ih(this._queryParams),l=Rs(o);return"{}"===l?"default":l}get _queryObject(){return Ih(this._queryParams)}isEqual(o){if(!((o=(0,re.m9)(o))instanceof va))return!1;const l=this._repo===o._repo,f=cp(this._path,o._path);return l&&f&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(c){let o="";for(let l=c.pieceNum_;l<c.pieces_.length;l++)""!==c.pieces_[l]&&(o+="/"+encodeURIComponent(String(c.pieces_[l])));return o||"/"}(this._path)}}function Fa(c,o){if(!0===c._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function Wl(c){let o=null,l=null;if(c.hasStart()&&(o=c.getIndexStartValue()),c.hasEnd()&&(l=c.getIndexEndValue()),c.getIndex()===Ma){const f="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",y="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==Pr)throw new Error(f);if("string"!=typeof o)throw new Error(y)}if(c.hasEnd()){if(c.getIndexEndName()!==bi)throw new Error(f);if("string"!=typeof l)throw new Error(y)}}else if(c.getIndex()===Cr){if(null!=o&&!ru(o)||null!=l&&!ru(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(c.getIndex()instanceof Pl||c.getIndex()===fc,"unknown index type."),null!=o&&"object"==typeof o||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jf(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ea extends va{constructor(o,l){super(o,l,new Qt,!1)}get parent(){const o=cs(this._path);return null===o?null:new Ea(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class $h{constructor(o,l,f){this._node=o,this.ref=l,this._index=f}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const l=new fr(o),f=Hh(this.ref,o);return new $h(this._node.getChild(l),f,Cr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(f,y)=>o(new $h(y,Hh(this.ref,f),Cr)))}hasChild(o){const l=new fr(o);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ou(c,o){return(c=(0,re.m9)(c))._checkNotDeleted("ref"),void 0!==o?Hh(c._root,o):c._root}function sm(c,o){(c=(0,re.m9)(c))._checkNotDeleted("refFromURL");const l=jh(o,c._repo.repoInfo_.nodeAdmin);Cc("refFromURL",l);const f=l.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&f.host!==c._repo.repoInfo_.host&&Yt("refFromURL: Host name does not match the current database: (found "+f.host+" but expected "+c._repo.repoInfo_.host+")"),Ou(c,l.path.toString())}function Hh(c,o){return null===Kn((c=(0,re.m9)(c))._path)?(l=o,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),sl("child","path",l,!1)):sl("child","path",o,!1),new Ea(c._repo,hn(c._path,o));var l}function Qp(c,o){c=(0,re.m9)(c),ka("set",c._path),ya("set",o,c._path,!1);const l=new re.BH;return Zg(c._repo,c._path,o,null,l.wrapCallback(()=>{})),l.promise}function Jp(c,o){ay("update",o,c._path,!1);const l=new re.BH;return function(c,o,l,f){Gl(c,"update",{path:o.toString(),value:l});let y=!0;const D=qd(c),M={};if(jr(l,(K,X)=>{y=!1,M[K]=Fp(hn(o,K),yi(X),c.serverSyncTree_,D)}),y)Le("update() called with empty data.  Don't do anything."),Dc(0,f,"ok",void 0);else{const K=Hp(c),X=function(c,o,l,f){!function(c,o,l,f){(0,re.hu)(f>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:o,children:l,writeId:f,visible:!0}),c.visibleWrites=Vl(c.visibleWrites,o,l),c.lastWriteId=f}(c.pendingWriteTree_,o,l,f);const y=Di.fromObject(l);return rd(c,new Fl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,y))}(c.serverSyncTree_,o,M,K);Vh(c.eventQueue_,X),c.server_.merge(o.toString(),l,(ue,Oe)=>{const Ue="ok"===ue;Ue||zt("update at "+o+" failed: "+ue);const nt=Bl(c.serverSyncTree_,K,!Ue),Ft=nt.length>0?Pu(c,o):o;Wo(c.eventQueue_,Ft,nt),Dc(0,f,ue,Oe)}),jr(l,ue=>{const Oe=nm(c,hn(o,ue));Pu(c,Oe)}),Wo(c.eventQueue_,o,[])}}(c._repo,c._path,o,l.wrapCallback(()=>{})),l.promise}class eg{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,l){const f=l._queryParams.getIndex();return new ad("value",this,new $h(o.snapshotNode,new Ea(l._repo,l._path),f))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new im(this,o,l):null}matches(o){return o instanceof eg&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Gh{constructor(o,l){this.eventType=o,this.callbackContext=l}respondsTo(o){let l="children_added"===o?"child_added":o;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new im(this,o,l):null}createEvent(o,l){(0,re.hu)(null!=o.childName,"Child events should have a childName.");const f=Hh(new Ea(l._repo,l._path),o.childName),y=l._queryParams.getIndex();return new ad(o.type,this,new $h(o.snapshotNode,f,y),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof Gh&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Yd(c,o,l,f,y){let D;if("object"==typeof f&&(D=void 0,y=f),"function"==typeof f&&(D=f),y&&y.onlyOnce){const X=l,ue=(Oe,Ue)=>{a_(c._repo,c,K),X(Oe,Ue)};ue.userCallback=l.userCallback,ue.context=l.context,l=ue}const M=new Zp(l,D||void 0),K="value"===o?new eg(M):new Gh(o,M);return function(c,o,l){let f;f=".info"===Kn(o._path)?Bg(c.infoSyncTree_,o,l):Bg(c.serverSyncTree_,o,l),sd(c.eventQueue_,o._path,f)}(c._repo,c,K),()=>a_(c._repo,c,K)}function am(c,o,l,f){return Yd(c,"value",o,l,f)}function tg(c,o,l,f){return Yd(c,"child_added",o,l,f)}function ng(c,o,l,f){return Yd(c,"child_changed",o,l,f)}function rg(c,o,l,f){return Yd(c,"child_moved",o,l,f)}function d_(c,o,l,f){return Yd(c,"child_removed",o,l,f)}function Wh(c,o,l){let f=null;const y=l?new Zp(l):null;"value"===o?f=new eg(y):o&&(f=new Gh(o,y)),a_(c._repo,c,f)}class zo{}class um extends zo{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){ya("endAt",this._value,o._path,!0);const l=Md(o._queryParams,this._value,this._key);if(jf(l),Wl(l),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new va(o._repo,o._path,l,o._orderByCalled)}}class zh extends zo{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){ya("endBefore",this._value,o._path,!1);const l=function(c,o,l){let f,y;return c.index_===Ma?("string"==typeof o&&(o=m(o)),y=Md(c,o,l)):(f=null==l?Pr:m(l),y=Md(c,o,f)),y.endBeforeSet_=!0,y}(o._queryParams,this._value,this._key);if(jf(l),Wl(l),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new va(o._repo,o._path,l,o._orderByCalled)}}class h_ extends zo{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){ya("startAt",this._value,o._path,!0);const l=Kc(o._queryParams,this._value,this._key);if(jf(l),Wl(l),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new va(o._repo,o._path,l,o._orderByCalled)}}class zl extends zo{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){ya("startAfter",this._value,o._path,!1);const l=function(c,o,l){let f;if(c.index_===Ma)"string"==typeof o&&(o=g(o)),f=Kc(c,o,l);else{let y;y=null==l?bi:g(l),f=Kc(c,o,y)}return f.startAfterSet_=!0,f}(o._queryParams,this._value,this._key);if(jf(l),Wl(l),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new va(o._repo,o._path,l,o._orderByCalled)}}class qo extends zo{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new va(o._repo,o._path,function(c,o){const l=c.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="l",l}(o._queryParams,this._limit),o._orderByCalled)}}class Hf extends zo{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new va(o._repo,o._path,function(c,o){const l=c.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="r",l}(o._queryParams,this._limit),o._orderByCalled)}}class Gf extends zo{constructor(o){super(),this._path=o}_apply(o){Fa(o,"orderByChild");const l=new fr(this._path);if(tr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const f=new Pl(l),y=pc(o._queryParams,f);return Wl(y),new va(o._repo,o._path,y,!0)}}class Sc extends zo{_apply(o){Fa(o,"orderByKey");const l=pc(o._queryParams,Ma);return Wl(l),new va(o._repo,o._path,l,!0)}}class Qd extends zo{_apply(o){Fa(o,"orderByPriority");const l=pc(o._queryParams,Cr);return Wl(l),new va(o._repo,o._path,l,!0)}}class Jd extends zo{_apply(o){Fa(o,"orderByValue");const l=pc(o._queryParams,fc);return Wl(l),new va(o._repo,o._path,l,!0)}}class ol extends zo{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){if(ya("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new um(this._value,this._key)._apply(new h_(this._value,this._key)._apply(o))}}function ku(c,...o){let l=(0,re.m9)(c);for(const f of o)l=f._apply(l);return l}(function(c){(0,re.hu)(!ed,"__referenceConstructor has already been defined"),ed=c})(Ea),function(c){(0,re.hu)(!Hd,"__referenceConstructor has already been defined"),Hd=c}(Ea);const sg={};function ag(c,o,l,f,y){let D=f||c.options.databaseURL;void 0===D&&(c.options.projectId||Yt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Le("Using default host for project ",c.options.projectId),D=`${c.options.projectId}-default-rtdb.firebaseio.com`);let X,ue,M=jh(D,y),K=M.repoInfo;"undefined"!=typeof process&&process.env&&(ue=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ue?(X=!0,D=`http://${ue}?ns=${K.namespace}`,M=jh(D,y),K=M.repoInfo):X=!M.repoInfo.secure;const Oe=y&&X?new Dl(Dl.OWNER):new _g(c.name,c.options,o);Cc("Invalid Firebase Database URL",M),tr(M.path)||Yt("Database URL must point to the root of a Firebase Database (not including a child path).");const Ue=function(c,o,l,f){let y=sg[o.name];y||(y={},sg[o.name]=y);let D=y[c.toURLString()];return D&&Yt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),D=new od(c,false,l,f),y[c.toURLString()]=D,D}(K,c,Oe,new di(c.name,l));return new fy(Ue,c)}class fy{constructor(o,l){this._repoInternal=o,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(c,o,l){if(c.stats_=vu(c.repoInfo_),c.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)c.server_=new Zc(c.repoInfo_,(f,y,D,M)=>{Kd(c,f,y,D,M)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(()=>s_(c,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Pz)(l)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}c.persistentConnection_=new sa(c.repoInfo_,o,(f,y,D,M)=>{Kd(c,f,y,D,M)},f=>{s_(c,f)},f=>{!function(c,o){jr(o,(l,f)=>{Vf(c,l,f)})}(c,f)},c.authTokenProvider_,c.appCheckProvider_,l),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(f=>{c.server_.refreshAuthToken(f)}),c.appCheckProvider_.addTokenChangeListener(f=>{c.server_.refreshAppCheckToken(f.token)}),c.statsReporter_=function(c,o){const l=c.toString();return ha[l]||(ha[l]=o()),ha[l]}(c.repoInfo_,()=>new Lm(c.stats_,c.server_)),c.infoData_=new Dh,c.infoSyncTree_=new Sf({startListening:(f,y,D,M)=>{let K=[];const X=c.infoData_.getNode(f._path);return X.isEmpty()||(K=Ph(c.infoSyncTree_,f._path,X),setTimeout(()=>{M("ok")},0)),K},stopListening:()=>{}}),Vf(c,"connected",!1),c.serverSyncTree_=new Sf({startListening:(f,y,D,M)=>(c.server_.listen(f,D,y,(K,X)=>{const ue=M(K,X);Wo(c.eventQueue_,f._path,ue)}),[]),stopListening:(f,y)=>{c.server_.unlisten(f,y)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ea(this._repo,qn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(c,o){const l=sg[o];(!l||l[c.key]!==c)&&Yt(`Database ${o}(${c.repoInfo_}) has already been deleted.`),Wp(c),delete l[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&Yt("Cannot call "+o+" on a deleted database.")}}function ug(){hf.IS_TRANSPORT_INITIALIZED&&zt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function cm(){ug(),Al.forceDisallow()}function y_(){ug(),Eu.forceDisallow(),Al.forceAllow()}function hm(c,o){Pe(c,o)}class wa{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}sa.prototype.simpleListen=function(c,o){this.sendRequest("q",{p:c},o)},sa.prototype.echo=function(c,o){this.sendRequest("echo",{d:c},o)},ch(kt.SDK_VERSION),(0,kt._registerComponent)(new Er.wA("database",(o,{instanceIdentifier:l})=>ag(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,kt.registerVersion)(xs,"0.13.3",void 0),(0,kt.registerVersion)(xs,"0.13.3","esm2017");const b_=new Jr.Yd("@firebase/database-compat"),my=function(c){b_.warn("FIREBASE WARNING: "+c)};class gm{constructor(o){this._delegate=o}cancel(o){(0,re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,re.Wj)("OnDisconnect.cancel","onComplete",o,!0);const l=this._delegate.cancel();return o&&l.then(()=>o(null),f=>o(f)),l}remove(o){(0,re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,re.Wj)("OnDisconnect.remove","onComplete",o,!0);const l=this._delegate.remove();return o&&l.then(()=>o(null),f=>o(f)),l}set(o,l){(0,re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,re.Wj)("OnDisconnect.set","onComplete",l,!0);const f=this._delegate.set(o);return l&&f.then(()=>l(null),y=>l(y)),f}setWithPriority(o,l,f){(0,re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,re.Wj)("OnDisconnect.setWithPriority","onComplete",f,!0);const y=this._delegate.setWithPriority(o,l);return f&&y.then(()=>f(null),D=>f(D)),y}update(o,l){if((0,re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let D=0;D<o.length;++D)y[""+D]=o[D];o=y,my("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,re.Wj)("OnDisconnect.update","onComplete",l,!0);const f=this._delegate.update(o);return l&&f.then(()=>l(null),y=>l(y)),f}}class Ti{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return(0,re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Xd{constructor(o,l){this._database=o,this._delegate=l}val(){return(0,re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,re.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),sl("DataSnapshot.child","path",o,!1),new Xd(this._database,this._delegate.child(o))}hasChild(o){return(0,re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),sl("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,re.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(l=>o(new Xd(this._database,l)))}hasChildren(){return(0,re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,re.Dv)("DataSnapshot.ref",0,0,arguments.length),new zr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ca{constructor(o,l){this.database=o,this._delegate=l}on(o,l,f,y){var D;(0,re.Dv)("Query.on",2,4,arguments.length),(0,re.Wj)("Query.on","callback",l,!1);const M=Ca.getCancelAndContextArgs_("Query.on",f,y),K=(ue,Oe)=>{l.call(M.context,new Xd(this.database,ue),Oe)};K.userCallback=l,K.context=M.context;const X=null===(D=M.cancel)||void 0===D?void 0:D.bind(M.context);switch(o){case"value":return am(this._delegate,K,X),l;case"child_added":return tg(this._delegate,K,X),l;case"child_removed":return d_(this._delegate,K,X),l;case"child_changed":return ng(this._delegate,K,X),l;case"child_moved":return rg(this._delegate,K,X),l;default:throw new Error((0,re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,l,f){if((0,re.Dv)("Query.off",0,3,arguments.length),function(c,o,l){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,re.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,re.Wj)("Query.off","callback",l,!0),(0,re.lb)("Query.off","context",f,!0),l){const y=()=>{};y.userCallback=l,y.context=f,Wh(this._delegate,o,y)}else Wh(this._delegate,o)}get(){return function(c){return uy((c=(0,re.m9)(c))._repo,c).then(o=>new $h(o,new Ea(c._repo,c._path),c._queryParams.getIndex()))}(this._delegate).then(o=>new Xd(this.database,o))}once(o,l,f,y){(0,re.Dv)("Query.once",1,4,arguments.length),(0,re.Wj)("Query.once","callback",l,!0);const D=Ca.getCancelAndContextArgs_("Query.once",f,y),M=new re.BH,K=(ue,Oe)=>{const Ue=new Xd(this.database,ue);l&&l.call(D.context,Ue,Oe),M.resolve(Ue)};K.userCallback=l,K.context=D.context;const X=ue=>{D.cancel&&D.cancel.call(D.context,ue),M.reject(ue)};switch(o){case"value":am(this._delegate,K,X,{onlyOnce:!0});break;case"child_added":tg(this._delegate,K,X,{onlyOnce:!0});break;case"child_removed":d_(this._delegate,K,X,{onlyOnce:!0});break;case"child_changed":ng(this._delegate,K,X,{onlyOnce:!0});break;case"child_moved":rg(this._delegate,K,X,{onlyOnce:!0});break;default:throw new Error((0,re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return M.promise}limitToFirst(o){return(0,re.Dv)("Query.limitToFirst",1,1,arguments.length),new Ca(this.database,ku(this._delegate,function(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new qo(c)}(o)))}limitToLast(o){return(0,re.Dv)("Query.limitToLast",1,1,arguments.length),new Ca(this.database,ku(this._delegate,function(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Hf(c)}(o)))}orderByChild(o){return(0,re.Dv)("Query.orderByChild",1,1,arguments.length),new Ca(this.database,ku(this._delegate,function(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sl("orderByChild","path",c,!1),new Gf(c)}(o)))}orderByKey(){return(0,re.Dv)("Query.orderByKey",0,0,arguments.length),new Ca(this.database,ku(this._delegate,new Sc))}orderByPriority(){return(0,re.Dv)("Query.orderByPriority",0,0,arguments.length),new Ca(this.database,ku(this._delegate,new Qd))}orderByValue(){return(0,re.Dv)("Query.orderByValue",0,0,arguments.length),new Ca(this.database,ku(this._delegate,new Jd))}startAt(o=null,l){return(0,re.Dv)("Query.startAt",0,2,arguments.length),new Ca(this.database,ku(this._delegate,function(c=null,o){return Wd("startAt","key",o,!0),new h_(c,o)}(o,l)))}startAfter(o=null,l){return(0,re.Dv)("Query.startAfter",0,2,arguments.length),new Ca(this.database,ku(this._delegate,function(c,o){return Wd("startAfter","key",o,!0),new zl(c,o)}(o,l)))}endAt(o=null,l){return(0,re.Dv)("Query.endAt",0,2,arguments.length),new Ca(this.database,ku(this._delegate,function(c,o){return Wd("endAt","key",o,!0),new um(c,o)}(o,l)))}endBefore(o=null,l){return(0,re.Dv)("Query.endBefore",0,2,arguments.length),new Ca(this.database,ku(this._delegate,function(c,o){return Wd("endBefore","key",o,!0),new zh(c,o)}(o,l)))}equalTo(o,l){return(0,re.Dv)("Query.equalTo",1,2,arguments.length),new Ca(this.database,ku(this._delegate,function(c,o){return Wd("equalTo","key",o,!0),new ol(c,o)}(o,l)))}toString(){return(0,re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,re.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Ca))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,l,f){const y={cancel:void 0,context:void 0};if(l&&f)y.cancel=l,(0,re.Wj)(o,"cancel",y.cancel,!0),y.context=f,(0,re.lb)(o,"context",y.context,!0);else if(l)if("object"==typeof l&&null!==l)y.context=l;else{if("function"!=typeof l)throw new Error((0,re.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");y.cancel=l}return y}get ref(){return new zr(this.database,new Ea(this._delegate._repo,this._delegate._path))}}class zr extends Ca{constructor(o,l){super(o,new va(l._repo,l._path,new Qt,!1)),this.database=o,this._delegate=l}getKey(){return(0,re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new zr(this.database,Hh(this._delegate,o))}getParent(){(0,re.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new zr(this.database,o):null}getRoot(){return(0,re.Dv)("Reference.root",0,0,arguments.length),new zr(this.database,this._delegate.root)}set(o,l){(0,re.Dv)("Reference.set",1,2,arguments.length),(0,re.Wj)("Reference.set","onComplete",l,!0);const f=Qp(this._delegate,o);return l&&f.then(()=>l(null),y=>l(y)),f}update(o,l){if((0,re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let D=0;D<o.length;++D)y[""+D]=o[D];o=y,my("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ka("Reference.update",this._delegate._path),(0,re.Wj)("Reference.update","onComplete",l,!0);const f=Jp(this._delegate,o);return l&&f.then(()=>l(null),y=>l(y)),f}setWithPriority(o,l,f){(0,re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,re.Wj)("Reference.setWithPriority","onComplete",f,!0);const y=function(c,o,l){if(ka("setWithPriority",c._path),ya("setWithPriority",o,c._path,!1),Hl("setWithPriority",l,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";const f=new re.BH;return Zg(c._repo,c._path,o,l,f.wrapCallback(()=>{})),f.promise}(this._delegate,o,l);return f&&y.then(()=>f(null),D=>f(D)),y}remove(o){(0,re.Dv)("Reference.remove",0,1,arguments.length),(0,re.Wj)("Reference.remove","onComplete",o,!0);const l=function(c){return ka("remove",c._path),Qp(c,null)}(this._delegate);return o&&l.then(()=>o(null),f=>o(f)),l}transaction(o,l,f){(0,re.Dv)("Reference.transaction",1,3,arguments.length),(0,re.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,re.Wj)("Reference.transaction","onComplete",l,!0),function(c,o,l,f){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,re.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,f);const y=function(c,o,l){var f;if(c=(0,re.m9)(c),ka("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";const y=null===(f=null==l?void 0:l.applyLocally)||void 0===f||f,D=new re.BH,K=am(c,()=>{});return function(c,o,l,f,y,D){Gl(c,"transaction on "+o);const M={path:o,update:l,onComplete:f,status:null,order:Br(),applyLocally:D,retryCount:0,unwatcher:y,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},K=qp(c,o,void 0);M.currentInputSnapshot=K;const X=M.update(K.val());if(void 0===X)M.unwatcher(),M.currentOutputSnapshotRaw=null,M.currentOutputSnapshotResolved=null,M.onComplete&&M.onComplete(null,!1,M.currentInputSnapshot);else{Ff("transaction failed: Data returned ",X,M.path),M.status=0;const ue=Vp(c.transactionQueueTree_,o),Oe=Mu(ue)||[];let Ue;Oe.push(M),Of(ue,Oe),"object"==typeof X&&null!==X&&(0,re.r3)(X,".priority")?(Ue=(0,re.DV)(X,".priority"),(0,re.hu)(ru(Ue),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ue=(Np(c.serverSyncTree_,o)||In.EMPTY_NODE).getPriority().val();const nt=qd(c),Ft=yi(X,Ue),Ut=Pf(Ft,K,nt);M.currentOutputSnapshotRaw=Ft,M.currentOutputSnapshotResolved=Ut,M.currentWriteId=Hp(c);const On=Ym(c.serverSyncTree_,o,Ut,M.currentWriteId,M.applyLocally);Wo(c.eventQueue_,o,On),Bh(c,c.transactionQueueTree_)}}(c._repo,c._path,o,(X,ue,Oe)=>{let Ue=null;X?D.reject(X):(Ue=new $h(Oe,new Ea(c._repo,c._path),Cr),D.resolve(new wa(ue,Ue)))},K,y),D.promise}(this._delegate,o,{applyLocally:f}).then(D=>new Ti(D.committed,new Xd(this.database,D.snapshot)));return l&&y.then(D=>l(null,D.committed,D.snapshot),D=>l(D,!1,null)),y}setPriority(o,l){(0,re.Dv)("Reference.setPriority",1,2,arguments.length),(0,re.Wj)("Reference.setPriority","onComplete",l,!0);const f=function(c,o){c=(0,re.m9)(c),ka("setPriority",c._path),Hl("setPriority",o,!1);const l=new re.BH;return Zg(c._repo,hn(c._path,".priority"),o,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,o);return l&&f.then(()=>l(null),y=>l(y)),f}push(o,l){(0,re.Dv)("Reference.push",0,2,arguments.length),(0,re.Wj)("Reference.push","onComplete",l,!0);const f=function(c,o){c=(0,re.m9)(c),ka("push",c._path),ya("push",o,c._path,!0);const l=$p(c._repo),f=E(l),y=Hh(c,f),D=Hh(c,f);let M;return M=null!=o?Qp(D,o).then(()=>D):Promise.resolve(D),y.then=M.then.bind(M),y.catch=M.then.bind(M,void 0),y}(this._delegate,o),y=f.then(M=>new zr(this.database,M));l&&y.then(()=>l(null),M=>l(M));const D=new zr(this.database,f);return D.then=y.then.bind(y),D.catch=y.catch.bind(y,void 0),D}onDisconnect(){return ka("Reference.onDisconnect",this._delegate._path),new gm(new cy(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Wf{constructor(o,l){this._delegate=o,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:cm,forceLongPolling:y_}}useEmulator(o,l,f={}){!function(c,o,l,f={}){(c=(0,re.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&Yt("Cannot call useEmulator() after instance has already been initialized.");const y=c._repoInternal;let D;if(y.repoInfo_.nodeAdmin)f.mockUserToken&&Yt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),D=new Dl(Dl.OWNER);else if(f.mockUserToken){const M="string"==typeof f.mockUserToken?f.mockUserToken:(0,re.Sg)(f.mockUserToken,c.app.options.projectId);D=new Dl(M)}!function(c,o,l,f){c.repoInfo_=new tc(`${o}:${l}`,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams),f&&(c.authTokenProvider_=f)}(y,o,l,D)}(this._delegate,o,l,f)}ref(o){if((0,re.Dv)("database.ref",0,1,arguments.length),o instanceof zr){const l=sm(this._delegate,o.toString());return new zr(this,l)}{const l=Ou(this._delegate,o);return new zr(this,l)}}refFromURL(o){(0,re.Dv)("database.refFromURL",1,1,arguments.length);const f=sm(this._delegate,o);return new zr(this,f)}goOffline(){return(0,re.Dv)("database.goOffline",0,0,arguments.length),function(c){(c=(0,re.m9)(c))._checkNotDeleted("goOffline"),Wp(c._repo)}(this._delegate)}goOnline(){return(0,re.Dv)("database.goOnline",0,0,arguments.length),function(c){(c=(0,re.m9)(c))._checkNotDeleted("goOnline"),function(c){c.persistentConnection_&&c.persistentConnection_.resume(r_)}(c._repo)}(this._delegate)}}Wf.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:c=>function(c){return{".sv":{increment:c}}}(c)};var I_=Object.freeze({__proto__:null,initStandalone:function({app:c,url:o,version:l,customAuthImpl:f,namespace:y,nodeAdmin:D=!1}){ch(l);const M=new Er.zt("auth-internal",new Er.H0("database-standalone"));return M.setComponent(new Er.wA("auth-internal",()=>f,"PRIVATE")),{instance:new Wf(ag(c,M,void 0,o,D),c),namespace:y}}});const vy=Wf.ServerValue;!function(c){c.INTERNAL.registerComponent(new Er.wA("database-compat",(o,{instanceIdentifier:l})=>{const f=o.getProvider("app-compat").getImmediate(),y=o.getProvider("database").getImmediate({identifier:l});return new Wf(y,f)},"PUBLIC").setServiceProps({Reference:zr,Query:Ca,Database:Wf,DataSnapshot:Xd,enableLogging:hm,INTERNAL:I_,ServerValue:vy}).setMultipleInstances(!0)),c.registerVersion("@firebase/database-compat","0.2.3")}(tt.Z);var su=z(8006);function Cy(c){return null==c}function mm(c){return"function"==typeof c.set}function zf(c,o){return mm(o)?o:c.ref(o)}function _m(c,o){if(function(c){return"string"==typeof c}(c))return o.stringCase();if(mm(c))return o.firebaseCase();if(function(c){return"function"==typeof c.exportVal}(c))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof c)}function Va(c,o,l="on",f=Qs.z){return new Ys.y(y=>{let D=null;return D=c[l](o,(M,K)=>{f.schedule(()=>{y.next({snapshot:M,prevKey:K})}),"once"===l&&f.schedule(()=>y.complete())},M=>{f.schedule(()=>y.error(M))}),"on"===l?{unsubscribe(){null!=D&&c.off(o,D)}}:{unsubscribe(){}}}).pipe((0,xe.U)(y=>{const{snapshot:D,prevKey:M}=y;let K=null;return D.exists()&&(K=D.key),{type:o,payload:D,prevKey:M,key:K}}),(0,El.B)())}function al(c,o){const l=c.length;for(let f=0;f<l;f++)if(c[f].payload.key===o)return f;return-1}function lg(c,o){const{payload:l,prevKey:f,key:y}=o,D=al(c,y),M=function(c,o){if(Cy(o))return 0;{const l=al(c,o);return-1===l?c.length:l+1}}(c,f);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let K=null;o.payload.forEach(X=>{const ue={payload:X,type:"value",prevKey:K,key:X.key};return K=X.key,c=[...c,ue],!1})}return c;case"child_added":if(D>-1){const K=c[D-1];(K&&K.key||null)!==f&&(c=c.filter(X=>X.payload.key!==l.key)).splice(M,0,o)}else{if(null==f)return[o,...c];(c=c.slice()).splice(M,0,o)}return c;case"child_removed":return c.filter(K=>K.payload.key!==l.key);case"child_changed":return c.map(K=>K.payload.key===y?o:K);case"child_moved":if(D>-1){const K=c.splice(D,1)[0];return(c=c.slice()).splice(M,0,K),c}return c;default:return c}}function T_(c){return(Cy(c)||0===c.length)&&(c=["child_added","child_removed","child_changed","child_moved"]),c}function ym(c,o,l){return function(c,o,l){return Va(c,"value","once",l).pipe((0,Te.w)(f=>{const y=[(0,ms.of)(f)];return o.forEach(D=>y.push(Va(c,D,"on",l))),(0,qu.T)(...y).pipe((0,yo.R)(lg,[]))}),(0,vo.x)())}(c,o=T_(o),l)}function vm(c,o,l){const f=(o=T_(o)).map(y=>Va(c,y,"on",l));return(0,qu.T)(...f)}function th(c,o){return function(f,y){return _m(f,{stringCase:()=>c.child(f)[o](y),firebaseCase:()=>f[o](y),snapshotCase:()=>f.ref[o](y)})}}function Kh(c){return function(l){return l?_m(l,{stringCase:()=>c.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):c.remove()}}function S_(c,o){return function(){return Va(c,"value","on",o)}}const by=new U.OlP("angularfire2.realtimeDatabaseURL"),Cm=new U.OlP("angularfire2.database.use-emulator");let bm=(()=>{class c{constructor(l,f,y,D,M,K,X,ue,Oe,Ue,nt,Ft,Ut,On,kn){this.schedulers=K;const Co=X,Zs=(0,lr.on)(l,M,f);ue&&(0,su.nw)(Zs,M,Oe,nt,Ft,Ut,Ue,On),this.database=(0,lr.cc)(`${Zs.name}.database.${y}`,"AngularFireDatabase",Zs.name,()=>{const Wi=M.runOutsideAngular(()=>Zs.database(y||void 0));return Co&&Wi.useEmulator(...Co),Wi},[Co])}list(l,f){const y=this.schedulers.ngZone.runOutsideAngular(()=>zf(this.database,l));let D=y;return f&&(D=f(y)),function(c,o){const l=o.schedulers.outsideAngular,f=o.schedulers.ngZone.run(()=>c.ref);return{query:c,update:th(f,"update"),set:th(f,"set"),push:y=>f.push(y),remove:Kh(f),snapshotChanges:y=>ym(c,y,l).pipe(Ve.iC),stateChanges:y=>vm(c,y,l).pipe(Ve.iC),auditTrail:y=>function(c,o,l){return function(c,o,l){return function(c,o){return Va(c,"value","on",o).pipe((0,xe.U)(l=>{let f;return l.payload.forEach(y=>(f=y.key,!1)),{data:l,lastKeyToLoad:f}}))}(c,l).pipe(function(...c){return o=>{let l;return"function"==typeof c[c.length-1]&&(l=c.pop()),o.lift(new Zu(c,l))}}(o),(0,xe.U)(([y,D])=>{const M=y.lastKeyToLoad,K=D.map(X=>X.key);return{actions:D,lastKeyToLoad:M,loadedKeys:K}}),function(c){return o=>o.lift(new lh(c))}(y=>-1===y.loadedKeys.indexOf(y.lastKeyToLoad)),(0,xe.U)(y=>y.actions))}(c,vm(c,o).pipe((0,yo.R)((y,D)=>[...y,D],[])),l)}(c,y,l).pipe(Ve.iC),valueChanges:(y,D)=>ym(c,y,l).pipe((0,xe.U)(K=>K.map(X=>D&&D.idField?Object.assign(Object.assign({},X.payload.val()),{[D.idField]:X.key}):X.payload.val())),Ve.iC)}}(D,this)}object(l){return function(c,o){return{query:c,snapshotChanges:()=>S_(c,o.schedulers.outsideAngular)().pipe(Ve.iC),update:l=>c.ref.update(l),set:l=>c.ref.set(l),remove:()=>c.ref.remove(),valueChanges:()=>S_(c,o.schedulers.outsideAngular)().pipe(Ve.iC,(0,xe.U)(f=>f.payload.exists()?f.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>zf(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(lr.Dh),U.LFG(lr.xv,8),U.LFG(by,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(Ve.HU),U.LFG(Cm,8),U.LFG(su.zQ,8),U.LFG(su.Qv,8),U.LFG(su.L6,8),U.LFG(su._Q,8),U.LFG(su.rT,8),U.LFG(su.lh,8),U.LFG(su.f7,8),U.LFG(pu.nm,8))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Im=(()=>{class c{constructor(){Jl.Z.registerVersion("angularfire",Ve.q4.full,"rtdb-compat")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({providers:[bm]}),c})(),Zf=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c,bootstrap:[ss]}),c.\u0275inj=U.cJS({providers:[],imports:[[Ni,ao,oi,gi.u5,gi.UX,lr.hO.initializeApp(Sn_firebase),no.yb,_i,Im]]}),c})();(0,U.G48)(),Cn().bootstrapModule(Zf).catch(c=>console.error(c))},3394:(Ot,Ge,z)=>{"use strict";z.d(Ge,{Z:()=>it});var T=z(3854),U=z(3910),ie=z(8026),Re=z(5422);class Ae{constructor(Ct,We){this._delegate=Ct,this.firebase=We,(0,ie._addComponent)(Ct,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=Ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ct){this._delegate.automaticDataCollectionEnabled=Ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ct=>{this._delegate.checkDestroyed(),Ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ie.deleteApp)(this._delegate)))}_getService(Ct,We=ie._DEFAULT_ENTRY_NAME){var Be;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(Ct);return!Ce.isInitialized()&&"EXPLICIT"===(null===(Be=Ce.getComponent())||void 0===Be?void 0:Be.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:We})}_removeServiceInstance(Ct,We=ie._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ct).clearInstance(We)}_addComponent(Ct){(0,ie._addComponent)(this._delegate,Ct)}_addOrOverwriteComponent(Ct){(0,ie._addOrOverwriteComponent)(this._delegate,Ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Me=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),se=function we(){const ze=function(ze){const Ct={},We={__esModule:!0,initializeApp:function(fn,ct={}){const Fe=ie.initializeApp(fn,ct);if((0,T.r3)(Ct,Fe.name))return Ct[Fe.name];const bt=new ze(Fe,We);return Ct[Fe.name]=bt,bt},app:Ce,registerVersion:ie.registerVersion,setLogLevel:ie.setLogLevel,onLog:ie.onLog,apps:null,SDK_VERSION:ie.SDK_VERSION,INTERNAL:{registerComponent:function(fn){const ct=fn.name,Fe=ct.replace("-compat","");if(ie._registerComponent(fn)&&"PUBLIC"===fn.type){const bt=(ot=Ce())=>{if("function"!=typeof ot[Fe])throw Me.create("invalid-app-argument",{appName:ct});return ot[Fe]()};void 0!==fn.serviceProps&&(0,T.ZB)(bt,fn.serviceProps),We[Fe]=bt,ze.prototype[Fe]=function(...ot){return this._getService.bind(this,ct).apply(this,fn.multipleInstances?ot:[])}}return"PUBLIC"===fn.type?We[Fe]:null},removeApp:function(fn){delete Ct[fn]},useAsService:function(fn,ct){return"serverAuth"===ct?null:ct},modularAPIs:ie}};function Ce(fn){if(!(0,T.r3)(Ct,fn=fn||ie._DEFAULT_ENTRY_NAME))throw Me.create("no-app",{appName:fn});return Ct[fn]}return We.default=We,Object.defineProperty(We,"apps",{get:function(){return Object.keys(Ct).map(fn=>Ct[fn])}}),Ce.App=ze,We}(Ae);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function(We){(0,T.ZB)(ze,We)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),ze}(),ce=new Re.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const it=se;(0,ie.registerVersion)("@firebase/app-compat","0.1.30",undefined)},8026:(Ot,Ge,z)=>{"use strict";z.r(Ge),z.d(Ge,{FirebaseError:()=>Re.ZR,SDK_VERSION:()=>ir,_DEFAULT_ENTRY_NAME:()=>ni,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Zt,_apps:()=>gt,_clearComponents:()=>Fn,_components:()=>mn,_getProvider:()=>Bt,_registerComponent:()=>en,_removeServiceInstance:()=>an,deleteApp:()=>un,getApp:()=>Mn,getApps:()=>et,initializeApp:()=>ri,onLog:()=>or,registerVersion:()=>jn,setLogLevel:()=>xn});var T=z(8239),U=z(3910),ie=z(5422),Re=z(3854),Ae=z(3173);class de{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(De=>{if(function(ge){const ve=ge.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(De)){const rt=De.getImmediate();return`${rt.library}/${rt.version}`}return null}).filter(De=>De).join(" ")}}const he="@firebase/app",se=new ie.Yd("@firebase/app"),ni="[DEFAULT]",gn={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gt=new Map,mn=new Map;function cn(ge,ve){try{ge.container.addComponent(ve)}catch(De){se.debug(`Component ${ve.name} failed to register with FirebaseApp ${ge.name}`,De)}}function Zt(ge,ve){ge.container.addOrOverwriteComponent(ve)}function en(ge){const ve=ge.name;if(mn.has(ve))return se.debug(`There were multiple attempts to register component ${ve}.`),!1;mn.set(ve,ge);for(const De of gt.values())cn(De,ge);return!0}function Bt(ge,ve){const De=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return De&&De.triggerHeartbeat(),ge.container.getProvider(ve)}function an(ge,ve,De=ni){Bt(ge,ve).clearInstance(De)}function Fn(){mn.clear()}const _n=new Re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Nn{constructor(ve,De,rt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},De),this._name=De.name,this._automaticDataCollectionEnabled=De.automaticDataCollectionEnabled,this._container=rt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}const ir="9.9.1";function ri(ge,ve={}){"object"!=typeof ve&&(ve={name:ve});const De=Object.assign({name:ni,automaticDataCollectionEnabled:!1},ve),rt=De.name;if("string"!=typeof rt||!rt)throw _n.create("bad-app-name",{appName:String(rt)});const Tt=gt.get(rt);if(Tt){if((0,Re.vZ)(ge,Tt.options)&&(0,Re.vZ)(De,Tt.config))return Tt;throw _n.create("duplicate-app",{appName:rt})}const on=new U.H0(rt);for(const Un of mn.values())on.addComponent(Un);const tn=new Nn(ge,De,on);return gt.set(rt,tn),tn}function Mn(ge=ni){const ve=gt.get(ge);if(!ve)throw _n.create("no-app",{appName:ge});return ve}function et(){return Array.from(gt.values())}function un(ge){return xt.apply(this,arguments)}function xt(){return(xt=(0,T.Z)(function*(ge){const ve=ge.name;gt.has(ve)&&(gt.delete(ve),yield Promise.all(ge.container.getProviders().map(De=>De.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function jn(ge,ve,De){var rt;let Tt=null!==(rt=gn[ge])&&void 0!==rt?rt:ge;De&&(Tt+=`-${De}`);const on=Tt.match(/\s|\//),tn=ve.match(/\s|\//);if(on||tn){const Un=[`Unable to register library "${Tt}" with version "${ve}":`];return on&&Un.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),on&&tn&&Un.push("and"),tn&&Un.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void se.warn(Un.join(" "))}en(new U.wA(`${Tt}-version`,()=>({library:Tt,version:ve}),"VERSION"))}function or(ge,ve){if(null!==ge&&"function"!=typeof ge)throw _n.create("invalid-log-argument");(0,ie.Am)(ge,ve)}function xn(ge){(0,ie.Ub)(ge)}const br="firebase-heartbeat-store";let hr=null;function Is(){return hr||(hr=(0,Ae.X3)("firebase-heartbeat-database",1,{upgrade:(ge,ve)=>{0===ve&&ge.createObjectStore(br)}}).catch(ge=>{throw _n.create("storage-open",{originalErrorMessage:ge.message})})),hr}function Pt(){return(Pt=(0,T.Z)(function*(ge){var ve;try{return(yield Is()).transaction(br).objectStore(br).get(Ds(ge))}catch(De){throw _n.create("storage-get",{originalErrorMessage:null===(ve=De)||void 0===ve?void 0:ve.message})}})).apply(this,arguments)}function rn(ge,ve){return xi.apply(this,arguments)}function xi(){return(xi=(0,T.Z)(function*(ge,ve){var De;try{const Tt=(yield Is()).transaction(br,"readwrite");return yield Tt.objectStore(br).put(ve,Ds(ge)),Tt.done}catch(rt){throw _n.create("storage-set",{originalErrorMessage:null===(De=rt)||void 0===De?void 0:De.message})}})).apply(this,arguments)}function Ds(ge){return`${ge.name}!${ge.options.appId}`}class zn{constructor(ve){this.container=ve,this._heartbeatsCache=null;const De=this.container.getProvider("app").getImmediate();this._storage=new Tn(De),this._heartbeatsCachePromise=this._storage.read().then(rt=>(this._heartbeatsCache=rt,rt))}triggerHeartbeat(){var ve=this;return(0,T.Z)(function*(){const rt=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=qr();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!ve._heartbeatsCache.heartbeats.some(on=>on.date===Tt))return ve._heartbeatsCache.heartbeats.push({date:Tt,agent:rt}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(on=>{const tn=new Date(on.date).valueOf();return Date.now()-tn<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,T.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const De=qr(),{heartbeatsToSend:rt,unsentEntries:Tt}=function(ge,ve=1024){const De=[];let rt=ge.slice();for(const Tt of ge){const on=De.find(tn=>tn.agent===Tt.agent);if(on){if(on.dates.push(Tt.date),ye(De)>ve){on.dates.pop();break}}else if(De.push({agent:Tt.agent,dates:[Tt.date]}),ye(De)>ve){De.pop();break}rt=rt.slice(1)}return{heartbeatsToSend:De,unsentEntries:rt}}(ve._heartbeatsCache.heartbeats),on=(0,Re.L)(JSON.stringify({version:2,heartbeats:rt}));return ve._heartbeatsCache.lastSentHeartbeatDate=De,Tt.length>0?(ve._heartbeatsCache.heartbeats=Tt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),on})()}}function qr(){return(new Date).toISOString().substring(0,10)}class Tn{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,Re.hl)()&&(0,Re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,T.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function(ge){return Pt.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var De=this;return(0,T.Z)(function*(){var rt;if(yield De._canUseIndexedDBPromise){const on=yield De.read();return rn(De.app,{lastSentHeartbeatDate:null!==(rt=ve.lastSentHeartbeatDate)&&void 0!==rt?rt:on.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var De=this;return(0,T.Z)(function*(){var rt;if(yield De._canUseIndexedDBPromise){const on=yield De.read();return rn(De.app,{lastSentHeartbeatDate:null!==(rt=ve.lastSentHeartbeatDate)&&void 0!==rt?rt:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...ve.heartbeats]})}})()}}function ye(ge){return(0,Re.L)(JSON.stringify({version:2,heartbeats:ge})).length}en(new U.wA("platform-logger",ve=>new de(ve),"PRIVATE")),en(new U.wA("heartbeat",ve=>new zn(ve),"PRIVATE")),jn(he,"0.7.29",""),jn(he,"0.7.29","esm2017"),jn("fire-js","")},3910:(Ot,Ge,z)=>{"use strict";z.d(Ge,{wA:()=>ie,H0:()=>he,zt:()=>Ae});var T=z(8239),U=z(3854);class ie{constructor(se,ce,pe){this.name=se,this.instanceFactory=ce,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(se){return this.instantiationMode=se,this}setMultipleInstances(se){return this.multipleInstances=se,this}setServiceProps(se){return this.serviceProps=se,this}setInstanceCreatedCallback(se){return this.onInstanceCreated=se,this}}const Re="[DEFAULT]";class Ae{constructor(se,ce){this.name=se,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(se){const ce=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(ce)){const pe=new U.BH;if(this.instancesDeferred.set(ce,pe),this.isInitialized(ce)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:ce});$e&&pe.resolve($e)}catch($e){}}return this.instancesDeferred.get(ce).promise}getImmediate(se){var ce;const pe=this.normalizeInstanceIdentifier(null==se?void 0:se.identifier),$e=null!==(ce=null==se?void 0:se.optional)&&void 0!==ce&&ce;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(Ye){if($e)return null;throw Ye}}getComponent(){return this.component}setComponent(se){if(se.name!==this.name)throw Error(`Mismatching Component ${se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=se,this.shouldAutoInitialize()){if("EAGER"===se.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Re})}catch(ce){}for(const[ce,pe]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(ce);try{const Ye=this.getOrInitializeService({instanceIdentifier:$e});pe.resolve(Ye)}catch(Ye){}}}}clearInstance(se=Re){this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)}delete(){var se=this;return(0,T.Z)(function*(){const ce=Array.from(se.instances.values());yield Promise.all([...ce.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...ce.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(se=Re){return this.instances.has(se)}getOptions(se=Re){return this.instancesOptions.get(se)||{}}initialize(se={}){const{options:ce={}}=se,pe=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:pe,options:ce});for(const[Ye,it]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(Ye)&&it.resolve($e);return $e}onInit(se,ce){var pe;const $e=this.normalizeInstanceIdentifier(ce),Ye=null!==(pe=this.onInitCallbacks.get($e))&&void 0!==pe?pe:new Set;Ye.add(se),this.onInitCallbacks.set($e,Ye);const it=this.instances.get($e);return it&&se(it,$e),()=>{Ye.delete(se)}}invokeOnInitCallbacks(se,ce){const pe=this.onInitCallbacks.get(ce);if(pe)for(const $e of pe)try{$e(se,ce)}catch(Ye){}}getOrInitializeService({instanceIdentifier:se,options:ce={}}){let pe=this.instances.get(se);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(we=se,we===Re?void 0:we),options:ce}),this.instances.set(se,pe),this.instancesOptions.set(se,ce),this.invokeOnInitCallbacks(pe,se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,se,pe)}catch($e){}var we;return pe||null}normalizeInstanceIdentifier(se=Re){return this.component?this.component.multipleInstances?se:Re:se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(se){this.name=se,this.providers=new Map}addComponent(se){const ce=this.getProvider(se.name);if(ce.isComponentSet())throw new Error(`Component ${se.name} has already been registered with ${this.name}`);ce.setComponent(se)}addOrOverwriteComponent(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)}getProvider(se){if(this.providers.has(se))return this.providers.get(se);const ce=new Ae(se,this);return this.providers.set(se,ce),ce}getProviders(){return Array.from(this.providers.values())}}},5422:(Ot,Ge,z)=>{"use strict";z.d(Ge,{in:()=>U,Yd:()=>Me,Ub:()=>he,Am:()=>we});const T=[];var U=(()=>{return(se=U||(U={}))[se.DEBUG=0]="DEBUG",se[se.VERBOSE=1]="VERBOSE",se[se.INFO=2]="INFO",se[se.WARN=3]="WARN",se[se.ERROR=4]="ERROR",se[se.SILENT=5]="SILENT",U;var se})();const ie={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},Re=U.INFO,Ae={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},de=(se,ce,...pe)=>{if(ce<se.logLevel)return;const $e=(new Date).toISOString(),Ye=Ae[ce];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[Ye](`[${$e}]  ${se.name}:`,...pe)};class Me{constructor(ce){this.name=ce,this._logLevel=Re,this._logHandler=de,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in U))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?ie[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...ce),this._logHandler(this,U.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...ce),this._logHandler(this,U.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,U.INFO,...ce),this._logHandler(this,U.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,U.WARN,...ce),this._logHandler(this,U.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...ce),this._logHandler(this,U.ERROR,...ce)}}function he(se){T.forEach(ce=>{ce.setLogLevel(se)})}function we(se,ce){for(const pe of T){let $e=null;ce&&ce.level&&($e=ie[ce.level]),pe.userLogHandler=null===se?null:(Ye,it,...ze)=>{const Ct=ze.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch(Be){return null}}).filter(We=>We).join(" ");it>=(null!=$e?$e:Ye.logLevel)&&se({level:U[it].toLowerCase(),message:Ct,args:ze,type:Ye.name})}}}},3173:(Ot,Ge,z)=>{"use strict";z.d(Ge,{Lj:()=>_t,X3:()=>Ce});var T=z(8239);let ie,Re;const Me=new WeakMap,he=new WeakMap,we=new WeakMap,se=new WeakMap,ce=new WeakMap;let Ye={get(ct,Fe,bt){if(ct instanceof IDBTransaction){if("done"===Fe)return he.get(ct);if("objectStoreNames"===Fe)return ct.objectStoreNames||we.get(ct);if("store"===Fe)return bt.objectStoreNames[1]?void 0:bt.objectStore(bt.objectStoreNames[0])}return We(ct[Fe])},set:(ct,Fe,bt)=>(ct[Fe]=bt,!0),has:(ct,Fe)=>ct instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in ct};function Ct(ct){return"function"==typeof ct?function(ct){return ct!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Re||(Re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(ct)?function(...Fe){return ct.apply(Be(this),Fe),We(Me.get(this))}:function(...Fe){return We(ct.apply(Be(this),Fe))}:function(Fe,...bt){const ot=ct.call(Be(this),Fe,...bt);return we.set(ot,Fe.sort?Fe.sort():[Fe]),We(ot)}}(ct):(ct instanceof IDBTransaction&&function(ct){if(he.has(ct))return;const Fe=new Promise((bt,ot)=>{const Mt=()=>{ct.removeEventListener("complete",Jt),ct.removeEventListener("error",It),ct.removeEventListener("abort",It)},Jt=()=>{bt(),Mt()},It=()=>{ot(ct.error||new DOMException("AbortError","AbortError")),Mt()};ct.addEventListener("complete",Jt),ct.addEventListener("error",It),ct.addEventListener("abort",It)});he.set(ct,Fe)}(ct),((ct,Fe)=>Fe.some(bt=>ct instanceof bt))(ct,ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(ct,Ye):ct)}function We(ct){if(ct instanceof IDBRequest)return function(ct){const Fe=new Promise((bt,ot)=>{const Mt=()=>{ct.removeEventListener("success",Jt),ct.removeEventListener("error",It)},Jt=()=>{bt(We(ct.result)),Mt()},It=()=>{ot(ct.error),Mt()};ct.addEventListener("success",Jt),ct.addEventListener("error",It)});return Fe.then(bt=>{bt instanceof IDBCursor&&Me.set(bt,ct)}).catch(()=>{}),ce.set(Fe,ct),Fe}(ct);if(se.has(ct))return se.get(ct);const Fe=Ct(ct);return Fe!==ct&&(se.set(ct,Fe),ce.set(Fe,ct)),Fe}const Be=ct=>ce.get(ct);function Ce(ct,Fe,{blocked:bt,upgrade:ot,blocking:Mt,terminated:Jt}={}){const It=indexedDB.open(ct,Fe),ur=We(It);return ot&&It.addEventListener("upgradeneeded",Vr=>{ot(We(It.result),Vr.oldVersion,Vr.newVersion,We(It.transaction))}),bt&&It.addEventListener("blocked",()=>bt()),ur.then(Vr=>{Jt&&Vr.addEventListener("close",()=>Jt()),Mt&&Vr.addEventListener("versionchange",()=>Mt())}).catch(()=>{}),ur}function _t(ct,{blocked:Fe}={}){const bt=indexedDB.deleteDatabase(ct);return Fe&&bt.addEventListener("blocked",()=>Fe()),We(bt).then(()=>{})}const Wt=["get","getKey","getAll","getAllKeys","count"],nn=["put","add","delete","clear"],St=new Map;function fn(ct,Fe){if(!(ct instanceof IDBDatabase)||Fe in ct||"string"!=typeof Fe)return;if(St.get(Fe))return St.get(Fe);const bt=Fe.replace(/FromIndex$/,""),ot=Fe!==bt,Mt=nn.includes(bt);if(!(bt in(ot?IDBIndex:IDBObjectStore).prototype)||!Mt&&!Wt.includes(bt))return;const Jt=function(){var It=(0,T.Z)(function*(ur,...Vr){const Ur=this.transaction(ur,Mt?"readwrite":"readonly");let ni=Ur.store;return ot&&(ni=ni.index(Vr.shift())),(yield Promise.all([ni[bt](...Vr),Mt&&Ur.done]))[0]});return function(Vr){return It.apply(this,arguments)}}();return St.set(Fe,Jt),Jt}var ct;Ye=bb(Cb({},ct=Ye),{get:(Fe,bt,ot)=>fn(Fe,bt)||ct.get(Fe,bt,ot),has:(Fe,bt)=>!!fn(Fe,bt)||ct.has(Fe,bt)})},8239:(Ot,Ge,z)=>{"use strict";function T(ie,Re,Ae,de,Me,he,we){try{var se=ie[he](we),ce=se.value}catch(pe){return void Ae(pe)}se.done?Re(ce):Promise.resolve(ce).then(de,Me)}function U(ie){return function(){var Re=this,Ae=arguments;return new Promise(function(de,Me){var he=ie.apply(Re,Ae);function we(ce){T(he,de,Me,we,se,"next",ce)}function se(ce){T(he,de,Me,we,se,"throw",ce)}we(void 0)})}}z.d(Ge,{Z:()=>U})}},Ot=>{Ot(Ot.s=5160)}]);