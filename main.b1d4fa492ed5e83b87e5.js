var jA=Object.defineProperty,$A=Object.defineProperties,HA=Object.getOwnPropertyDescriptors,vb=Object.getOwnPropertySymbols,GA=Object.prototype.hasOwnProperty,WA=Object.prototype.propertyIsEnumerable,Eb=(kt,$e,z)=>$e in kt?jA(kt,$e,{enumerable:!0,configurable:!0,writable:!0,value:z}):kt[$e]=z,wb=(kt,$e)=>{for(var z in $e||($e={}))GA.call($e,z)&&Eb(kt,z,$e[z]);if(vb)for(var z of vb($e))WA.call($e,z)&&Eb(kt,z,$e[z]);return kt},Cb=(kt,$e)=>$A(kt,HA($e));(self.webpackChunkportafolio=self.webpackChunkportafolio||[]).push([[179],{8255:kt=>{function $e(z){return Promise.resolve().then(()=>{var T=new Error("Cannot find module '"+z+"'");throw T.code="MODULE_NOT_FOUND",T})}$e.keys=()=>[],$e.resolve=$e,$e.id=8255,kt.exports=$e},8583:(kt,$e,z)=>{"use strict";z.d($e,{mr:()=>Ve,ez:()=>jo,K0:()=>Pe,Do:()=>vt,V_:()=>se,Ye:()=>Wt,S$:()=>Ct,mk:()=>Es,sg:()=>Mn,O5:()=>Ei,b0:()=>Ce,lw:()=>he,EM:()=>hs,JF:()=>Cs,PM:()=>co,w_:()=>de,bD:()=>ws,q:()=>ie,Mx:()=>ki,HT:()=>Se});var T=z(7716);let U=null;function ie(){return U}function Se(F){U||(U=F)}class de{}const Pe=new T.OlP("DocumentToken");let he=(()=>{class F{historyGo(B){throw new Error("Not implemented")}}return F.\u0275fac=function(B){return new(B||F)},F.\u0275prov=(0,T.Yz7)({factory:we,token:F,providedIn:"platform"}),F})();function we(){return(0,T.LFG)(ce)}const se=new T.OlP("Location Initialized");let ce=(()=>{class F extends he{constructor(B){super(),this._doc=B,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ie().getBaseHref(this._doc)}onPopState(B){const ne=ie().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",B,!1),()=>ne.removeEventListener("popstate",B)}onHashChange(B){const ne=ie().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",B,!1),()=>ne.removeEventListener("hashchange",B)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(B){this.location.pathname=B}pushState(B,ne,me){pe()?this._history.pushState(B,ne,me):this.location.hash=me}replaceState(B,ne,me){pe()?this._history.replaceState(B,ne,me):this.location.hash=me}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return F.\u0275fac=function(B){return new(B||F)(T.LFG(Pe))},F.\u0275prov=(0,T.Yz7)({factory:Be,token:F,providedIn:"platform"}),F})();function pe(){return!!window.history.pushState}function Be(){return new ce((0,T.LFG)(Pe))}function Ye(F,Q){if(0==F.length)return Q;if(0==Q.length)return F;let B=0;return F.endsWith("/")&&B++,Q.startsWith("/")&&B++,2==B?F+Q.substring(1):1==B?F+Q:F+"/"+Q}function it(F){const Q=F.match(/#|\?|$/),B=Q&&Q.index||F.length;return F.slice(0,B-("/"===F[B-1]?1:0))+F.slice(B)}function ze(F){return F&&"?"!==F[0]?"?"+F:F}let Ct=(()=>{class F{historyGo(B){throw new Error("Not implemented")}}return F.\u0275fac=function(B){return new(B||F)},F.\u0275prov=(0,T.Yz7)({factory:We,token:F,providedIn:"root"}),F})();function We(F){const Q=(0,T.LFG)(Pe).location;return new Ce((0,T.LFG)(he),Q&&Q.origin||"")}const Ve=new T.OlP("appBaseHref");let Ce=(()=>{class F extends Ct{constructor(B,ne){if(super(),this._platformLocation=B,this._removeListenerFns=[],null==ne&&(ne=this._platformLocation.getBaseHrefFromDOM()),null==ne)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ne}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return Ye(this._baseHref,B)}path(B=!1){const ne=this._platformLocation.pathname+ze(this._platformLocation.search),me=this._platformLocation.hash;return me&&B?`${ne}${me}`:ne}pushState(B,ne,me,Qe){const Ke=this.prepareExternalUrl(me+ze(Qe));this._platformLocation.pushState(B,ne,Ke)}replaceState(B,ne,me,Qe){const Ke=this.prepareExternalUrl(me+ze(Qe));this._platformLocation.replaceState(B,ne,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(B=0){var ne,me;null===(me=(ne=this._platformLocation).historyGo)||void 0===me||me.call(ne,B)}}return F.\u0275fac=function(B){return new(B||F)(T.LFG(he),T.LFG(Ve,8))},F.\u0275prov=T.Yz7({token:F,factory:F.\u0275fac}),F})(),vt=(()=>{class F extends Ct{constructor(B,ne){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(B){const ne=Ye(this._baseHref,B);return ne.length>0?"#"+ne:ne}pushState(B,ne,me,Qe){let Ke=this.prepareExternalUrl(me+ze(Qe));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.pushState(B,ne,Ke)}replaceState(B,ne,me,Qe){let Ke=this.prepareExternalUrl(me+ze(Qe));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.replaceState(B,ne,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(B=0){var ne,me;null===(me=(ne=this._platformLocation).historyGo)||void 0===me||me.call(ne,B)}}return F.\u0275fac=function(B){return new(B||F)(T.LFG(he),T.LFG(Ve,8))},F.\u0275prov=T.Yz7({token:F,factory:F.\u0275fac}),F})(),Wt=(()=>{class F{constructor(B,ne){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=B;const me=this._platformStrategy.getBaseHref();this._platformLocation=ne,this._baseHref=it(hn(me)),this._platformStrategy.onPopState(Qe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Qe.state,type:Qe.type})})}path(B=!1){return this.normalize(this._platformStrategy.path(B))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(B,ne=""){return this.path()==this.normalize(B+ze(ne))}normalize(B){return F.stripTrailingSlash(function(F,Q){return F&&Q.startsWith(F)?Q.substring(F.length):Q}(this._baseHref,hn(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._platformStrategy.prepareExternalUrl(B)}go(B,ne="",me=null){this._platformStrategy.pushState(me,"",B,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ze(ne)),me)}replaceState(B,ne="",me=null){this._platformStrategy.replaceState(me,"",B,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ze(ne)),me)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(B=0){var ne,me;null===(me=(ne=this._platformStrategy).historyGo)||void 0===me||me.call(ne,B)}onUrlChange(B){this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)}))}_notifyUrlChangeListeners(B="",ne){this._urlChangeListeners.forEach(me=>me(B,ne))}subscribe(B,ne,me){return this._subject.subscribe({next:B,error:ne,complete:me})}}return F.\u0275fac=function(B){return new(B||F)(T.LFG(Ct),T.LFG(he))},F.normalizeQueryParams=ze,F.joinWithSlash=Ye,F.stripTrailingSlash=it,F.\u0275prov=(0,T.Yz7)({factory:en,token:F,providedIn:"root"}),F})();function en(){return new Wt((0,T.LFG)(Ct),(0,T.LFG)(he))}function hn(F){return F.replace(/\/index.html$/,"")}var bt=(()=>((bt=bt||{})[bt.Zero=0]="Zero",bt[bt.One=1]="One",bt[bt.Two=2]="Two",bt[bt.Few=3]="Few",bt[bt.Many=4]="Many",bt[bt.Other=5]="Other",bt))();const Qr=T.kL8;class Rr{}let Mr=(()=>{class F extends Rr{constructor(B){super(),this.locale=B}getPluralCategory(B,ne){switch(Qr(ne||this.locale)(B)){case bt.Zero:return"zero";case bt.One:return"one";case bt.Two:return"two";case bt.Few:return"few";case bt.Many:return"many";default:return"other"}}}return F.\u0275fac=function(B){return new(B||F)(T.LFG(T.soG))},F.\u0275prov=T.Yz7({token:F,factory:F.\u0275fac}),F})();function ki(F,Q){Q=encodeURIComponent(Q);for(const B of F.split(";")){const ne=B.indexOf("="),[me,Qe]=-1==ne?[B,""]:[B.slice(0,ne),B.slice(ne+1)];if(me.trim()===Q)return decodeURIComponent(Qe)}return null}let Es=(()=>{class F{constructor(B,ne,me,Qe){this._iterableDiffers=B,this._keyValueDiffers=ne,this._ngEl=me,this._renderer=Qe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(B){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof B?B.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(B){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof B?B.split(/\s+/):B,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const B=this._iterableDiffer.diff(this._rawClass);B&&this._applyIterableChanges(B)}else if(this._keyValueDiffer){const B=this._keyValueDiffer.diff(this._rawClass);B&&this._applyKeyValueChanges(B)}}_applyKeyValueChanges(B){B.forEachAddedItem(ne=>this._toggleClass(ne.key,ne.currentValue)),B.forEachChangedItem(ne=>this._toggleClass(ne.key,ne.currentValue)),B.forEachRemovedItem(ne=>{ne.previousValue&&this._toggleClass(ne.key,!1)})}_applyIterableChanges(B){B.forEachAddedItem(ne=>{if("string"!=typeof ne.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(ne.item)}`);this._toggleClass(ne.item,!0)}),B.forEachRemovedItem(ne=>this._toggleClass(ne.item,!1))}_applyClasses(B){B&&(Array.isArray(B)||B instanceof Set?B.forEach(ne=>this._toggleClass(ne,!0)):Object.keys(B).forEach(ne=>this._toggleClass(ne,!!B[ne])))}_removeClasses(B){B&&(Array.isArray(B)||B instanceof Set?B.forEach(ne=>this._toggleClass(ne,!1)):Object.keys(B).forEach(ne=>this._toggleClass(ne,!1)))}_toggleClass(B,ne){(B=B.trim())&&B.split(/\s+/g).forEach(me=>{ne?this._renderer.addClass(this._ngEl.nativeElement,me):this._renderer.removeClass(this._ngEl.nativeElement,me)})}}return F.\u0275fac=function(B){return new(B||F)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},F.\u0275dir=T.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),F})();class hi{constructor(Q,B,ne,me){this.$implicit=Q,this.ngForOf=B,this.index=ne,this.count=me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mn=(()=>{class F{constructor(B,ne,me){this._viewContainer=B,this._template=ne,this._differs=me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;if(!this._differ&&B)try{this._differ=this._differs.find(B).create(this.ngForTrackBy)}catch(ne){throw new Error(`Cannot find a differ supporting object '${B}' of type '${function(F){return F.name||typeof F}(B)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const ne=[];B.forEachOperation((me,Qe,Ke)=>{if(null==me.previousIndex){const L=this._viewContainer.createEmbeddedView(this._template,new hi(null,this._ngForOf,-1,-1),null===Ke?void 0:Ke),O=new Bo(me,L);ne.push(O)}else if(null==Ke)this._viewContainer.remove(null===Qe?void 0:Qe);else if(null!==Qe){const L=this._viewContainer.get(Qe);this._viewContainer.move(L,Ke);const O=new Bo(me,L);ne.push(O)}});for(let me=0;me<ne.length;me++)this._perViewChange(ne[me].view,ne[me].record);for(let me=0,Qe=this._viewContainer.length;me<Qe;me++){const Ke=this._viewContainer.get(me);Ke.context.index=me,Ke.context.count=Qe,Ke.context.ngForOf=this._ngForOf}B.forEachIdentityChange(me=>{this._viewContainer.get(me.currentIndex).context.$implicit=me.item})}_perViewChange(B,ne){B.context.$implicit=ne.item}static ngTemplateContextGuard(B,ne){return!0}}return F.\u0275fac=function(B){return new(B||F)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},F.\u0275dir=T.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),F})();class Bo{constructor(Q,B){this.record=Q,this.view=B}}let Ei=(()=>{class F{constructor(B,ne){this._viewContainer=B,this._context=new so,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){wi("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){wi("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,ne){return!0}}return F.\u0275fac=function(B){return new(B||F)(T.Y36(T.s_b),T.Y36(T.Rgc))},F.\u0275dir=T.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),F})();class so{constructor(){this.$implicit=null,this.ngIf=null}}function wi(F,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,T.AaK)(Q)}'.`)}let jo=(()=>{class F{}return F.\u0275fac=function(B){return new(B||F)},F.\u0275mod=T.oAB({type:F}),F.\u0275inj=T.cJS({providers:[{provide:Rr,useClass:Mr}]}),F})();const ws="browser";function co(F){return"server"===F}let hs=(()=>{class F{}return F.\u0275prov=(0,T.Yz7)({token:F,providedIn:"root",factory:()=>new Fs((0,T.LFG)(Pe),window)}),F})();class Fs{constructor(Q,B){this.document=Q,this.window=B,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const B=function(F,Q){const B=F.getElementById(Q)||F.getElementsByName(Q)[0];if(B)return B;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const ne=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let me=ne.currentNode;for(;me;){const Qe=me.shadowRoot;if(Qe){const Ke=Qe.getElementById(Q)||Qe.querySelector(`[name="${Q}"]`);if(Ke)return Ke}me=ne.nextNode()}}return null}(this.document,Q);B&&(this.scrollToElement(B),this.attemptFocus(B))}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=Q)}}scrollToElement(Q){const B=Q.getBoundingClientRect(),ne=B.left+this.window.pageXOffset,me=B.top+this.window.pageYOffset,Qe=this.offset();this.window.scrollTo(ne-Qe[0],me-Qe[1])}attemptFocus(Q){return Q.focus(),this.document.activeElement===Q}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=$o(this.window.history)||$o(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function $o(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class Cs{}},7716:(kt,$e,z)=>{"use strict";z.d($e,{deG:()=>Ql,tb:()=>NC,AFp:()=>AC,ip1:()=>h0,CZH:()=>L_,hGG:()=>GS,z2F:()=>Jy,sBO:()=>RI,Sil:()=>Qy,_Vd:()=>x_,EJc:()=>PC,SBq:()=>cf,qLn:()=>os,vpe:()=>df,gxx:()=>Lu,tBr:()=>Sa,XFs:()=>xt,OlP:()=>ni,zs3:()=>Hi,ZZ4:()=>$v,aQg:()=>Hv,soG:()=>eE,YKP:()=>Cw,v3s:()=>bS,h0i:()=>xm,PXZ:()=>_S,R0b:()=>bc,FiY:()=>qa,Lbi:()=>RC,g9A:()=>xC,Qsj:()=>gI,FYo:()=>jv,JOm:()=>Xs,Tiy:()=>VE,q3G:()=>Rn,tp0:()=>Aa,EAV:()=>SS,Rgc:()=>Uy,dDg:()=>LC,DyG:()=>Vs,q4F:()=>UE,GfV:()=>gw,s_b:()=>zv,ifc:()=>Ot,eFA:()=>$C,G48:()=>cS,Gpc:()=>ce,X6Q:()=>v0,_c5:()=>LS,VLi:()=>lS,c2e:()=>MC,zSh:()=>Zd,wAp:()=>e,vHH:()=>it,EiD:()=>hr,mCW:()=>Oc,qzn:()=>Za,JVY:()=>wp,pB0:()=>Cf,eBb:()=>wf,L6k:()=>Pc,LAX:()=>Ed,cg1:()=>Py,Tjo:()=>kS,kL8:()=>Oy,yhl:()=>_a,dqk:()=>Dt,sIi:()=>Qh,CqO:()=>Le,QGY:()=>ue,F4k:()=>Oe,RDi:()=>ho,AaK:()=>he,z3N:()=>Ka,qOj:()=>nh,TTD:()=>jo,_Bn:()=>cw,xp6:()=>Mh,uIk:()=>up,ekj:()=>C_,Suo:()=>oC,Xpm:()=>Jt,lG2:()=>ls,Yz7:()=>Qt,cJS:()=>on,oAB:()=>Pi,Yjl:()=>Uo,Y36:()=>ah,_UZ:()=>l,BQk:()=>M,ynx:()=>D,qZA:()=>o,TgZ:()=>c,EpF:()=>X,n5z:()=>Ae,Ikx:()=>S_,LFG:()=>ii,$8M:()=>Ut,NdJ:()=>rt,CRH:()=>aC,oxw:()=>js,Hsn:()=>hl,F$t:()=>Ns,Q6J:()=>vm,VKq:()=>Yw,iGM:()=>iC,CHM:()=>aa,LSH:()=>Xu,kYT:()=>Ps,YNc:()=>om,_uU:()=>pg,Oqu:()=>bm,hij:()=>I_,AsE:()=>Iy,Gf:()=>sC});var T=z(9765),U=z(5319),ie=z(7574),Ne=z(6682),Se=z(8819);function de(t){for(let n in t)if(t[n]===de)return n;throw Error("Could not find renamed property on target object.")}function Pe(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function he(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(he).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function we(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const se=de({__forward_ref__:de});function ce(t){return t.__forward_ref__=ce,t.toString=function(){return he(this())},t}function pe(t){return Be(t)?t():t}function Be(t){return"function"==typeof t&&t.hasOwnProperty(se)&&t.__forward_ref__===ce}class it extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function We(t){return"string"==typeof t?t:null==t?"":String(t)}function Ve(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():We(t)}function en(t,n){const i=n?` in ${n}`:"";throw new it("201",`No provider for ${Ve(t)} found${i}`)}function pn(t,n){null==t&&function(t,n,i,u){throw new Error(`ASSERTION ERROR: ${t}`+(null==u?"":` [Expected=> ${i} ${u} ${n} <=Actual]`))}(n,t,null,"!=")}function Qt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function on(t){return{providers:t.providers||[],imports:t.imports||[]}}function Bn(t){return yr(t,Qr)||yr(t,tt)}function yr(t,n){return t.hasOwnProperty(n)?t[n]:null}function ur(t){return t&&(t.hasOwnProperty(kn)||t.hasOwnProperty(an))?t[kn]:null}const Qr=de({\u0275prov:de}),kn=de({\u0275inj:de}),tt=de({ngInjectableDef:de}),an=de({ngInjectorDef:de});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let qn;function Nn(t){const n=qn;return qn=t,n}function Sr(t,n,i){const u=Bn(t);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:i&xt.Optional?null:void 0!==n?n:void en(he(t),"Injector")}function br(t){return{toString:t}.toString()}var gr=(()=>((gr=gr||{})[gr.OnPush=0]="OnPush",gr[gr.Default=1]="Default",gr))(),Ot=(()=>((Ot=Ot||{})[Ot.Emulated=0]="Emulated",Ot[Ot.None=2]="None",Ot[Ot.ShadowDom=3]="ShadowDom",Ot))();const tn="undefined"!=typeof globalThis&&globalThis,Ni="undefined"!=typeof window&&window,ys="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt=tn||"undefined"!=typeof global&&global||Ni||ys,In={},Dn=[],_e=de({\u0275cmp:de}),De=de({\u0275dir:de}),ge=de({\u0275pipe:de}),ve=de({\u0275mod:de}),Te=de({\u0275loc:de}),nt=de({\u0275fac:de}),Tt=de({__NG_ELEMENT_ID__:de});let sn=0;function Jt(t){return br(()=>{const i={},u={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===gr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Dn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ot.Emulated,id:"c",styles:t.styles||Dn,_:null,setInput:null,schemas:t.schemas||null,tView:null},d=t.directives,p=t.features,v=t.pipes;return u.id+=sn++,u.inputs=Ji(t.inputs,i),u.outputs=Ji(t.outputs),p&&p.forEach(w=>w(u)),u.directiveDefs=d?()=>("function"==typeof d?d():d).map(Mi):null,u.pipeDefs=v?()=>("function"==typeof v?v():v).map(Cn):null,u})}function Mi(t){return rr(t)||function(t){return t[De]||null}(t)}function Cn(t){return function(t){return t[ge]||null}(t)}const Jr={};function Pi(t){return br(()=>{const n={type:t.type,bootstrap:t.bootstrap||Dn,declarations:t.declarations||Dn,imports:t.imports||Dn,exports:t.exports||Dn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Jr[t.id]=t.type),n})}function Ps(t,n){return br(()=>{const i=nn(t,!0);i.declarations=n.declarations||Dn,i.imports=n.imports||Dn,i.exports=n.exports||Dn})}function Ji(t,n){if(null==t)return In;const i={};for(const u in t)if(t.hasOwnProperty(u)){let d=t[u],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),i[d]=u,n&&(n[d]=p)}return i}const ls=Jt;function Uo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function rr(t){return t[_e]||null}function nn(t,n){const i=t[ve]||null;if(!i&&!0===n)throw new Error(`Type ${he(t)} does not have '\u0275mod' property.`);return i}function Xi(t){return Array.isArray(t)&&"object"==typeof t[1]}function oi(t){return Array.isArray(t)&&!0===t[1]}function sr(t){return 0!=(8&t.flags)}function oo(t){return 2==(2&t.flags)}function So(t){return 1==(1&t.flags)}function Hr(t){return null!==t.template}function Li(t){return 0!=(512&t[2])}function cs(t,n){return t.hasOwnProperty(nt)?t[nt]:null}class ia{constructor(n,i,u){this.previousValue=n,this.currentValue=i,this.firstChange=u}isFirstChange(){return this.firstChange}}function jo(){return ws}function ws(t){return t.type.prototype.ngOnChanges&&(t.setInput=ds),Hs}function Hs(){const t=Ci(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===In)t.previous=n;else for(let u in n)i[u]=n[u];t.current=null,this.ngOnChanges(n)}}function ds(t,n,i,u){const d=Ci(t)||function(t,n){return t[ei]=n}(t,{previous:In,current:null}),p=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[i],A=v[w];p[w]=new ia(A&&A.currentValue,n,v===In),t[u]=n}jo.ngInherit=!0;const ei="__ngSimpleChanges__";function Ci(t){return t[ei]||null}let $o;function ho(t){$o=t}function F(t){return!!t.listen}const B={createRenderer:(t,n)=>void 0!==$o?$o:"undefined"!=typeof document?document:void 0};function me(t){for(;Array.isArray(t);)t=t[0];return t}function L(t,n){return me(n[t])}function O(t,n){return me(n[t.index])}function Y(t,n){return t.data[n]}function Et(t,n){const i=n[t];return Xi(i)?i:i[0]}function un(t){return 4==(4&t[2])}function or(t){return 128==(128&t[2])}function qr(t,n){return null==n?null:t[n]}function Ui(t){t[18]=0}function Sn(t,n){t[5]+=n;let i=t,u=t[3];for(;null!==u&&(1===n&&1===i[5]||-1===n&&0===i[5]);)u[5]+=n,i=u,u=u[3]}const Kt={lFrame:Ks(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fu(){return Kt.bindingsEnabled}function ct(){return Kt.lFrame.lView}function bn(){return Kt.lFrame.tView}function aa(t){return Kt.lFrame.contextLView=t,t[8]}function Nr(){let t=$u();for(;null!==t&&64===t.type;)t=t.parent;return t}function $u(){return Kt.lFrame.currentTNode}function bs(t,n){const i=Kt.lFrame;i.currentTNode=t,i.isParent=n}function pi(){return Kt.lFrame.isParent}function Gs(){Kt.lFrame.isParent=!1}function Ws(){return Kt.isInCheckNoChangesMode}function xo(t){Kt.isInCheckNoChangesMode=t}function Ro(){return Kt.lFrame.bindingIndex++}function qi(t){const n=Kt.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function Is(t,n){const i=Kt.lFrame;i.bindingIndex=i.bindingRootIndex=t,ba(n)}function ba(t){Kt.lFrame.currentDirectiveIndex=t}function vl(){return Kt.lFrame.currentQueryIndex}function la(t){Kt.lFrame.currentQueryIndex=t}function Wo(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function ja(t,n,i){if(i&xt.SkipSelf){let d=n,p=t;for(;!(d=d.parent,null!==d||i&xt.Host||(d=Wo(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;n=d,t=p}const u=Kt.lFrame=Gu();return u.currentTNode=n,u.lView=t,!0}function ca(t){const n=Gu(),i=t[1];Kt.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Gu(){const t=Kt.lFrame,n=null===t?null:t.child;return null===n?Ks(t):n}function Ks(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function El(){const t=Kt.lFrame;return Kt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const gu=El;function Ia(){const t=El();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bi(){return Kt.lFrame.selectedIndex}function fo(t){Kt.lFrame.selectedIndex=t}function Ur(){const t=Kt.lFrame;return Y(t.tView,t.selectedIndex)}function zo(t,n){for(let i=n.directiveStart,u=n.directiveEnd;i<u;i++){const p=t.data[i].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:A,ngAfterViewChecked:k,ngOnDestroy:W}=p;v&&(t.contentHooks||(t.contentHooks=[])).push(-i,v),w&&((t.contentHooks||(t.contentHooks=[])).push(i,w),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,w)),A&&(t.viewHooks||(t.viewHooks=[])).push(-i,A),k&&((t.viewHooks||(t.viewHooks=[])).push(i,k),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,k)),null!=W&&(t.destroyHooks||(t.destroyHooks=[])).push(i,W)}}function Zs(t,n,i){vu(t,n,3,i)}function Da(t,n,i,u){(3&t[2])===i&&vu(t,n,i,u)}function ui(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function vu(t,n,i,u){const p=null!=u?u:-1,v=n.length-1;let w=0;for(let A=void 0!==u?65535&t[18]:0;A<v;A++)if("number"==typeof n[A+1]){if(w=n[A],null!=u&&w>=u)break}else n[A]<0&&(t[18]+=65536),(w<p||-1==p)&&(Ds(t,i,n,A),t[18]=(4294901760&t[18])+A+2),A++}function Ds(t,n,i,u){const d=i[u]<0,p=i[u+1],w=t[d?-i[u]:i[u]];if(d){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class No{constructor(n,i,u){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=u}}function Mo(t,n,i){const u=F(t);let d=0;for(;d<i.length;){const p=i[d];if("number"==typeof p){if(0!==p)break;d++;const v=i[d++],w=i[d++],A=i[d++];u?t.setAttribute(n,w,A,v):n.setAttributeNS(v,w,A)}else{const v=p,w=i[++d];Cl(v)?u&&t.setProperty(n,v,w):u?t.setAttribute(n,v,w):n.setAttribute(v,w),d++}}return d}function Tc(t){return 3===t||4===t||6===t}function Cl(t){return 64===t.charCodeAt(0)}function Ta(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let u=0;u<n.length;u++){const d=n[u];"number"==typeof d?i=d:0===i||Zl(t,i,d,null,-1===i||2===i?n[++u]:null)}}return t}function Zl(t,n,i,u,d){let p=0,v=t.length;if(-1===n)v=-1;else for(;p<t.length;){const w=t[p++];if("number"==typeof w){if(w===n){v=-1;break}if(w>n){v=p-1;break}}}for(;p<t.length;){const w=t[p];if("number"==typeof w)break;if(w===i){if(null===u)return void(null!==d&&(t[p+1]=d));if(u===t[p+1])return void(t[p+2]=d)}p++,null!==u&&p++,null!==d&&p++}-1!==v&&(t.splice(v,0,n),p=v+1),t.splice(p++,0,i),null!==u&&t.splice(p++,0,u),null!==d&&t.splice(p++,0,d)}function Sc(t){return-1!==t}function qo(t){return 32767&t}function fs(t,n){let i=function(t){return t>>16}(t),u=n;for(;i>0;)u=u[15],i--;return u}let zu=!0;function fa(t){const n=zu;return zu=t,n}let Eu=0;function ft(t,n){const i=go(t,n);if(-1!==i)return i;const u=n[1];u.firstCreatePass&&(t.injectorIndex=n.length,Br(u.data,t),Br(n,null),Br(u.blueprint,null));const d=Ga(t,n),p=t.injectorIndex;if(Sc(d)){const v=qo(d),w=fs(d,n),A=w[1].data;for(let k=0;k<8;k++)n[p+k]=w[v+k]|A[v+k]}return n[p+8]=d,p}function Br(t,n){t.push(0,0,0,0,0,0,0,0,n)}function go(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ga(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,u=null,d=n;for(;null!==d;){const p=d[1],v=p.type;if(u=2===v?p.declTNode:1===v?d[6]:null,null===u)return-1;if(i++,d=d[15],-1!==u.injectorIndex)return u.injectorIndex|i<<16}return-1}function Bt(t,n,i){!function(t,n,i){let u;"string"==typeof i?u=i.charCodeAt(0)||0:i.hasOwnProperty(Tt)&&(u=i[Tt]),null==u&&(u=i[Tt]=Eu++);const d=255&u;n.data[t+(d>>5)]|=1<<d}(t,n,i)}function Yl(t,n,i){if(i&xt.Optional)return t;en(n,"NodeInjector")}function Lt(t,n,i,u){if(i&xt.Optional&&void 0===u&&(u=null),0==(i&(xt.Self|xt.Host))){const d=t[9],p=Nn(void 0);try{return d?d.get(n,u,i&xt.Optional):Sr(n,u,i&xt.Optional)}finally{Nn(p)}}return Yl(u,n,i)}function Je(t,n,i,u=xt.Default,d){if(null!==t){const p=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Tt)?t[Tt]:void 0;return"number"==typeof n?n>=0?255&n:mi:n}(i);if("function"==typeof p){if(!ja(n,t,u))return u&xt.Host?Yl(d,i,u):Lt(n,i,u,d);try{const v=p(u);if(null!=v||u&xt.Optional)return v;en(i)}finally{gu()}}else if("number"==typeof p){let v=null,w=go(t,n),A=-1,k=u&xt.Host?n[16][6]:null;for((-1===w||u&xt.SkipSelf)&&(A=-1===w?Ga(t,n):n[w+8],-1!==A&&ee(u,!1)?(v=n[1],w=qo(A),n=fs(A,n)):w=-1);-1!==w;){const W=n[1];if(G(p,w,W.data)){const re=N(w,n,i,v,u,k);if(re!==ht)return re}A=n[w+8],-1!==A&&ee(u,n[1].data[w+8]===k)&&G(p,w,n)?(v=W,w=qo(A),n=fs(A,n)):w=-1}}}return Lt(n,i,u,d)}const ht={};function mi(){return new le(Nr(),ct())}function N(t,n,i,u,d,p){const v=n[1],w=v.data[t+8],W=S(w,v,i,null==u?oo(w)&&zu:u!=v&&0!=(3&w.type),d&xt.Host&&p===w);return null!==W?I(n,v,W,w):ht}function S(t,n,i,u,d){const p=t.providerIndexes,v=n.data,w=1048575&p,A=t.directiveStart,W=p>>20,ae=d?w+W:t.directiveEnd;for(let Ee=u?w:w+W;Ee<ae;Ee++){const Me=v[Ee];if(Ee<A&&i===Me||Ee>=A&&Me.type===i)return Ee}if(d){const Ee=v[A];if(Ee&&Hr(Ee)&&Ee.type===i)return A}return null}function I(t,n,i,u){let d=t[i];const p=n.data;if(function(t){return t instanceof No}(d)){const v=d;v.resolving&&function(t,n){throw new it("200",`Circular dependency in DI detected for ${t}`)}(Ve(p[i]));const w=fa(v.canSeeViewProviders);v.resolving=!0;const A=v.injectImpl?Nn(v.injectImpl):null;ja(t,u,xt.Default);try{d=t[i]=v.factory(void 0,p,t,u),n.firstCreatePass&&i>=u.directiveStart&&function(t,n,i){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:p}=n.type.prototype;if(u){const v=ws(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,v),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,v)}d&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,d),p&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,p),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,p))}(i,p[i],n)}finally{null!==A&&Nn(A),fa(w),v.resolving=!1,gu()}}return d}function G(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function ee(t,n){return!(t&xt.Self||t&xt.Host&&n)}class le{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,u){return Je(this._tNode,this._lView,n,u,i)}}function Ae(t){return br(()=>{const n=t.prototype.constructor,i=n[nt]||st(n),u=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==u;){const p=d[nt]||st(d);if(p&&p!==i)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function st(t){return Be(t)?()=>{const n=st(pe(t));return n&&n()}:cs(t)}function Ut(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const u=i.length;let d=0;for(;d<u;){const p=i[d];if(Tc(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<u&&"string"==typeof i[d];)d++;else{if(p===n)return i[d+1];d+=2}}}return null}(Nr(),t)}const gt="__parameters__";function Ht(t,n,i){return br(()=>{const u=function(t){return function(...i){if(t){const u=t(...i);for(const d in u)this[d]=u[d]}}}(n);function d(...p){if(this instanceof d)return u.apply(this,p),this;const v=new d(...p);return w.annotation=v,w;function w(A,k,W){const re=A.hasOwnProperty(gt)?A[gt]:Object.defineProperty(A,gt,{value:[]})[gt];for(;re.length<=W;)re.push(null);return(re[W]=re[W]||[]).push(v),A}}return i&&(d.prototype=Object.create(i.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}class ni{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Qt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ql=new ni("AnalyzeForEntryComponents"),Vs=Function;function mo(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let u=t[i];Array.isArray(u)?(n===t&&(n=t.slice(0,i)),mo(u,n)):n!==t&&n.push(u)}return n}function ps(t,n){t.forEach(i=>Array.isArray(i)?ps(i,n):n(i))}function Ku(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function ko(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Zu(t,n){const i=[];for(let u=0;u<t;u++)i.push(n);return i}function Ss(t,n,i){let u=zn(t,n);return u>=0?t[1|u]=i:(u=~u,function(t,n,i,u){let d=t.length;if(d==n)t.push(i,u);else if(1===d)t.push(u,t[0]),t[0]=i;else{for(d--,t.push(t[d-1],t[d]);d>n;)t[d]=t[d-2],d--;t[n]=i,t[n+1]=u}}(t,u,n,i)),u}function ji(t,n){const i=zn(t,n);if(i>=0)return t[1|i]}function zn(t,n){return function(t,n,i){let u=0,d=t.length>>i;for(;d!==u;){const p=u+(d-u>>1),v=t[p<<i];if(n===v)return p<<i;v>n?d=p:u=p+1}return~(d<<i)}(t,n,1)}const fe={},xe="__NG_DI_FLAG__",He="ngTempTokenPath",Rt=/\n/gm,yn="__source",rn=de({provide:String,useValue:de});let tr;function Dr(t){const n=tr;return tr=t,n}function is(t,n=xt.Default){if(void 0===tr)throw new Error("inject() must be called from an injection context");return null===tr?Sr(t,void 0,n):tr.get(t,n&xt.Optional?null:void 0,n)}function ii(t,n=xt.Default){return(qn||is)(pe(t),n)}function Us(t){const n=[];for(let i=0;i<t.length;i++){const u=pe(t[i]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let d,p=xt.Default;for(let v=0;v<u.length;v++){const w=u[v],A=Qo(w);"number"==typeof A?-1===A?d=w.token:p|=A:d=w}n.push(ii(d,p))}else n.push(ii(u))}return n}function Cr(t,n){return t[xe]=n,t.prototype[xe]=n,t}function Qo(t){return t[xe]}function Du(t,n,i,u){const d=t[He];throw n[yn]&&d.unshift(n[yn]),t.message=function(t,n,i,u=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let d=he(n);if(Array.isArray(n))d=n.map(he).join(" -> ");else if("object"==typeof n){let p=[];for(let v in n)if(n.hasOwnProperty(v)){let w=n[v];p.push(v+":"+("string"==typeof w?JSON.stringify(w):he(w)))}d=`{${p.join(", ")}}`}return`${i}${u?"("+u+")":""}[${d}]: ${t.replace(Rt,"\n  ")}`}("\n"+t.message,d,i,u),t.ngTokenPath=d,t[He]=null,t}const Sa=Cr(Ht("Inject",t=>({token:t})),-1),qa=Cr(Ht("Optional"),8),Aa=Cr(Ht("SkipSelf"),4);let nc;function Nl(t){var n;return(null===(n=function(){if(void 0===nc&&(nc=null,Dt.trustedTypes))try{nc=Dt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return nc}())||void 0===n?void 0:n.createHTML(t))||t}class Lo{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vf extends Lo{getTypeName(){return"HTML"}}class rc extends Lo{getTypeName(){return"Style"}}class vd extends Lo{getTypeName(){return"Script"}}class Eh extends Lo{getTypeName(){return"URL"}}class Ef extends Lo{getTypeName(){return"ResourceURL"}}function Ka(t){return t instanceof Lo?t.changingThisBreaksApplicationSecurity:t}function Za(t,n){const i=_a(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function _a(t){return t instanceof Lo&&t.getTypeName()||null}function wp(t){return new vf(t)}function Pc(t){return new rc(t)}function wf(t){return new vd(t)}function Ed(t){return new Eh(t)}function Cf(t){return new Ef(t)}class Yu{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(Nl(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class If{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const u=this.inertDocument.createElement("body");i.appendChild(u)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=Nl(n),i;const u=this.inertDocument.createElement("body");return u.innerHTML=Nl(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(n){const i=n.attributes;for(let d=i.length-1;0<d;d--){const v=i.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&n.removeAttribute(v)}let u=n.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Df=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Oc(t){return(t=String(t)).match(Df)||t.match(Qu)?t:"unsafe:"+t}function ya(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function Tu(...t){const n={};for(const i of t)for(const u in i)i.hasOwnProperty(u)&&(n[u]=!0);return n}const Su=ya("area,br,col,hr,img,wbr"),wd=ya("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Au=ya("rp,rt"),kc=Tu(Su,Tu(wd,ya("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tu(Au,ya("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tu(Au,wd)),Ju=ya("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ch=ya("srcset"),Cd=Tu(Ju,Ch,ya("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ya("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ya=ya("script,style,template");class Tf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,u=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?u=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,u&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let d=this.checkClobberedElement(i,i.nextSibling);if(d){i=d;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!kc.hasOwnProperty(i))return this.sanitizedSomething=!0,!Ya.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const u=n.attributes;for(let d=0;d<u.length;d++){const p=u.item(d),v=p.name,w=v.toLowerCase();if(!Cd.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let A=p.value;Ju[w]&&(A=Oc(A)),Ch[w]&&(t=A,A=(t=String(t)).split(",").map(n=>Oc(n.trim())).join(", ")),this.buf.push(" ",v,'="',Sf(A),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();kc.hasOwnProperty(i)&&!Su.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(Sf(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const bh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ol=/([^\#-~ |!])/g;function Sf(t){return t.replace(/&/g,"&amp;").replace(bh,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Ol,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mr;function hr(t,n){let i=null;try{mr=mr||function(t){const n=new If(t);return function(){try{return!!(new window.DOMParser).parseFromString(Nl(""),"text/html")}catch(t){return!1}}()?new Yu(n):n}(t);let u=n?String(n):"";i=mr.getInertBodyElement(u);let d=5,p=u;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,u=p,p=i.innerHTML,i=mr.getInertBodyElement(u)}while(u!==p);return Nl((new Tf).sanitizeChildren(xn(i)||i))}finally{if(i){const u=xn(i)||i;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function xn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Rn=(()=>((Rn=Rn||{})[Rn.NONE=0]="NONE",Rn[Rn.HTML=1]="HTML",Rn[Rn.STYLE=2]="STYLE",Rn[Rn.SCRIPT=3]="SCRIPT",Rn[Rn.URL=4]="URL",Rn[Rn.RESOURCE_URL=5]="RESOURCE_URL",Rn))();function Xu(t){const n=function(){const t=ct();return t&&t[12]}();return n?n.sanitize(Rn.URL,t)||"":Za(t,"URL")?Ka(t):Oc(We(t))}const Ll="__ngContext__";function Ti(t,n){t[Ll]=n}function Dh(t){const n=function(t){return t[Ll]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function ic(t){return t.ngOriginalError}function As(t,...n){t.error(...n)}class os{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),u=this._findContext(n),d=(t=n)&&t.ngErrorLogger||As;var t;d(this._console,"ERROR",n),i&&d(this._console,"ORIGINAL ERROR",i),u&&d(this._console,"ERROR CONTEXT",u)}_findContext(n){return n?n.ngDebugContext||this._findContext(ic(n)):null}_findOriginalError(n){let i=n&&ic(n);for(;i&&ic(i);)i=ic(i);return i||null}}const nl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function ea(t){return t instanceof Function?t():t}var Xs=(()=>((Xs=Xs||{})[Xs.Important=1]="Important",Xs[Xs.DashCase=2]="DashCase",Xs))();function Ad(t,n){return undefined(t,n)}function Rs(t){const n=t[3];return oi(n)?n[3]:n}function m(t){return j(t[13])}function b(t){return j(t[4])}function j(t){for(;null!==t&&!oi(t);)t=t[4];return t}function ye(t,n,i,u,d){if(null!=u){let p,v=!1;oi(u)?p=u:Xi(u)&&(v=!0,u=u[0]);const w=me(u);0===t&&null!==i?null==d?Gc(n,i,w):tu(n,i,w,d||null,!0):1===t&&null!==i?tu(n,i,w,d||null,!0):2===t?function(t,n,i){const u=Md(t,n);u&&function(t,n,i,u){F(t)?t.removeChild(n,i,u):n.removeChild(i)}(t,u,n,i)}(n,w,v):3===t&&n.destroyNode(w),null!=p&&function(t,n,i,u,d){const p=i[7];p!==me(i)&&ye(n,t,u,p,d);for(let w=10;w<i.length;w++){const A=i[w];Od(A[1],A,t,n,u,p)}}(n,t,p,i,d)}}function zt(t,n,i){return F(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function Pf(t,n){const i=t[9],u=i.indexOf(n),d=n[3];1024&n[2]&&(n[2]&=-1025,Sn(d,-1)),i.splice(u,1)}function oc(t,n){if(t.length<=10)return;const i=10+n,u=t[i];if(u){const d=u[17];null!==d&&d!==t&&Pf(d,u),n>0&&(t[i-1][4]=u[4]);const p=ko(t,10+n);!function(t,n){Od(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(u[1],u);const v=p[19];null!==v&&v.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Rd(t,n){if(!(256&n[2])){const i=n[11];F(i)&&i.destroyNode&&Od(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return Nd(t[1],t);for(;n;){let i=null;if(Xi(n))i=n[13];else{const u=n[10];u&&(i=u)}if(!i){for(;n&&!n[4]&&n!==t;)Xi(n)&&Nd(n[1],n),n=n[3];null===n&&(n=t),Xi(n)&&Nd(n[1],n),i=n&&n[4]}n=i}}(n)}}function Nd(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let u=0;u<i.length;u+=2){const d=n[i[u]];if(!(d instanceof No)){const p=i[u+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const w=d[p[v]],A=p[v+1];try{A.call(w)}finally{}}else try{p.call(d)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,u=n[7];let d=-1;if(null!==i)for(let p=0;p<i.length-1;p+=2)if("string"==typeof i[p]){const v=i[p+1],w="function"==typeof v?v(n):me(n[v]),A=u[d=i[p+2]],k=i[p+3];"boolean"==typeof k?w.removeEventListener(i[p],A,k):k>=0?u[d=k]():u[d=-k].unsubscribe(),p+=2}else{const v=u[d=i[p+1]];i[p].call(v)}if(null!==u){for(let p=d+1;p<u.length;p++)u[p]();n[7]=null}}(t,n),1===n[1].type&&F(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&oi(n[3])){i!==n[3]&&Pf(i,n);const u=n[19];null!==u&&u.detachView(t)}}}function ac(t,n,i){return function(t,n,i){let u=n;for(;null!==u&&40&u.type;)u=(n=u).parent;if(null===u)return i[0];if(2&u.flags){const d=t.data[u.directiveStart].encapsulation;if(d===Ot.None||d===Ot.Emulated)return null}return O(u,i)}(t,n.parent,i)}function tu(t,n,i,u,d){F(t)?t.insertBefore(n,i,u,d):n.insertBefore(i,u,d)}function Gc(t,n,i){F(t)?t.appendChild(n,i):n.appendChild(i)}function eo(t,n,i,u,d){null!==u?tu(t,n,i,u,d):Gc(t,n,i)}function Md(t,n){return F(t)?t.parentNode(n):n.parentNode}function uc(t,n,i){return nu(t,n,i)}let nu=function(t,n,i){return 40&t.type?O(t,i):null};function Pu(t,n,i,u){const d=ac(t,u,n),p=n[11],w=uc(u.parent||n[6],u,n);if(null!=d)if(Array.isArray(i))for(let A=0;A<i.length;A++)eo(p,d,i[A],w,!1);else eo(p,d,i,w,!1)}function ru(t,n){if(null!==n){const i=n.type;if(3&i)return O(n,t);if(4&i)return iu(-1,t[n.index]);if(8&i){const u=n.child;if(null!==u)return ru(t,u);{const d=t[n.index];return oi(d)?iu(-1,d):me(d)}}if(32&i)return Ad(n,t)()||me(t[n.index]);{const u=Ou(t,n);return null!==u?Array.isArray(u)?u[0]:ru(Rs(t[16]),u):ru(t,n.next)}}return null}function Ou(t,n){return null!==n?t[16][6].projection[n.projection]:null}function iu(t,n){const i=10+t+1;if(i<n.length){const u=n[i],d=u[1].firstChild;if(null!==d)return ru(u,d)}return n[7]}function ku(t,n,i,u,d,p,v){for(;null!=i;){const w=u[i.index],A=i.type;if(v&&0===n&&(w&&Ti(me(w),u),i.flags|=4),64!=(64&i.flags))if(8&A)ku(t,n,i.child,u,d,p,!1),ye(n,t,d,w,p);else if(32&A){const k=Ad(i,u);let W;for(;W=k();)ye(n,t,d,W,p);ye(n,t,d,w,p)}else 16&A?kd(t,n,u,i,d,p):ye(n,t,d,w,p);i=v?i.projectionNext:i.next}}function Od(t,n,i,u,d,p){ku(i,u,t.firstChild,n,d,p,!1)}function kd(t,n,i,u,d,p){const v=i[16],A=v[6].projection[u.projection];if(Array.isArray(A))for(let k=0;k<A.length;k++)ye(n,t,d,A[k],p);else ku(t,n,A,v[3],d,p,!0)}function Rh(t,n,i){F(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function Bl(t,n,i){F(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function Fd(t,n,i){let u=t.length;for(;;){const d=t.indexOf(n,i);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const p=n.length;if(d+p===u||t.charCodeAt(d+p)<=32)return d}i=d+1}}const zc="ng-template";function Sp(t,n,i){let u=0;for(;u<t.length;){let d=t[u++];if(i&&"class"===d){if(d=t[u],-1!==Fd(d.toLowerCase(),n,0))return!0}else if(1===d){for(;u<t.length&&"string"==typeof(d=t[u++]);)if(d.toLowerCase()===n)return!0;return!1}}return!1}function Fm(t){return 4===t.type&&t.value!==zc}function Si(t,n,i){return n===(4!==t.type||i?t.value:zc)}function sl(t,n,i){let u=4;const d=t.attrs||[],p=function(t){for(let n=0;n<t.length;n++)if(Tc(t[n]))return n;return t.length}(d);let v=!1;for(let w=0;w<n.length;w++){const A=n[w];if("number"!=typeof A){if(!v)if(4&u){if(u=2|1&u,""!==A&&!Si(t,A,i)||""===A&&1===n.length){if(to(u))return!1;v=!0}}else{const k=8&u?A:n[++w];if(8&u&&null!==t.attrs){if(!Sp(t.attrs,k,i)){if(to(u))return!1;v=!0}continue}const re=cc(8&u?"class":A,d,Fm(t),i);if(-1===re){if(to(u))return!1;v=!0;continue}if(""!==k){let ae;ae=re>p?"":d[re+1].toLowerCase();const Ee=8&u?ae:null;if(Ee&&-1!==Fd(Ee,k,0)||2&u&&k!==ae){if(to(u))return!1;v=!0}}}}else{if(!v&&!to(u)&&!to(A))return!1;if(v&&to(A))continue;v=!1,u=A|1&u}}return to(u)||v}function to(t){return 0==(1&t)}function cc(t,n,i,u){if(null===n)return-1;let d=0;if(u||!i){let p=!1;for(;d<n.length;){const v=n[d];if(v===t)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let w=n[++d];for(;"string"==typeof w;)w=n[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const u=t[i];if("number"==typeof u)return-1;if(u===n)return i;i++}return-1}(n,t)}function dc(t,n,i=!1){for(let u=0;u<n.length;u++)if(sl(t,n[u],i))return!0;return!1}function jl(t,n){e:for(let i=0;i<n.length;i++){const u=n[i];if(t.length===u.length){for(let d=0;d<t.length;d++)if(t[d]!==u[d])continue e;return!0}}return!1}function Vd(t,n){return t?":not("+n.trim()+")":n}function Nh(t){let n=t[0],i=1,u=2,d="",p=!1;for(;i<t.length;){let v=t[i];if("string"==typeof v)if(2&u){const w=t[++i];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?d+="."+v:4&u&&(d+=" "+v);else""!==d&&!to(v)&&(n+=Vd(p,d),d=""),u=v,p=p||!to(u);i++}return""!==d&&(n+=Vd(p,d)),n}const Un={};function Mh(t){Sg(bn(),ct(),bi()+t,Ws())}function Sg(t,n,i,u){if(!u)if(3==(3&n[2])){const p=t.preOrderCheckHooks;null!==p&&Zs(n,p,i)}else{const p=t.preOrderHooks;null!==p&&Da(n,p,0,i)}fo(i)}function kf(t,n){return t<<17|n<<2}function Yi(t){return t>>17&32767}function Ud(t){return 2|t}function ol(t){return(131068&t)>>2}function $l(t,n){return-131069&t|n<<2}function Rp(t){return 1|t}function Wm(t,n){const i=t.contentQueries;if(null!==i)for(let u=0;u<i.length;u+=2){const d=i[u],p=i[u+1];if(-1!==p){const v=t.data[p];la(d),v.contentQueries(2,n[p],p)}}}function fc(t,n,i,u,d,p,v,w,A,k){const W=n.blueprint.slice();return W[0]=d,W[2]=140|u,Ui(W),W[3]=W[15]=t,W[8]=i,W[10]=v||t&&t[10],W[11]=w||t&&t[11],W[12]=A||t&&t[12]||null,W[9]=k||t&&t[9]||null,W[6]=p,W[16]=2==n.type?t[16]:W,W}function Uh(t,n,i,u,d){let p=t.data[n];if(null===p)p=function(t,n,i,u,d){const p=$u(),v=pi(),A=t.data[n]=function(t,n,i,u,d,p){return{type:i,index:u,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,i,n,u,d);return null===t.firstChild&&(t.firstChild=A),null!==p&&(v?null==p.child&&null!==A.parent&&(p.child=A):null===p.next&&(p.next=A)),A}(t,n,i,u,d),Kt.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=i,p.value=u,p.attrs=d;const v=function(){const t=Kt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return bs(p,!0),p}function jd(t,n,i,u){if(0===i)return-1;const d=n.length;for(let p=0;p<i;p++)n.push(u),t.blueprint.push(u),t.data.push(null);return d}function au(t,n,i){ca(n);try{const u=t.viewQuery;null!==u&&Xc(1,u,i);const d=t.template;null!==d&&Na(t,n,d,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wm(t,n),t.staticViewQueries&&Xc(2,t.viewQuery,i);const p=t.components;null!==p&&function(t,n){for(let i=0;i<n.length;i++)zf(t,n[i])}(n,p)}catch(u){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),u}finally{n[2]&=-5,Ia()}}function $d(t,n,i,u){const d=n[2];if(256==(256&d))return;ca(n);const p=Ws();try{Ui(n),function(t){Kt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Na(t,n,i,2,u);const v=3==(3&d);if(!p)if(v){const k=t.preOrderCheckHooks;null!==k&&Zs(n,k,null)}else{const k=t.preOrderHooks;null!==k&&Da(n,k,0,null),ui(n,0)}if(function(t){for(let n=m(t);null!==n;n=b(n)){if(!n[2])continue;const i=n[9];for(let u=0;u<i.length;u++){const d=i[u],p=d[3];0==(1024&d[2])&&Sn(p,1),d[2]|=1024}}}(n),function(t){for(let n=m(t);null!==n;n=b(n))for(let i=10;i<n.length;i++){const u=n[i],d=u[1];or(u)&&$d(d,u,d.template,u[8])}}(n),null!==t.contentQueries&&Wm(t,n),!p)if(v){const k=t.contentCheckHooks;null!==k&&Zs(n,k)}else{const k=t.contentHooks;null!==k&&Da(n,k,1),ui(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let u=0;u<i.length;u++){const d=i[u];if(d<0)fo(~d);else{const p=d,v=i[++u],w=i[++u];Is(v,p),w(2,n[p])}}}finally{fo(-1)}}(t,n);const w=t.components;null!==w&&function(t,n){for(let i=0;i<n.length;i++)Wf(t,n[i])}(n,w);const A=t.viewQuery;if(null!==A&&Xc(2,A,u),!p)if(v){const k=t.viewCheckHooks;null!==k&&Zs(n,k)}else{const k=t.viewHooks;null!==k&&Da(n,k,2),ui(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),p||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Sn(n[3],-1))}finally{Ia()}}function Hd(t,n,i,u){const d=n[10],p=!Ws(),v=un(n);try{p&&!v&&d.begin&&d.begin(),v&&au(t,n,u),$d(t,n,i,u)}finally{p&&!v&&d.end&&d.end()}}function Na(t,n,i,u,d){const p=bi(),v=2&u;try{fo(-1),v&&n.length>20&&Sg(t,n,20,Ws()),i(u,d)}finally{fo(p)}}function Gd(t,n,i){if(sr(n)){const d=n.directiveEnd;for(let p=n.directiveStart;p<d;p++){const v=t.data[p];v.contentQueries&&v.contentQueries(1,i[p],p)}}}function pc(t,n,i){!fu()||(function(t,n,i,u){const d=i.directiveStart,p=i.directiveEnd;t.firstCreatePass||ft(i,n),Ti(u,n);const v=i.initialInputs;for(let w=d;w<p;w++){const A=t.data[w],k=Hr(A);k&&$f(n,i,A);const W=I(n,t,w,i);Ti(W,n),null!==v&&jg(0,w-d,W,A,0,v),k&&(Et(i.index,n)[8]=W)}}(t,n,i,O(i,n)),128==(128&i.flags)&&function(t,n,i){const u=i.directiveStart,d=i.directiveEnd,v=i.index,w=Kt.lFrame.currentDirectiveIndex;try{fo(v);for(let A=u;A<d;A++){const k=t.data[A],W=n[A];ba(A),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&$h(k,W)}}finally{fo(-1),ba(w)}}(t,n,i))}function Up(t,n,i=O){const u=n.localNames;if(null!==u){let d=n.index+1;for(let p=0;p<u.length;p+=2){const v=u[p+1],w=-1===v?i(n,t):t[v];t[d++]=w}}}function Fg(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Uf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Uf(t,n,i,u,d,p,v,w,A,k){const W=20+u,re=W+d,ae=function(t,n){const i=[];for(let u=0;u<n;u++)i.push(u<t?null:Un);return i}(W,re),Ee="function"==typeof k?k():k;return ae[1]={type:t,blueprint:ae,template:i,queries:null,viewQuery:w,declTNode:n,data:ae.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:A,consts:Ee,incompleteFirstPass:!1}}function Wd(t,n,i,u){const d=Yp(n);null===i?d.push(u):(d.push(i),t.firstCreatePass&&Wh(t).push(u,d.length-1))}function Bp(t,n,i){for(let u in t)if(t.hasOwnProperty(u)){const d=t[u];(i=null===i?{}:i).hasOwnProperty(u)?i[u].push(n,d):i[u]=[n,d]}return i}function ta(t,n,i,u,d,p,v,w){const A=O(n,i);let W,k=n.inputs;!w&&null!=k&&(W=k[u])?(ed(t,i,W,u,d),oo(n)&&function(t,n){const i=Et(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(u=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(u),d=null!=v?v(d,n.value||"",u):d,F(p)?p.setProperty(A,u,d):Cl(u)||(A.setProperty?A.setProperty(u,d):A[u]=d))}function Hp(t,n,i,u){let d=!1;if(fu()){const p=function(t,n,i){const u=t.directiveRegistry;let d=null;if(u)for(let p=0;p<u.length;p++){const v=u[p];dc(i,v.selectors,!1)&&(d||(d=[]),Bt(ft(i,n),t,v.type),Hr(v)?(Wp(t,i),d.unshift(v)):d.push(v))}return d}(t,n,i),v=null===u?null:{"":-1};if(null!==p){d=!0,Ym(i,t.data.length,p.length);for(let W=0;W<p.length;W++){const re=p[W];re.providersResolver&&re.providersResolver(re)}let w=!1,A=!1,k=jd(t,n,p.length,null);for(let W=0;W<p.length;W++){const re=p[W];i.mergedAttrs=Ta(i.mergedAttrs,re.hostAttrs),Qm(t,i,n,k,re),jf(k,re,v),null!==re.contentQueries&&(i.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(i.flags|=128);const ae=re.type.prototype;!w&&(ae.ngOnChanges||ae.ngOnInit||ae.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),w=!0),!A&&(ae.ngOnChanges||ae.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),A=!0),k++}!function(t,n){const u=n.directiveEnd,d=t.data,p=n.attrs,v=[];let w=null,A=null;for(let k=n.directiveStart;k<u;k++){const W=d[k],re=W.inputs,ae=null===p||Fm(n)?null:Hf(re,p);v.push(ae),w=Bp(re,k,w),A=Bp(W.outputs,k,A)}null!==w&&(w.hasOwnProperty("class")&&(n.flags|=16),w.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=v,n.inputs=w,n.outputs=A}(t,i)}v&&function(t,n,i){if(n){const u=t.localNames=[];for(let d=0;d<n.length;d+=2){const p=i[n[d+1]];if(null==p)throw new it("301",`Export of name '${n[d+1]}' not found!`);u.push(n[d],p)}}}(i,u,v)}return i.mergedAttrs=Ta(i.mergedAttrs,i.attrs),d}function Ug(t,n,i,u,d,p){const v=p.hostBindings;if(v){let w=t.hostBindingOpCodes;null===w&&(w=t.hostBindingOpCodes=[]);const A=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(w)!=A&&w.push(A),w.push(u,d,v)}}function $h(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Wp(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function jf(t,n,i){if(i){if(n.exportAs)for(let u=0;u<n.exportAs.length;u++)i[n.exportAs[u]]=t;Hr(n)&&(i[""]=t)}}function Ym(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function Qm(t,n,i,u,d){t.data[u]=d;const p=d.factory||(d.factory=cs(d.type)),v=new No(p,Hr(d),null);t.blueprint[u]=v,i[u]=v,Ug(t,n,0,u,jd(t,i,d.hostVars,Un),d)}function $f(t,n,i){const u=O(n,t),d=Fg(i),p=t[10],v=Jc(t,fc(t,d,null,i.onPush?64:16,u,n,p,p.createRenderer(u,i),null,null));t[n.index]=v}function Ma(t,n,i,u,d,p){const v=O(t,n);!function(t,n,i,u,d,p,v){if(null==p)F(t)?t.removeAttribute(n,d,i):n.removeAttribute(d);else{const w=null==v?We(p):v(p,u||"",d);F(t)?t.setAttribute(n,d,w,i):i?n.setAttributeNS(i,d,w):n.setAttribute(d,w)}}(n[11],v,p,t.value,i,u,d)}function jg(t,n,i,u,d,p){const v=p[n];if(null!==v){const w=u.setInput;for(let A=0;A<v.length;){const k=v[A++],W=v[A++],re=v[A++];null!==w?u.setInput(i,re,k,W):i[W]=re}}}function Hf(t,n){let i=null,u=0;for(;u<n.length;){const d=n[u];if(0!==d)if(5!==d){if("number"==typeof d)break;t.hasOwnProperty(d)&&(null===i&&(i=[]),i.push(d,t[d],n[u+1])),u+=2}else u+=2;else u+=4}return i}function qp(t,n,i,u){return new Array(t,!0,!1,n,null,0,u,i,null,null)}function Wf(t,n){const i=Et(n,t);if(or(i)){const u=i[1];80&i[2]?$d(u,i,u.template,i[8]):i[5]>0&&Fu(i)}}function Fu(t){for(let u=m(t);null!==u;u=b(u))for(let d=10;d<u.length;d++){const p=u[d];if(1024&p[2]){const v=p[1];$d(v,p,v.template,p[8])}else p[5]>0&&Fu(p)}const i=t[1].components;if(null!==i)for(let u=0;u<i.length;u++){const d=Et(i[u],t);or(d)&&d[5]>0&&Fu(d)}}function zf(t,n){const i=Et(n,t),u=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(u,i),au(u,i,i[8])}function Jc(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Kp(t){for(;t;){t[2]|=64;const n=Rs(t);if(Li(t)&&!n)return t;t=n}return null}function Gh(t,n,i){const u=n[10];u.begin&&u.begin();try{$d(t,n,t.template,i)}catch(d){throw Xm(n,d),d}finally{u.end&&u.end()}}function qf(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],u=Dh(i),d=u[1];Hd(d,u,d.template,i)}}(t[8])}function Xc(t,n,i){la(0),n(t,i)}const K_=(()=>Promise.resolve(null))();function Yp(t){return t[7]||(t[7]=[])}function Wh(t){return t.cleanup||(t.cleanup=[])}function Xm(t,n){const i=t[9],u=i?i.get(os,null):null;u&&u.handleError(n)}function ed(t,n,i,u,d){for(let p=0;p<i.length;){const v=i[p++],w=i[p++],A=n[v],k=t.data[v];null!==k.setInput?k.setInput(A,d,u,w):A[w]=d}}function Eo(t,n,i){const u=L(n,t);!function(t,n,i){F(t)?t.setValue(n,i):n.textContent=i}(t[11],u,i)}function Gl(t,n,i){let u=i?t.styles:null,d=i?t.classes:null,p=0;if(null!==n)for(let v=0;v<n.length;v++){const w=n[v];"number"==typeof w?p=w:1==p?d=we(d,w):2==p&&(u=we(u,w+": "+n[++v]+";"))}i?t.styles=u:t.stylesWithoutHost=u,i?t.classes=d:t.classesWithoutHost=d}const Lu=new ni("INJECTOR",-1);class Kd{get(n,i=fe){if(i===fe){const u=new Error(`NullInjectorError: No provider for ${he(n)}!`);throw u.name="NullInjectorError",u}return i}}const Zd=new ni("Set Injector scope."),wo={},Xp={};let td;function Vu(){return void 0===td&&(td=new Kd),td}function Co(t,n=null,i=null,u){return new Yd(t,i,n||Vu(),u)}class Yd{constructor(n,i,u,d=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];i&&ps(i,w=>this.processProvider(w,n,i)),ps([n],w=>this.processInjectorType(w,[],p)),this.records.set(Lu,nd(void 0,this));const v=this.records.get(Zd);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof n?null:he(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=fe,u=xt.Default){this.assertNotDestroyed();const d=Dr(this),p=Nn(void 0);try{if(!(u&xt.SkipSelf)){let w=this.records.get(n);if(void 0===w){const A=("function"==typeof(t=n)||"object"==typeof t&&t instanceof ni)&&Bn(n);w=A&&this.injectableDefInScope(A)?nd(tg(n),wo):null,this.records.set(n,w)}if(null!=w)return this.hydrate(n,w)}return(u&xt.Self?Vu():this.parent).get(n,i=u&xt.Optional&&i===fe?null:i)}catch(v){if("NullInjectorError"===v.name){if((v[He]=v[He]||[]).unshift(he(n)),d)throw v;return Du(v,n,"R3InjectorError",this.source)}throw v}finally{Nn(p),Dr(d)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((u,d)=>n.push(he(d))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,u){if(!(n=pe(n)))return!1;let d=ur(n);const p=null==d&&n.ngModule||void 0,v=void 0===p?n:p,w=-1!==u.indexOf(v);if(void 0!==p&&(d=ur(p)),null==d)return!1;if(null!=d.imports&&!w){let W;u.push(v);try{ps(d.imports,re=>{this.processInjectorType(re,i,u)&&(void 0===W&&(W=[]),W.push(re))})}finally{}if(void 0!==W)for(let re=0;re<W.length;re++){const{ngModule:ae,providers:Ee}=W[re];ps(Ee,Me=>this.processProvider(Me,ae,Ee||Dn))}}this.injectorDefTypes.add(v);const A=cs(v)||(()=>new v);this.records.set(v,nd(A,wo));const k=d.providers;if(null!=k&&!w){const W=n;ps(k,re=>this.processProvider(re,W,k))}return void 0!==p&&void 0!==n.providers}processProvider(n,i,u){let d=Xd(n=pe(n))?n:pe(n&&n.provide);const p=(t=n,Kf(t)?nd(void 0,t.useValue):nd(t_(t),wo));var t;if(Xd(n)||!0!==n.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=nd(void 0,wo,!0),v.factory=()=>Us(v.multi),this.records.set(d,v)),d=n,v.multi.push(n)}this.records.set(d,p)}hydrate(n,i){return i.value===wo&&(i.value=Xp,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=pe(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function tg(t){const n=Bn(t),i=null!==n?n.factory:cs(t);if(null!==i)return i;if(t instanceof ni)throw new Error(`Token ${he(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const u=Zu(n,"?");throw new Error(`Can't resolve all parameters for ${he(t)}: (${u.join(", ")}).`)}const i=function(t){const n=t&&(t[Qr]||t[tt]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function t_(t,n,i){let u;if(Xd(t)){const d=pe(t);return cs(d)||tg(d)}if(Kf(t))u=()=>pe(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))u=()=>t.useFactory(...Us(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))u=()=>ii(pe(t.useExisting));else{const d=pe(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return cs(d)||tg(d);u=()=>new d(...Us(t.deps))}return u}function nd(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function Kf(t){return null!==t&&"object"==typeof t&&rn in t}function Xd(t){return"function"==typeof t}const Wg=function(t,n,i){return function(t,n=null,i=null,u){const d=Co(t,n,i,u);return d._resolveInjectorDefTypes(),d}({name:i},n,t,i)};let Hi=(()=>{class t{static create(i,u){return Array.isArray(i)?Wg(i,u,""):Wg(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=fe,t.NULL=new Kd,t.\u0275prov=Qt({token:t,providedIn:"any",factory:()=>ii(Lu)}),t.__NG_ELEMENT_ID__=-1,t})();function em(t,n){zo(Dh(t)[1],Nr())}function nh(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const u=[t];for(;n;){let d;if(Hr(t))d=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");d=n.\u0275dir}if(d){if(i){u.push(d);const v=t;v.inputs=rh(t.inputs),v.declaredInputs=rh(t.declaredInputs),v.outputs=rh(t.outputs);const w=d.hostBindings;w&&ag(t,w);const A=d.viewQuery,k=d.contentQueries;if(A&&ip(t,A),k&&o_(t,k),Pe(t.inputs,d.inputs),Pe(t.declaredInputs,d.declaredInputs),Pe(t.outputs,d.outputs),Hr(d)&&d.data.animation){const W=t.data;W.animation=(W.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const w=p[v];w&&w.ngInherit&&w(t),w===nh&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let u=t.length-1;u>=0;u--){const d=t[u];d.hostVars=n+=d.hostVars,d.hostAttrs=Ta(d.hostAttrs,i=Ta(i,d.hostAttrs))}}(u)}function rh(t){return t===In?{}:t===Dn?[]:t}function ip(t,n){const i=t.viewQuery;t.viewQuery=i?(u,d)=>{n(u,d),i(u,d)}:n}function o_(t,n){const i=t.contentQueries;t.contentQueries=i?(u,d,p)=>{n(u,d,p),i(u,d,p)}:n}function ag(t,n){const i=t.hostBindings;t.hostBindings=i?(u,d)=>{n(u,d),i(u,d)}:n}let Ea=null;function sd(){if(!Ea){const t=Dt.Symbol;if(t&&t.iterator)Ea=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const u=n[i];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ea=u)}}}return Ea}function Qh(t){return!!tm(t)&&(Array.isArray(t)||!(t instanceof Map)&&sd()in t)}function tm(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Vo(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function up(t,n,i,u){const d=ct();return Vo(d,Ro(),n)&&(bn(),Ma(Ur(),d,t,n,i,u)),up}function ad(t,n,i,u,d,p){const w=function(t,n,i,u){const d=Vo(t,n,i);return Vo(t,n+1,u)||d}(t,Kt.lFrame.bindingIndex,i,d);return qi(2),w?n+We(i)+u+We(d)+p:Un}function om(t,n,i,u,d,p,v,w){const A=ct(),k=bn(),W=t+20,re=k.firstCreatePass?function(t,n,i,u,d,p,v,w,A){const k=n.consts,W=Uh(n,t,4,v||null,qr(k,w));Hp(n,i,W,qr(k,A)),zo(n,W);const re=W.tViews=Uf(2,W,u,d,p,n.directiveRegistry,n.pipeRegistry,null,n.schemas,k);return null!==n.queries&&(n.queries.template(n,W),re.queries=n.queries.embeddedTView(W)),W}(W,k,A,n,i,u,d,p,v):k.data[W];bs(re,!1);const ae=A[11].createComment("");Pu(k,A,ae,re),Ti(ae,A),Jc(A,A[W]=qp(ae,A,ae,re)),So(re)&&pc(k,A,re),null!=v&&Up(A,re,w)}function ah(t,n=xt.Default){const i=ct();return null===i?ii(t,n):Je(Nr(),i,pe(t),n)}function vm(t,n,i){const u=ct();return Vo(u,Ro(),n)&&ta(bn(),Ur(),u,t,n,u[11],i,!1),vm}function Em(t,n,i,u,d){const v=d?"class":"style";ed(t,i,n.inputs[v],v,u)}function c(t,n,i,u){const d=ct(),p=bn(),v=20+t,w=d[11],A=d[v]=zt(w,n,Kt.lFrame.currentNamespace),k=p.firstCreatePass?function(t,n,i,u,d,p,v){const w=n.consts,k=Uh(n,t,2,d,qr(w,p));return Hp(n,i,k,qr(w,v)),null!==k.attrs&&Gl(k,k.attrs,!1),null!==k.mergedAttrs&&Gl(k,k.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,k),k}(v,p,d,0,n,i,u):p.data[v];bs(k,!0);const W=k.mergedAttrs;null!==W&&Mo(w,A,W);const re=k.classes;null!==re&&Bl(w,A,re);const ae=k.styles;null!==ae&&Rh(w,A,ae),64!=(64&k.flags)&&Pu(p,d,A,k),0===Kt.lFrame.elementDepthCount&&Ti(A,d),Kt.lFrame.elementDepthCount++,So(k)&&(pc(p,d,k),Gd(p,k,d)),null!==u&&Up(d,k)}function o(){let t=Nr();pi()?Gs():(t=t.parent,bs(t,!1));const n=t;Kt.lFrame.elementDepthCount--;const i=bn();i.firstCreatePass&&(zo(i,t),sr(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Em(i,n,ct(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Em(i,n,ct(),n.stylesWithoutHost,!1)}function l(t,n,i,u){c(t,n,i,u),o()}function D(t,n,i){const u=ct(),d=bn(),p=t+20,v=d.firstCreatePass?function(t,n,i,u,d){const p=n.consts,v=qr(p,u),w=Uh(n,t,8,"ng-container",v);return null!==v&&Gl(w,v,!0),Hp(n,i,w,qr(p,d)),null!==n.queries&&n.queries.elementStart(n,w),w}(p,d,u,n,i):d.data[p];bs(v,!0);const w=u[p]=u[11].createComment("");Pu(d,u,w,v),Ti(w,u),So(v)&&(pc(d,u,v),Gd(d,v,u)),null!=i&&Up(u,v)}function M(){let t=Nr();const n=bn();pi()?Gs():(t=t.parent,bs(t,!1)),n.firstCreatePass&&(zo(n,t),sr(t)&&n.queries.elementEnd(t))}function X(){return ct()}function ue(t){return!!t&&"function"==typeof t.then}function Oe(t){return!!t&&"function"==typeof t.subscribe}const Le=Oe;function rt(t,n,i,u){const d=ct(),p=bn(),v=Nr();return function(t,n,i,u,d,p,v,w){const A=So(u),W=t.firstCreatePass&&Wh(t),re=n[8],ae=Yp(n);let Ee=!0;if(3&u.type||w){const je=O(u,n),Nt=w?w(je):je,ut=ae.length,wn=w?Zn=>w(me(Zn[u.index])):u.index;if(F(i)){let Zn=null;if(!w&&A&&(Zn=function(t,n,i,u){const d=t.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===i&&d[p+1]===u){const w=n[7],A=d[p+2];return w.length>A?w[A]:null}"string"==typeof v&&(p+=2)}return null}(t,n,d,u.index)),null!==Zn)(Zn.__ngLastListenerFn__||Zn).__ngNextListenerFn__=p,Zn.__ngLastListenerFn__=p,Ee=!1;else{p=Ai(u,n,re,p,!1);const kr=i.listen(Nt,d,p);ae.push(p,kr),W&&W.push(d,wn,ut,ut+1)}}else p=Ai(u,n,re,p,!0),Nt.addEventListener(d,p,v),ae.push(p),W&&W.push(d,wn,ut,v)}else p=Ai(u,n,re,p,!1);const Me=u.outputs;let et;if(Ee&&null!==Me&&(et=Me[d])){const je=et.length;if(je)for(let Nt=0;Nt<je;Nt+=2){const Ca=n[et[Nt]][et[Nt+1]].subscribe(p),fd=ae.length;ae.push(p,Ca),W&&W.push(d,u.index,fd,-(fd+1))}}}(p,d,d[11],v,t,n,!!i,u),rt}function Jn(t,n,i,u){try{return!1!==i(u)}catch(d){return Xm(t,d),!1}}function Ai(t,n,i,u,d){return function p(v){if(v===Function)return u;const w=2&t.flags?Et(t.index,n):n;0==(32&n[2])&&Kp(w);let A=Jn(n,0,u,v),k=p.__ngNextListenerFn__;for(;k;)A=Jn(n,0,k,v)&&A,k=k.__ngNextListenerFn__;return d&&!1===A&&(v.preventDefault(),v.returnValue=!1),A}}function js(t=1){return function(t){return(Kt.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Kt.lFrame.contextLView))[8]}(t)}function Qi(t,n){let i=null;const u=function(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(0==(1&i))return n[i+1]}return null}(t);for(let d=0;d<n.length;d++){const p=n[d];if("*"!==p){if(null===u?dc(t,p,!0):jl(u,p))return d}else i=d}return i}function Ns(t){const n=ct()[16][6];if(!n.projection){const u=n.projection=Zu(t?t.length:1,null),d=u.slice();let p=n.child;for(;null!==p;){const v=t?Qi(p,t):0;null!==v&&(d[v]?d[v].projectionNext=p:u[v]=p,d[v]=p),p=p.next}}}function hl(t,n=0,i){const u=ct(),d=bn(),p=Uh(d,20+t,16,null,i||null);null===p.projection&&(p.projection=n),Gs(),64!=(64&p.flags)&&function(t,n,i){kd(n[11],0,n,i,ac(t,i,n),uc(i.parent||n[6],i,n))}(d,u,p)}function _v(t,n,i,u,d){const p=t[i+1],v=null===n;let w=u?Yi(p):ol(p),A=!1;for(;0!==w&&(!1===A||v);){const W=t[w+1];yv(t[w],n)&&(A=!0,t[w+1]=u?Rp(W):Ud(W)),w=u?Yi(W):ol(W)}A&&(t[i+1]=u?Ud(p):Rp(p))}function yv(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&zn(t,n)>=0}function C_(t,n){return function(t,n,i,u){const d=ct(),p=bn(),v=qi(2);p.firstUpdatePass&&function(t,n,i,u){const d=t.data;if(null===d[i+1]){const p=d[bi()],v=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(p,u)&&null===n&&!v&&(n=!1),n=function(t,n,i,u){const d=function(t){const n=Kt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let p=u?n.residualClasses:n.residualStyles;if(null===d)0===(u?n.classBindings:n.styleBindings)&&(i=Cm(i=Cy(null,t,n,i,u),n.attrs,u),p=null);else{const v=n.directiveStylingLast;if(-1===v||t[v]!==d)if(i=Cy(d,t,n,i,u),null===p){let A=function(t,n,i){const u=i?n.classBindings:n.styleBindings;if(0!==ol(u))return t[Yi(u)]}(t,n,u);void 0!==A&&Array.isArray(A)&&(A=Cy(null,t,n,A[1],u),A=Cm(A,n.attrs,u),function(t,n,i,u){t[Yi(i?n.classBindings:n.styleBindings)]=u}(t,n,u,A))}else p=function(t,n,i){let u;const d=n.directiveEnd;for(let p=1+n.directiveStylingLast;p<d;p++)u=Cm(u,t[p].hostAttrs,i);return Cm(u,n.attrs,i)}(t,n,u)}return void 0!==p&&(u?n.residualClasses=p:n.residualStyles=p),i}(d,p,n,u),function(t,n,i,u,d,p){let v=p?n.classBindings:n.styleBindings,w=Yi(v),A=ol(v);t[u]=i;let W,k=!1;if(Array.isArray(i)){const re=i;W=re[1],(null===W||zn(re,W)>0)&&(k=!0)}else W=i;if(d)if(0!==A){const ae=Yi(t[w+1]);t[u+1]=kf(ae,w),0!==ae&&(t[ae+1]=$l(t[ae+1],u)),t[w+1]=function(t,n){return 131071&t|n<<17}(t[w+1],u)}else t[u+1]=kf(w,0),0!==w&&(t[w+1]=$l(t[w+1],u)),w=u;else t[u+1]=kf(A,0),0===w?w=u:t[A+1]=$l(t[A+1],u),A=u;k&&(t[u+1]=Ud(t[u+1])),_v(t,W,u,!0),_v(t,W,u,!1),function(t,n,i,u,d){const p=d?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof n&&zn(p,n)>=0&&(i[u+1]=Rp(i[u+1]))}(n,W,t,u,p),v=kf(w,A),p?n.classBindings=v:n.styleBindings=v}(d,p,n,i,v,u)}}(p,t,v,u),n!==Un&&Vo(d,v,n)&&function(t,n,i,u,d,p,v,w){if(!(3&n.type))return;const A=t.data,k=A[w+1];fg(function(t){return 1==(1&t)}(k)?Sv(A,n,i,d,ol(k),v):void 0)||(fg(p)||function(t){return 2==(2&t)}(k)&&(p=Sv(A,null,i,d,w,v)),function(t,n,i,u,d){const p=F(t);if(n)d?p?t.addClass(i,u):i.classList.add(u):p?t.removeClass(i,u):i.classList.remove(u);else{let v=-1===u.indexOf("-")?void 0:Xs.DashCase;if(null==d)p?t.removeStyle(i,u,v):i.style.removeProperty(u);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=Xs.Important),p?t.setStyle(i,u,d,v):i.style.setProperty(u,d,w?"important":"")}}}(u,v,L(bi(),i),d,p))}(p,p.data[bi()],d,d[11],t,d[v+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=he(Ka(t)))),t}(n,i),u,v)}(t,n,null,!0),C_}function Cy(t,n,i,u,d){let p=null;const v=i.directiveEnd;let w=i.directiveStylingLast;for(-1===w?w=i.directiveStart:w++;w<v&&(p=n[w],u=Cm(u,p.hostAttrs,d),p!==t);)w++;return null!==t&&(i.directiveStylingLast=w),u}function Cm(t,n,i){const u=i?1:2;let d=-1;if(null!==n)for(let p=0;p<n.length;p++){const v=n[p];"number"==typeof v?d=v:d===u&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ss(t,v,!!i||n[++p]))}return void 0===t?null:t}function Sv(t,n,i,u,d,p){const v=null===n;let w;for(;d>0;){const A=t[d],k=Array.isArray(A),W=k?A[1]:A,re=null===W;let ae=i[d+1];ae===Un&&(ae=re?Dn:void 0);let Ee=re?ji(ae,u):W===u?ae:void 0;if(k&&!fg(Ee)&&(Ee=ji(A,u)),fg(Ee)&&(w=Ee,v))return w;const Me=t[d+1];d=v?Yi(Me):ol(Me)}if(null!==n){let A=p?n.residualClasses:n.residualStyles;null!=A&&(w=ji(A,u))}return w}function fg(t){return void 0!==t}function pg(t,n=""){const i=ct(),u=bn(),d=t+20,p=u.firstCreatePass?Uh(u,d,1,n,null):u.data[d],v=i[d]=function(t,n){return F(t)?t.createText(n):t.createTextNode(n)}(i[11],n);Pu(u,i,v,p),bs(p,!1)}function bm(t){return I_("",t,""),bm}function I_(t,n,i){const u=ct(),d=function(t,n,i,u){return Vo(t,Ro(),i)?n+We(i)+u:Un}(u,t,n,i);return d!==Un&&Eo(u,bi(),d),I_}function Iy(t,n,i,u,d){const p=ct(),v=ad(p,t,n,i,u,d);return v!==Un&&Eo(p,bi(),v),Iy}function S_(t,n,i){const u=ct();return Vo(u,Ro(),n)&&ta(bn(),Ur(),u,t,n,u[11],i,!0),S_}const lf=void 0;var Fv=["en",[["a","p"],["AM","PM"],lf],[["AM","PM"],lf,lf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lf,"{1} 'at' {0}",lf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let mp={};function Py(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=Lv(n);if(i)return i;const u=n.split("-")[0];if(i=Lv(u),i)return i;if("en"===u)return Fv;throw new Error(`Missing locale data for the locale "${t}".`)}function Oy(t){return Py(t)[e.PluralCase]}function Lv(t){return t in mp||(mp[t]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[t]),mp[t]}var e=(()=>((e=e||{})[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e))();const _="en-US";let Ie=_;function qe(t){pn(t,"Expected localeId to be defined"),"string"==typeof t&&(Ie=t.toLowerCase().replace(/_/g,"-"))}function PE(t,n,i,u,d){if(t=pe(t),Array.isArray(t))for(let p=0;p<t.length;p++)PE(t[p],n,i,u,d);else{const p=bn(),v=ct();let w=Xd(t)?t:pe(t.provide),A=t_(t);const k=Nr(),W=1048575&k.providerIndexes,re=k.directiveStart,ae=k.providerIndexes>>20;if(Xd(t)||!t.multi){const Ee=new No(A,d,ah),Me=kE(w,n,d?W:W+ae,re);-1===Me?(Bt(ft(k,v),p,w),OE(p,t,n.length),n.push(w),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),i.push(Ee),v.push(Ee)):(i[Me]=Ee,v[Me]=Ee)}else{const Ee=kE(w,n,W+ae,re),Me=kE(w,n,W,W+ae),et=Ee>=0&&i[Ee],je=Me>=0&&i[Me];if(d&&!je||!d&&!et){Bt(ft(k,v),p,w);const Nt=function(t,n,i,u,d){const p=new No(t,i,ah);return p.multi=[],p.index=n,p.componentProviders=0,lw(p,d,u&&!i),p}(d?uI:aI,i.length,d,u,A);!d&&je&&(i[Me].providerFactory=Nt),OE(p,t,n.length,0),n.push(w),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),i.push(Nt),v.push(Nt)}else OE(p,t,Ee>-1?Ee:Me,lw(i[d?Me:Ee],A,!d&&u));!d&&u&&je&&i[Me].componentProviders++}}}function OE(t,n,i,u){const d=Xd(n);if(d||function(t){return!!t.useClass}(n)){const v=(n.useClass||n).prototype.ngOnDestroy;if(v){const w=t.destroyHooks||(t.destroyHooks=[]);if(!d&&n.multi){const A=w.indexOf(i);-1===A?w.push(i,[u,v]):w[A+1].push(u,v)}else w.push(i,v)}}}function lw(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function kE(t,n,i,u){for(let d=i;d<u;d++)if(n[d]===t)return d;return-1}function aI(t,n,i,u){return FE(this.multi,[])}function uI(t,n,i,u){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=I(i,i[1],this.providerFactory.index,u);p=w.slice(0,v),FE(d,p);for(let A=v;A<w.length;A++)p.push(w[A])}else p=[],FE(d,p);return p}function FE(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function cw(t,n=[]){return i=>{i.providersResolver=(u,d)=>function(t,n,i){const u=bn();if(u.firstCreatePass){const d=Hr(t);PE(i,u.data,u.blueprint,d,!0),PE(n,u.data,u.blueprint,d,!1)}}(u,d?d(t):t,n)}}class dw{}const fw="ngComponent";class dI{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${he(t)}. Did you add it to @NgModule.entryComponents?`);return n[fw]=t,n}(n)}}let x_=(()=>{class t{}return t.NULL=new dI,t})();function Bv(...t){}function R_(t,n){return new cf(O(t,n))}const pI=function(){return R_(Nr(),ct())};let cf=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=pI,t})();function pw(t){return t instanceof cf?t.nativeElement:t}class jv{}let gI=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>_I(),t})();const _I=function(){const t=ct(),i=Et(Nr().index,t);return function(t){return t[11]}(Xi(i)?i:t)};let VE=(()=>{class t{}return t.\u0275prov=Qt({token:t,providedIn:"root",factory:()=>null}),t})();class gw{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const UE=new gw("12.2.16");class mw{constructor(){}supports(n){return Qh(n)}create(n){return new wI(n)}}const EI=(t,n)=>n;class wI{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||EI}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,u=this._removalsHead,d=0,p=null;for(;i||u;){const v=!u||i&&i.currentIndex<yw(u,d,p)?i:u,w=yw(v,d,p),A=v.currentIndex;if(v===u)d--,u=u._nextRemoved;else if(i=i._next,null==v.previousIndex)d++;else{p||(p=[]);const k=w-d,W=A-d;if(k!=W){for(let ae=0;ae<k;ae++){const Ee=ae<p.length?p[ae]:p[ae]=0,Me=Ee+ae;W<=Me&&Me<k&&(p[ae]=Ee+1)}p[v.previousIndex]=W-k}}w!==A&&n(v,w,A)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Qh(n))throw new Error(`Error trying to diff '${he(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let d,p,v,i=this._itHead,u=!1;if(Array.isArray(n)){this.length=n.length;for(let w=0;w<this.length;w++)p=n[w],v=this._trackByFn(w,p),null!==i&&Object.is(i.trackById,v)?(u&&(i=this._verifyReinsertion(i,p,v,w)),Object.is(i.item,p)||this._addIdentityChange(i,p)):(i=this._mismatch(i,p,v,w),u=!0),i=i._next}else d=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[sd()]();let u;for(;!(u=i.next()).done;)n(u.value)}}(n,w=>{v=this._trackByFn(d,w),null!==i&&Object.is(i.trackById,v)?(u&&(i=this._verifyReinsertion(i,w,v,d)),Object.is(i.item,w)||this._addIdentityChange(i,w)):(i=this._mismatch(i,w,v,d),u=!0),i=i._next,d++}),this.length=d;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,u,d){let p;return null===n?p=this._itTail:(p=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,p,d)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,p,d)):n=this._addAfter(new CI(i,u),p,d),n}_verifyReinsertion(n,i,u,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?n=this._reinsertAfter(p,n._prev,d):n.currentIndex!=d&&(n.currentIndex=d,this._addToMoves(n,d)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const d=n._prevRemoved,p=n._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(n,i,u),this._addToMoves(n,u),n}_moveAfter(n,i,u){return this._unlink(n),this._insertAfter(n,i,u),this._addToMoves(n,u),n}_addAfter(n,i,u){return this._insertAfter(n,i,u),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,u){const d=null===i?this._itHead:i._next;return n._next=d,n._prev=i,null===d?this._itTail=n:d._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new _w),this._linkedRecords.put(n),n.currentIndex=u,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,u=n._next;return null===i?this._itHead=u:i._next=u,null===u?this._itTail=i:u._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _w),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CI{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bI{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===i||i<=u.currentIndex)&&Object.is(u.trackById,n))return u;return null}remove(n){const i=n._prevDup,u=n._nextDup;return null===i?this._head=u:i._nextDup=u,null===u?this._tail=i:u._prevDup=i,null===this._head}}class _w{constructor(){this.map=new Map}put(n){const i=n.trackById;let u=this.map.get(i);u||(u=new bI,this.map.set(i,u)),u.add(n)}get(n,i){const d=this.map.get(n);return d?d.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yw(t,n,i){const u=t.previousIndex;if(null===u)return u;let d=0;return i&&u<i.length&&(d=i[u]),u+n+d}class vw{constructor(){}supports(n){return n instanceof Map||tm(n)}create(){return new II}}class II{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||tm(n)))throw new Error(`Error trying to diff '${he(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(u,d)=>{if(i&&i.key===d)this._maybeAddToChanges(i,u),this._appendAfter=i,i=i._next;else{const p=this._getOrCreateRecordForKey(d,u);i=this._insertBeforeOrAppend(i,p)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let u=i;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const u=n._prev;return i._next=n,i._prev=u,n._prev=i,u&&(u._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const d=this._records.get(n);this._maybeAddToChanges(d,i);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const u=new DI(n);return this._records.set(n,u),u.currentValue=i,this._addToAdditions(u),u}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(u=>i(n[u],u))}}class DI{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ew(){return new $v([new mw])}let $v=(()=>{class t{constructor(i){this.factories=i}static create(i,u){if(null!=u){const d=u.factories.slice();i=i.concat(d)}return new t(i)}static extend(i){return{provide:t,useFactory:u=>t.create(i,u||Ew()),deps:[[t,new Aa,new qa]]}}find(i){const u=this.factories.find(d=>d.supports(i));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=Qt({token:t,providedIn:"root",factory:Ew}),t})();function ww(){return new Hv([new vw])}let Hv=(()=>{class t{constructor(i){this.factories=i}static create(i,u){if(u){const d=u.factories.slice();i=i.concat(d)}return new t(i)}static extend(i){return{provide:t,useFactory:u=>t.create(i,u||ww()),deps:[[t,new Aa,new qa]]}}find(i){const u=this.factories.find(d=>d.supports(i));if(u)return u;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=Qt({token:t,providedIn:"root",factory:ww}),t})();function Gv(t,n,i,u,d=!1){for(;null!==i;){const p=n[i.index];if(null!==p&&u.push(me(p)),oi(p))for(let w=10;w<p.length;w++){const A=p[w],k=A[1].firstChild;null!==k&&Gv(A[1],A,k,u)}const v=i.type;if(8&v)Gv(t,n,i.child,u);else if(32&v){const w=Ad(i,n);let A;for(;A=w();)u.push(A)}else if(16&v){const w=Ou(n,i);if(Array.isArray(w))u.push(...w);else{const A=Rs(n[16]);Gv(A[1],A,w,u,!0)}}i=d?i.projectionNext:i.next}return u}class Vy{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return Gv(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(oi(n)){const i=n[8],u=i?i.indexOf(this):-1;u>-1&&(oc(n,u),ko(i,u))}this._attachedToViewContainer=!1}Rd(this._lView[1],this._lView)}onDestroy(n){Wd(this._lView[1],this._lView,null,n)}markForCheck(){Kp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Gh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){xo(!0);try{Gh(t,n,i)}finally{xo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,Od(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class SI extends Vy{constructor(n){super(n),this._view=n}detectChanges(){qf(this._view)}checkNoChanges(){!function(t){xo(!0);try{qf(t)}finally{xo(!1)}}(this._view)}get context(){return null}}const xI=function(t){return function(t,n,i){if(oo(t)&&!i){const u=Et(t.index,n);return new Vy(u,u)}return 47&t.type?new Vy(n[16],n):null}(Nr(),ct(),16==(16&t))};let RI=(()=>{class t{}return t.__NG_ELEMENT_ID__=xI,t})();const PI=[new vw],kI=new $v([new mw]),FI=new Hv(PI),VI=function(){return Wv(Nr(),ct())};let Uy=(()=>{class t{}return t.__NG_ELEMENT_ID__=VI,t})();const UI=Uy,BI=class extends UI{constructor(n,i,u){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=u}createEmbeddedView(n){const i=this._declarationTContainer.tViews,u=fc(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(u[19]=p.createEmbeddedView(i)),au(i,u,n),new Vy(u)}};function Wv(t,n){return 4&t.type?new BI(n,t,R_(t,n)):null}class xm{}class Cw{}const HI=function(){return Dw(Nr(),ct())};let zv=(()=>{class t{}return t.__NG_ELEMENT_ID__=HI,t})();const WI=zv,bw=class extends WI{constructor(n,i,u){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=u}get element(){return R_(this._hostTNode,this._hostLView)}get injector(){return new le(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ga(this._hostTNode,this._hostLView);if(Sc(n)){const i=fs(n,this._hostLView),u=qo(n);return new le(i[1].data[u+8],i)}return new le(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Iw(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,u){const d=n.createEmbeddedView(i||{});return this.insert(d,u),d}createComponent(n,i,u,d,p){const v=u||this.parentInjector;if(!p&&null==n.ngModule&&v){const A=v.get(xm,null);A&&(p=A)}const w=n.create(v,d,void 0,p);return this.insert(w.hostView,i),w}insert(n,i){const u=n._lView,d=u[1];if(oi(u[3])){const W=this.indexOf(n);if(-1!==W)this.detach(W);else{const re=u[3],ae=new bw(re,re[6],re[3]);ae.detach(ae.indexOf(n))}}const p=this._adjustIndex(i),v=this._lContainer;!function(t,n,i,u){const d=10+u,p=i.length;u>0&&(i[d-1][4]=n),u<p-10?(n[4]=i[d],Ku(i,10+u,n)):(i.push(n),n[4]=null),n[3]=i;const v=n[17];null!==v&&i!==v&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(v,n);const w=n[19];null!==w&&w.insertView(t),n[2]|=128}(d,u,v,p);const w=iu(p,v),A=u[11],k=Md(A,v[7]);return null!==k&&function(t,n,i,u,d,p){u[0]=d,u[6]=n,Od(t,u,i,1,d,p)}(d,v[6],A,u,k,w),n.attachToViewContainerRef(),Ku(BE(v),p,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Iw(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),u=oc(this._lContainer,i);u&&(ko(BE(this._lContainer),i),Rd(u[1],u))}detach(n){const i=this._adjustIndex(n,-1),u=oc(this._lContainer,i);return u&&null!=ko(BE(this._lContainer),i)?new Vy(u):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function Iw(t){return t[8]}function BE(t){return t[8]||(t[8]=[])}function Dw(t,n){let i;const u=n[t.index];if(oi(u))i=u;else{let d;if(8&t.type)d=me(u);else{const p=n[11];d=p.createComment("");const v=O(t,n);tu(p,Md(p,v),d,function(t,n){return F(t)?t.nextSibling(n):n.nextSibling}(p,v),!1)}n[t.index]=i=qp(u,n,d,t),Jc(n,i)}return new bw(i,t,n)}const O_={};class Ww extends x_{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=rr(n);return new qw(i,this.ngModule)}}function zw(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const jD=new ni("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>nl});class qw extends dw{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(Nh).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return zw(this.componentDef.inputs)}get outputs(){return zw(this.componentDef.outputs)}create(n,i,u,d){const p=(d=d||this.ngModule)?function(t,n){return{get:(i,u,d)=>{const p=t.get(i,O_,d);return p!==O_||u===O_?p:n.get(i,u,d)}}}(n,d.injector):n,v=p.get(jv,B),w=p.get(VE,null),A=v.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",W=u?function(t,n,i){if(F(t))return t.selectRootElement(n,i===Ot.ShadowDom);let u="string"==typeof n?t.querySelector(n):n;return u.textContent="",u}(A,u,this.componentDef.encapsulation):zt(v.createRenderer(null,this.componentDef),k,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(k)),re=this.componentDef.onPush?576:528,ae=function(t,n){return{components:[],scheduler:t||nl,clean:K_,playerHandler:n||null,flags:0}}(),Ee=Uf(0,null,null,1,0,null,null,null,null,null),Me=fc(null,Ee,ae,re,null,null,v,A,w,p);let et,je;ca(Me);try{const Nt=function(t,n,i,u,d,p){const v=i[1];i[20]=t;const A=Uh(v,20,2,"#host",null),k=A.mergedAttrs=n.hostAttrs;null!==k&&(Gl(A,k,!0),null!==t&&(Mo(d,t,k),null!==A.classes&&Bl(d,t,A.classes),null!==A.styles&&Rh(d,t,A.styles)));const W=u.createRenderer(t,n),re=fc(i,Fg(n),null,n.onPush?64:16,i[20],A,u,W,p||null,null);return v.firstCreatePass&&(Bt(ft(A,i),v,n.type),Wp(v,A),Ym(A,i.length,1)),Jc(i,re),i[20]=re}(W,this.componentDef,Me,v,A);if(W)if(u)Mo(A,W,["ng-version",UE.full]);else{const{attrs:ut,classes:wn}=function(t){const n=[],i=[];let u=1,d=2;for(;u<t.length;){let p=t[u];if("string"==typeof p)2===d?""!==p&&n.push(p,t[++u]):8===d&&i.push(p);else{if(!to(d))break;d=p}u++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);ut&&Mo(A,W,ut),wn&&wn.length>0&&Bl(A,W,wn.join(" "))}if(je=Y(Ee,20),void 0!==i){const ut=je.projection=[];for(let wn=0;wn<this.ngContentSelectors.length;wn++){const Zn=i[wn];ut.push(null!=Zn?Array.from(Zn):null)}}et=function(t,n,i,u,d){const p=i[1],v=function(t,n,i){const u=Nr();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Qm(t,u,n,jd(t,n,1,null),i));const d=I(n,t,u.directiveStart,u);Ti(d,n);const p=O(u,n);return p&&Ti(p,n),d}(p,i,n);if(u.components.push(v),t[8]=v,d&&d.forEach(A=>A(v,n)),n.contentQueries){const A=Nr();n.contentQueries(1,v,A.directiveStart)}const w=Nr();return!p.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(fo(w.index),Ug(i[1],w,0,w.directiveStart,w.directiveEnd,n),$h(n,v)),v}(Nt,this.componentDef,Me,ae,[em]),au(Ee,Me,null)}finally{Ia()}return new GD(this.componentType,et,R_(je,Me),Me,je)}}class GD extends class{}{constructor(n,i,u,d,p){super(),this.location=u,this._rootLView=d,this._tNode=p,this.instance=i,this.hostView=this.changeDetectorRef=new SI(d),this.componentType=n}get injector(){return new le(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const k_=new Map;class qD extends xm{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ww(this);const u=nn(n),d=n[Te]||null;d&&qe(d),this._bootstrapComponents=ea(u.bootstrap),this._r3Injector=Co(n,i,[{provide:xm,useValue:this},{provide:x_,useValue:this.componentFactoryResolver}],he(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=Hi.THROW_IF_NOT_FOUND,u=xt.Default){return n===Hi||n===xm||n===Lu?this:this._r3Injector.get(n,i,u)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class XE extends Cw{constructor(n){super(),this.moduleType=n,null!==nn(n)&&function(t){const n=new Set;!function i(u){const d=nn(u,!0),p=d.id;null!==p&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${he(n)} vs ${he(n.name)}`)}(p,k_.get(p),u),k_.set(p,u));const v=ea(d.imports);for(const w of v)n.has(w)||(n.add(w),i(w))}(t)}(n)}create(n){return new qD(this.moduleType,n)}}function Yw(t,n,i,u){return function(t,n,i,u,d,p){const v=n+i;return Vo(t,v,d)?function(t,n,i){return t[n]=i}(t,v+1,p?u.call(p,d):u(d)):function(t,n){const i=t[n];return i===Un?void 0:i}(t,v+1)}(ct(),function(){const t=Kt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}(),t,n,i,u)}function e0(t){return n=>{setTimeout(t,void 0,n)}}const df=class extends T.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,u){var d,p,v;let w=n,A=i||(()=>null),k=u;if(n&&"object"==typeof n){const re=n;w=null===(d=re.next)||void 0===d?void 0:d.bind(re),A=null===(p=re.error)||void 0===p?void 0:p.bind(re),k=null===(v=re.complete)||void 0===v?void 0:v.bind(re)}this.__isAsync&&(A=e0(A),w&&(w=e0(w)),k&&(k=e0(k)));const W=super.subscribe({next:w,error:A,complete:k});return n instanceof U.w&&n.add(W),W}};function dT(){return this._results[sd()]()}class Qv{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=sd(),u=Qv.prototype;u[i]||(u[i]=dT)}get changes(){return this._changes||(this._changes=new df)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const u=this;u.dirty=!1;const d=mo(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let u=0;u<t.length;u++){let d=t[u],p=n[u];if(i&&(d=i(d),p=i(p)),p!==d)return!1}return!0}(u._results,d,i))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class t0{constructor(n){this.queryList=n,this.matches=null}clone(){return new t0(this.queryList)}setDirty(){this.queryList.setDirty()}}class n0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const u=null!==n.contentQueries?n.contentQueries[0]:i.length,d=[];for(let p=0;p<u;p++){const v=i.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new n0(d)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==cC(n,i).matches&&this.queries[i].setDirty()}}class nC{constructor(n,i,u=null){this.predicate=n,this.flags=i,this.read=u}}class r0{constructor(n=[]){this.queries=n}elementStart(n,i){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let u=0;u<this.length;u++){const d=null!==i?i.length:0,p=this.getByIndex(u).embeddedTView(n,d);p&&(p.indexInDeclarationView=u,null!==i?i.push(p):i=[p])}return null!==i?new r0(i):null}template(n,i){for(let u=0;u<this.queries.length;u++)this.queries[u].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class s0{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new s0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let u=n.parent;for(;null!==u&&8&u.type&&u.index!==i;)u=u.parent;return i===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const p=u[d];this.matchTNodeWithReadOption(n,i,pT(i,p)),this.matchTNodeWithReadOption(n,i,S(i,n,p,!1,!1))}else u===Uy?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,S(i,n,u,!1,!1))}matchTNodeWithReadOption(n,i,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===cf||d===zv||d===Uy&&4&i.type)this.addMatch(i.index,-2);else{const p=S(i,n,d,!1,!1);null!==p&&this.addMatch(i.index,p)}else this.addMatch(i.index,u)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function pT(t,n){const i=t.localNames;if(null!==i)for(let u=0;u<i.length;u+=2)if(i[u]===n)return i[u+1];return null}function mT(t,n,i,u){return-1===i?function(t,n){return 11&t.type?R_(t,n):4&t.type?Wv(t,n):null}(n,t):-2===i?function(t,n,i){return i===cf?R_(n,t):i===Uy?Wv(n,t):i===zv?Dw(n,t):void 0}(t,n,u):I(t,t[1],i,n)}function rC(t,n,i,u){const d=n[19].queries[u];if(null===d.matches){const p=t.data,v=i.matches,w=[];for(let A=0;A<v.length;A+=2){const k=v[A];w.push(k<0?null:mT(n,p[k],v[A+1],i.metadata.read))}d.matches=w}return d.matches}function o0(t,n,i,u){const d=t.queries.getByIndex(i),p=d.matches;if(null!==p){const v=rC(t,n,d,i);for(let w=0;w<p.length;w+=2){const A=p[w];if(A>0)u.push(v[w/2]);else{const k=p[w+1],W=n[-A];for(let re=10;re<W.length;re++){const ae=W[re];ae[17]===ae[3]&&o0(ae[1],ae,k,u)}if(null!==W[9]){const re=W[9];for(let ae=0;ae<re.length;ae++){const Ee=re[ae];o0(Ee[1],Ee,k,u)}}}}}return u}function iC(t){const n=ct(),i=bn(),u=vl();la(u+1);const d=cC(i,u);if(t.dirty&&un(n)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const p=d.crossesNgTemplate?o0(i,n,u,[]):rC(i,n,d,u);t.reset(p,pw),t.notifyOnChanges()}return!0}return!1}function sC(t,n,i){const u=bn();u.firstCreatePass&&(lC(u,new nC(t,n,i),-1),2==(2&n)&&(u.staticViewQueries=!0)),uC(u,ct(),n)}function oC(t,n,i,u){const d=bn();if(d.firstCreatePass){const p=Nr();lC(d,new nC(n,i,u),p.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(d,t),2==(2&i)&&(d.staticContentQueries=!0)}uC(d,ct(),i)}function aC(){return t=ct(),n=vl(),t[19].queries[n].queryList;var t,n}function uC(t,n,i){const u=new Qv(4==(4&i));Wd(t,n,u,u.destroy),null===n[19]&&(n[19]=new n0),n[19].queries.push(new t0(u))}function lC(t,n,i){null===t.queries&&(t.queries=new r0),t.queries.track(new s0(n,i))}function cC(t,n){return t.queries.getByIndex(n)}const h0=new ni("Application Initializer");let L_=(()=>{class t{constructor(i){this.appInits=i,this.resolve=Bv,this.reject=Bv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const i=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(ue(p))i.push(p);else if(Le(p)){const v=new Promise((w,A)=>{p.subscribe({complete:w,error:A})});i.push(v)}}Promise.all(i).then(()=>{u()}).catch(d=>{this.reject(d)}),0===i.length&&u(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(ii(h0,8))},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})();const AC=new ni("AppId"),qT={provide:AC,useFactory:function(){return`${f0()}${f0()}${f0()}`},deps:[]};function f0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xC=new ni("Platform Initializer"),RC=new ni("Platform ID"),NC=new ni("appBootstrapListener");let MC=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})();const eE=new ni("LocaleId"),PC=new ni("DefaultCurrencyCode");class ZT{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const p0=function(t){return new XE(t)},YT=p0,QT=function(t){return Promise.resolve(p0(t))},OC=function(t){const n=p0(t),u=ea(nn(t).declarations).reduce((d,p)=>{const v=rr(p);return v&&d.push(new qw(v)),d},[]);return new ZT(n,u)},JT=OC,XT=function(t){return Promise.resolve(OC(t))};let Qy=(()=>{class t{constructor(){this.compileModuleSync=YT,this.compileModuleAsync=QT,this.compileModuleAndAllComponentsSync=JT,this.compileModuleAndAllComponentsAsync=XT}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})();const nS=(()=>Promise.resolve(0))();function g0(t){"undefined"==typeof Zone?nS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class bc{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new df(!1),this.onMicrotaskEmpty=new df(!1),this.onStable=new df(!1),this.onError=new df(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&i,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let t=Dt.requestAnimationFrame,n=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const u=n[Zone.__symbol__("OriginalDelegate")];u&&(n=u)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_0(t),t.isCheckStableRunning=!0,m0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,u,d,p,v,w)=>{try{return kC(t),i.invokeTask(d,p,v,w)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&n(),FC(t)}},onInvoke:(i,u,d,p,v,w,A)=>{try{return kC(t),i.invoke(d,p,v,w,A)}finally{t.shouldCoalesceRunChangeDetection&&n(),FC(t)}},onHasTask:(i,u,d,p)=>{i.hasTask(d,p),u===d&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,_0(t),m0(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(i,u,d,p)=>(i.handleError(d,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,u){return this._inner.run(n,i,u)}runTask(n,i,u,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,n,iS,Bv,Bv);try{return p.runTask(v,i,u)}finally{p.cancelTask(v)}}runGuarded(n,i,u){return this._inner.runGuarded(n,i,u)}runOutsideAngular(n){return this._outer.run(n)}}const iS={};function m0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function kC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function FC(t){t._nesting--,m0(t)}class aS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new df,this.onMicrotaskEmpty=new df,this.onStable=new df,this.onError=new df}run(n,i,u){return n.apply(i,u)}runGuarded(n,i,u){return n.apply(i,u)}runOutsideAngular(n){return n()}runTask(n,i,u,d){return n.apply(i,u)}}let LC=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bc.assertNotInAngularZone(),g0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())g0(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(i)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,u,d){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),i(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:i,timeoutId:p,updateCb:d})}whenStable(i,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,u,d){return[]}}return t.\u0275fac=function(i){return new(i||t)(ii(bc))},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})(),VC=(()=>{class t{constructor(){this._applications=new Map,y0.addToWindow(this)}registerApplication(i,u){this._applications.set(i,u)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,u=!0){return y0.findTestabilityInTree(this,i,u)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})();class uS{addToWindow(n){}findTestabilityInTree(n,i,u){return null}}function lS(t){y0=t}let y0=new uS,UC=!0,BC=!1;function v0(){return BC=!0,UC}function cS(){if(BC)throw new Error("Cannot enable prod mode after platform setup.");UC=!1}let ch;const jC=new ni("AllowMultipleToken");class _S{constructor(n,i){this.name=n,this.token=i}}function $C(t,n,i=[]){const u=`Platform: ${n}`,d=new ni(u);return(p=[])=>{let v=HC();if(!v||v.injector.get(jC,!1))if(t)t(i.concat(p).concat({provide:d,useValue:!0}));else{const w=i.concat(p).concat({provide:d,useValue:!0},{provide:Zd,useValue:"platform"});!function(t){if(ch&&!ch.destroyed&&!ch.injector.get(jC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ch=t.get(GC);const n=t.get(xC,null);n&&n.forEach(i=>i())}(Hi.create({providers:w,name:u}))}return function(t){const n=HC();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(d)}}function HC(){return ch&&!ch.destroyed?ch:null}let GC=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,u){const w=function(t,n){let i;return i="noop"===t?new aS:("zone.js"===t?void 0:t)||new bc({enableLongStackTrace:v0(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),A=[{provide:bc,useValue:w}];return w.run(()=>{const k=Hi.create({providers:A,parent:this.injector,name:i.moduleType.name}),W=i.create(k),re=W.injector.get(os,null);if(!re)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return w.runOutsideAngular(()=>{const ae=w.onError.subscribe({next:Ee=>{re.handleError(Ee)}});W.onDestroy(()=>{E0(this._modules,W),ae.unsubscribe()})}),function(t,n,i){try{const u=i();return ue(u)?u.catch(d=>{throw n.runOutsideAngular(()=>t.handleError(d)),d}):u}catch(u){throw n.runOutsideAngular(()=>t.handleError(u)),u}}(re,w,()=>{const ae=W.injector.get(L_);return ae.runInitializers(),ae.donePromise.then(()=>(qe(W.injector.get(eE,_)||_),this._moduleDoBootstrap(W),W))})})}bootstrapModule(i,u=[]){const d=WC({},u);return function(t,n,i){const u=new XE(i);return Promise.resolve(u)}(0,0,i).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(i){const u=i.injector.get(Jy);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${he(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(u)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(ii(Hi))},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})();function WC(t,n){return Array.isArray(n)?n.reduce(WC,t):Object.assign(Object.assign({},t),n)}let Jy=(()=>{class t{constructor(i,u,d,p,v){this._zone=i,this._injector=u,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new ie.y(k=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{k.next(this._stable),k.complete()})}),A=new ie.y(k=>{let W;this._zone.runOutsideAngular(()=>{W=this._zone.onStable.subscribe(()=>{bc.assertNotInAngularZone(),g0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,k.next(!0))})})});const re=this._zone.onUnstable.subscribe(()=>{bc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{k.next(!1)}))});return()=>{W.unsubscribe(),re.unsubscribe()}});this.isStable=(0,Ne.T)(w,A.pipe((0,Se.B)()))}bootstrap(i,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=i instanceof dw?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(d.componentType);const p=function(t){return t.isBoundToModule}(d)?void 0:this._injector.get(xm),w=d.create(Hi.NULL,[],u||d.selector,p),A=w.location.nativeElement,k=w.injector.get(LC,null),W=k&&w.injector.get(VC);return k&&W&&W.registerApplication(A,k),w.onDestroy(()=>{this.detachView(w.hostView),E0(this.components,w),W&&W.unregisterApplication(A)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const u=i;this._views.push(u),u.attachToAppRef(this)}detachView(i){const u=i;E0(this._views,u),u.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(NC,[]).concat(this._bootstrapListeners).forEach(d=>d(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(ii(bc),ii(Hi),ii(os),ii(x_),ii(L_))},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})();function E0(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class bS{}class DS{}const TS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let SS=(()=>{class t{constructor(i,u){this._compiler=i,this._config=u||TS}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[u,d]=i.split("#");return void 0===d&&(d="default"),z(8255)(u).then(p=>p[d]).then(p=>ZC(p,u,d)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(i){let[u,d]=i.split("#"),p="NgFactory";return void 0===d&&(d="default",p=""),z(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(v=>v[d+p]).then(v=>ZC(v,u,d))}}return t.\u0275fac=function(i){return new(i||t)(ii(Qy),ii(DS,8))},t.\u0275prov=Qt({token:t,factory:t.\u0275fac}),t})();function ZC(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const kS=function(t){return null},LS=$C(null,"core",[{provide:RC,useValue:"unknown"},{provide:GC,deps:[Hi]},{provide:VC,deps:[]},{provide:MC,deps:[]}]),$S=[{provide:Jy,useClass:Jy,deps:[bc,Hi,os,x_,L_]},{provide:jD,deps:[bc],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:L_,useClass:L_,deps:[[new qa,h0]]},{provide:Qy,useClass:Qy,deps:[]},qT,{provide:$v,useFactory:function(){return kI},deps:[]},{provide:Hv,useFactory:function(){return FI},deps:[]},{provide:eE,useFactory:function(t){return qe(t=t||"undefined"!=typeof $localize&&$localize.locale||_),t},deps:[[new Sa(eE),new qa,new Aa]]},{provide:PC,useValue:"USD"}];let GS=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(ii(Jy))},t.\u0275mod=Pi({type:t}),t.\u0275inj=on({providers:$S}),t})()},905:(kt,$e,z)=>{"use strict";z.d($e,{nm:()=>io});var T=z(6913);z(7716),z(2329);var vt=z(8239),Wt=z(8026),en=z(3910),St=z(3854),hn=z(5422);const lt=new Map,Fe={activated:!1,tokenObservers:[]},bt={initialized:!1,enabled:!1};function ot(Re){return lt.get(Re)||Fe}function Pt(Re,be){lt.set(Re,be)}function Yt(){return bt}class pt{constructor(be,Ge,Xe,yt,te){if(this.operation=be,this.retryPolicy=Ge,this.getWaitDuration=Xe,this.lowerBound=yt,this.upperBound=te,this.pending=null,this.nextErrorWaitInterval=yt,yt>te)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(be){var Ge=this;return(0,vt.Z)(function*(){Ge.stop();try{Ge.pending=new St.BH,yield(Re=Ge.getNextRun(be),new Promise(be=>{setTimeout(be,Re)})),Ge.pending.resolve(),yield Ge.pending.promise,Ge.pending=new St.BH,yield Ge.operation(),Ge.pending.resolve(),yield Ge.pending.promise,Ge.process(!0).catch(()=>{})}catch(Xe){Ge.retryPolicy(Xe)?Ge.process(!1).catch(()=>{}):Ge.stop()}var Re})()}getNextRun(be){if(be)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ge=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ge}}}const Zt=new St.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vt(Re){if(!ot(Re).activated)throw Zt.create("use-before-activation",{appName:Re.name})}function yr(Re,be){return mn.apply(this,arguments)}function mn(){return(mn=(0,vt.Z)(function*({url:Re,body:be},Ge){var Xe,yt;const te={"Content-Type":"application/json"},dn=Ge.getImmediate({optional:!0});if(dn){const ns=yield dn.getHeartbeatsHeader();ns&&(te["X-Firebase-Client"]=ns)}const Gr={method:"POST",body:JSON.stringify(be),headers:te};let Xn,ai;try{Xn=yield fetch(Re,Gr)}catch(ns){throw Zt.create("fetch-network-error",{originalErrorMessage:null===(Xe=ns)||void 0===Xe?void 0:Xe.message})}if(200!==Xn.status)throw Zt.create("fetch-status-error",{httpStatus:Xn.status});try{ai=yield Xn.json()}catch(ns){throw Zt.create("fetch-parse-error",{originalErrorMessage:null===(yt=ns)||void 0===yt?void 0:yt.message})}const ts=ai.ttl.match(/^([\d.]+)(s)$/);if(!ts||!ts[2]||isNaN(Number(ts[1])))throw Zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ai.ttl}`});const er=1e3*Number(ts[1]),ao=Date.now();return{token:ai.token,expireTimeMillis:ao+er,issuedAtTimeMillis:ao}})).apply(this,arguments)}function Qr(Re,be){const{projectId:Ge,appId:Xe,apiKey:yt}=Re.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ge}/apps/${Xe}:exchangeDebugToken?key=${yt}`,body:{debug_token:be}}}const an="firebase-app-check-store";let qn=null;function cr(){return qn||(qn=new Promise((Re,be)=>{var Ge;try{const Xe=indexedDB.open("firebase-app-check-database",1);Xe.onsuccess=yt=>{Re(yt.target.result)},Xe.onerror=yt=>{var te;be(Zt.create("storage-open",{originalErrorMessage:null===(te=yt.target.error)||void 0===te?void 0:te.message}))},Xe.onupgradeneeded=yt=>{0===yt.oldVersion&&yt.target.result.createObjectStore(an,{keyPath:"compositeKey"})}}catch(Xe){be(Zt.create("storage-open",{originalErrorMessage:null===(Ge=Xe)||void 0===Ge?void 0:Ge.message}))}}),qn)}function _s(){return(_s=(0,vt.Z)(function*(Re,be){const Xe=(yield cr()).transaction(an,"readwrite"),te=Xe.objectStore(an).put({compositeKey:Re,value:be});return new Promise((dn,Gr)=>{te.onsuccess=Xn=>{dn()},Xe.onerror=Xn=>{var ai;Gr(Zt.create("storage-set",{originalErrorMessage:null===(ai=Xn.target.error)||void 0===ai?void 0:ai.message}))}})})).apply(this,arguments)}const Ni=new hn.Yd("@firebase/app-check");function Dt(Re,be){return(0,St.hl)()?function(Re,be){return function(Re,be){return _s.apply(this,arguments)}(function(Re){return`${Re.options.appId}-${Re.name}`}(Re),be)}(Re,be).catch(Ge=>{Ni.warn(`Failed to write token to IndexedDB. Error: ${Ge}`)}):Promise.resolve()}function In(){return Yt().enabled}function Dn(){return _e.apply(this,arguments)}function _e(){return(_e=(0,vt.Z)(function*(){const Re=Yt();if(Re.enabled&&Re.token)return Re.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ge={error:"UNKNOWN_ERROR"};function ve(Re){return St.US.encodeString(JSON.stringify(Re),!1)}function Te(Re){return nt.apply(this,arguments)}function nt(){return(nt=(0,vt.Z)(function*(Re,be=!1){const Ge=Re.app;Vt(Ge);const Xe=ot(Ge);let te,yt=Xe.token;if(!yt){const Xn=yield Xe.cachedTokenPromise;Xn&&Cn(Xn)&&(yt=Xn)}if(!be&&yt&&Cn(yt))return{token:yt.token};let Gr,dn=!1;if(In()){Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=yr(Qr(Ge,yield Dn()),Re.heartbeatServiceProvider).then(ai=>(Xe.exchangeTokenPromise=void 0,ai)),dn=!0);const Xn=yield Xe.exchangeTokenPromise;return yield Dt(Ge,Xn),Pt(Ge,Object.assign(Object.assign({},Xe),{token:Xn})),{token:Xn.token}}try{Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=Xe.provider.getToken().then(Xn=>(Xe.exchangeTokenPromise=void 0,Xn)),dn=!0),yt=yield Xe.exchangeTokenPromise}catch(Xn){"appCheck/throttled"===Xn.code?Ni.warn(Xn.message):Ni.error(Xn),te=Xn}return yt?(Gr={token:yt.token},Pt(Ge,Object.assign(Object.assign({},Xe),{token:yt})),yield Dt(Ge,yt)):Gr=Jr(te),dn&&Mi(Ge,Gr),Gr})).apply(this,arguments)}function sn(Re,be){const Ge=ot(Re),Xe=Ge.tokenObservers.filter(yt=>yt.next!==be);0===Xe.length&&Ge.tokenRefresher&&Ge.tokenRefresher.isRunning()&&Ge.tokenRefresher.stop(),Pt(Re,Object.assign(Object.assign({},Ge),{tokenObservers:Xe}))}function Jt(Re){const{app:be}=Re,Ge=ot(be);let Xe=Ge.tokenRefresher;Xe||(Xe=function(Re){const{app:be}=Re;return new pt((0,vt.Z)(function*(){let Xe;if(Xe=ot(be).token?yield Te(Re,!0):yield Te(Re),Xe.error)throw Xe.error}),()=>!0,()=>{const Ge=ot(be);if(Ge.token){let Xe=Ge.token.issuedAtTimeMillis+.5*(Ge.token.expireTimeMillis-Ge.token.issuedAtTimeMillis)+3e5;return Xe=Math.min(Xe,Ge.token.expireTimeMillis-3e5),Math.max(0,Xe-Date.now())}return 0},3e4,96e4)}(Re),Pt(be,Object.assign(Object.assign({},Ge),{tokenRefresher:Xe}))),!Xe.isRunning()&&Ge.isTokenAutoRefreshEnabled&&Xe.start()}function Mi(Re,be){const Ge=ot(Re).tokenObservers;for(const Xe of Ge)try{"EXTERNAL"===Xe.type&&null!=be.error?Xe.error(be.error):Xe.next(be)}catch(yt){}}function Cn(Re){return Re.expireTimeMillis-Date.now()>0}function Jr(Re){return{token:ve(ge),error:Re}}class Pi{constructor(be,Ge){this.app=be,this.heartbeatServiceProvider=Ge}_delete(){const{tokenObservers:be}=ot(this.app);for(const Ge of be)sn(this.app,Ge.next);return Promise.resolve()}}const Fi="app-check-internal";(0,Wt._registerComponent)(new en.wA("app-check",Re=>function(Re,be){return new Pi(Re,be)}(Re.getProvider("app").getImmediate(),Re.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Re,be,Ge)=>{Re.getProvider(Fi).initialize()})),(0,Wt._registerComponent)(new en.wA(Fi,Re=>function(Re){return{getToken:be=>Te(Re,be),addTokenListener:be=>function(Re,be,Ge,Xe){const{app:yt}=Re,te=ot(yt),dn={next:Ge,error:Xe,type:be};if(Pt(yt,Object.assign(Object.assign({},te),{tokenObservers:[...te.tokenObservers,dn]})),te.token&&Cn(te.token)){const Gr=te.token;Promise.resolve().then(()=>{Ge({token:Gr.token}),Jt(Re)}).catch(()=>{})}te.cachedTokenPromise.then(()=>Jt(Re))}(Re,"INTERNAL",be),removeTokenListener:be=>sn(Re.app,be)}}(Re.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wt.registerVersion)("@firebase/app-check","0.5.12");class io{constructor(){return(0,T.vb)("app-check")}}"undefined"!=typeof window&&window},8006:(kt,$e,z)=>{"use strict";z.d($e,{zQ:()=>Lr,rT:()=>Yt,f7:()=>fr,L6:()=>ot,_Q:()=>Pt,lh:()=>It,Qv:()=>bt,nw:()=>Fr});var T=z(7716),U=z(9765),ie=z(5917),Ne=z(7574),Se=z(4402),de=z(6682),Pe=z(7771),he=z(5319),we=z(309),se=z(7971),ce=z(8858);class pe extends U.xQ{constructor(pt=Number.POSITIVE_INFINITY,gn=Number.POSITIVE_INFINITY,ln){super(),this.scheduler=ln,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=pt<1?1:pt,this._windowTime=gn<1?1:gn,gn===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(pt){if(!this.isStopped){const gn=this._events;gn.push(pt),gn.length>this._bufferSize&&gn.shift()}super.next(pt)}nextTimeWindow(pt){this.isStopped||(this._events.push(new Be(this._getNow(),pt)),this._trimBufferThenGetEvents()),super.next(pt)}_subscribe(pt){const gn=this._infiniteTimeWindow,ln=gn?this._events:this._trimBufferThenGetEvents(),Zt=this.scheduler,Qt=ln.length;let Vt;if(this.closed)throw new se.N;if(this.isStopped||this.hasError?Vt=he.w.EMPTY:(this.observers.push(pt),Vt=new ce.W(this,pt)),Zt&&pt.add(pt=new we.ht(pt,Zt)),gn)for(let on=0;on<Qt&&!pt.closed;on++)pt.next(ln[on]);else for(let on=0;on<Qt&&!pt.closed;on++)pt.next(ln[on].value);return this.hasError?pt.error(this.thrownError):this.isStopped&&pt.complete(),Vt}_getNow(){return(this.scheduler||Pe.c).now()}_trimBufferThenGetEvents(){const pt=this._getNow(),gn=this._bufferSize,ln=this._windowTime,Zt=this._events,Qt=Zt.length;let Vt=0;for(;Vt<Qt&&!(pt-Zt[Vt].time<ln);)Vt++;return Qt>gn&&(Vt=Math.max(Vt,Qt-gn)),Vt>0&&Zt.splice(0,Vt),Zt}}class Be{constructor(pt,gn){this.time=pt,this.value=gn}}function Ye(pn,pt,gn){let ln;return ln=pn&&"object"==typeof pn?pn:{bufferSize:pn,windowTime:pt,refCount:!1,scheduler:gn},Zt=>Zt.lift(function({bufferSize:pn=Number.POSITIVE_INFINITY,windowTime:pt=Number.POSITIVE_INFINITY,refCount:gn,scheduler:ln}){let Zt,Vt,Qt=0,on=!1,Bn=!1;return function(mn){let On;Qt++,!Zt||on?(on=!1,Zt=new pe(pn,pt,ln),On=Zt.subscribe(this),Vt=mn.subscribe({next(ur){Zt.next(ur)},error(ur){on=!0,Zt.error(ur)},complete(){Bn=!0,Vt=void 0,Zt.complete()}}),Bn&&(Vt=void 0)):On=Zt.subscribe(this),this.add(()=>{Qt--,On.unsubscribe(),On=void 0,Vt&&!Bn&&gn&&0===Qt&&(Vt.unsubscribe(),Vt=void 0,Zt=void 0)})}}(ln))}var ze=z(3190);function Ct(pn,pt){return pt?(0,ze.w)(()=>pn,pt):(0,ze.w)(()=>pn)}var We=z(8002),Ve=z(8049),Ce=z(3101),vt=z(5435),Wt=z(6913),en=z(8939),St=z(8583),hn=z(905);z(7841);const bt=new T.OlP("angularfire2.auth.use-emulator"),ot=new T.OlP("angularfire2.auth.settings"),Pt=new T.OlP("angularfire2.auth.tenant-id"),Yt=new T.OlP("angularfire2.auth.langugage-code"),It=new T.OlP("angularfire2.auth.use-device-language"),fr=new T.OlP("angularfire.auth.persistence"),Fr=(pn,pt,gn,ln,Zt,Qt,Vt,on)=>(0,en.cc)(`${pn.name}.auth`,"AngularFireAuth",pn.name,()=>{const Bn=pt.runOutsideAngular(()=>pn.auth());if(gn&&Bn.useEmulator(...gn),ln&&(Bn.tenantId=ln),Bn.languageCode=Zt,Qt&&Bn.useDeviceLanguage(),Vt)for(const[yr,mn]of Object.entries(Vt))Bn.settings[yr]=mn;return on&&Bn.setPersistence(on),Bn},[gn,ln,Zt,Qt,Vt,on]);let Lr=(()=>{class pn{constructor(gn,ln,Zt,Qt,Vt,on,Bn,yr,mn,On,ur,Qr){const kn=new U.xQ,tt=(0,ie.of)(void 0).pipe((0,we.QV)(Vt.outsideAngular),(0,ze.w)(()=>Qt.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,1530)))),(0,We.U)(()=>(0,en.on)(gn,Qt,ln)),(0,We.U)(an=>Fr(an,Qt,on,yr,mn,On,Bn,ur)),Ye({bufferSize:1,refCount:!1}));if((0,St.PM)(Zt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ie.of)(null);else{tt.pipe((0,Ve.P)()).subscribe();const xt=tt.pipe((0,ze.w)(Nn=>Nn.getRedirectResult().then(Sr=>Sr,()=>null)),Wt.iC,Ye({bufferSize:1,refCount:!1})),qn=tt.pipe((0,ze.w)(Nn=>new Ne.y(Sr=>({unsubscribe:Qt.runOutsideAngular(()=>Nn.onAuthStateChanged(wr=>Sr.next(wr),wr=>Sr.error(wr),()=>Sr.complete()))})))),cr=tt.pipe((0,ze.w)(Nn=>new Ne.y(Sr=>({unsubscribe:Qt.runOutsideAngular(()=>Nn.onIdTokenChanged(wr=>Sr.next(wr),wr=>Sr.error(wr),()=>Sr.complete()))}))));this.authState=xt.pipe(Ct(qn),(0,Ce.R)(Vt.outsideAngular),(0,we.QV)(Vt.insideAngular)),this.user=xt.pipe(Ct(cr),(0,Ce.R)(Vt.outsideAngular),(0,we.QV)(Vt.insideAngular)),this.idToken=this.user.pipe((0,ze.w)(Nn=>Nn?(0,Se.D)(Nn.getIdToken()):(0,ie.of)(null))),this.idTokenResult=this.user.pipe((0,ze.w)(Nn=>Nn?(0,Se.D)(Nn.getIdTokenResult()):(0,ie.of)(null))),this.credential=(0,de.T)(xt,kn,this.authState.pipe((0,vt.h)(Nn=>!Nn))).pipe((0,We.U)(Nn=>(null==Nn?void 0:Nn.user)?Nn:null),(0,Ce.R)(Vt.outsideAngular),(0,we.QV)(Vt.insideAngular))}return(0,en.pX)(this,tt,Qt,{spy:{apply:(an,xt,qn)=>{(an.startsWith("signIn")||an.startsWith("createUser"))&&qn.then(cr=>kn.next(cr))}}})}}return pn.\u0275fac=function(gn){return new(gn||pn)(T.LFG(en.Dh),T.LFG(en.xv,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Wt.HU),T.LFG(bt,8),T.LFG(ot,8),T.LFG(Pt,8),T.LFG(Yt,8),T.LFG(It,8),T.LFG(fr,8),T.LFG(hn.nm,8))},pn.\u0275prov=T.Yz7({token:pn,factory:pn.\u0275fac,providedIn:"any"}),pn})()},2278:(kt,$e,z)=>{"use strict";z.d($e,{ST:()=>Oy,yb:()=>Lv});var T=z(7716),U=z(3637),ie=z(7574),Ne=z(4402),Se=z(5917),de=z(6913),Pe=z(7393);function he(){return s=>s.lift(new we)}class we{call(e,r){return r.subscribe(new se(e))}}class se extends Pe.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let r;this.hasPrev?r=[this.prev,e]:this.hasPrev=!0,this.prev=e,r&&this.destination.next(r)}}var Fe,ce=z(9761),pe=z(8002),Be=z(2145),Ye=z(7519),it=z(5435),ze=z(8939),Ct=z(8583),Ve=(z(1530),z(3394)),Ce=z(8239),vt=z(8026),Wt=z(3910),en=z(5422),St=z(3854),hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lt={},bt=bt||{},ot=hn||self;function Pt(){}function Yt(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function It(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var Fr="closure_uid_"+(1e9*Math.random()>>>0),Lr=0;function Yr(s,e,r){return s.call.apply(s.bind,arguments)}function pn(s,e,r){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function pt(s,e,r){return(pt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yr:pn).apply(null,arguments)}function gn(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function ln(s,e){function r(){}r.prototype=e.prototype,s.Z=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Vb=function(a,h,_){for(var C=Array(arguments.length-2),x=2;x<arguments.length;x++)C[x-2]=arguments[x];return e.prototype[h].apply(a,C)}}function Zt(){this.s=this.s,this.o=this.o}var Vt={};Zt.prototype.s=!1,Zt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,Fr)&&s[Fr]||(s[Fr]=++Lr)}(this);delete Vt[s]}},Zt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const on=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1},Bn=Array.prototype.forEach?function(s,e,r){Array.prototype.forEach.call(s,e,r)}:function(s,e,r){const a=s.length,h="string"==typeof s?s.split(""):s;for(let _=0;_<a;_++)_ in h&&e.call(r,h[_],_,s)};function mn(s){return Array.prototype.concat.apply([],arguments)}function On(s){const e=s.length;if(0<e){const r=Array(e);for(let a=0;a<e;a++)r[a]=s[a];return r}return[]}function ur(s){return/^[\s\xa0]*$/.test(s)}var an,Qr=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function kn(s,e){return-1!=s.indexOf(e)}function tt(s,e){return s<e?-1:s>e?1:0}e:{var xt=ot.navigator;if(xt){var qn=xt.userAgent;if(qn){an=qn;break e}}an=""}function cr(s,e,r){for(const a in s)e.call(r,s[a],a,s)}function Nn(s){const e={};for(const r in s)e[r]=s[r];return e}var Sr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wr(s,e){let r,a;for(let h=1;h<arguments.length;h++){for(r in a=arguments[h],a)s[r]=a[r];for(let _=0;_<Sr.length;_++)r=Sr[_],Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}}function br(s){return br[" "](s),s}br[" "]=Pt;var Dt,s,_s=kn(an,"Opera"),nr=kn(an,"Trident")||kn(an,"MSIE"),Ot=kn(an,"Edge"),tn=Ot||nr,Ni=kn(an,"Gecko")&&!(kn(an.toLowerCase(),"webkit")&&!kn(an,"Edge"))&&!(kn(an,"Trident")||kn(an,"MSIE"))&&!kn(an,"Edge"),ys=kn(an.toLowerCase(),"webkit")&&!kn(an,"Edge");function ci(){var s=ot.document;return s?s.documentMode:void 0}e:{var Yn="",zr=(s=an,Ni?/rv:([^\);]+)(\)|;)/.exec(s):Ot?/Edge\/([\d\.]+)/.exec(s):nr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):ys?/WebKit\/(\S+)/.exec(s):_s?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(zr&&(Yn=zr?zr[1]:""),nr){var In=ci();if(null!=In&&In>parseFloat(Yn)){Dt=String(In);break e}}Dt=Yn}var Dn={};function _e(){return e=Dn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=Qr(String(Dt)).split("."),r=Qr("9").split("."),a=Math.max(e.length,r.length);for(let C=0;0==s&&C<a;C++){var h=e[C]||"",_=r[C]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==h[0].length&&0==_[0].length)break;s=tt(0==h[1].length?0:parseInt(h[1],10),0==_[1].length?0:parseInt(_[1],10))||tt(0==h[2].length,0==_[2].length)||tt(h[2],_[2]),h=h[3],_=_[3]}while(0==s)}return 0<=s}();var e}var ve=ot.document&&nr&&(ci()||parseInt(Dt,10))||void 0,Te=function(){if(!ot.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{ot.addEventListener("test",Pt,e),ot.removeEventListener("test",Pt,e)}catch(r){}return s}();function nt(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}function Tt(s,e){if(nt.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Ni){e:{try{br(e.nodeName);var h=!0;break e}catch(_){}h=!1}h||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:sn[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Tt.Z.h.call(this)}}nt.prototype.h=function(){this.defaultPrevented=!0},ln(Tt,nt);var sn={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Jt="closure_listenable_"+(1e6*Math.random()|0),$n=0;function Mi(s,e,r,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!a,this.ia=h,this.key=++$n,this.ca=this.fa=!1}function Cn(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function Jr(s){this.src=s,this.g={},this.h=0}function Pi(s,e){var r=e.type;if(r in s.g){var _,a=s.g[r],h=on(a,e);(_=0<=h)&&Array.prototype.splice.call(a,h,1),_&&(Cn(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function Ps(s,e,r,a){for(var h=0;h<s.length;++h){var _=s[h];if(!_.ca&&_.listener==e&&_.capture==!!r&&_.ia==a)return h}return-1}Jr.prototype.add=function(s,e,r,a,h){var _=s.toString();(s=this.g[_])||(s=this.g[_]=[],this.h++);var C=Ps(s,e,a,h);return-1<C?(e=s[C],r||(e.fa=!1)):((e=new Mi(e,this.src,_,!!a,h)).fa=r,s.push(e)),e};var Ji="closure_lm_"+(1e6*Math.random()|0),ls={};function Uo(s,e,r,a,h){if(a&&a.once)return Ir(s,e,r,a,h);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Uo(s,e[_],r,a,h);return null}return r=$r(r),s&&s[Jt]?s.N(e,r,It(a)?!!a.capture:!!a,h):rr(s,e,r,!1,a,h)}function rr(s,e,r,a,h,_){if(!e)throw Error("Invalid event type");var C=It(h)?!!h.capture:!!h,x=vn(s);if(x||(s[Ji]=x=new Jr(s)),(r=x.add(e,r,a,C,_)).proxy)return r;if(a=function(){var e=At;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=a,a.src=s,a.listener=r,s.addEventListener)Te||(h=C),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(Ar(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return r}function Ir(s,e,r,a,h){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Ir(s,e[_],r,a,h);return null}return r=$r(r),s&&s[Jt]?s.O(e,r,It(a)?!!a.capture:!!a,h):rr(s,e,r,!0,a,h)}function nn(s,e,r,a,h){if(Array.isArray(e))for(var _=0;_<e.length;_++)nn(s,e[_],r,a,h);else a=It(a)?!!a.capture:!!a,r=$r(r),s&&s[Jt]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=Ps(_=s.g[e],r,a,h))&&(Cn(_[r]),Array.prototype.splice.call(_,r,1),0==_.length&&(delete s.g[e],s.h--))):s&&(s=vn(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Ps(e,r,a,h)),(r=-1<s?e[s]:null)&&di(r))}function di(s){if("number"!=typeof s&&s&&!s.ca){var e=s.src;if(e&&e[Jt])Pi(e.i,s);else{var r=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(r,a,s.capture):e.detachEvent?e.detachEvent(Ar(r),a):e.addListener&&e.removeListener&&e.removeListener(a),(r=vn(e))?(Pi(r,s),0==r.h&&(r.src=null,e[Ji]=null)):Cn(s)}}}function Ar(s){return s in ls?ls[s]:ls[s]="on"+s}function At(s,e){if(s.ca)s=!0;else{e=new Tt(e,this);var r=s.listener,a=s.ia||s.src;s.fa&&di(s),s=r.call(a,e)}return s}function vn(s){return(s=s[Ji])instanceof Jr?s:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(s){return"function"==typeof s?s:(s[Hn]||(s[Hn]=function(e){return s.handleEvent(e)}),s[Hn])}function vr(){Zt.call(this),this.i=new Jr(this),this.P=this,this.I=null}function En(s,e){var r,a=s.I;if(a)for(r=[];a;a=a.I)r.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new nt(e,s);else if(e instanceof nt)e.target=e.target||s;else{var h=e;wr(e=new nt(a,s),h)}if(h=!0,r)for(var _=r.length-1;0<=_;_--){var C=e.g=r[_];h=xr(C,a,!0,e)&&h}if(h=xr(C=e.g=s,a,!0,e)&&h,h=xr(C,a,!1,e)&&h,r)for(_=0;_<r.length;_++)h=xr(C=e.g=r[_],a,!1,e)&&h}function xr(s,e,r,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,_=0;_<e.length;++_){var C=e[_];if(C&&!C.ca&&C.capture==r){var x=C.listener,H=C.ia||C.src;C.fa&&Pi(s.i,C),h=!1!==x.call(H,a)&&h}}return h&&!a.defaultPrevented}ln(vr,Zt),vr.prototype[Jt]=!0,vr.prototype.removeEventListener=function(s,e,r,a){nn(this,s,e,r,a)},vr.prototype.M=function(){if(vr.Z.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],a=0;a<r.length;a++)Cn(r[a]);delete s.g[e],s.h--}}this.I=null},vr.prototype.N=function(s,e,r,a){return this.i.add(String(s),e,!1,r,a)},vr.prototype.O=function(s,e,r,a){return this.i.add(String(s),e,!0,r,a)};var ir=ot.JSON.stringify;function Xr(){var s=Fi;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var vs,cn=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new Rr,s=>s.reset());class Rr{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function vi(s){ot.setTimeout(()=>{throw s},0)}function Mr(s,e){vs||function(){var s=ot.Promise.resolve(void 0);vs=function(){s.then(hi)}}(),Es||(vs(),Es=!0),Fi.add(s,e)}var Es=!1,Fi=new class{constructor(){this.h=this.g=null}add(e,r){const a=cn.get();a.set(e,r),this.h?this.h.next=a:this.g=a,this.h=a}};function hi(){for(var s;s=Xr();){try{s.h.call(s.g)}catch(r){vi(r)}var e=cn;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}Es=!1}function Mn(s,e){vr.call(this),this.h=s||1,this.g=e||ot,this.j=pt(this.kb,this),this.l=Date.now()}function Bo(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function io(s,e,r){if("function"==typeof s)r&&(s=pt(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=pt(s.handleEvent,s)}return 2147483647<Number(e)?-1:ot.setTimeout(s,e||0)}function Ei(s){s.g=io(()=>{s.g=null,s.i&&(s.i=!1,Ei(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}ln(Mn,vr),(Fe=Mn.prototype).da=!1,Fe.S=null,Fe.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),En(this,"tick"),this.da&&(Bo(this),this.start()))}},Fe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fe.M=function(){Mn.Z.M.call(this),Bo(this),delete this.g};class so extends Zt{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ei(this)}M(){super.M(),this.g&&(ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(s){Zt.call(this),this.h=s,this.g={}}ln(wi,Zt);var Wi=[];function Er(s,e,r,a){Array.isArray(r)||(r&&(Wi[0]=r.toString()),r=Wi);for(var h=0;h<r.length;h++){var _=Uo(e,r[h],a||s.handleEvent,!1,s.h||s);if(!_)break;s.g[_.key]=_}}function Vr(s){cr(s.g,function(e,r){this.g.hasOwnProperty(r)&&di(e)},s),s.g={}}function Os(){this.g=!0}function sr(s,e,r,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var a=r[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var _=h[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var C=1;C<h.length;C++)h[C]=""}}}return ir(r)}catch(x){return e}}(s,r)+(a?" "+a:"")})}wi.prototype.M=function(){wi.Z.M.call(this),Vr(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Os.prototype.Aa=function(){this.g=!1},Os.prototype.info=function(){};var Hr={},Li=null;function es(){return Li=Li||new vr}function Re(s){nt.call(this,Hr.Ma,s)}function be(s){const e=es();En(e,new Re(e,s))}function Ge(s,e){nt.call(this,Hr.STAT_EVENT,s),this.stat=e}function Xe(s){const e=es();En(e,new Ge(e,s))}function yt(s,e){nt.call(this,Hr.Na,s),this.size=e}function te(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return ot.setTimeout(function(){s()},e)}Hr.Ma="serverreachability",ln(Re,nt),Hr.STAT_EVENT="statevent",ln(Ge,nt),Hr.Na="timingevent",ln(yt,nt);var dn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Gr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xn(){}function ts(){}Xn.prototype.h=null;var ra,er={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ao(){nt.call(this,"d")}function ns(){nt.call(this,"c")}function uo(){}function Ao(s,e,r,a){this.l=s,this.j=e,this.m=r,this.X=a||1,this.V=new wi(this),this.P=_l,this.W=new Mn(s=tn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new lo}function lo(){this.i=null,this.g="",this.h=!1}ln(ao,nt),ln(ns,nt),ln(uo,Xn),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},ra=new uo;var _l=45e3,$s={},ks={};function cs(s,e,r){s.K=1,s.v=L(Q(e)),s.s=r,s.U=!0,ia(s,null)}function ia(s,e){s.F=Date.now(),ds(s),s.A=Q(s.v);var r=s.A,a=s.X;Array.isArray(a)||(a=[String(a)]),Ua(r.h,"t",a),s.C=0,r=s.l.H,s.h=new lo,s.g=po(s.l,r?e:null,!s.s),0<s.O&&(s.L=new so(pt(s.Ia,s,s.g),s.O)),Er(s.V,s.g,"readystatechange",s.gb),e=s.H?Nn(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,e)):(s.u="GET",s.g.ea(s.A,s.u,null,e)),be(1),function(s,e,r,a,h,_){s.info(function(){if(s.g)if(_)for(var C="",x=_.split("&"),H=0;H<x.length;H++){var q=x[H].split("=");if(1<q.length){var oe=q[0];q=q[1];var Ie=oe.split("_");C=2<=Ie.length&&"type"==Ie[1]?C+(oe+"=")+q+"&":C+(oe+"=redacted&")}}else C=null;else C=_;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+r+"\n"+C})}(s.j,s.u,s.A,s.m,s.X,s.s)}function jo(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function ws(s,e,r){let h,a=!0;for(;!s.I&&s.C<r.length;){if(h=Hs(s,r),h==ks){4==e&&(s.o=4,Xe(14),a=!1),sr(s.j,s.m,null,"[Incomplete Response]");break}if(h==$s){s.o=4,Xe(15),sr(s.j,s.m,r,"[Invalid Chunk]"),a=!1;break}sr(s.j,s.m,h,null),zi(s,h)}jo(s)&&h!=ks&&h!=$s&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,Xe(16),a=!1),s.i=s.i&&a,a?0<r.length&&!s.aa&&(s.aa=!0,(e=s.l).g==s&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Da(e),e.L=!0,Xe(11))):(sr(s.j,s.m,r,"[Invalid Chunked Response]"),fi(s),co(s))}function Hs(s,e){var r=s.C,a=e.indexOf("\n",r);return-1==a?ks:(r=Number(e.substring(r,a)),isNaN(r)?$s:(a+=1)+r>e.length?ks:(e=e.substr(a,r),s.C=a+r,e))}function ds(s){s.Y=Date.now()+s.P,ei(s,s.P)}function ei(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=te(pt(s.eb,s),e)}function Ci(s){s.B&&(ot.clearTimeout(s.B),s.B=null)}function co(s){0==s.l.G||s.I||Ds(s.l,s)}function fi(s){Ci(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Bo(s.W),Vr(s.V),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function zi(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||Nr(r.i,s)))if(r.I=s.N,!s.J&&Nr(r.i,s)&&3==r.G){try{var a=r.Ca.g.parse(e)}catch(q){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(r.u)r.ta=h[1],0<r.ta-r.U&&37500>h[2]&&r.N&&0==r.A&&!r.v&&(r.v=te(pt(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;vu(r),fo(r)}Zs(r),Xe(18)}if(1>=aa(r.i)&&r.ka){try{r.ka()}catch(q){}r.ka=void 0}}else No(r,11)}else if((s.J||r.g==s)&&vu(r),!ur(e))for(h=r.Ca.g.parse(e),e=0;e<h.length;e++){let q=h[e];if(r.U=q[0],q=q[1],2==r.G)if("c"==q[0]){r.J=q[1],r.la=q[2];const oe=q[3];null!=oe&&(r.ma=oe,r.h.info("VER="+r.ma));const Ie=q[4];null!=Ie&&(r.za=Ie,r.h.info("SVER="+r.za));const qe=q[5];null!=qe&&"number"==typeof qe&&0<qe&&(r.K=a=1.5*qe,r.h.info("backChannelRequestTimeoutMs_="+a)),a=r;const at=s.g;if(at){const _t=at.g?at.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_t){var _=a.i;!_.g&&(kn(_t,"spdy")||kn(_t,"quic")||kn(_t,"h2"))&&(_.j=_.l,_.g=new Set,_.h&&($u(_,_.h),_.h=null))}if(a.D){const qt=at.g?at.g.getResponseHeader("X-HTTP-Session-Id"):null;qt&&(a.sa=qt,Ke(a.F,a.D,qt))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-s.F,r.h.info("Handshake RTT: "+r.O+"ms"));var C=s;if((a=r).oa=wl(a,a.H?a.la:null,a.W),C.J){Go(a.i,C);var x=C,H=a.K;H&&x.setTimeout(H),x.B&&(Ci(x),ds(x)),a.g=C}else zo(a);0<r.l.length&&_u(r)}else"stop"!=q[0]&&"close"!=q[0]||No(r,7);else 3==r.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?No(r,7):bi(r):"noop"!=q[0]&&r.j&&r.j.wa(q),r.A=0)}be(4)}catch(q){}}function hs(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Yt(s)||"string"==typeof s)Bn(s,e,void 0);else{if(s.T&&"function"==typeof s.T)var r=s.T();else if(s.R&&"function"==typeof s.R)r=void 0;else if(Yt(s)||"string"==typeof s){r=[];for(var a=s.length,h=0;h<a;h++)r.push(h)}else for(h in r=[],a=0,s)r[a++]=h;a=function(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(Yt(s)){for(var e=[],r=s.length,a=0;a<r;a++)e.push(s[a]);return e}for(a in e=[],r=0,s)e[r++]=s[a];return e}(s),h=a.length;for(var _=0;_<h;_++)e.call(void 0,a[_],r&&r[_],s)}}function Fs(s,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var a=0;a<r;a+=2)this.set(arguments[a],arguments[a+1])}else if(s)if(s instanceof Fs)for(r=s.T(),a=0;a<r.length;a++)this.set(r[a],s.get(r[a]));else for(a in s)this.set(a,s[a])}function $o(s){if(s.i!=s.g.length){for(var e=0,r=0;e<s.g.length;){var a=s.g[e];ho(s.h,a)&&(s.g[r++]=a),e++}s.g.length=r}if(s.i!=s.g.length){var h={};for(r=e=0;e<s.g.length;)ho(h,a=s.g[e])||(s.g[r++]=a,h[a]=1),e++;s.g.length=r}}function ho(s,e){return Object.prototype.hasOwnProperty.call(s,e)}(Fe=Ao.prototype).setTimeout=function(s){this.P=s},Fe.gb=function(s){s=s.target;const e=this.L;e&&3==Ks(s)?e.l():this.Ia(s)},Fe.Ia=function(s){try{if(s==this.g)e:{const oe=Ks(this.g);var e=this.g.Da();const Ie=this.g.ba();if(!(3>oe)&&(3!=oe||tn||this.g&&(this.h.h||this.g.ga()||El(this.g)))){this.I||4!=oe||7==e||be(8==e||0>=Ie?3:2),Ci(this);var r=this.g.ba();this.N=r;t:if(jo(this)){var a=El(this.g);s="";var h=a.length,_=4==Ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fi(this),co(this);var C="";break t}this.h.i=new ot.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:_&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==r,function(s,e,r,a,h,_,C){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+r+"\n"+_+" "+C})}(this.j,this.u,this.A,this.m,this.X,oe,r),this.i){if(this.$&&!this.J){t:{if(this.g){var x,H=this.g;if((x=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ur(x)){var q=x;break t}}q=null}if(!(r=q)){this.i=!1,this.o=3,Xe(12),fi(this),co(this);break e}sr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zi(this,r)}this.U?(ws(this,oe,C),tn&&this.i&&3==oe&&(Er(this.V,this.W,"tick",this.fb),this.W.start())):(sr(this.j,this.m,C,null),zi(this,C)),4==oe&&fi(this),this.i&&!this.I&&(4==oe?Ds(this.l,this):(this.i=!1,ds(this)))}else 400==r&&0<C.indexOf("Unknown SID")?(this.o=3,Xe(12)):(this.o=0,Xe(13)),fi(this),co(this)}}}catch(oe){}},Fe.fb=function(){if(this.g){var s=Ks(this.g),e=this.g.ga();this.C<e.length&&(Ci(this),ws(this,s,e),this.i&&4!=s&&ds(this))}},Fe.cancel=function(){this.I=!0,fi(this)},Fe.eb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(be(3),Xe(17)),fi(this),this.o=2,co(this)):ei(this,this.Y-s)},(Fe=Fs.prototype).R=function(){$o(this);for(var s=[],e=0;e<this.g.length;e++)s.push(this.h[this.g[e]]);return s},Fe.T=function(){return $o(this),this.g.concat()},Fe.get=function(s,e){return ho(this.h,s)?this.h[s]:e},Fe.set=function(s,e){ho(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=e},Fe.forEach=function(s,e){for(var r=this.T(),a=0;a<r.length;a++){var h=r[a],_=this.get(h);s.call(e,_,h,this)}};var Ls=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function F(s,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof F){this.g=void 0!==e?e:s.g,B(this,s.j),this.s=s.s,ne(this,s.i),me(this,s.m),this.l=s.l,e=s.h;var r=new Sn;r.i=e.i,e.g&&(r.g=new Fs(e.g),r.h=e.h),Qe(this,r),this.o=s.o}else s&&(r=String(s).match(Ls))?(this.g=!!e,B(this,r[1]||"",!0),this.s=Y(r[2]||""),ne(this,r[3]||"",!0),me(this,r[4]),this.l=Y(r[5]||"",!0),Qe(this,r[6]||"",!0),this.o=Y(r[7]||"")):(this.g=!!e,this.h=new Sn(null,this.g))}function Q(s){return new F(s)}function B(s,e,r){s.j=r?Y(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function ne(s,e,r){s.i=r?Y(e,!0):e}function me(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function Qe(s,e,r){e instanceof Sn?(s.h=e,function(s,e){e&&!s.j&&(Kt(s),s.i=null,s.g.forEach(function(r,a){var h=a.toLowerCase();a!=h&&(Ho(this,a),Ua(this,h,r))},s)),s.j=e}(s.h,s.g)):(r||(e=ke(e,qr)),s.h=new Sn(e,s.g))}function Ke(s,e,r){s.h.set(e,r)}function L(s){return Ke(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Y(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function ke(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,Et),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Et(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}F.prototype.toString=function(){var s=[],e=this.j;e&&s.push(ke(e,un,!0),":");var r=this.i;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(ke(e,un,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&s.push("/"),s.push(ke(r,"/"==r.charAt(0)?Vi:or,!0))),(r=this.h.toString())&&s.push("?",r),(r=this.o)&&s.push("#",ke(r,Ui)),s.join("")};var un=/[#\/\?@]/g,or=/[#\?:]/g,Vi=/[#\?]/g,qr=/[#\?@]/g,Ui=/#/g;function Sn(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Kt(s){s.g||(s.g=new Fs,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var a=s[r].indexOf("="),h=null;if(0<=a){var _=s[r].substring(0,a);h=s[r].substring(a+1)}else _=s[r];e(_,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Ho(s,e){Kt(s),e=oa(s,e),ho(s.g.h,e)&&(s.i=null,s.h-=s.g.get(e).length,ho((s=s.g).h,e)&&(delete s.h[e],s.i--,s.g.length>2*s.i&&$o(s)))}function sa(s,e){return Kt(s),e=oa(s,e),ho(s.g.h,e)}function Ua(s,e,r){Ho(s,e),0<r.length&&(s.i=null,s.g.set(oa(s,e),On(r)),s.h+=r.length)}function oa(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function pu(s){this.l=s||ct,s=ot.PerformanceNavigationTiming?0<(s=ot.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(ot.g&&ot.g.Ea&&ot.g.Ea()&&ot.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Fe=Sn.prototype).add=function(s,e){Kt(this),this.i=null,s=oa(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},Fe.forEach=function(s,e){Kt(this),this.g.forEach(function(r,a){Bn(r,function(h){s.call(e,h,a,this)},this)},this)},Fe.T=function(){Kt(this);for(var s=this.g.R(),e=this.g.T(),r=[],a=0;a<e.length;a++)for(var h=s[a],_=0;_<h.length;_++)r.push(e[a]);return r},Fe.R=function(s){Kt(this);var e=[];if("string"==typeof s)sa(this,s)&&(e=mn(e,this.g.get(oa(this,s))));else{s=this.g.R();for(var r=0;r<s.length;r++)e=mn(e,s[r])}return e},Fe.set=function(s,e){return Kt(this),this.i=null,sa(this,s=oa(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},Fe.get=function(s,e){return s&&0<(s=this.R(s)).length?String(s[0]):e},Fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],e=this.g.T(),r=0;r<e.length;r++){var a=e[r],h=encodeURIComponent(String(a));a=this.R(a);for(var _=0;_<a.length;_++){var C=h;""!==a[_]&&(C+="="+encodeURIComponent(String(a[_]))),s.push(C)}}return this.i=s.join("&")};var ct=10;function bn(s){return!!s.h||!!s.g&&s.g.size>=s.j}function aa(s){return s.h?1:s.g?s.g.size:0}function Nr(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function $u(s,e){s.g?s.g.add(e):s.h=e}function Go(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function bs(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return On(s.i)}function pi(){}function Gs(){this.g=new pi}function Ic(s,e,r){const a=r||"";try{hs(s,function(h,_){let C=h;It(h)&&(C=ir(h)),e.push(a+_+"="+encodeURIComponent(C))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function Ws(s,e,r,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(_){}}function xo(s){this.l=s.$b||null,this.j=s.ib||!1}function gi(s,e){vr.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=zs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pu.prototype.cancel=function(){if(this.i=bs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},pi.prototype.stringify=function(s){return ot.JSON.stringify(s,void 0)},pi.prototype.parse=function(s){return ot.JSON.parse(s,void 0)},ln(xo,Xn),xo.prototype.g=function(){return new gi(this.l,this.j)},xo.prototype.i=function(s){return function(){return s}}({}),ln(gi,vr);var zs=0;function ua(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function Ro(s){s.readyState=4,s.l=null,s.j=null,s.A=null,qi(s)}function qi(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(Fe=gi.prototype).open=function(s,e){if(this.readyState!=zs)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,qi(this)},Fe.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ro(this)),this.readyState=zs},Fe.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ot.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ua(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},Fe.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Ro(this):qi(this),3==this.readyState&&ua(this)}},Fe.Ua=function(s){this.g&&(this.response=this.responseText=s,Ro(this))},Fe.Ta=function(s){this.g&&(this.response=s,Ro(this))},Fe.ha=function(){this.g&&Ro(this)},Fe.setRequestHeader=function(s,e){this.v.append(s,e)},Fe.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},Fe.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var yl=ot.JSON.parse;function Wr(s){vr.call(this),this.headers=new Fs,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Is,this.K=this.L=!1}ln(Wr,vr);var Is="",qs=/^https?$/i,ba=["POST","PUT"];function vl(s){return"content-type"==s.toLowerCase()}function la(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Wo(s),ca(s)}function Wo(s){s.D||(s.D=!0,En(s,"complete"),En(s,"error"))}function ja(s){if(s.h&&void 0!==bt&&(!s.C[1]||4!=Ks(s)||2!=s.ba()))if(s.v&&4==Ks(s))io(s.Fa,0,s);else if(En(s,"readystatechange"),4==Ks(s)){s.h=!1;try{const x=s.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var a;if(a=0===x){var h=String(s.H).match(Ls)[1]||null;if(!h&&ot.self&&ot.self.location){var _=ot.self.location.protocol;h=_.substr(0,_.length-1)}a=!qs.test(h?h.toLowerCase():"")}r=a}if(r)En(s,"complete"),En(s,"success");else{s.m=6;try{var C=2<Ks(s)?s.g.statusText:""}catch(H){C=""}s.j=C+" ["+s.ba()+"]",Wo(s)}}finally{ca(s)}}}function ca(s,e){if(s.g){Gu(s);const r=s.g,a=s.C[0]?Pt:null;s.g=null,s.C=null,e||En(s,"ready");try{r.onreadystatechange=a}catch(h){}}}function Gu(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(ot.clearTimeout(s.A),s.A=null)}function Ks(s){return s.g?s.g.readyState:0}function El(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case Is:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ia(s,e,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=function(s){let e="";return cr(s,function(r,a){e+=a,e+=":",e+=r,e+="\r\n"}),e}(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):Ke(s,e,r))}function mu(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function $a(s){this.za=0,this.l=[],this.h=new Os,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mu("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mu("baseRetryDelayMs",5e3,s),this.$a=mu("retryDelaySeedMs",1e4,s),this.Ya=mu("forwardChannelMaxRetries",2,s),this.ra=mu("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new pu(s&&s.concurrentRequestLimit),this.Ca=new Gs,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function bi(s){if(Ur(s),3==s.G){var e=s.V++,r=Q(s.F);Ke(r,"SID",s.J),Ke(r,"RID",e),Ke(r,"TYPE","terminate"),Ii(s,r),(e=new Ao(s,s.h,e,void 0)).K=2,e.v=L(Q(r)),r=!1,ot.navigator&&ot.navigator.sendBeacon&&(r=ot.navigator.sendBeacon(e.v.toString(),"")),!r&&ot.Image&&((new Image).src=e.v,r=!0),r||(e.g=po(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ds(e)}Bi(s)}function fo(s){s.g&&(Da(s),s.g.cancel(),s.g=null)}function Ur(s){fo(s),s.u&&(ot.clearTimeout(s.u),s.u=null),vu(s),s.i.cancel(),s.m&&("number"==typeof s.m&&ot.clearTimeout(s.m),s.m=null)}function Wu(s,e){s.l.push(new class{constructor(s,e){this.h=s,this.g=e}}(s.Za++,e)),3==s.G&&_u(s)}function _u(s){bn(s.i)||s.m||(s.m=!0,Mr(s.Ha,s),s.C=0)}function da(s,e){var r;r=e?e.m:s.V++;const a=Q(s.F);Ke(a,"SID",s.J),Ke(a,"RID",r),Ke(a,"AID",s.U),Ii(s,a),s.o&&s.s&&Ia(a,s.o,s.s),r=new Ao(s,s.h,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.l=e.D.concat(s.l)),e=yu(s,r,1e3),r.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),$u(s.i,r),cs(r,a,e)}function Ii(s,e){s.j&&hs({},function(r,a){Ke(e,a,r)})}function yu(s,e,r){r=Math.min(s.l.length,r);var a=s.j?pt(s.j.Oa,s.j,s):null;e:{var h=s.l;let _=-1;for(;;){const C=["count="+r];-1==_?0<r?(_=h[0].h,C.push("ofs="+_)):_=0:C.push("ofs="+_);let x=!0;for(let H=0;H<r;H++){let q=h[H].h;const oe=h[H].g;if(q-=_,0>q)_=Math.max(0,h[H].h-100),x=!1;else try{Ic(oe,C,"req"+q+"_")}catch(Ie){a&&a(oe)}}if(x){a=C.join("&");break e}}}return s=s.l.splice(0,r),e.D=s,a}function zo(s){s.g||s.u||(s.Y=1,Mr(s.Ga,s),s.A=0)}function Zs(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=te(pt(s.Ga,s),ha(s,s.A)),s.A++,0))}function Da(s){null!=s.B&&(ot.clearTimeout(s.B),s.B=null)}function ui(s){s.g=new Ao(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var e=Q(s.oa);Ke(e,"RID","rpc"),Ke(e,"SID",s.J),Ke(e,"CI",s.N?"0":"1"),Ke(e,"AID",s.U),Ii(s,e),Ke(e,"TYPE","xmlhttp"),s.o&&s.s&&Ia(e,s.o,s.s),s.K&&s.g.setTimeout(s.K);var r=s.g;s=s.la,r.K=1,r.v=L(Q(e)),r.s=null,r.U=!0,ia(r,s)}function vu(s){null!=s.v&&(ot.clearTimeout(s.v),s.v=null)}function Ds(s,e){var r=null;if(s.g==e){vu(s),Da(s),s.g=null;var a=2}else{if(!Nr(s.i,e))return;r=e.D,Go(s.i,e),a=1}if(s.I=e.N,0!=s.G)if(e.i)if(1==a){r=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;En(a=es(),new yt(a,r,e,h)),_u(s)}else zo(s);else if(3==(h=e.o)||0==h&&0<s.I||!(1==a&&function(s,e){return!(aa(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=e.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=te(pt(s.Ha,s,e),ha(s,s.C)),s.C++,0)))}(s,e)||2==a&&Zs(s)))switch(r&&0<r.length&&(e=s.i,e.i=e.i.concat(r)),h){case 1:No(s,5);break;case 4:No(s,10);break;case 3:No(s,6);break;default:No(s,2)}}function ha(s,e){let r=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(r*=2),r*e}function No(s,e){if(s.h.info("Error code "+e),2==e){var r=null;s.j&&(r=null);var a=pt(s.jb,s);r||(r=new F("//www.google.com/images/cleardot.gif"),ot.location&&"http"==ot.location.protocol||B(r,"https"),L(r)),function(s,e){const r=new Os;if(ot.Image){const a=new Image;a.onload=gn(Ws,r,a,"TestLoadImage: loaded",!0,e),a.onerror=gn(Ws,r,a,"TestLoadImage: error",!1,e),a.onabort=gn(Ws,r,a,"TestLoadImage: abort",!1,e),a.ontimeout=gn(Ws,r,a,"TestLoadImage: timeout",!1,e),ot.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(r.toString(),a)}else Xe(2);s.G=0,s.j&&s.j.va(e),Bi(s),Ur(s)}function Bi(s){s.G=0,s.I=-1,s.j&&((0!=bs(s.i).length||0!=s.l.length)&&(s.i.i.length=0,On(s.l),s.l.length=0),s.j.ua())}function wl(s,e,r){let a=function(s){return s instanceof F?Q(s):new F(s,void 0)}(r);if(""!=a.i)e&&ne(a,e+"."+a.i),me(a,a.m);else{const h=ot.location;a=function(s,e,r,a){var h=new F(null,void 0);return s&&B(h,s),e&&ne(h,e),r&&me(h,r),a&&(h.l=a),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,r)}return s.aa&&cr(s.aa,function(h,_){Ke(a,_,h)}),r=s.sa,(e=s.D)&&r&&Ke(a,e,r),Ke(a,"VER",s.ma),Ii(s,a),a}function po(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wr(r&&s.Ba&&!s.qa?new xo({ib:!0}):s.qa)).L=s.H,e}function rs(){}function Ha(){if(nr&&!(10<=Number(ve)))throw Error("Environmental error: no available transport.")}function Ki(s,e){vr.call(this),this.g=new $a(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.P=s,(s=e&&e.httpHeadersOverwriteParam)&&!ur(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ur(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Mo(this)}function Dc(s){ao.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function Ys(){ns.call(this),this.status=1}function Mo(s){this.g=s}(Fe=Wr.prototype).ea=function(s,e,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ra.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:ra),this.g.onreadystatechange=pt(this.Fa,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(_){return void la(this,_)}s=r||"";const h=new Fs(this.headers);a&&hs(a,function(_,C){h.set(C,_)}),a=function(s){e:{var e=vl;const r=s.length,a="string"==typeof s?s.split(""):s;for(let h=0;h<r;h++)if(h in a&&e.call(void 0,a[h],h,s)){e=h;break e}e=-1}return 0>e?null:"string"==typeof s?s.charAt(e):s[e]}(h.T()),r=ot.FormData&&s instanceof ot.FormData,!(0<=on(ba,e))||a||r||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(_,C){this.g.setRequestHeader(C,_)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gu(this),0<this.B&&((this.K=function(s){return nr&&_e()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pt(this.pa,this)):this.A=io(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(_){la(this,_)}},Fe.pa=function(){void 0!==bt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,En(this,"timeout"),this.abort(8))},Fe.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,En(this,"complete"),En(this,"abort"),ca(this))},Fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ca(this,!0)),Wr.Z.M.call(this)},Fe.Fa=function(){this.s||(this.F||this.v||this.l?ja(this):this.cb())},Fe.cb=function(){ja(this)},Fe.ba=function(){try{return 2<Ks(this)?this.g.status:-1}catch(s){return-1}},Fe.ga=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},Fe.Qa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),yl(e)}},Fe.Da=function(){return this.m},Fe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Fe=$a.prototype).ma=8,Fe.G=1,Fe.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch(e){}},Fe.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;const h=new Ao(this,this.h,s,void 0);let _=this.s;if(this.P&&(_?(_=Nn(_),wr(_,this.P)):_=this.P),null===this.o&&(h.H=_),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){var a=this.l[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=r;break e}if(4096===e||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=yu(this,h,e),Ke(r=Q(this.F),"RID",s),Ke(r,"CVER",22),this.D&&Ke(r,"X-HTTP-Session-Id",this.D),Ii(this,r),this.o&&_&&Ia(r,this.o,_),$u(this.i,h),this.Ra&&Ke(r,"TYPE","init"),this.ja?(Ke(r,"$req",e),Ke(r,"SID","null"),h.$=!0,cs(h,r,null)):cs(h,r,e),this.G=2}}else 3==this.G&&(s?da(this,s):0==this.l.length||bn(this.i)||da(this))},Fe.Ga=function(){if(this.u=null,ui(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=te(pt(this.bb,this),s)}},Fe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xe(10),fo(this),ui(this))},Fe.ab=function(){null!=this.v&&(this.v=null,fo(this),Zs(this),Xe(19))},Fe.jb=function(s){s?(this.h.info("Successfully pinged google.com"),Xe(2)):(this.h.info("Failed to ping google.com"),Xe(1))},(Fe=rs.prototype).xa=function(){},Fe.wa=function(){},Fe.va=function(){},Fe.ua=function(){},Fe.Oa=function(){},Ha.prototype.g=function(s,e){return new Ki(s,e)},ln(Ki,vr),Ki.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),Mr(pt(s.hb,s,e))),Xe(0),s.W=e,s.aa=r||{},s.N=s.X,s.F=wl(s,null,s.W),_u(s)},Ki.prototype.close=function(){bi(this.g)},Ki.prototype.u=function(s){if("string"==typeof s){var e={};e.__data__=s,Wu(this.g,e)}else this.v?((e={}).__data__=ir(s),Wu(this.g,e)):Wu(this.g,s)},Ki.prototype.M=function(){this.g.j=null,delete this.j,bi(this.g),delete this.g,Ki.Z.M.call(this)},ln(Dc,ao),ln(Ys,ns),ln(Mo,rs),Mo.prototype.xa=function(){En(this.g,"a")},Mo.prototype.wa=function(s){En(this.g,new Dc(s))},Mo.prototype.va=function(s){En(this.g,new Ys(s))},Mo.prototype.ua=function(){En(this.g,"b")},Ha.prototype.createWebChannel=Ha.prototype.g,Ki.prototype.send=Ki.prototype.u,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,dn.NO_ERROR=0,dn.TIMEOUT=8,dn.HTTP_ERROR=6,Gr.COMPLETE="complete",ts.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",vr.prototype.listen=vr.prototype.N,Wr.prototype.listenOnce=Wr.prototype.O,Wr.prototype.getLastError=Wr.prototype.La,Wr.prototype.getLastErrorCode=Wr.prototype.Da,Wr.prototype.getStatus=Wr.prototype.ba,Wr.prototype.getResponseJson=Wr.prototype.Qa,Wr.prototype.getResponseText=Wr.prototype.ga,Wr.prototype.send=Wr.prototype.ea;var Tc=lt.createWebChannelTransport=function(){return new Ha},Cl=lt.getStatEventTarget=function(){return es()},Ta=lt.ErrorCode=dn,Zl=lt.EventType=Gr,Sc=lt.Event=Hr,qo=lt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hf=lt.FetchXmlHttpFactory=xo,fs=lt.WebChannel=ts,zu=lt.XhrIo=Wr;const fa="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Ko="9.9.1";const pa=new en.Yd("@firebase/firestore");function Eu(){return pa.logLevel}function ft(s,...e){if(pa.logLevel<=en.in.DEBUG){const r=e.map(Ga);pa.debug(`Firestore (${Ko}): ${s}`,...r)}}function Br(s,...e){if(pa.logLevel<=en.in.ERROR){const r=e.map(Ga);pa.error(`Firestore (${Ko}): ${s}`,...r)}}function go(s,...e){if(pa.logLevel<=en.in.WARN){const r=e.map(Ga);pa.warn(`Firestore (${Ko}): ${s}`,...r)}}function Ga(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function Bt(s="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+s;throw Br(e),new Error(e)}function _n(s,e){s||Bt()}function Lt(s,e){return s}const Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends St.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class N{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ti.UNAUTHENTICATED))}shutdown(){}}class I{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class V{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var a=this;let h=this.i;const _=q=>this.i!==h?(h=this.i,r(q)):Promise.resolve();let C=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new mi,e.enqueueRetryable(()=>_(this.currentUser))};const x=()=>{const q=C;e.enqueueRetryable((0,Ce.Z)(function*(){yield q.promise,yield _(a.currentUser)}))},H=q=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(q=>H(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?H(q):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new mi)}},0),x()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(_n("string"==typeof a.accessToken),new N(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _n(null===e||"string"==typeof e),new ti(e)}}class G{constructor(e,r,a){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),a&&this.headers.set("X-Goog-Iam-Authorization-Token",a)}}class ee{constructor(e,r,a){this.h=e,this.l=r,this.m=a}getToken(){return Promise.resolve(new G(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class le{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ae{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,r){const a=_=>{null!=_.error&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const C=_.token!==this.p;return this.p=_.token,ft("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?r(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>a(_))};const h=_=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.g.onInit(_=>h(_)),setTimeout(()=>{if(!this.appCheck){const _=this.g.getImmediate({optional:!0});_?h(_):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(_n("string"==typeof r.token),this.p=r.token,new le(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ut(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}class Fn{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=Ut(40);for(let _=0;_<h.length;++_)a.length<20&&h[_]<r&&(a+=e.charAt(h[_]%e.length))}return a}}function gt(s,e){return s<e?-1:s>e?1:0}function An(s,e,r){return s.length===e.length&&s.every((a,h)=>r(a,e[h]))}function Pn(s){return s+"\0"}class Gn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ht(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ht(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ht(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ht(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*r));return new Gn(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gt(this.nanoseconds,e.nanoseconds):gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new Gn(0,0))}static max(){return new Ht(new Gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ts{constructor(e,r,a){void 0===r?r=0:r>e.length&&Bt(),void 0===a?a=e.length-r:a>e.length-r&&Bt(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return 0===Ts.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let h=0;h<a;h++){const _=e.get(h),C=r.get(h);if(_<C)return-1;if(_>C)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Wn extends Ts{construct(e,r,a){return new Wn(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new ht(Je.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(h=>h.length>0))}return new Wn(r)}static emptyPath(){return new Wn([])}}const Po=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends Ts{construct(e,r,a){return new Pr(e,r,a)}static isValidIdentifier(e){return Po.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const r=[];let a="",h=0;const _=()=>{if(0===a.length)throw new ht(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let C=!1;for(;h<e.length;){const x=e[h];if("\\"===x){if(h+1===e.length)throw new ht(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[h+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new ht(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=H,h+=2}else"`"===x?(C=!C,h++):"."!==x||C?(a+=x,h++):(_(),h++)}if(_(),C)throw new ht(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(r)}static emptyPath(){return new Pr([])}}class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Wn.fromString(e))}static fromName(e){return new Mt(Wn.fromString(e).popFirst(5))}static empty(){return new Mt(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Wn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Wn(e.slice()))}}class ni{constructor(e,r,a,h){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=h}}function Ql(s){return s.fields.find(e=>2===e.kind)}function wu(s){return s.fields.filter(e=>2!==e.kind)}ni.UNKNOWN_ID=-1;class Ac{constructor(e,r){this.fieldPath=e,this.kind=r}}class Jl{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Jl(0,Zo.min())}}function xc(s,e){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=Ht.fromTimestamp(1e9===a?new Gn(r+1,0):new Gn(r,a));return new Zo(h,Mt.empty(),e)}function yp(s){return new Zo(s.readTime,s.key,-1)}class Zo{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new Zo(Ht.min(),Mt.empty(),-1)}static max(){return new Zo(Ht.max(),Mt.empty(),-1)}}function Cu(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=Mt.comparator(s.documentKey,e.documentKey),0!==r?r:gt(s.largestBatchId,e.largestBatchId))}const ff="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function bl(s){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,Ce.Z)(function*(s){if(s.code!==Je.FAILED_PRECONDITION||s.message!==ff)throw s;ft("LocalStore","Unexpectedly lost primary lease")}),Wa.apply(this,arguments)}class Ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ze((a,h)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(a,h)},this.catchCallback=_=>{this.wrapFailure(r,_).next(a,h)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ze?r:Ze.resolve(r)}catch(r){return Ze.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ze.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ze.reject(r)}static resolve(e){return new Ze((r,a)=>{r(e)})}static reject(e){return new Ze((r,a)=>{a(e)})}static waitFor(e){return new Ze((r,a)=>{let h=0,_=0,C=!1;e.forEach(x=>{++h,x.next(()=>{++_,C&&_===h&&r()},H=>a(H))}),C=!0,_===h&&r()})}static or(e){let r=Ze.resolve(!1);for(const a of e)r=r.next(h=>h?Ze.resolve(h):a());return r}static forEach(e,r){const a=[];return e.forEach((h,_)=>{a.push(r.call(this,h,_))}),this.waitFor(a)}static mapArray(e,r){return new Ze((a,h)=>{const _=e.length,C=new Array(_);let x=0;for(let H=0;H<_;H++){const q=H;r(e[q]).next(oe=>{C[q]=oe,++x,x===_&&a(C)},oe=>h(oe))}})}static doWhile(e,r){return new Ze((a,h)=>{const _=()=>{!0===e()?r().next(()=>{_()},h):a()};_()})}}class _i{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.T=new mi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{r.error?this.T.reject(new qu(e,r.error)):this.T.resolve()},this.transaction.onerror=a=>{const h=ko(a.target.error);this.T.reject(new qu(e,h))}}static open(e,r,a,h){try{return new _i(r,e.transaction(h,a))}catch(_){throw new qu(r,_)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(ft("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new mo(r)}}class Vs{constructor(e,r,a){this.name=e,this.version=r,this.P=a,12.2===Vs.v((0,St.z$)())&&Br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ft("SimpleDb","Removing database:",e),ps(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,St.hl)())return!1;if(Vs.S())return!0;const e=(0,St.z$)(),r=Vs.v(e),a=0<r&&r<10,h=Vs.D(e),_=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||_)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,r){return e.store(r)}static v(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static D(e){const r=e.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}k(e){var r=this;return(0,Ce.Z)(function*(){return r.db||(ft("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,h)=>{const _=indexedDB.open(r.name,r.version);_.onsuccess=C=>{a(C.target.result)},_.onblocked=()=>{h(new qu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=C=>{const x=C.target.error;h("VersionError"===x.name?new ht(Je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new ht(Je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new qu(e,x))},_.onupgradeneeded=C=>{ft("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',C.oldVersion),r.P.O(C.target.result,_.transaction,C.oldVersion,r.version).next(()=>{ft("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.M&&(r.db.onversionchange=a=>r.M(a)),r.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,a,h){var _=this;return(0,Ce.Z)(function*(){const C="readonly"===r;let x=0;for(;;){++x;try{_.db=yield _.k(e);const H=_i.open(_.db,e,C?"readonly":"readwrite",a),q=h(H).next(oe=>(H.R(),oe)).catch(oe=>(H.abort(oe),Ze.reject(oe))).toPromise();return q.catch(()=>{}),yield H.A,q}catch(H){const q=H,oe="FirebaseError"!==q.name&&x<3;if(ft("SimpleDb","Transaction failed with error:",q.message,"Retrying:",oe),_.close(),!oe)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Il{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return ps(this.$.delete())}}class qu extends ht{constructor(e,r){super(Je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Oo(s){return"IndexedDbTransactionError"===s.name}class mo{constructor(e){this.store=e}put(e,r){let a;return void 0!==r?(ft("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(ft("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ps(a)}add(e){return ft("SimpleDb","ADD",this.store.name,e,e),ps(this.store.add(e))}get(e){return ps(this.store.get(e)).next(r=>(void 0===r&&(r=null),ft("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ft("SimpleDb","DELETE",this.store.name,e),ps(this.store.delete(e))}count(){return ft("SimpleDb","COUNT",this.store.name),ps(this.store.count())}K(e,r){const a=this.options(e,r);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),_=[];return this.G(h,(C,x)=>{_.push(x)}).next(()=>_)}{const h=this.store.getAll(a.range);return new Ze((_,C)=>{h.onerror=x=>{C(x.target.error)},h.onsuccess=x=>{_(x.target.result)}})}}j(e,r){const a=this.store.getAll(e,null===r?void 0:r);return new Ze((h,_)=>{a.onerror=C=>{_(C.target.error)},a.onsuccess=C=>{h(C.target.result)}})}W(e,r){ft("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,r);a.H=!1;const h=this.cursor(a);return this.G(h,(_,C,x)=>x.delete())}J(e,r){let a;r?a=e:(a={},r=e);const h=this.cursor(a);return this.G(h,r)}Y(e){const r=this.cursor({});return new Ze((a,h)=>{r.onerror=_=>{const C=ko(_.target.error);h(C)},r.onsuccess=_=>{const C=_.target.result;C?e(C.primaryKey,C.value).next(x=>{x?C.continue():a()}):a()}})}G(e,r){const a=[];return new Ze((h,_)=>{e.onerror=C=>{_(C.target.error)},e.onsuccess=C=>{const x=C.target.result;if(!x)return void h();const H=new Il(x),q=r(x.primaryKey,x.value,H);if(q instanceof Ze){const oe=q.catch(Ie=>(H.done(),Ze.reject(Ie)));a.push(oe)}H.isDone?h():null===H.U?x.continue():x.continue(H.U)}}).next(()=>Ze.waitFor(a))}options(e,r){let a;return void 0!==e&&("string"==typeof e?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const a=this.store.index(e.index);return e.H?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ps(s){return new Ze((e,r)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=ko(a.target.error);r(h)}})}let Ku=!1;function ko(s){const e=Vs.v((0,St.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const a=new ht("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ku||(Ku=!0,setTimeout(()=>{throw a},0)),a}}return s}class Zu{constructor(e,r){this.asyncQueue=e,this.X=r,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var r=this;ft("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){r.task=null;try{ft("IndexBackiller",`Documents written: ${yield r.X.tt()}`)}catch(a){Oo(a)?ft("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield bl(a)}yield r.Z(1)}))}}class gf{constructor(e,r){this.localStore=e,this.persistence=r}tt(e=50){var r=this;return(0,Ce.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>r.et(a,e))})()}et(e,r){const a=new Set;let h=r,_=!0;return Ze.doWhile(()=>!0===_&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!a.has(C))return ft("IndexBackiller",`Processing collection: ${C}`),this.nt(e,C,h).next(x=>{h-=x,a.add(C)});_=!1})).next(()=>r-h)}nt(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(h=>this.localStore.localDocuments.getNextDocuments(e,r,h,a).next(_=>{const C=_.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.st(h,_)).next(x=>(ft("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,r,x))).next(()=>C.size)}))}st(e,r){let a=e;return r.changes.forEach((h,_)=>{const C=yp(_);Cu(C,a)>0&&(a=C)}),new Zo(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class Fo{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.it(a),this.rt=a=>r.writeSequenceNumber(a))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function ph(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function Xl(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function za(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}Fo.ot=-1;class ri{constructor(e,r){this.comparator=e,this.root=r||ji.EMPTY}insert(e,r){return new ri(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new ri(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return r+a.left.size;h<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ss(this.root,e,this.comparator,!0)}}class Ss{constructor(e,r,a,h){this.isReverse=h,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=r?a(e.key,r):1,r&&h&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ji{constructor(e,r,a,h,_){this.key=e,this.value=r,this.color=null!=a?a:ji.RED,this.left=null!=h?h:ji.EMPTY,this.right=null!=_?_:ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,h,_){return new ji(null!=e?e:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=_?_:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let h=this;const _=a(e,h.key);return h=_<0?h.copy(null,null,null,h.left.insert(e,r,a),null):0===_?h.copy(null,r,null,null,null):h.copy(null,null,null,null,h.right.insert(e,r,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,h=this;if(r(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===r(e,h.key)){if(h.right.isEmpty())return ji.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1,ji.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(s,e,r,a,h){return this}insert(s,e,r){return new ji(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new ri(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;r(h.key)}}forEachWhile(e,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new mf(this.data.getIterator())}getIteratorFrom(e){return new mf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const h=r.getNext().key,_=a.getNext().key;if(0!==this.comparator(h,_))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new zn(this.comparator);return r.data=e,r}}class mf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qs(s){return s.hasNext()?s.getNext():void 0}class _o{constructor(e){this.fields=e,e.sort(Pr.comparator)}static empty(){return new _o([])}unionWith(e){let r=new zn(Pr.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new _o(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return An(this.fields,e.fields,(r,a)=>r.isEqual(a))}}class Di{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Di(r)}static fromUint8Array(e){const r=function(a){let h="";for(let _=0;_<a.length;++_)h+=String.fromCharCode(a[_]);return h}(e);return new Di(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Di.EMPTY_BYTE_STRING=new Di("");const Iu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(s){if(_n(!!s),"string"==typeof s){let e=0;const r=Iu.exec(s);if(_n(!!r),r[1]){let h=r[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:jr(s.seconds),nanos:jr(s.nanos)}}function jr(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function P(s){return"string"==typeof s?Di.fromBase64String(s):Di.fromUint8Array(s)}function $(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function J(s){const e=s.mapValue.fields.__previous_value__;return $(e)?J(e):e}function fe(s){const e=Yo(s.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}class xe{constructor(e,r,a,h,_,C,x,H){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=h,this.ssl=_,this.forceLongPolling=C,this.autoDetectLongPolling=x,this.useFetchStreams=H}}class He{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new He("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof He&&e.projectId===this.projectId&&e.database===this.database}}function dt(s){return null==s}function Rt(s){return 0===s&&1/s==-1/0}function Gt(s){return"number"==typeof s&&Number.isInteger(s)&&!Rt(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const yn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ln={nullValue:"NULL_VALUE"};function rn(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$(s)?4:qa(s)?9007199254740991:10:Bt()}function tr(s,e){if(s===e)return!0;const r=rn(s);if(r!==rn(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return fe(s).isEqual(fe(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const _=Yo(a.timestampValue),C=Yo(h.timestampValue);return _.seconds===C.seconds&&_.nanos===C.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,P(s.bytesValue).isEqual(P(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return jr(a.geoPointValue.latitude)===jr(h.geoPointValue.latitude)&&jr(a.geoPointValue.longitude)===jr(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return jr(a.integerValue)===jr(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const _=jr(a.doubleValue),C=jr(h.doubleValue);return _===C?Rt(_)===Rt(C):isNaN(_)&&isNaN(C)}return!1}(s,e);case 9:return An(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:return function(a,h){const _=a.mapValue.fields||{},C=h.mapValue.fields||{};if(ph(_)!==ph(C))return!1;for(const x in _)if(_.hasOwnProperty(x)&&(void 0===C[x]||!tr(_[x],C[x])))return!1;return!0}(s,e);default:return Bt()}var h}function Dr(s,e){return void 0!==(s.values||[]).find(r=>tr(r,e))}function is(s,e){if(s===e)return 0;const r=rn(s),a=rn(e);if(r!==a)return gt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return gt(s.booleanValue,e.booleanValue);case 2:return function(h,_){const C=jr(h.integerValue||h.doubleValue),x=jr(_.integerValue||_.doubleValue);return C<x?-1:C>x?1:C===x?0:isNaN(C)?isNaN(x)?0:-1:1}(s,e);case 3:return ii(s.timestampValue,e.timestampValue);case 4:return ii(fe(s),fe(e));case 5:return gt(s.stringValue,e.stringValue);case 6:return function(h,_){const C=P(h),x=P(_);return C.compareTo(x)}(s.bytesValue,e.bytesValue);case 7:return function(h,_){const C=h.split("/"),x=_.split("/");for(let H=0;H<C.length&&H<x.length;H++){const q=gt(C[H],x[H]);if(0!==q)return q}return gt(C.length,x.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,_){const C=gt(jr(h.latitude),jr(_.latitude));return 0!==C?C:gt(jr(h.longitude),jr(_.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,_){const C=h.values||[],x=_.values||[];for(let H=0;H<C.length&&H<x.length;++H){const q=is(C[H],x[H]);if(q)return q}return gt(C.length,x.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,_){if(h===yn.mapValue&&_===yn.mapValue)return 0;if(h===yn.mapValue)return 1;if(_===yn.mapValue)return-1;const C=h.fields||{},x=Object.keys(C),H=_.fields||{},q=Object.keys(H);x.sort(),q.sort();for(let oe=0;oe<x.length&&oe<q.length;++oe){const Ie=gt(x[oe],q[oe]);if(0!==Ie)return Ie;const qe=is(C[x[oe]],H[q[oe]]);if(0!==qe)return qe}return gt(x.length,q.length)}(s.mapValue,e.mapValue);default:throw Bt()}}function ii(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return gt(s,e);const r=Yo(s),a=Yo(e),h=gt(r.seconds,a.seconds);return 0!==h?h:gt(r.nanos,a.nanos)}function gs(s){return Dl(s)}function Dl(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=Yo(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?P(s.bytesValue).toBase64():"referenceValue"in s?Mt.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",_=!0;for(const C of a.values||[])_?_=!1:h+=",",h+=Dl(C);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let _="{",C=!0;for(const x of h)C?C=!1:_+=",",_+=`${x}:${Dl(a.fields[x])}`;return _+"}"}(s.mapValue):Bt();var e}function Us(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Cr(s){return!!s&&"integerValue"in s}function Qo(s){return!!s&&"arrayValue"in s}function Du(s){return!!s&&"nullValue"in s}function Tl(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function md(s){return!!s&&"mapValue"in s}function Sa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Xl(s.mapValue.fields,(r,a)=>e.mapValue.fields[r]=Sa(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Sa(s.arrayValue.values[r]);return e}return Object.assign({},s)}function qa(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sl(s){return"nullValue"in s?Ln:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Us(He.empty(),Mt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Bt()}function Aa(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Us(He.empty(),Mt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?yn:Bt()}function Al(s,e){const r=is(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function _f(s,e){const r=is(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class $i{constructor(e){this.value=e}static empty(){return new $i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!md(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sa(r)}setAll(e){let r=Pr.emptyPath(),a={},h=[];e.forEach((C,x)=>{if(!r.isImmediateParentOf(x)){const H=this.getFieldsMap(r);this.applyChanges(H,a,h),a={},h=[],r=x.popLast()}C?a[x.lastSegment()]=Sa(C):h.push(x.lastSegment())});const _=this.getFieldsMap(r);this.applyChanges(_,a,h)}delete(e){const r=this.field(e.popLast());md(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=r.mapValue.fields[e.get(a)];md(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=h),r=h}return r.mapValue.fields}applyChanges(e,r,a){Xl(r,(h,_)=>e[h]=_);for(const h of a)delete e[h]}clone(){return new $i(Sa(this.value))}}function ec(s){const e=[];return Xl(s.fields,(r,a)=>{const h=new Pr([r]);if(md(a)){const _=ec(a.mapValue).fields;if(0===_.length)e.push(h);else for(const C of _)e.push(h.child(C))}else e.push(h)}),new _o(e)}class si{constructor(e,r,a,h,_,C){this.key=e,this.documentType=r,this.version=a,this.readTime=h,this.data=_,this.documentState=C}static newInvalidDocument(e){return new si(e,0,Ht.min(),Ht.min(),$i.empty(),0)}static newFoundDocument(e,r,a){return new si(e,1,r,Ht.min(),a,0)}static newNoDocument(e,r){return new si(e,2,r,Ht.min(),$i.empty(),0)}static newUnknownDocument(e,r){return new si(e,3,r,Ht.min(),$i.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _d{constructor(e,r=null,a=[],h=[],_=null,C=null,x=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=h,this.limit=_,this.startAt=C,this.endAt=x,this.ut=null}}function tc(s,e=null,r=[],a=[],h=null,_=null,C=null){return new _d(s,e,r,a,h,_,C)}function ga(s){const e=Lt(s);if(null===e.ut){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+gs(h.value);var h}).join(","),r+="|ob:",r+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),dt(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>gs(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>gs(a)).join(",")),e.ut=r}return e.ut}function xl(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!Ep(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((r=s.filters[h]).op!==(a=e.filters[h]).op||!r.field.isEqual(a.field)||!tr(r.value,a.value))return!1;var r,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!yf(s.startAt,e.startAt)&&yf(s.endAt,e.endAt)}function gh(s){return Mt.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Rl(s,e){return s.filters.filter(r=>r instanceof ms&&r.field.isEqual(e))}function Nc(s,e,r){let a=Ln,h=!0;for(const _ of Rl(s,e)){let C=Ln,x=!0;switch(_.op){case"<":case"<=":C=Sl(_.value);break;case"==":case"in":case">=":C=_.value;break;case">":C=_.value,x=!1;break;case"!=":case"not-in":C=Ln}Al({value:a,inclusive:h},{value:C,inclusive:x})<0&&(a=C,h=x)}if(null!==r)for(let _=0;_<s.orderBy.length;++_)if(s.orderBy[_].field.isEqual(e)){const C=r.position[_];Al({value:a,inclusive:h},{value:C,inclusive:r.inclusive})<0&&(a=C,h=r.inclusive);break}return{value:a,inclusive:h}}function mh(s,e,r){let a=yn,h=!0;for(const _ of Rl(s,e)){let C=yn,x=!0;switch(_.op){case">=":case">":C=Aa(_.value),x=!1;break;case"==":case"in":case"<=":C=_.value;break;case"<":C=_.value,x=!1;break;case"!=":case"not-in":C=yn}_f({value:a,inclusive:h},{value:C,inclusive:x})>0&&(a=C,h=x)}if(null!==r)for(let _=0;_<s.orderBy.length;++_)if(s.orderBy[_].field.isEqual(e)){const C=r.position[_];_f({value:a,inclusive:h},{value:C,inclusive:r.inclusive})>0&&(a=C,h=r.inclusive);break}return{value:a,inclusive:h}}class ms extends class{}{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?"in"===r||"not-in"===r?this.ct(e,r,a):new _h(e,r,a):"array-contains"===r?new Nl(e,a):"in"===r?new yg(e,a):"not-in"===r?new yh(e,a):"array-contains-any"===r?new vh(e,a):new ms(e,r,a)}static ct(e,r,a){return"in"===r?new vp(e,a):new nc(e,a)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.at(is(r,this.value)):null!==r&&rn(this.value)===rn(r)&&this.at(is(r,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _h extends ms{constructor(e,r,a){super(e,r,a),this.key=Mt.fromName(a.referenceValue)}matches(e){const r=Mt.comparator(e.key,this.key);return this.at(r)}}class vp extends ms{constructor(e,r){super(e,"in",r),this.keys=yd(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class nc extends ms{constructor(e,r){super(e,"not-in",r),this.keys=yd(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function yd(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>Mt.fromName(a.referenceValue))}class Nl extends ms{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Qo(r)&&Dr(r.arrayValue,this.value)}}class yg extends ms{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Dr(this.value.arrayValue,r)}}class yh extends ms{constructor(e,r){super(e,"not-in",r)}matches(e){if(Dr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Dr(this.value.arrayValue,r)}}class vh extends ms{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Qo(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Dr(this.value.arrayValue,a))}}class ma{constructor(e,r){this.position=e,this.inclusive=r}}class Ml{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ep(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function Mc(s,e,r){let a=0;for(let h=0;h<s.position.length;h++){const _=e[h],C=s.position[h];if(a=_.field.isKeyField()?Mt.comparator(Mt.fromName(C.referenceValue),r.key):is(C,r.data.field(_.field)),"desc"===_.dir&&(a*=-1),0!==a)break}return a}function yf(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!tr(s.position[r],e.position[r]))return!1;return!0}class Lo{constructor(e,r=null,a=[],h=[],_=null,C="F",x=null,H=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=h,this.limit=_,this.limitType=C,this.startAt=x,this.endAt=H,this.lt=null,this.ft=null}}function vf(s,e,r,a,h,_,C,x){return new Lo(s,e,r,a,h,_,C,x)}function rc(s){return new Lo(s)}function Eh(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function Ef(s){for(const e of s.filters)if(e.ht())return e.field;return null}function Ka(s){return null!==s.collectionGroup}function Za(s){const e=Lt(s);if(null===e.lt){e.lt=[];const r=Ef(e),a=Eh(e);if(null!==r&&null===a)r.isKeyField()||e.lt.push(new Ml(r)),e.lt.push(new Ml(Pr.keyField(),"asc"));else{let h=!1;for(const _ of e.explicitOrderBy)e.lt.push(_),_.field.isKeyField()&&(h=!0);if(!h){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ml(Pr.keyField(),_))}}}return e.lt}function _a(s){const e=Lt(s);if(!e.ft)if("F"===e.limitType)e.ft=tc(e.path,e.collectionGroup,Za(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const _ of Za(e))r.push(new Ml(_.field,"desc"===_.dir?"asc":"desc"));const a=e.endAt?new ma(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new ma(e.startAt.position,e.startAt.inclusive):null;e.ft=tc(e.path,e.collectionGroup,r,e.filters,e.limit,a,h)}return e.ft}function wp(s,e,r){return new Lo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function Pc(s,e){return xl(_a(s),_a(e))&&s.limitType===e.limitType}function wf(s){return`${ga(_a(s))}|lt:${s.limitType}`}function Ed(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${gs(a.value)}`;var a}).join(", ")}]`),dt(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>gs(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>gs(r)).join(",")),`Target(${e})`}(_a(s))}; limitType=${s.limitType})`}function Cf(s,e){return e.isFoundDocument()&&function(r,a){const h=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):Mt.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,e)&&function(r,a){for(const h of r.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(r,a){for(const h of r.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((r=s).startAt&&!function(h,_,C){const x=Mc(h,_,C);return h.inclusive?x<=0:x<0}(r.startAt,Za(r),a)||r.endAt&&!function(h,_,C){const x=Mc(h,_,C);return h.inclusive?x>=0:x>0}(r.endAt,Za(r),a)));var r,a}function bf(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Yu(s){return(e,r)=>{let a=!1;for(const h of Za(s)){const _=If(h,e,r);if(0!==_)return _;a=a||h.field.isKeyField()}return 0}}function If(s,e,r){const a=s.field.isKeyField()?Mt.comparator(e.key,r.key):function(h,_,C){const x=_.data.field(h),H=C.data.field(h);return null!==x&&null!==H?is(x,H):Bt()}(s.field,e,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Bt()}}function Cp(s,e){if(s.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rt(e)?"-0":e}}function Df(s){return{integerValue:""+s}}function wh(s,e){return Gt(e)?Df(e):Cp(s,e)}class Qu{constructor(){this._=void 0}}function Oc(s,e,r){return s instanceof Tu?function(a,h){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(_.fields.__previous_value__=h),{mapValue:_}}(r,e):s instanceof Su?wd(s,e):s instanceof Au?vg(s,e):function(a,h){const _=ya(a,h),C=Eg(_)+Eg(a._t);return Cr(_)&&Cr(a._t)?Df(C):Cp(a.wt,C)}(s,e)}function bp(s,e,r){return s instanceof Su?wd(s,e):s instanceof Au?vg(s,e):r}function ya(s,e){return s instanceof Pl?Cr(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var a,r}class Tu extends Qu{}class Su extends Qu{constructor(e){super(),this.elements=e}}function wd(s,e){const r=kc(e);for(const a of s.elements)r.some(h=>tr(h,a))||r.push(a);return{arrayValue:{values:r}}}class Au extends Qu{constructor(e){super(),this.elements=e}}function vg(s,e){let r=kc(e);for(const a of s.elements)r=r.filter(h=>!tr(h,a));return{arrayValue:{values:r}}}class Pl extends Qu{constructor(e,r){super(),this.wt=e,this._t=r}}function Eg(s){return jr(s.integerValue||s.doubleValue)}function kc(s){return Qo(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Ju{constructor(e,r){this.field=e,this.transform=r}}class wg{constructor(e,r){this.version=e,this.transformResults=r}}class Zi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class Ya{}function Tf(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new kl(s.key,Zi.none()):new hr(s.key,s.data,Zi.none());{const r=s.data,a=$i.empty();let h=new zn(Pr.comparator);for(let _ of e.fields)if(!h.has(_)){let C=r.field(_);null===C&&_.length>1&&(_=_.popLast(),C=r.field(_)),null===C?a.delete(_):a.set(_,C),h=h.add(_)}return new xn(s.key,a,new _o(h.toArray()),Zi.none())}}function bh(s,e,r){s instanceof hr?function(a,h,_){const C=a.value.clone(),x=Rn(a.fieldTransforms,h,_.transformResults);C.setAll(x),h.convertToFoundDocument(_.version,C).setHasCommittedMutations()}(s,e,r):s instanceof xn?function(a,h,_){if(!Cd(a.precondition,h))return void h.convertToUnknownDocument(_.version);const C=Rn(a.fieldTransforms,h,_.transformResults),x=h.data;x.setAll(Qa(a)),x.setAll(C),h.convertToFoundDocument(_.version,x).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Ol(s,e,r,a){return s instanceof hr?function(h,_,C,x){if(!Cd(h.precondition,_))return C;const H=h.value.clone(),q=Ih(h.fieldTransforms,x,_);return H.setAll(q),_.convertToFoundDocument(_.version,H).setHasLocalMutations(),null}(s,e,r,a):s instanceof xn?function(h,_,C,x){if(!Cd(h.precondition,_))return C;const H=Ih(h.fieldTransforms,x,_),q=_.data;return q.setAll(Qa(h)),q.setAll(H),_.convertToFoundDocument(_.version,q).setHasLocalMutations(),null===C?null:C.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(oe=>oe.field))}(s,e,r,a):(C=r,Cd(s.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):C);var _,C}function Sf(s,e){let r=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),_=ya(a.transform,h||null);null!=_&&(null===r&&(r=$i.empty()),r.set(a.field,_))}return r||null}function mr(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===a||r&&a&&An(r,a,(h,_)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(r=s.transform)instanceof Su&&a instanceof Su||r instanceof Au&&a instanceof Au?An(r.elements,a.elements,tr):r instanceof Pl&&a instanceof Pl?tr(r._t,a._t):r instanceof Tu&&a instanceof Tu);var r,a}(h,_))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,a}class hr extends Ya{constructor(e,r,a,h=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class xn extends Ya{constructor(e,r,a,h,_=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=h,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function Qa(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);e.set(r,a)}}),e}function Rn(s,e,r){const a=new Map;_n(s.length===r.length);for(let h=0;h<r.length;h++){const _=s[h],C=_.transform,x=e.data.field(_.field);a.set(_.field,bp(C,x,r[h]))}return a}function Ih(s,e,r){const a=new Map;for(const h of s){const _=h.transform,C=r.data.field(h.field);a.set(h.field,Oc(_,C,e))}return a}class kl extends Ya{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xu extends Ya{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Af{constructor(e){this.count=e}}var Kn,$t;function yo(s){switch(s){default:return Bt();case Je.CANCELLED:case Je.UNKNOWN:case Je.DEADLINE_EXCEEDED:case Je.RESOURCE_EXHAUSTED:case Je.INTERNAL:case Je.UNAVAILABLE:case Je.UNAUTHENTICATED:return!1;case Je.INVALID_ARGUMENT:case Je.NOT_FOUND:case Je.ALREADY_EXISTS:case Je.PERMISSION_DENIED:case Je.FAILED_PRECONDITION:case Je.ABORTED:case Je.OUT_OF_RANGE:case Je.UNIMPLEMENTED:case Je.DATA_LOSS:return!0}}function xf(s){if(void 0===s)return Br("GRPC error has no .code"),Je.UNKNOWN;switch(s){case Kn.OK:return Je.OK;case Kn.CANCELLED:return Je.CANCELLED;case Kn.UNKNOWN:return Je.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return Je.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return Je.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return Je.INTERNAL;case Kn.UNAVAILABLE:return Je.UNAVAILABLE;case Kn.UNAUTHENTICATED:return Je.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return Je.INVALID_ARGUMENT;case Kn.NOT_FOUND:return Je.NOT_FOUND;case Kn.ALREADY_EXISTS:return Je.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return Je.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return Je.FAILED_PRECONDITION;case Kn.ABORTED:return Je.ABORTED;case Kn.OUT_OF_RANGE:return Je.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return Je.UNIMPLEMENTED;case Kn.DATA_LOSS:return Je.DATA_LOSS;default:return Bt()}}($t=Kn||(Kn={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class xa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a)for(const[h,_]of a)if(this.equalsFn(h,e))return _}has(e){return void 0!==this.get(e)}set(e,r){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,r]],void this.innerSize++;for(let _=0;_<h.length;_++)if(this.equalsFn(h[_][0],e))return void(h[_]=[e,r]);h.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[r]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Xl(this.inner,(r,a)=>{for(const[h,_]of a)e(h,_)})}isEmpty(){return za(this.inner)}size(){return this.innerSize}}const Ja=new ri(Mt.comparator);function va(){return Ja}const Fl=new ri(Mt.comparator);function ss(...s){let e=Fl;for(const r of s)e=e.insert(r.key,r);return e}function bd(s){let e=Fl;return s.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function Js(){return Ti()}function Ll(){return Ti()}function Ti(){return new xa(s=>s.toString(),(s,e)=>s.isEqual(e))}const Id=new ri(Mt.comparator),Dh=new zn(Mt.comparator);function Qn(...s){let e=Dh;for(const r of s)e=e.add(r);return e}const Cg=new zn(gt);function Dd(){return Cg}class Fc{constructor(e,r,a,h,_){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,r){const a=new Map;return a.set(e,Ra.createSynthesizedTargetChangeForCurrentChange(e,r)),new Fc(Ht.min(),a,Dd(),va(),Qn())}}class Ra{constructor(e,r,a,h,_){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,r){return new Ra(Di.EMPTY_BYTE_STRING,r,Qn(),Qn(),Qn())}}class jn{constructor(e,r,a,h){this.gt=e,this.removedTargetIds=r,this.key=a,this.yt=h}}class Lc{constructor(e,r){this.targetId=e,this.It=r}}class Vc{constructor(e,r,a=Di.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=h}}class Rf{constructor(){this.Tt=0,this.Et=Jo(),this.At=Di.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Qn(),r=Qn(),a=Qn();return this.Et.forEach((h,_)=>{switch(_){case 0:e=e.add(h);break;case 2:r=r.add(h);break;case 1:a=a.add(h);break;default:Bt()}}),new Ra(this.At,this.Rt,e,r,a)}Dt(){this.bt=!1,this.Et=Jo()}Ct(e,r){this.bt=!0,this.Et=this.Et.insert(e,r)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class xu{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=va(),this.Bt=Uc(),this.Lt=new zn(gt)}Ut(e){for(const r of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt);for(const r of e.removedTargetIds)this.Kt(r,e.key,e.yt)}Gt(e){this.forEachTarget(e,r=>{const a=this.Qt(r);switch(e.state){case 0:this.jt(r)&&a.Vt(e.resumeToken);break;case 1:a.kt(),a.Pt||a.Dt(),a.Vt(e.resumeToken);break;case 2:a.kt(),a.Pt||this.removeTarget(r);break;case 3:this.jt(r)&&(a.Ot(),a.Vt(e.resumeToken));break;case 4:this.jt(r)&&(this.Wt(r),a.Vt(e.resumeToken));break;default:Bt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Ft.forEach((a,h)=>{this.jt(h)&&r(h)})}zt(e){const r=e.targetId,a=e.It.count,h=this.Ht(r);if(h){const _=h.target;if(gh(_))if(0===a){const C=new Mt(_.path);this.Kt(r,C,si.newNoDocument(C,Ht.min()))}else _n(1===a);else this.Jt(r)!==a&&(this.Wt(r),this.Lt=this.Lt.add(r))}}Yt(e){const r=new Map;this.Ft.forEach((_,C)=>{const x=this.Ht(C);if(x){if(_.current&&gh(x.target)){const H=new Mt(x.target.path);null!==this.$t.get(H)||this.Xt(C,H)||this.Kt(C,H,si.newNoDocument(H,e))}_.vt&&(r.set(C,_.St()),_.Dt())}});let a=Qn();this.Bt.forEach((_,C)=>{let x=!0;C.forEachWhile(H=>{const q=this.Ht(H);return!q||2===q.purpose||(x=!1,!1)}),x&&(a=a.add(_))}),this.$t.forEach((_,C)=>C.setReadTime(e));const h=new Fc(e,r,this.Lt,this.$t,a);return this.$t=va(),this.Bt=Uc(),this.Lt=new zn(gt),h}qt(e,r){if(!this.jt(e))return;const a=this.Xt(e,r.key)?2:0;this.Qt(e).Ct(r.key,a),this.$t=this.$t.insert(r.key,r),this.Bt=this.Bt.insert(r.key,this.Zt(r.key).add(e))}Kt(e,r,a){if(!this.jt(e))return;const h=this.Qt(e);this.Xt(e,r)?h.Ct(r,1):h.xt(r),this.Bt=this.Bt.insert(r,this.Zt(r).delete(e)),a&&(this.$t=this.$t.insert(r,a))}removeTarget(e){this.Ft.delete(e)}Jt(e){const r=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let r=this.Ft.get(e);return r||(r=new Rf,this.Ft.set(e,r)),r}Zt(e){let r=this.Bt.get(e);return r||(r=new zn(gt),this.Bt=this.Bt.insert(e,r)),r}jt(e){const r=null!==this.Ht(e);return r||ft("WatchChangeAggregator","Detected inactive target",e),r}Ht(e){const r=this.Ft.get(e);return r&&r.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Rf),this.Mt.getRemoteKeysForTarget(e).forEach(r=>{this.Kt(e,r,null)})}Xt(e,r){return this.Mt.getRemoteKeysForTarget(e).has(r)}}function Uc(){return new ri(Mt.comparator)}function Jo(){return new ri(Mt.comparator)}const Nf={asc:"ASCENDING",desc:"DESCENDING"},vo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ip{constructor(e,r){this.databaseId=e,this.dt=r}}function el(s,e){return s.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ic(s,e){return s.dt?e.toBase64():e.toUint8Array()}function Mf(s,e){return el(s,e.toTimestamp())}function As(s){return _n(!!s),Ht.fromTimestamp(function(e){const r=Yo(e);return new Gn(r.seconds,r.nanos)}(s))}function os(s,e){return(r=s,new Wn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function sc(s){const e=Wn.fromString(s);return _n(Sh(e)),e}function Xa(s,e){return os(s.databaseId,e.path)}function eu(s,e){const r=sc(e);if(r.get(1)!==s.databaseId.projectId)throw new ht(Je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new ht(Je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Mt(Xo(r))}function Bc(s,e){return os(s.databaseId,e)}function Th(s){const e=sc(s);return 4===e.length?Wn.emptyPath():Xo(e)}function Vl(s){return new Wn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Xo(s){return _n(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function Kr(s,e,r){return{name:Xa(s,e),fields:r.value.mapValue.fields}}function tl(s,e,r){const a=eu(s,e.name),h=As(e.updateTime),_=new $i({mapValue:{fields:e.fields}}),C=si.newFoundDocument(a,h,_);return r&&C.setHasCommittedMutations(),r?C.setHasCommittedMutations():C}function jc(s,e){let r;if(e instanceof hr)r={update:Kr(s,e.key,e.value)};else if(e instanceof kl)r={delete:Xa(s,e.key)};else if(e instanceof xn)r={update:Kr(s,e.key,e.data),updateMask:Tp(e.fieldMask)};else{if(!(e instanceof Xu))return Bt();r={verify:Xa(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(h,_){const C=_.transform;if(C instanceof Tu)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Su)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof Au)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Pl)return{fieldPath:_.field.canonicalString(),increment:C._t};throw Bt()}(0,a))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Mf(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Bt()),r;var h}function nl(s,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Zi.updateTime(As(h.updateTime)):void 0!==h.exists?Zi.exists(h.exists):Zi.none():Zi.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(_,C){let x=null;"setToServerValue"in C?(_n("REQUEST_TIME"===C.setToServerValue),x=new Tu):"appendMissingElements"in C?x=new Su(C.appendMissingElements.values||[]):"removeAllFromArray"in C?x=new Au(C.removeAllFromArray.values||[]):"increment"in C?x=new Pl(_,C.increment):Bt();const H=Pr.fromServerFormat(C.fieldPath);return new Ju(H,x)}(s,h)):[];var h;if(e.update){const h=eu(s,e.update.name),_=new $i({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new _o((e.updateMask.fieldPaths||[]).map(q=>Pr.fromServerFormat(q)));return new xn(h,_,C,r,a)}return new hr(h,_,r,a)}if(e.delete){const h=eu(s,e.delete);return new kl(h,r)}if(e.verify){const h=eu(s,e.verify);return new Xu(h,r)}return Bt()}function xs(s,e){return{documents:[Bc(s,e.path)]}}function Vn(s,e){const r={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(r.parent=Bc(s,a),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=Bc(s,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(H){if(0===H.length)return;const q=H.map(oe=>function(Ie){if("=="===Ie.op){if(Tl(Ie.value))return{unaryFilter:{field:$c(Ie.field),op:"IS_NAN"}};if(Du(Ie.value))return{unaryFilter:{field:$c(Ie.field),op:"IS_NULL"}}}else if("!="===Ie.op){if(Tl(Ie.value))return{unaryFilter:{field:$c(Ie.field),op:"IS_NOT_NAN"}};if(Du(Ie.value))return{unaryFilter:{field:$c(Ie.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(Ie.field),op:Sd(Ie.op),value:Ie.value}}}(oe));return 1===q.length?q[0]:{compositeFilter:{op:"AND",filters:q}}}(e.filters);h&&(r.structuredQuery.where=h);const _=function(H){if(0!==H.length)return H.map(q=>{return{field:$c((oe=q).field),direction:li(oe.dir)};var oe})}(e.orderBy);_&&(r.structuredQuery.orderBy=_);const C=(q=e.limit,s.dt||dt(q)?q:{value:q});var q,x,H;return null!==C&&(r.structuredQuery.limit=C),e.startAt&&(r.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(r.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),r}function rl(s){let e=Th(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let h=null;if(a>0){_n(1===a);const oe=r.from[0];oe.allDescendants?h=oe.collectionId:e=e.child(oe.collectionId)}let _=[];r.where&&(_=il(r.where));let C=[];r.orderBy&&(C=r.orderBy.map(oe=>{return new Ml(Xs((Ie=oe).field),function(qe){switch(qe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ie.direction));var Ie}));let x=null;r.limit&&(x=function(oe){let Ie;return Ie="object"==typeof oe?oe.value:oe,dt(Ie)?null:Ie}(r.limit));let H=null;var oe;r.startAt&&(H=new ma((oe=r.startAt).values||[],!!oe.before));let q=null;return r.endAt&&(q=function(oe){return new ma(oe.values||[],!oe.before)}(r.endAt)),vf(e,h,C,_,x,"F",H,q)}function il(s){return s?void 0!==s.unaryFilter?[Ad(s)]:void 0!==s.fieldFilter?[Nu(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>il(e)).reduce((e,r)=>e.concat(r)):Bt():[]}function li(s){return Nf[s]}function Sd(s){return vo[s]}function $c(s){return{fieldPath:s.canonicalString()}}function Xs(s){return Pr.fromServerFormat(s.fieldPath)}function Nu(s){return ms.create(Xs(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(s.fieldFilter.op),s.fieldFilter.value)}function Ad(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Xs(s.unaryFilter.field);return ms.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Xs(s.unaryFilter.field);return ms.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Xs(s.unaryFilter.field);return ms.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Xs(s.unaryFilter.field);return ms.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}function Tp(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Sh(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Rs(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=g(e)),e=E(s.get(r),e);return g(e)}function E(s,e){let r=e;const a=s.length;for(let h=0;h<a;h++){const _=s.charAt(h);switch(_){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=_}}return r}function g(s){return s+"\x01\x01"}function m(s){const e=s.length;if(_n(e>=2),2===e)return _n("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Wn.emptyPath();const r=e-2,a=[];let h="";for(let _=0;_<e;){const C=s.indexOf("\x01",_);switch((C<0||C>r)&&Bt(),s.charAt(C+1)){case"\x01":const x=s.substring(_,C);let H;0===h.length?H=x:(h+=x,H=h,h=""),a.push(H);break;case"\x10":h+=s.substring(_,C),h+="\0";break;case"\x11":h+=s.substring(_,C+1);break;default:Bt()}_=C+2}return new Wn(a)}const b=["userId","batchId"];function j(s,e){return[s,Rs(e)]}function Z(s,e,r){return[s,Rs(e),r]}const ye={},Ue=["prefixPath","collectionGroup","readTime","documentId"],wt=["prefixPath","collectionGroup","documentId"],mt=["collectionGroup","readTime","prefixPath","documentId"],zt=["canonicalId","targetId"],Xt=["targetId","path"],_r=["path","targetId"],Bs=["collectionId","parent"],Mu=["indexId","uid"],Ah=["uid","sequenceNumber"],xd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Pf=["indexId","uid","orderedDocumentKey"],oc=["userId","collectionPath","documentId"],Rd=["userId","collectionPath","largestBatchId"],Nd=["userId","collectionGroup","largestBatchId"],Hc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Of=[...Hc,"documentOverlays"],ac=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ul=ac,tu=[...Ul,"indexConfiguration","indexState","indexEntries"];class Gc extends pf{constructor(e,r){super(),this.ee=e,this.currentSequenceNumber=r}}function eo(s,e){const r=Lt(s);return Vs.N(r.ee,e)}class bg{constructor(e,r,a,h){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let h=0;h<this.mutations.length;h++){const _=this.mutations[h];_.key.isEqual(e.key)&&bh(_,e,a[h])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=Ol(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=Ol(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=Ll();return this.mutations.forEach(h=>{const _=e.get(h.key),C=_.overlayedDocument;let x=this.applyToLocalView(C,_.mutatedFields);x=r.has(h.key)?null:x;const H=Tf(C,x);null!==H&&a.set(h.key,H),C.isValidDocument()||C.convertToNoDocument(Ht.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Qn())}isEqual(e){return this.batchId===e.batchId&&An(this.mutations,e.mutations,(r,a)=>mr(r,a))&&An(this.baseMutations,e.baseMutations,(r,a)=>mr(r,a))}}class Md{constructor(e,r,a,h){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=h}static from(e,r,a){_n(e.mutations.length===a.length);let h=Id;const _=e.mutations;for(let C=0;C<_.length;C++)h=h.insert(_[C].key,a[C].version);return new Md(e,r,a,h)}}class Ig{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uc{constructor(e,r,a,h,_=Ht.min(),C=Ht.min(),x=Di.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=x}withSequenceNumber(e){return new uc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Dg{constructor(e){this.ne=e}}function xh(s,e){const r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Pd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Xa(h=s.ne,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:el(h,_.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:Pu(e.version)};else{if(!e.isUnknownDocument())return Bt();a.unknownDocument={path:r.path.toArray(),version:Pu(e.version)}}var h,_;return a}function Pd(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Pu(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ru(s){const e=new Gn(s.seconds,s.nanoseconds);return Ht.fromTimestamp(e)}function Ou(s,e){const r=(e.baseMutations||[]).map(_=>nl(s.ne,_));for(let _=0;_<e.mutations.length-1;++_){const C=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(C.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const a=e.mutations.map(_=>nl(s.ne,_)),h=Gn.fromMillis(e.localWriteTimeMs);return new bg(e.batchId,h,r,a)}function iu(s){const e=ru(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?ru(s.lastLimboFreeSnapshotVersion):Ht.min();let a;var h;return void 0!==s.query.documents?(_n(1===(h=s.query).documents.length),a=_a(rc(Th(h.documents[0])))):a=_a(rl(s.query)),new uc(a,s.targetId,0,s.lastListenSequenceNumber,e,r,Di.fromBase64String(s.resumeToken))}function Wc(s,e){const r=Pu(e.snapshotVersion),a=Pu(e.lastLimboFreeSnapshotVersion);let h;h=gh(e.target)?xs(s.ne,e.target):Vn(s.ne,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ga(e.target),readTime:r,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function ku(s){const e=rl({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?wp(e,e.limit,"L"):e}function Od(s,e){return new Ig(e.largestBatchId,nl(s.ne,e.overlayMutation))}function Om(s,e){const r=e.path.lastSegment();return[s,Rs(e.path.popLast()),r]}function kd(s,e,r,a){return{indexId:s,uid:e.uid||"",sequenceNumber:r,readTime:Pu(a.readTime),documentKey:Rs(a.documentKey.path),largestBatchId:a.largestBatchId}}class H_{getBundleMetadata(e,r){return km(e).get(r).next(a=>{if(a)return{id:(h=a).bundleId,createTime:ru(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return km(e).put({bundleId:(a=r).id,createTime:Pu(As(a.createTime)),version:a.version});var a}getNamedQuery(e,r){return Rh(e).get(r).next(a=>{if(a)return{name:(h=a).name,query:ku(h.bundledQuery),readTime:ru(h.readTime)};var h})}saveNamedQuery(e,r){return Rh(e).put({name:(a=r).name,readTime:Pu(As(a.readTime)),bundledQuery:a.bundledQuery});var a}}function km(s){return eo(s,"bundles")}function Rh(s){return eo(s,"namedQueries")}class Bl{constructor(e,r){this.wt=e,this.userId=r}static se(e,r){return new Bl(e,r.uid||"")}getOverlay(e,r){return Fd(e).get(Om(this.userId,r)).next(a=>a?Od(this.wt,a):null)}getOverlays(e,r){const a=Js();return Ze.forEach(r,h=>this.getOverlay(e,h).next(_=>{null!==_&&a.set(h,_)})).next(()=>a)}saveOverlays(e,r,a){const h=[];return a.forEach((_,C)=>{const x=new Ig(r,C);h.push(this.ie(e,x))}),Ze.waitFor(h)}removeOverlaysForBatchId(e,r,a){const h=new Set;r.forEach(C=>h.add(Rs(C.getCollectionPath())));const _=[];return h.forEach(C=>{const x=IDBKeyRange.bound([this.userId,C,a],[this.userId,C,a+1],!1,!0);_.push(Fd(e).W("collectionPathOverlayIndex",x))}),Ze.waitFor(_)}getOverlaysForCollection(e,r,a){const h=Js(),_=Rs(r),C=IDBKeyRange.bound([this.userId,_,a],[this.userId,_,Number.POSITIVE_INFINITY],!0);return Fd(e).K("collectionPathOverlayIndex",C).next(x=>{for(const H of x){const q=Od(this.wt,H);h.set(q.getKey(),q)}return h})}getOverlaysForCollectionGroup(e,r,a,h){const _=Js();let C;const x=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Fd(e).J({index:"collectionGroupOverlayIndex",range:x},(H,q,oe)=>{const Ie=Od(this.wt,q);_.size()<h||Ie.largestBatchId===C?(_.set(Ie.getKey(),Ie),C=Ie.largestBatchId):oe.done()}).next(()=>_)}ie(e,r){return Fd(e).put(function(a,h,_){const[C,x,H]=Om(h,_.mutation.key);return{userId:h,collectionPath:x,documentId:H,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:jc(a.ne,_.mutation)}}(this.wt,this.userId,r))}}function Fd(s){return eo(s,"documentOverlays")}class lc{constructor(){}re(e,r){this.oe(e,r),r.ue()}oe(e,r){if("nullValue"in e)this.ce(r,5);else if("booleanValue"in e)this.ce(r,10),r.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(r,15),r.ae(jr(e.integerValue));else if("doubleValue"in e){const a=jr(e.doubleValue);isNaN(a)?this.ce(r,13):(this.ce(r,15),Rt(a)?r.ae(0):r.ae(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ce(r,20),"string"==typeof a?r.he(a):(r.he(`${a.seconds||""}`),r.ae(a.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,r),this.fe(r);else if("bytesValue"in e)this.ce(r,30),r.de(P(e.bytesValue)),this.fe(r);else if("referenceValue"in e)this._e(e.referenceValue,r);else if("geoPointValue"in e){const a=e.geoPointValue;this.ce(r,45),r.ae(a.latitude||0),r.ae(a.longitude||0)}else"mapValue"in e?qa(e)?this.ce(r,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,r),this.fe(r)):"arrayValue"in e?(this.me(e.arrayValue,r),this.fe(r)):Bt()}le(e,r){this.ce(r,25),this.ge(e,r)}ge(e,r){r.he(e)}we(e,r){const a=e.fields||{};this.ce(r,55);for(const h of Object.keys(a))this.le(h,r),this.oe(a[h],r)}me(e,r){const a=e.values||[];this.ce(r,50);for(const h of a)this.oe(h,r)}_e(e,r){this.ce(r,37),Mt.fromName(e).path.forEach(a=>{this.ce(r,60),this.ge(a,r)})}ce(e,r){e.ae(r)}fe(e){e.ae(2)}}function zc(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Sp(s){const e=64-function(r){let a=0;for(let h=0;h<8;++h){const _=zc(255&r[h]);if(a+=_,8!==_)break}return a}(s);return Math.ceil(e/8)}lc.ye=new lc;class Fm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ie(a.value),a=r.next();this.Te()}Ee(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ae(a.value),a=r.next();this.Re()}be(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ie(a);else if(a<2048)this.Ie(960|a>>>6),this.Ie(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a);else{const h=r.codePointAt(0);this.Ie(240|h>>>18),this.Ie(128|63&h>>>12),this.Ie(128|63&h>>>6),this.Ie(128|63&h)}}this.Te()}Pe(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=r.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}ve(e){const r=this.Ve(e),a=Sp(r);this.Se(1+a),this.buffer[this.position++]=255&a;for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=255&r[h]}De(e){const r=this.Ve(e),a=Sp(r);this.Se(1+a),this.buffer[this.position++]=~(255&a);for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=~(255&r[h])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const r=function(h){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,h,!1),new Uint8Array(_.buffer)}(e),a=0!=(128&r[0]);r[0]^=a?255:128;for(let h=1;h<r.length;++h)r[h]^=a?255:0;return r}Ie(e){const r=255&e;0===r?(this.xe(0),this.xe(255)):255===r?(this.xe(255),this.xe(0)):this.xe(r)}Ae(e){const r=255&e;0===r?(this.ke(0),this.ke(255)):255===r?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class Si{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class sl{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class to{constructor(){this.Me=new Fm,this.Fe=new Si(this.Me),this.$e=new sl(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class cc{constructor(e,r,a,h){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=h}Le(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new cc(this.indexId,this.documentKey,this.arrayValue,a)}}function dc(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=Ap(s.arrayValue,e.arrayValue),0!==r?r:(r=Ap(s.directionalValue,e.directionalValue),0!==r?r:Mt.comparator(s.documentKey,e.documentKey)))}function Ap(s,e){for(let r=0;r<s.length&&r<e.length;++r){const a=s[r]-e[r];if(0!==a)return a}return s.length-e.length}class Ld{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const r of e.filters){const a=r;a.ht()?this.Ke=a:this.qe.push(a)}}Ge(e){const r=Ql(e);if(void 0!==r&&!this.Qe(r))return!1;const a=wu(e);let h=0,_=0;for(;h<a.length&&this.Qe(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.Ke){const C=a[h];if(!this.je(this.Ke,C)||!this.We(this.Ue[_++],C))return!1;++h}for(;h<a.length;++h){const C=a[h];if(_>=this.Ue.length||!this.We(this.Ue[_++],C))return!1}return!0}Qe(e){for(const r of this.qe)if(this.je(r,e))return!0;return!1}je(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class Lm{constructor(){this.ze=new jl}addToCollectionParentIndex(e,r){return this.ze.add(r),Ze.resolve()}getCollectionParents(e,r){return Ze.resolve(this.ze.getEntries(r))}addFieldIndex(e,r){return Ze.resolve()}deleteFieldIndex(e,r){return Ze.resolve()}getDocumentsMatchingTarget(e,r){return Ze.resolve(null)}getIndexType(e,r){return Ze.resolve(0)}getFieldIndexes(e,r){return Ze.resolve([])}getNextCollectionGroupToUpdate(e){return Ze.resolve(null)}getMinOffset(e,r){return Ze.resolve(Zo.min())}getMinOffsetFromCollectionGroup(e,r){return Ze.resolve(Zo.min())}updateCollectionGroup(e,r,a){return Ze.resolve()}updateIndexEntries(e,r){return Ze.resolve()}}class jl{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r]||new zn(Wn.comparator),_=!h.has(a);return this.index[r]=h.add(a),_}has(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r];return h&&h.has(a)}getEntries(e){return(this.index[e]||new zn(Wn.comparator)).toArray()}}const Vd=new Uint8Array(0);class Nh{constructor(e,r){this.user=e,this.databaseId=r,this.He=new jl,this.Je=new xa(a=>ga(a),(a,h)=>xl(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.He.has(r)){const a=r.lastSegment(),h=r.popLast();e.addOnCommittedListener(()=>{this.He.add(r)});const _={collectionId:a,parent:Rs(h)};return Tg(e).put(_)}return Ze.resolve()}getCollectionParents(e,r){const a=[],h=IDBKeyRange.bound([r,""],[Pn(r),""],!1,!0);return Tg(e).K(h).next(_=>{for(const C of _){if(C.collectionId!==r)break;a.push(m(C.parent))}return a})}addFieldIndex(e,r){const a=Un(e),h={indexId:(C=r).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var C;delete h.indexId;const _=a.add(h);if(r.indexState){const C=Mh(e);return _.next(x=>{C.put(kd(x,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return _.next()}deleteFieldIndex(e,r){const a=Un(e),h=Mh(e),_=qc(e);return a.delete(r.indexId).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const a=qc(e);let h=!0;const _=new Map;return Ze.forEach(this.Ye(r),C=>this.Xe(e,C).next(x=>{h&&(h=!!x),_.set(C,x)})).next(()=>{if(h){let C=Qn();const x=[];return Ze.forEach(_,(H,q)=>{var oe;ft("IndexedDbIndexManager",`Using index ${oe=H,`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map(xi=>`${xi.fieldPath}:${xi.kind}`).join(",")}`} to execute ${ga(r)}`);const Ie=function(xi,To){const yi=Ql(To);if(void 0===yi)return null;for(const Ms of Rl(xi,yi.fieldPath))switch(Ms.op){case"array-contains-any":return Ms.value.arrayValue.values||[];case"array-contains":return[Ms.value]}return null}(q,H),qe=function(xi,To){const yi=new Map;for(const Ms of wu(To))for(const Fa of Rl(xi,Ms.fieldPath))switch(Fa.op){case"==":case"in":yi.set(Ms.fieldPath.canonicalString(),Fa.value);break;case"not-in":case"!=":return yi.set(Ms.fieldPath.canonicalString(),Fa.value),Array.from(yi.values())}return null}(q,H),at=function(xi,To){const yi=[];let Ms=!0;for(const Fa of wu(To)){const Am=0===Fa.kind?Nc(xi,Fa.fieldPath,xi.startAt):mh(xi,Fa.fieldPath,xi.startAt);yi.push(Am.value),Ms&&(Ms=Am.inclusive)}return new ma(yi,Ms)}(q,H),_t=function(xi,To){const yi=[];let Ms=!0;for(const Fa of wu(To)){const Am=0===Fa.kind?mh(xi,Fa.fieldPath,xi.endAt):Nc(xi,Fa.fieldPath,xi.endAt);yi.push(Am.value),Ms&&(Ms=Am.inclusive)}return new ma(yi,Ms)}(q,H),qt=this.Ze(H,q,at),fn=this.Ze(H,q,_t),Zr=this.tn(H,q,qe),us=this.en(H.indexId,Ie,qt,at.inclusive,fn,_t.inclusive,Zr);return Ze.forEach(us,xi=>a.j(xi,r.limit).next(To=>{To.forEach(yi=>{const Ms=Mt.fromSegments(yi.documentKey);C.has(Ms)||(C=C.add(Ms),x.push(Ms))})}))}).next(()=>x)}return Ze.resolve(null)})}Ye(e){let r=this.Je.get(e);return r||(r=[e],this.Je.set(e,r),r)}en(e,r,a,h,_,C,x){const H=(null!=r?r.length:1)*Math.max(a.length,_.length),q=H/(null!=r?r.length:1),oe=[];for(let Ie=0;Ie<H;++Ie){const qe=r?this.nn(r[Ie/q]):Vd,at=this.sn(e,qe,a[Ie%q],h),_t=this.rn(e,qe,_[Ie%q],C),qt=x.map(fn=>this.sn(e,qe,fn,!0));oe.push(...this.createRange(at,_t,qt))}return oe}sn(e,r,a,h){const _=new cc(e,Mt.empty(),r,a);return h?_:_.Le()}rn(e,r,a,h){const _=new cc(e,Mt.empty(),r,a);return h?_.Le():_}Xe(e,r){const a=new Ld(r),h=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,h).next(_=>{let C=null;for(const x of _)a.Ge(x)&&(!C||x.fields.length>C.fields.length)&&(C=x);return C})}getIndexType(e,r){let a=2;return Ze.forEach(this.Ye(r),h=>this.Xe(e,h).next(_=>{_?0!==a&&_.fields.length<function(C){let x=new zn(Pr.comparator),H=!1;for(const q of C.filters){const oe=q;oe.field.isKeyField()||("array-contains"===oe.op||"array-contains-any"===oe.op?H=!0:x=x.add(oe.field))}for(const q of C.orderBy)q.field.isKeyField()||(x=x.add(q.field));return x.size+(H?1:0)}(h)&&(a=1):a=0})).next(()=>a)}on(e,r){const a=new to;for(const h of wu(e)){const _=r.data.field(h.fieldPath);if(null==_)return null;const C=a.Be(h.kind);lc.ye.re(_,C)}return a.Oe()}nn(e){const r=new to;return lc.ye.re(e,r.Be(0)),r.Oe()}un(e,r){const a=new to;return lc.ye.re(Us(this.databaseId,r),a.Be(function(h){const _=wu(h);return 0===_.length?0:_[_.length-1].kind}(e))),a.Oe()}tn(e,r,a){if(null===a)return[];let h=[];h.push(new to);let _=0;for(const C of wu(e)){const x=a[_++];for(const H of h)if(this.cn(r,C.fieldPath)&&Qo(x))h=this.an(h,C,x);else{const q=H.Be(C.kind);lc.ye.re(x,q)}}return this.hn(h)}Ze(e,r,a){return this.tn(e,r,a.position)}hn(e){const r=[];for(let a=0;a<e.length;++a)r[a]=e[a].Oe();return r}an(e,r,a){const h=[...e],_=[];for(const C of a.arrayValue.values||[])for(const x of h){const H=new to;H.seed(x.Oe()),lc.ye.re(C,H.Be(r.kind)),_.push(H)}return _}cn(e,r){return!!e.filters.find(a=>a instanceof ms&&a.field.isEqual(r)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,r){const a=Un(e),h=Mh(e);return(r?a.K("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.K()).next(_=>{const C=[];return Ze.forEach(_,x=>h.get([x.indexId,this.uid]).next(H=>{C.push(function(q,oe){const Ie=oe?new Jl(oe.sequenceNumber,new Zo(ru(oe.readTime),new Mt(m(oe.documentKey)),oe.largestBatchId)):Jl.empty(),qe=q.fields.map(([at,_t])=>new Ac(Pr.fromServerFormat(at),_t));return new ni(q.indexId,q.collectionGroup,qe,Ie)}(x,H))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((a,h)=>{const _=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==_?_:gt(a.collectionGroup,h.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){const h=Un(e),_=Mh(e);return this.ln(e).next(C=>h.K("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(x=>Ze.forEach(x,H=>_.put(kd(H.indexId,this.user,C,a)))))}updateIndexEntries(e,r){const a=new Map;return Ze.forEach(r,(h,_)=>{const C=a.get(h.collectionGroup);return(C?Ze.resolve(C):this.getFieldIndexes(e,h.collectionGroup)).next(x=>(a.set(h.collectionGroup,x),Ze.forEach(x,H=>this.fn(e,h,H).next(q=>{const oe=this.dn(_,H);return q.isEqual(oe)?Ze.resolve():this._n(e,_,H,q,oe)}))))})}wn(e,r,a,h){return qc(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.un(a,r.key),documentKey:r.key.path.toArray()})}mn(e,r,a,h){return qc(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.un(a,r.key),r.key.path.toArray()])}fn(e,r,a){const h=qc(e);let _=new zn(dc);return h.J({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.un(a,r)])},(C,x)=>{_=_.add(new cc(a.indexId,r,x.arrayValue,x.directionalValue))}).next(()=>_)}dn(e,r){let a=new zn(dc);const h=this.on(r,e);if(null==h)return a;const _=Ql(r);if(null!=_){const C=e.data.field(_.fieldPath);if(Qo(C))for(const x of C.arrayValue.values||[])a=a.add(new cc(r.indexId,e.key,this.nn(x),h))}else a=a.add(new cc(r.indexId,e.key,Vd,h));return a}_n(e,r,a,h,_){ft("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const C=[];return function(x,H,q,oe,Ie){const qe=x.getIterator(),at=H.getIterator();let _t=Qs(qe),qt=Qs(at);for(;_t||qt;){let fn=!1,Zr=!1;if(_t&&qt){const us=q(_t,qt);us<0?Zr=!0:us>0&&(fn=!0)}else null!=_t?Zr=!0:fn=!0;fn?(oe(qt),qt=Qs(at)):Zr?(Ie(_t),_t=Qs(qe)):(_t=Qs(qe),qt=Qs(at))}}(h,_,dc,x=>{C.push(this.wn(e,r,a,x))},x=>{C.push(this.mn(e,r,a,x))}),Ze.waitFor(C)}ln(e){let r=1;return Mh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,_)=>{_.done(),r=h.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((C,x)=>dc(C,x)).filter((C,x,H)=>!x||0!==dc(C,H[x-1]));const h=[];h.push(e);for(const C of a){const x=dc(C,e),H=dc(C,r);if(0===x)h[0]=e.Le();else if(x>0&&H<0)h.push(C),h.push(C.Le());else if(H>0)break}h.push(r);const _=[];for(let C=0;C<h.length;C+=2)_.push(IDBKeyRange.bound([h[C].indexId,this.uid,h[C].arrayValue,h[C].directionalValue,Vd,[]],[h[C+1].indexId,this.uid,h[C+1].arrayValue,h[C+1].directionalValue,Vd,[]]));return _}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Sg)}getMinOffset(e,r){return Ze.mapArray(this.Ye(r),a=>this.Xe(e,a).next(h=>h||Bt())).next(Sg)}}function Tg(s){return eo(s,"collectionParents")}function qc(s){return eo(s,"indexEntries")}function Un(s){return eo(s,"indexConfiguration")}function Mh(s){return eo(s,"indexState")}function Sg(s){_n(0!==s.length);let e=s[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;Cu(h,e)<0&&(e=h),r<h.largestBatchId&&(r=h.largestBatchId)}return new Zo(e.readTime,e.documentKey,r)}const kf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yi{constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Yi(e,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ag(s,e,r){const a=s.store("mutations"),h=s.store("documentMutations"),_=[],C=IDBKeyRange.only(r.batchId);let x=0;const H=a.J({range:C},(oe,Ie,qe)=>(x++,qe.delete()));_.push(H.next(()=>{_n(1===x)}));const q=[];for(const oe of r.mutations){const Ie=Z(e,oe.key.path,r.batchId);_.push(h.delete(Ie)),q.push(oe.key)}return Ze.waitFor(_).next(()=>q)}function xp(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Bt();e=s.noDocument}return JSON.stringify(e).length}Yi.DEFAULT_COLLECTION_PERCENTILE=10,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yi.DEFAULT=new Yi(41943040,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yi.DISABLED=new Yi(-1,0,0);class Ud{constructor(e,r,a,h){this.userId=e,this.wt=r,this.indexManager=a,this.referenceDelegate=h,this.gn={}}static se(e,r,a,h){_n(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new Ud(_,r,a,h)}checkEmpty(e){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).J({index:"userMutationsIndex",range:a},(h,_,C)=>{r=!1,C.done()}).next(()=>r)}addMutationBatch(e,r,a,h){const _=Bd(e),C=$l(e);return C.add({}).next(x=>{_n("number"==typeof x);const H=new bg(x,r,a,h),q=function(qe,at,_t){const qt=_t.baseMutations.map(Zr=>jc(qe.ne,Zr)),fn=_t.mutations.map(Zr=>jc(qe.ne,Zr));return{userId:at,batchId:_t.batchId,localWriteTimeMs:_t.localWriteTime.toMillis(),baseMutations:qt,mutations:fn}}(this.wt,this.userId,H),oe=[];let Ie=new zn((qe,at)=>gt(qe.canonicalString(),at.canonicalString()));for(const qe of h){const at=Z(this.userId,qe.key.path,x);Ie=Ie.add(qe.key.path.popLast()),oe.push(C.put(q)),oe.push(_.put(at,ye))}return Ie.forEach(qe=>{oe.push(this.indexManager.addToCollectionParentIndex(e,qe))}),e.addOnCommittedListener(()=>{this.gn[x]=H.keys()}),Ze.waitFor(oe).next(()=>H)})}lookupMutationBatch(e,r){return $l(e).get(r).next(a=>a?(_n(a.userId===this.userId),Ou(this.wt,a)):null)}yn(e,r){return this.gn[r]?Ze.resolve(this.gn[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){const h=a.keys();return this.gn[r]=h,h}return null})}getNextMutationBatchAfterBatchId(e,r){const a=r+1,h=IDBKeyRange.lowerBound([this.userId,a]);let _=null;return $l(e).J({index:"userMutationsIndex",range:h},(C,x,H)=>{x.userId===this.userId&&(_n(x.batchId>=a),_=Ou(this.wt,x)),H.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return $l(e).J({index:"userMutationsIndex",range:r,reverse:!0},(h,_,C)=>{a=_.batchId,C.done()}).next(()=>a)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).K("userMutationsIndex",r).next(a=>a.map(h=>Ou(this.wt,h)))}getAllMutationBatchesAffectingDocumentKey(e,r){const a=j(this.userId,r.path),h=IDBKeyRange.lowerBound(a),_=[];return Bd(e).J({range:h},(C,x,H)=>{const[q,oe,Ie]=C,qe=m(oe);if(q===this.userId&&r.path.isEqual(qe))return $l(e).get(Ie).next(at=>{if(!at)throw Bt();_n(at.userId===this.userId),_.push(Ou(this.wt,at))});H.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new zn(gt);const h=[];return r.forEach(_=>{const C=j(this.userId,_.path),x=IDBKeyRange.lowerBound(C),H=Bd(e).J({range:x},(q,oe,Ie)=>{const[qe,at,_t]=q,qt=m(at);qe===this.userId&&_.path.isEqual(qt)?a=a.add(_t):Ie.done()});h.push(H)}),Ze.waitFor(h).next(()=>this.pn(e,a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1,_=j(this.userId,a),C=IDBKeyRange.lowerBound(_);let x=new zn(gt);return Bd(e).J({range:C},(H,q,oe)=>{const[Ie,qe,at]=H,_t=m(qe);Ie===this.userId&&a.isPrefixOf(_t)?_t.length===h&&(x=x.add(at)):oe.done()}).next(()=>this.pn(e,x))}pn(e,r){const a=[],h=[];return r.forEach(_=>{h.push($l(e).get(_).next(C=>{if(null===C)throw Bt();_n(C.userId===this.userId),a.push(Ou(this.wt,C))}))}),Ze.waitFor(h).next(()=>a)}removeMutationBatch(e,r){return Ag(e.ee,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.In(r.batchId)}),Ze.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ze.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Bd(e).J({range:a},(_,C,x)=>{if(_[0]===this.userId){const H=m(_[1]);h.push(H)}else x.done()}).next(()=>{_n(0===h.length)})})}containsKey(e,r){return ol(e,this.userId,r)}Tn(e){return Rp(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ol(s,e,r){const a=j(e,r.path),h=a[1],_=IDBKeyRange.lowerBound(a);let C=!1;return Bd(s).J({range:_,H:!0},(x,H,q)=>{const[oe,Ie,qe]=x;oe===e&&Ie===h&&(C=!0),q.done()}).next(()=>C)}function $l(s){return eo(s,"mutations")}function Bd(s){return eo(s,"documentMutations")}function Rp(s){return eo(s,"mutationQueues")}class Ph{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Ph(0)}static Rn(){return new Ph(-1)}}class Vm{constructor(e,r){this.referenceDelegate=e,this.wt=r}allocateTargetId(e){return this.bn(e).next(r=>{const a=new Ph(r.highestTargetId);return r.highestTargetId=a.next(),this.Pn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(r=>Ht.fromTimestamp(new Gn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.bn(e).next(h=>(h.highestListenSequenceNumber=r,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),r>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=r),this.Pn(e,h)))}addTargetData(e,r){return this.vn(e,r).next(()=>this.bn(e).next(a=>(a.targetCount+=1,this.Vn(r,a),this.Pn(e,a))))}updateTargetData(e,r){return this.vn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Ff(e).delete(r.targetId)).next(()=>this.bn(e)).next(a=>(_n(a.targetCount>0),a.targetCount-=1,this.Pn(e,a)))}removeTargets(e,r,a){let h=0;const _=[];return Ff(e).J((C,x)=>{const H=iu(x);H.sequenceNumber<=r&&null===a.get(H.targetId)&&(h++,_.push(this.removeTargetData(e,H)))}).next(()=>Ze.waitFor(_)).next(()=>h)}forEachTarget(e,r){return Ff(e).J((a,h)=>{const _=iu(h);r(_)})}bn(e){return su(e).get("targetGlobalKey").next(r=>(_n(null!==r),r))}Pn(e,r){return su(e).put("targetGlobalKey",r)}vn(e,r){return Ff(e).put(Wc(this.wt,r))}Vn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.bn(e).next(r=>r.targetCount)}getTargetData(e,r){const a=ga(r),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let _=null;return Ff(e).J({range:h,index:"queryTargetsIndex"},(C,x,H)=>{const q=iu(x);xl(r,q.target)&&(_=q,H.done())}).next(()=>_)}addMatchingKeys(e,r,a){const h=[],_=ou(e);return r.forEach(C=>{const x=Rs(C.path);h.push(_.put({targetId:a,path:x})),h.push(this.referenceDelegate.addReference(e,a,C))}),Ze.waitFor(h)}removeMatchingKeys(e,r,a){const h=ou(e);return Ze.forEach(r,_=>{const C=Rs(_.path);return Ze.waitFor([h.delete([a,C]),this.referenceDelegate.removeReference(e,a,_)])})}removeMatchingKeysForTargetId(e,r){const a=ou(e),h=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),h=ou(e);let _=Qn();return h.J({range:a,H:!0},(C,x,H)=>{const q=m(C[1]),oe=new Mt(q);_=_.add(oe)}).next(()=>_)}containsKey(e,r){const a=Rs(r.path),h=IDBKeyRange.bound([a],[Pn(a)],!1,!0);let _=0;return ou(e).J({index:"documentTargetsIndex",H:!0,range:h},([C,x],H,q)=>{0!==C&&(_++,q.done())}).next(()=>_>0)}te(e,r){return Ff(e).get(r).next(a=>a?iu(a):null)}}function Ff(s){return eo(s,"targets")}function su(s){return eo(s,"targetGlobal")}function ou(s){return eo(s,"targetDocuments")}function Oh([s,e],[r,a]){const h=gt(s,r);return 0===h?gt(e,a):h}class kh{constructor(e){this.Sn=e,this.buffer=new zn(Oh),this.Dn=0}Cn(){return++this.Dn}xn(e){const r=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Oh(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class iv{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var r=this;ft("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){r.Nn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(a){Oo(a)?ft("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield bl(a)}yield r.kn(3e5)}))}}class xg{constructor(e,r){this.On=e,this.params=r}calculateTargetCount(e,r){return this.On.Mn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(0===r)return Ze.resolve(Fo.ot);const a=new kh(r);return this.On.forEachTarget(e,h=>a.xn(h.sequenceNumber)).next(()=>this.On.Fn(e,h=>a.xn(h))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.On.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.On.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),Ze.resolve(kf)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kf):this.$n(e,r))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,r){let a,h,_,C,x,H,q;const oe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ie=>(Ie>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ie}`),h=this.params.maximumSequenceNumbersToCollect):h=Ie,C=Date.now(),this.nthSequenceNumber(e,h))).next(Ie=>(a=Ie,x=Date.now(),this.removeTargets(e,a,r))).next(Ie=>(_=Ie,H=Date.now(),this.removeOrphanedDocuments(e,a))).next(Ie=>(q=Date.now(),Eu()<=en.in.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-oe}ms\n\tDetermined least recently used ${h} in `+(x-C)+`ms\n\tRemoved ${_} targets in `+(H-x)+`ms\n\tRemoved ${Ie} documents in `+(q-H)+`ms\nTotal Duration: ${q-oe}ms`),Ze.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:_,documentsRemoved:Ie})))}}class Rg{constructor(e,r){this.db=e,this.garbageCollector=new xg(this,r)}Mn(e){const r=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(h=>a+h))}Bn(e){let r=0;return this.Fn(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Fn(e,r){return this.Ln(e,(a,h)=>r(h))}addReference(e,r,a){return Np(e,a)}removeReference(e,r,a){return Np(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return Np(e,r)}Un(e,r){return function(a,h){let _=!1;return Rp(a).Y(C=>ol(a,C,h).next(x=>(x&&(_=!0),Ze.resolve(!x)))).next(()=>_)}(e,r)}removeOrphanedDocuments(e,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let _=0;return this.Ln(e,(C,x)=>{if(x<=r){const H=this.Un(e,C).next(q=>{if(!q)return _++,a.getEntry(e,C).next(()=>(a.removeEntry(C,Ht.min()),ou(e).delete([0,Rs(C.path)])))});h.push(H)}}).next(()=>Ze.waitFor(h)).next(()=>a.apply(e)).next(()=>_)}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return Np(e,r)}Ln(e,r){const a=ou(e);let h,_=Fo.ot;return a.J({index:"documentTargetsIndex"},([C,x],{path:H,sequenceNumber:q})=>{0===C?(_!==Fo.ot&&r(new Mt(m(h)),_),_=q,h=H):_=Fo.ot}).next(()=>{_!==Fo.ot&&r(new Mt(m(h)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Np(s,e){return ou(s).put((a=s.currentSequenceNumber,{targetId:0,path:Rs(e.path),sequenceNumber:a}));var a}class Um{constructor(){this.changes=new xa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?Ze.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sv{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return hc(e).put(a)}removeEntry(e,r,a){return hc(e).delete(function(h,_){const C=h.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Pd(_),C[C.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.qn(e,a)))}getEntry(e,r){let a=si.newInvalidDocument(r);return hc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Op(r))},(h,_)=>{a=this.Kn(r,_)}).next(()=>a)}Gn(e,r){let a={size:0,document:si.newInvalidDocument(r)};return hc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Op(r))},(h,_)=>{a={document:this.Kn(r,_),size:xp(_)}}).next(()=>a)}getEntries(e,r){let a=va();return this.Qn(e,r,(h,_)=>{const C=this.Kn(h,_);a=a.insert(h,C)}).next(()=>a)}jn(e,r){let a=va(),h=new ri(Mt.comparator);return this.Qn(e,r,(_,C)=>{const x=this.Kn(_,C);a=a.insert(_,x),h=h.insert(_,xp(C))}).next(()=>({documents:a,Wn:h}))}Qn(e,r,a){if(r.isEmpty())return Ze.resolve();let h=new zn(jm);r.forEach(H=>h=h.add(H));const _=IDBKeyRange.bound(Op(h.first()),Op(h.last())),C=h.getIterator();let x=C.getNext();return hc(e).J({index:"documentKeyIndex",range:_},(H,q,oe)=>{const Ie=Mt.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;x&&jm(x,Ie)<0;)a(x,null),x=C.getNext();x&&x.isEqual(Ie)&&(a(x,q),x=C.hasNext()?C.getNext():null),x?oe.q(Op(x)):oe.done()}).next(()=>{for(;x;)a(x,null),x=C.hasNext()?C.getNext():null})}getAllFromCollection(e,r,a){const h=[r.popLast().toArray(),r.lastSegment(),Pd(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],_=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hc(e).K(IDBKeyRange.bound(h,_,!0)).next(C=>{let x=va();for(const H of C){const q=this.Kn(Mt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);x=x.insert(q.key,q)}return x})}getAllFromCollectionGroup(e,r,a,h){let _=va();const C=G_(r,a),x=G_(r,Zo.max());return hc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,x,!0)},(H,q,oe)=>{const Ie=this.Kn(Mt.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);_=_.insert(Ie.key,Ie),_.size===h&&oe.done()}).next(()=>_)}newChangeBuffer(e){return new Pp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Bm(e).get("remoteDocumentGlobalKey").next(r=>(_n(!!r),r))}qn(e,r){return Bm(e).put("remoteDocumentGlobalKey",r)}Kn(e,r){if(r){const a=function(s,e){let r;if(e.document)r=tl(s.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=Mt.fromSegments(e.noDocument.path),h=ru(e.noDocument.readTime);r=si.newNoDocument(a,h),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bt();{const a=Mt.fromSegments(e.unknownDocument.path),h=ru(e.unknownDocument.version);r=si.newUnknownDocument(a,h)}}return e.readTime&&r.setReadTime(function(a){const h=new Gn(a[0],a[1]);return Ht.fromTimestamp(h)}(e.readTime)),r}(this.wt,r);if(!a.isNoDocument()||!a.version.isEqual(Ht.min()))return a}return si.newInvalidDocument(e)}}function Mp(s){return new sv(s)}class Pp extends Um{constructor(e,r){super(),this.zn=e,this.trackRemovals=r,this.Hn=new xa(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const r=[];let a=0,h=new zn((_,C)=>gt(_.canonicalString(),C.canonicalString()));return this.changes.forEach((_,C)=>{const x=this.Hn.get(_);if(r.push(this.zn.removeEntry(e,_,x.readTime)),C.isValidDocument()){const H=xh(this.zn.wt,C);h=h.add(_.path.popLast()),a+=xp(H)-x.size,r.push(this.zn.addEntry(e,_,H))}else if(a-=x.size,this.trackRemovals){const H=xh(this.zn.wt,C.convertToNoDocument(Ht.min()));r.push(this.zn.addEntry(e,_,H))}}),h.forEach(_=>{r.push(this.zn.indexManager.addToCollectionParentIndex(e,_))}),r.push(this.zn.updateMetadata(e,a)),Ze.waitFor(r)}getFromCache(e,r){return this.zn.Gn(e,r).next(a=>(this.Hn.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.zn.jn(e,r).next(({documents:a,Wn:h})=>(h.forEach((_,C)=>{this.Hn.set(_,{size:C,readTime:a.get(_).readTime})}),a))}}function Bm(s){return eo(s,"remoteDocumentGlobal")}function hc(s){return eo(s,"remoteDocumentsV14")}function Op(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function G_(s,e){const r=e.documentKey.path.toArray();return[s,Pd(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function jm(s,e){const r=s.path.toArray(),a=e.path.toArray();let h=0;for(let _=0;_<r.length-2&&_<a.length-2;++_)if(h=gt(r[_],a[_]),h)return h;return h=gt(r.length,a.length),h||(h=gt(r[r.length-2],a[a.length-2]),h||gt(r[r.length-1],a[a.length-1]))}class Ng{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Mg{constructor(e,r,a,h){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(h=>(a=h,this.getBaseDocument(e,r,a))).next(h=>(null!==a&&Ol(a.mutation,h,_o.empty(),Gn.now()),h))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,Qn()).next(()=>a))}getLocalViewOfDocuments(e,r,a=Qn()){const h=Js();return this.populateOverlays(e,h,r).next(()=>this.computeViews(e,r,h,a).next(_=>{let C=ss();return _.forEach((x,H)=>{C=C.insert(x,H.overlayedDocument)}),C}))}getOverlayedDocuments(e,r){const a=Js();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,Qn()))}populateOverlays(e,r,a){const h=[];return a.forEach(_=>{r.has(_)||h.push(_)}),this.documentOverlayCache.getOverlays(e,h).next(_=>{_.forEach((C,x)=>{r.set(C,x)})})}computeViews(e,r,a,h){let _=va();const C=Ti(),x=Ti();return r.forEach((H,q)=>{const oe=a.get(q.key);h.has(q.key)&&(void 0===oe||oe.mutation instanceof xn)?_=_.insert(q.key,q):void 0!==oe&&(C.set(q.key,oe.mutation.getFieldMask()),Ol(oe.mutation,q,oe.mutation.getFieldMask(),Gn.now()))}),this.recalculateAndSaveOverlays(e,_).next(H=>(H.forEach((q,oe)=>C.set(q,oe)),r.forEach((q,oe)=>{var Ie;return x.set(q,new Ng(oe,null!==(Ie=C.get(q))&&void 0!==Ie?Ie:null))}),x))}recalculateAndSaveOverlays(e,r){const a=Ti();let h=new ri((C,x)=>C-x),_=Qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(C=>{for(const x of C)x.keys().forEach(H=>{const q=r.get(H);if(null===q)return;let oe=a.get(H)||_o.empty();oe=x.applyToLocalView(q,oe),a.set(H,oe);const Ie=(h.get(x.batchId)||Qn()).add(H);h=h.insert(x.batchId,Ie)})}).next(()=>{const C=[],x=h.getReverseIterator();for(;x.hasNext();){const H=x.getNext(),q=H.key,oe=H.value,Ie=Ll();oe.forEach(qe=>{if(!_.has(qe)){const at=Tf(r.get(qe),a.get(qe));null!==at&&Ie.set(qe,at),_=_.add(qe)}}),C.push(this.documentOverlayCache.saveOverlays(e,q,Ie))}return Ze.waitFor(C)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a){return Mt.isDocumentKey((h=r).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Ka(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a):this.getDocumentsMatchingCollectionQuery(e,r,a);var h}getNextDocuments(e,r,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,h).next(_=>{const C=h-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,h-_.size):Ze.resolve(Js());let x=-1,H=_;return C.next(q=>Ze.forEach(q,(oe,Ie)=>(x<Ie.largestBatchId&&(x=Ie.largestBatchId),_.get(oe)?Ze.resolve():this.getBaseDocument(e,oe,Ie).next(qe=>{H=H.insert(oe,qe)}))).next(()=>this.populateOverlays(e,q,_)).next(()=>this.computeViews(e,H,q,Qn())).next(oe=>({batchId:x,changes:bd(oe)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Mt(r)).next(a=>{let h=ss();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,r,a){const h=r.collectionGroup;let _=ss();return this.indexManager.getCollectionParents(e,h).next(C=>Ze.forEach(C,x=>{const H=(q=r,oe=x.child(h),new Lo(oe,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,oe;return this.getDocumentsMatchingCollectionQuery(e,H,a).next(q=>{q.forEach((oe,Ie)=>{_=_.insert(oe,Ie)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,r,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,r.path,a).next(_=>(h=_,this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId))).next(_=>{_.forEach((x,H)=>{const q=H.getKey();null===h.get(q)&&(h=h.insert(q,si.newInvalidDocument(q)))});let C=ss();return h.forEach((x,H)=>{const q=_.get(x);void 0!==q&&Ol(q.mutation,H,_o.empty(),Gn.now()),Cf(r,H)&&(C=C.insert(x,H))}),C})}getBaseDocument(e,r,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,r):Ze.resolve(si.newInvalidDocument(r))}}class W_{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,r){return Ze.resolve(this.Jn.get(r))}saveBundleMetadata(e,r){var a;return this.Jn.set(r.id,{id:(a=r).id,version:a.version,createTime:As(a.createTime)}),Ze.resolve()}getNamedQuery(e,r){return Ze.resolve(this.Yn.get(r))}saveNamedQuery(e,r){return this.Yn.set(r.name,{name:(a=r).name,query:ku(a.bundledQuery),readTime:As(a.readTime)}),Ze.resolve();var a}}class ov{constructor(){this.overlays=new ri(Mt.comparator),this.Xn=new Map}getOverlay(e,r){return Ze.resolve(this.overlays.get(r))}getOverlays(e,r){const a=Js();return Ze.forEach(r,h=>this.getOverlay(e,h).next(_=>{null!==_&&a.set(h,_)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((h,_)=>{this.ie(e,r,_)}),Ze.resolve()}removeOverlaysForBatchId(e,r,a){const h=this.Xn.get(a);return void 0!==h&&(h.forEach(_=>this.overlays=this.overlays.remove(_)),this.Xn.delete(a)),Ze.resolve()}getOverlaysForCollection(e,r,a){const h=Js(),_=r.length+1,C=new Mt(r.child("")),x=this.overlays.getIteratorFrom(C);for(;x.hasNext();){const H=x.getNext().value,q=H.getKey();if(!r.isPrefixOf(q.path))break;q.path.length===_&&H.largestBatchId>a&&h.set(H.getKey(),H)}return Ze.resolve(h)}getOverlaysForCollectionGroup(e,r,a,h){let _=new ri((q,oe)=>q-oe);const C=this.overlays.getIterator();for(;C.hasNext();){const q=C.getNext().value;if(q.getKey().getCollectionGroup()===r&&q.largestBatchId>a){let oe=_.get(q.largestBatchId);null===oe&&(oe=Js(),_=_.insert(q.largestBatchId,oe)),oe.set(q.getKey(),q)}}const x=Js(),H=_.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((q,oe)=>x.set(q,oe)),!(x.size()>=h)););return Ze.resolve(x)}ie(e,r,a){const h=this.overlays.get(a.key);if(null!==h){const C=this.Xn.get(h.largestBatchId).delete(a.key);this.Xn.set(h.largestBatchId,C)}this.overlays=this.overlays.insert(a.key,new Ig(r,a));let _=this.Xn.get(r);void 0===_&&(_=Qn(),this.Xn.set(r,_)),this.Xn.set(r,_.add(a.key))}}class Pg{constructor(){this.Zn=new zn(no.ts),this.es=new zn(no.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,r){const a=new no(e,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.rs(new no(e,r))}os(e,r){e.forEach(a=>this.removeReference(a,r))}us(e){const r=new Mt(new Wn([])),a=new no(r,e),h=new no(r,e+1),_=[];return this.es.forEachInRange([a,h],C=>{this.rs(C),_.push(C.key)}),_}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const r=new Mt(new Wn([])),a=new no(r,e),h=new no(r,e+1);let _=Qn();return this.es.forEachInRange([a,h],C=>{_=_.add(C.key)}),_}containsKey(e){const r=new no(e,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&e.isEqual(a.key)}}class no{constructor(e,r){this.key=e,this.ls=r}static ts(e,r){return Mt.comparator(e.key,r.key)||gt(e.ls,r.ls)}static ns(e,r){return gt(e.ls,r.ls)||Mt.comparator(e.key,r.key)}}class av{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.fs=1,this.ds=new zn(no.ts)}checkEmpty(e){return Ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,a,h){const _=this.fs;this.fs++;const C=new bg(_,r,a,h);this.mutationQueue.push(C);for(const x of h)this.ds=this.ds.add(new no(x.key,_)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Ze.resolve(C)}lookupMutationBatch(e,r){return Ze.resolve(this._s(r))}getNextMutationBatchAfterBatchId(e,r){const h=this.ws(r+1),_=h<0?0:h;return Ze.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return Ze.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new no(r,0),h=new no(r,Number.POSITIVE_INFINITY),_=[];return this.ds.forEachInRange([a,h],C=>{const x=this._s(C.ls);_.push(x)}),Ze.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new zn(gt);return r.forEach(h=>{const _=new no(h,0),C=new no(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([_,C],x=>{a=a.add(x.ls)})}),Ze.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1;let _=a;Mt.isDocumentKey(_)||(_=_.child(""));const C=new no(new Mt(_),0);let x=new zn(gt);return this.ds.forEachWhile(H=>{const q=H.key.path;return!!a.isPrefixOf(q)&&(q.length===h&&(x=x.add(H.ls)),!0)},C),Ze.resolve(this.gs(x))}gs(e){const r=[];return e.forEach(a=>{const h=this._s(a);null!==h&&r.push(h)}),r}removeMutationBatch(e,r){_n(0===this.ys(r.batchId,"removed")),this.mutationQueue.shift();let a=this.ds;return Ze.forEach(r.mutations,h=>{const _=new no(h.key,r.batchId);return a=a.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.ds=a})}In(e){}containsKey(e,r){const a=new no(r,0),h=this.ds.firstAfterOrEqual(a);return Ze.resolve(r.isEqual(h&&h.key))}performConsistencyCheck(e){return Ze.resolve()}ys(e,r){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const r=this.ws(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class uv{constructor(e){this.ps=e,this.docs=new ri(Mt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,h=this.docs.get(a),_=h?h.size:0,C=this.ps(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:C}),this.size+=C-_,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return Ze.resolve(a?a.document.mutableCopy():si.newInvalidDocument(r))}getEntries(e,r){let a=va();return r.forEach(h=>{const _=this.docs.get(h);a=a.insert(h,_?_.document.mutableCopy():si.newInvalidDocument(h))}),Ze.resolve(a)}getAllFromCollection(e,r,a){let h=va();const _=new Mt(r.child("")),C=this.docs.getIteratorFrom(_);for(;C.hasNext();){const{key:x,value:{document:H}}=C.getNext();if(!r.isPrefixOf(x.path))break;x.path.length>r.length+1||Cu(yp(H),a)<=0||(h=h.insert(H.key,H.mutableCopy()))}return Ze.resolve(h)}getAllFromCollectionGroup(e,r,a,h){Bt()}Is(e,r){return Ze.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new Kc(this)}getSize(e){return Ze.resolve(this.size)}}class Kc extends Um{constructor(e){super(),this.zn=e}applyChanges(e){const r=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?r.push(this.zn.addEntry(e,h)):this.zn.removeEntry(a)}),Ze.waitFor(r)}getFromCache(e,r){return this.zn.getEntry(e,r)}getAllFromCache(e,r){return this.zn.getEntries(e,r)}}class Og{constructor(e){this.persistence=e,this.Ts=new xa(r=>ga(r),xl),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.Es=0,this.As=new Pg,this.targetCount=0,this.Rs=Ph.An()}forEachTarget(e,r){return this.Ts.forEach((a,h)=>r(h)),Ze.resolve()}getLastRemoteSnapshotVersion(e){return Ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ze.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ze.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Es&&(this.Es=r),Ze.resolve()}vn(e){this.Ts.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Rs=new Ph(r),this.highestTargetId=r),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,r){return this.vn(r),this.targetCount+=1,Ze.resolve()}updateTargetData(e,r){return this.vn(r),Ze.resolve()}removeTargetData(e,r){return this.Ts.delete(r.target),this.As.us(r.targetId),this.targetCount-=1,Ze.resolve()}removeTargets(e,r,a){let h=0;const _=[];return this.Ts.forEach((C,x)=>{x.sequenceNumber<=r&&null===a.get(x.targetId)&&(this.Ts.delete(C),_.push(this.removeMatchingKeysForTargetId(e,x.targetId)),h++)}),Ze.waitFor(_).next(()=>h)}getTargetCount(e){return Ze.resolve(this.targetCount)}getTargetData(e,r){const a=this.Ts.get(r)||null;return Ze.resolve(a)}addMatchingKeys(e,r,a){return this.As.ss(r,a),Ze.resolve()}removeMatchingKeys(e,r,a){this.As.os(r,a);const h=this.persistence.referenceDelegate,_=[];return h&&r.forEach(C=>{_.push(h.markPotentiallyOrphaned(e,C))}),Ze.waitFor(_)}removeMatchingKeysForTargetId(e,r){return this.As.us(r),Ze.resolve()}getMatchingKeysForTargetId(e,r){const a=this.As.hs(r);return Ze.resolve(a)}containsKey(e,r){return Ze.resolve(this.As.containsKey(r))}}class $m{constructor(e,r){this.bs={},this.overlays={},this.Ps=new Fo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Og(this),this.indexManager=new Lm,this.remoteDocumentCache=new uv(a=>this.referenceDelegate.Ss(a)),this.wt=new Dg(r),this.Ds=new W_(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new ov,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.bs[e.toKey()];return a||(a=new av(r,this.referenceDelegate),this.bs[e.toKey()]=a),a}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,r,a){ft("MemoryPersistence","Starting transaction:",e);const h=new Hm(this.Ps.next());return this.referenceDelegate.Cs(),a(h).next(_=>this.referenceDelegate.xs(h).next(()=>_)).toPromise().then(_=>(h.raiseOnCommittedEvent(),_))}Ns(e,r){return Ze.or(Object.values(this.bs).map(a=>()=>a.containsKey(e,r)))}}class Hm extends pf{constructor(e){super(),this.currentSequenceNumber=e}}class Fh{constructor(e){this.persistence=e,this.ks=new Pg,this.Os=null}static Ms(e){return new Fh(e)}get Fs(){if(this.Os)return this.Os;throw Bt()}addReference(e,r,a){return this.ks.addReference(a,r),this.Fs.delete(a.toString()),Ze.resolve()}removeReference(e,r,a){return this.ks.removeReference(a,r),this.Fs.add(a.toString()),Ze.resolve()}markPotentiallyOrphaned(e,r){return this.Fs.add(r.toString()),Ze.resolve()}removeTarget(e,r){this.ks.us(r.targetId).forEach(h=>this.Fs.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(h=>{h.forEach(_=>this.Fs.add(_.toString()))}).next(()=>a.removeTargetData(e,r))}Cs(){this.Os=new Set}xs(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ze.forEach(this.Fs,a=>{const h=Mt.fromPath(a);return this.$s(e,h).next(_=>{_||r.removeEntry(h,Ht.min())})}).next(()=>(this.Os=null,r.apply(e)))}updateLimboDocument(e,r){return this.$s(e,r).next(a=>{a?this.Fs.delete(r.toString()):this.Fs.add(r.toString())})}Ss(e){return 0}$s(e,r){return Ze.or([()=>Ze.resolve(this.ks.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ns(e,r)])}}class kg{constructor(e){this.wt=e}O(e,r,a,h){const _=new _i("createOrUpgrade",r);var x;a<1&&h>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b,{unique:!0}),x.createObjectStore("documentMutations"),kp(e),function(x){x.createObjectStore("remoteDocuments")}(e));let C=Ze.resolve();return a<3&&h>=3&&(0!==a&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),kp(e)),C=C.next(()=>function(x){const H=x.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ht.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",q)}(_))),a<4&&h>=4&&(0!==a&&(C=C.next(()=>function(x,H){return H.store("mutations").K().next(q=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b,{unique:!0});const oe=H.store("mutations"),Ie=q.map(qe=>oe.put(qe));return Ze.waitFor(Ie)})}(e,_))),C=C.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(C=C.next(()=>this.Bs(_))),a<6&&h>=6&&(C=C.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(_)))),a<7&&h>=7&&(C=C.next(()=>this.Us(_))),a<8&&h>=8&&(C=C.next(()=>this.qs(e,_))),a<9&&h>=9&&(C=C.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(C=C.next(()=>this.Ks(_))),a<11&&h>=11&&(C=C.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(C=C.next(()=>{!function(x){const H=x.createObjectStore("documentOverlays",{keyPath:oc});H.createIndex("collectionPathOverlayIndex",Rd,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Nd,{unique:!1})}(e)})),a<13&&h>=13&&(C=C.next(()=>function(x){const H=x.createObjectStore("remoteDocumentsV14",{keyPath:Ue});H.createIndex("documentKeyIndex",wt),H.createIndex("collectionGroupIndex",mt)}(e)).next(()=>this.Gs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(C=C.next(()=>this.Qs(e,_))),a<15&&h>=15&&(C=C.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:Mu}).createIndex("sequenceNumberIndex",Ah,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:xd}).createIndex("documentKeyIndex",Pf,{unique:!1})}(e))),C}Ls(e){let r=0;return e.store("remoteDocuments").J((a,h)=>{r+=xp(h)}).next(()=>{const a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Bs(e){const r=e.store("mutationQueues"),a=e.store("mutations");return r.K().next(h=>Ze.forEach(h,_=>{const C=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return a.K("userMutationsIndex",C).next(x=>Ze.forEach(x,H=>{_n(H.userId===_.userId);const q=Ou(this.wt,H);return Ag(e,_.userId,q).next(()=>{})}))}))}Us(e){const r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const _=[];return a.J((C,x)=>{const H=new Wn(C),q=[0,Rs(H)];_.push(r.get(q).next(oe=>oe?Ze.resolve():r.put({targetId:0,path:Rs(H),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>Ze.waitFor(_))})}qs(e,r){e.createObjectStore("collectionParents",{keyPath:Bs});const a=r.store("collectionParents"),h=new jl,_=C=>{if(h.add(C)){const x=C.lastSegment(),H=C.popLast();return a.put({collectionId:x,parent:Rs(H)})}};return r.store("remoteDocuments").J({H:!0},(C,x)=>{const H=new Wn(C);return _(H.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([C,x,H],q)=>{const oe=m(x);return _(oe.popLast())}))}Ks(e){const r=e.store("targets");return r.J((a,h)=>{const _=iu(h),C=Wc(this.wt,_);return r.put(C)})}Gs(e,r){const a=r.store("remoteDocuments"),h=[];return a.J((_,C)=>{const x=r.store("remoteDocumentsV14"),H=(q=C,q.document?new Mt(Wn.fromString(q.document.name).popFirst(5)):q.noDocument?Mt.fromSegments(q.noDocument.path):q.unknownDocument?Mt.fromSegments(q.unknownDocument.path):Bt()).path.toArray();var q;const oe={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};h.push(x.put(oe))}).next(()=>Ze.waitFor(h))}Qs(e,r){const a=r.store("mutations"),h=Mp(this.wt),_=new $m(Fh.Ms,this.wt.ne);return a.K().next(C=>{const x=new Map;return C.forEach(H=>{var q;let oe=null!==(q=x.get(H.userId))&&void 0!==q?q:Qn();Ou(this.wt,H).keys().forEach(Ie=>oe=oe.add(Ie)),x.set(H.userId,oe)}),Ze.forEach(x,(H,q)=>{const oe=new ti(q),Ie=Bl.se(this.wt,oe),qe=_.getIndexManager(oe),at=Ud.se(oe,this.wt,qe,_.referenceDelegate);return new Mg(h,at,Ie,qe).recalculateAndSaveOverlaysForDocumentKeys(new Gc(r,Fo.ot),H).next()})})}}function kp(s){s.createObjectStore("targetDocuments",{keyPath:Xt}).createIndex("documentTargetsIndex",_r,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zt,{unique:!0}),s.createObjectStore("targetGlobal")}const Fp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class al{constructor(e,r,a,h,_,C,x,H,q,oe,Ie=14){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.js=_,this.window=C,this.document=x,this.Ws=q,this.zs=oe,this.Hs=Ie,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=qe=>Promise.resolve(),!al.V())throw new ht(Je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rg(this,h),this.ei=r+"main",this.wt=new Dg(H),this.ni=new Vs(this.ei,this.Hs,new kg(this.wt)),this.Vs=new Vm(this.referenceDelegate,this.wt),this.remoteDocumentCache=Mp(this.wt),this.Ds=new H_,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===oe&&Br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ht(Je.FAILED_PRECONDITION,Fp);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Fo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var r=this;return this.ti=function(){var a=(0,Ce.Z)(function*(h){if(r.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var r=(0,Ce.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ce.Z)(function*(){r.started&&(yield r.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(r=>{r||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(r=>this.isPrimary&&!r?this.li(e).next(()=>!1):!!r&&this.fi(e).next(()=>!0))).catch(e=>{if(Oo(e))return ft("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ft("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Lh(e).get("owner").next(r=>Ze.resolve(this.di(r)))}_i(e){return Lf(e).delete(this.clientId)}wi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=eo(a,"clientMetadata");return h.K().next(_=>{const C=e.gi(_,18e5),x=_.filter(H=>-1===C.indexOf(H));return Ze.forEach(x,H=>h.delete(H.clientId)).next(()=>x)})}).catch(()=>[]);if(e.si)for(const a of r)e.si.removeItem(e.yi(a.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Ze.resolve(!0):Lh(e).get("owner").next(r=>{if(null!==r&&this.mi(r.leaseTimestampMs,5e3)&&!this.pi(r.ownerId)){if(this.di(r)&&this.networkEnabled)return!0;if(!this.di(r)){if(!r.allowTabSynchronization)throw new ht(Je.FAILED_PRECONDITION,Fp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lf(e).K().next(a=>void 0===this.gi(a,5e3).find(h=>{if(this.clientId!==h.clientId){const C=!this.inForeground&&h.inForeground,x=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||C&&x)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&ft("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const a=new Gc(r,Fo.ot);return e.li(a).next(()=>e._i(a))}),e.ni.close(),e.Ai()})()}gi(e,r){return e.filter(a=>this.mi(a.updateTimeMs,r)&&!this.pi(a.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Lf(e).K().next(r=>this.gi(r,18e5).map(a=>a.clientId)))}get started(){return this.vs}getMutationQueue(e,r){return Ud.se(e,this.wt,r,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nh(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Bl.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,r,a){ft("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===r?"readonly":"readwrite",_=15===(C=this.Hs)?tu:14===C?Ul:13===C?ac:12===C?Of:11===C?Hc:void Bt();var C;let x;return this.ni.runTransaction(e,h,_,H=>(x=new Gc(H,this.Ps?this.Ps.next():Fo.ot),"readwrite-primary"===r?this.ai(x).next(q=>!!q||this.hi(x)).next(q=>{if(!q)throw Br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ht(Je.FAILED_PRECONDITION,ff);return a(x)}).next(q=>this.fi(x).next(()=>q)):this.bi(x).next(()=>a(x)))).then(H=>(x.raiseOnCommittedEvent(),H))}bi(e){return Lh(e).get("owner").next(r=>{if(null!==r&&this.mi(r.leaseTimestampMs,5e3)&&!this.pi(r.ownerId)&&!this.di(r)&&!(this.zs||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ht(Je.FAILED_PRECONDITION,Fp)})}fi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lh(e).put("owner",r)}static V(){return Vs.V()}li(e){const r=Lh(e);return r.get("owner").next(a=>this.di(a)?(ft("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ze.resolve())}mi(e,r){const a=Date.now();return!(e<a-r||e>a&&(Br(`Detected an update time that is in the future: ${e} > ${a}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,St.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var r;try{const a=null!==(null===(r=this.si)||void 0===r?void 0:r.getItem(this.yi(e)));return ft("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Br("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Br("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lh(s){return eo(s,"owner")}function Lf(s){return eo(s,"clientMetadata")}function Vf(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class Vh{constructor(e,r,a,h){this.targetId=e,this.fromCache=r,this.Pi=a,this.vi=h}static Vi(e,r){let a=Qn(),h=Qn();for(const _ of r.docChanges)switch(_.type){case 0:a=a.add(_.doc.key);break;case 1:h=h.add(_.doc.key)}return new Vh(e,r.fromCache,a,h)}}class Gm{constructor(){this.Si=!1}initialize(e,r){this.Di=e,this.indexManager=r,this.Si=!0}getDocumentsMatchingQuery(e,r,a,h){return this.Ci(e,r).next(_=>_||this.xi(e,r,h,a)).next(_=>_||this.Ni(e,r))}Ci(e,r){return Ze.resolve(null)}xi(e,r,a,h){return function(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}(r)||h.isEqual(Ht.min())?this.Ni(e,r):this.Di.getDocuments(e,a).next(_=>{const C=this.ki(r,_);return this.Oi(r,C,a,h)?this.Ni(e,r):(Eu()<=en.in.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Ed(r)),this.Mi(e,C,r,xc(h,-1)))})}ki(e,r){let a=new zn(Yu(e));return r.forEach((h,_)=>{Cf(e,_)&&(a=a.add(_))}),a}Oi(e,r,a,h){if(null===e.limit)return!1;if(a.size!==r.size)return!0;const _="F"===e.limitType?r.last():r.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(h)>0)}Ni(e,r){return Eu()<=en.in.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Ed(r)),this.Di.getDocumentsMatchingQuery(e,r,Zo.min())}Mi(e,r,a,h){return this.Di.getDocumentsMatchingQuery(e,a,h).next(_=>(r.forEach(C=>{_=_.insert(C.key,C)}),_))}}class Wm{constructor(e,r,a,h){this.persistence=e,this.Fi=r,this.wt=h,this.$i=new ri(gt),this.Bi=new xa(_=>ga(_),xl),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(a)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mg(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.$i))}}function zm(s,e,r,a){return new Wm(s,e,r,a)}function Lp(s,e){return fc.apply(this,arguments)}function fc(){return fc=(0,Ce.Z)(function*(s,e){const r=Lt(s);return yield r.persistence.runTransaction("Handle user change","readonly",a=>{let h;return r.mutationQueue.getAllMutationBatches(a).next(_=>(h=_,r.qi(e),r.mutationQueue.getAllMutationBatches(a))).next(_=>{const C=[],x=[];let H=Qn();for(const q of h){C.push(q.batchId);for(const oe of q.mutations)H=H.add(oe.key)}for(const q of _){x.push(q.batchId);for(const oe of q.mutations)H=H.add(oe.key)}return r.localDocuments.getDocuments(a,H).next(q=>({Ki:q,removedBatchIds:C,addedBatchIds:x}))})})}),fc.apply(this,arguments)}function Uh(s,e){const r=Lt(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),_=r.Ui.newChangeBuffer({trackRemovals:!0});return function(C,x,H,q){const oe=H.batch,Ie=oe.keys();let qe=Ze.resolve();return Ie.forEach(at=>{qe=qe.next(()=>q.getEntry(x,at)).next(_t=>{const qt=H.docVersions.get(at);_n(null!==qt),_t.version.compareTo(qt)<0&&(oe.applyToRemoteDocument(_t,H),_t.isValidDocument()&&(_t.setReadTime(H.commitVersion),q.addEntry(_t)))})}),qe.next(()=>C.mutationQueue.removeMutationBatch(x,oe))}(r,a,e,_).next(()=>_.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(C){let x=Qn();for(let H=0;H<C.mutationResults.length;++H)C.mutationResults[H].transformResults.length>0&&(x=x.add(C.batch.mutations[H].key));return x}(e))).next(()=>r.localDocuments.getDocuments(a,h))})}function Vp(s){const e=Lt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Vs.getLastRemoteSnapshotVersion(r))}function jd(s,e){const r=Lt(s),a=e.snapshotVersion;let h=r.$i;return r.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const C=r.Ui.newChangeBuffer({trackRemovals:!0});h=r.$i;const x=[];e.targetChanges.forEach((oe,Ie)=>{const qe=h.get(Ie);if(!qe)return;x.push(r.Vs.removeMatchingKeys(_,oe.removedDocuments,Ie).next(()=>r.Vs.addMatchingKeys(_,oe.addedDocuments,Ie)));let at=qe.withSequenceNumber(_.currentSequenceNumber);var _t,qt,fn;e.targetMismatches.has(Ie)?at=at.withResumeToken(Di.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):oe.resumeToken.approximateByteSize()>0&&(at=at.withResumeToken(oe.resumeToken,a)),h=h.insert(Ie,at),qt=at,fn=oe,(0===(_t=qe).resumeToken.approximateByteSize()||qt.snapshotVersion.toMicroseconds()-_t.snapshotVersion.toMicroseconds()>=3e8||fn.addedDocuments.size+fn.modifiedDocuments.size+fn.removedDocuments.size>0)&&x.push(r.Vs.updateTargetData(_,at))});let H=va(),q=Qn();if(e.documentUpdates.forEach(oe=>{e.resolvedLimboDocuments.has(oe)&&x.push(r.persistence.referenceDelegate.updateLimboDocument(_,oe))}),x.push(au(_,C,e.documentUpdates).next(oe=>{H=oe.Gi,q=oe.Qi})),!a.isEqual(Ht.min())){const oe=r.Vs.getLastRemoteSnapshotVersion(_).next(Ie=>r.Vs.setTargetsMetadata(_,_.currentSequenceNumber,a));x.push(oe)}return Ze.waitFor(x).next(()=>C.apply(_)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,H,q)).next(()=>H)}).then(_=>(r.$i=h,_))}function au(s,e,r){let a=Qn(),h=Qn();return r.forEach(_=>a=a.add(_)),e.getEntries(s,a).next(_=>{let C=va();return r.forEach((x,H)=>{const q=_.get(x);H.isFoundDocument()!==q.isFoundDocument()&&(h=h.add(x)),H.isNoDocument()&&H.version.isEqual(Ht.min())?(e.removeEntry(x,H.readTime),C=C.insert(x,H)):!q.isValidDocument()||H.version.compareTo(q.version)>0||0===H.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(H),C=C.insert(x,H)):ft("LocalStore","Ignoring outdated watch update for ",x,". Current version:",q.version," Watch version:",H.version)}),{Gi:C,Qi:h}})}function $d(s,e){const r=Lt(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Hd(s,e){const r=Lt(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return r.Vs.getTargetData(a,e).next(_=>_?(h=_,Ze.resolve(h)):r.Vs.allocateTargetId(a).next(C=>(h=new uc(e,C,0,a.currentSequenceNumber),r.Vs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=r.$i.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(r.$i=r.$i.insert(a.targetId,a),r.Bi.set(e,a.targetId)),a})}function Na(s,e,r){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,Ce.Z)(function*(s,e,r){const a=Lt(s),h=a.$i.get(e),_=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",_,C=>a.persistence.referenceDelegate.removeTarget(C,h)))}catch(C){if(!Oo(C))throw C;ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}a.$i=a.$i.remove(e),a.Bi.delete(h.target)}),Gd.apply(this,arguments)}function pc(s,e,r){const a=Lt(s);let h=Ht.min(),_=Qn();return a.persistence.runTransaction("Execute query","readonly",C=>function(x,H,q){const oe=Lt(x),Ie=oe.Bi.get(q);return void 0!==Ie?Ze.resolve(oe.$i.get(Ie)):oe.Vs.getTargetData(H,q)}(a,C,_a(e)).next(x=>{if(x)return h=x.lastLimboFreeSnapshotVersion,a.Vs.getMatchingKeysForTargetId(C,x.targetId).next(H=>{_=H})}).next(()=>a.Fi.getDocumentsMatchingQuery(C,e,r?h:Ht.min(),r?_:Qn())).next(x=>(Uf(a,bf(e),x),{documents:x,ji:_})))}function Up(s,e){const r=Lt(s),a=Lt(r.Vs),h=r.$i.get(e);return h?Promise.resolve(h.target):r.persistence.runTransaction("Get target data","readonly",_=>a.te(_,e).next(C=>C?C.target:null))}function Fg(s,e){const r=Lt(s),a=r.Li.get(e)||Ht.min();return r.persistence.runTransaction("Get new document changes","readonly",h=>r.Ui.getAllFromCollectionGroup(h,e,xc(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Uf(r,e,h),h))}function Uf(s,e,r){let a=Ht.min();r.forEach((h,_)=>{_.readTime.compareTo(a)>0&&(a=_.readTime)}),s.Li.set(e,a)}function Bh(){return Bh=(0,Ce.Z)(function*(s,e,r,a){const h=Lt(s);let _=Qn(),C=va();for(const q of r){const oe=e.Wi(q.metadata.name);q.document&&(_=_.add(oe));const Ie=e.zi(q);Ie.setReadTime(e.Hi(q.metadata.readTime)),C=C.insert(oe,Ie)}const x=h.Ui.newChangeBuffer({trackRemovals:!0}),H=yield Hd(h,(q=a,_a(rc(Wn.fromString(`__bundle__/docs/${q}`)))));var q;return h.persistence.runTransaction("Apply bundle documents","readwrite",q=>au(q,x,C).next(oe=>(x.apply(q),oe)).next(oe=>h.Vs.removeMatchingKeysForTargetId(q,H.targetId).next(()=>h.Vs.addMatchingKeys(q,_,H.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(q,oe.Gi,oe.Qi)).next(()=>oe.Gi)))}),Bh.apply(this,arguments)}function lv(s,e){return ul.apply(this,arguments)}function ul(){return ul=(0,Ce.Z)(function*(s,e,r=Qn()){const a=yield Hd(s,_a(ku(e.bundledQuery))),h=Lt(s);return h.persistence.runTransaction("Save named query","readwrite",_=>{const C=As(e.readTime);if(a.snapshotVersion.compareTo(C)>=0)return h.Ds.saveNamedQuery(_,e);const x=a.withResumeToken(Di.EMPTY_BYTE_STRING,C);return h.$i=h.$i.insert(x.targetId,x),h.Vs.updateTargetData(_,x).next(()=>h.Vs.removeMatchingKeysForTargetId(_,a.targetId)).next(()=>h.Vs.addMatchingKeys(_,r,a.targetId)).next(()=>h.Ds.saveNamedQuery(_,e))})}),ul.apply(this,arguments)}function Wd(s,e){return`firestore_clients_${s}_${e}`}function Km(s,e,r){let a=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Bp(s,e){return`firestore_targets_${s}_${e}`}class jp{constructor(e,r,a,h){this.user=e,this.batchId=r,this.state=a,this.error=h}static Ji(e,r,a){const h=JSON.parse(a);let _,C="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return C&&h.error&&(C="string"==typeof h.error.message&&"string"==typeof h.error.code,C&&(_=new ht(h.error.code,h.error.message))),C?new jp(e,r,h.state,_):(Br("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zc{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static Ji(e,r){const a=JSON.parse(r);let h,_="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return _&&a.error&&(_="string"==typeof a.error.message&&"string"==typeof a.error.code,_&&(h=new ht(a.error.code,a.error.message))),_?new Zc(e,a.state,h):(Br("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ta{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Ji(e,r){const a=JSON.parse(r);let h="object"==typeof a&&a.activeTargetIds instanceof Array,_=Dd();for(let C=0;h&&C<a.activeTargetIds.length;++C)h=Gt(a.activeTargetIds[C]),_=_.add(a.activeTargetIds[C]);return h?new ta(e,_):(Br("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class $p{constructor(e,r){this.clientId=e,this.onlineState=r}static Ji(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new $p(r.clientId,r.onlineState):(Br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Lg{constructor(){this.activeTargetIds=Dd()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vg{constructor(e,r,a,h,_){this.window=e,this.js=r,this.persistenceKey=a,this.tr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ri(gt),this.started=!1,this.ir=[];const C=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.rr=Wd(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Lg),this.cr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.syncEngine.Ri();for(const h of r){if(h===e.tr)continue;const _=e.getItem(Wd(e.persistenceKey,h));if(_){const C=ta.Ji(h,_);C&&(e.sr=e.sr.insert(C.clientId,C))}}e._r();const a=e.storage.getItem(e.lr);if(a){const h=e.wr(a);h&&e.mr(h)}for(const h of e.ir)e.nr(h);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let r=!1;return this.sr.forEach((a,h)=>{h.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,r,a){this.yr(e,r,a),this.pr(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Bp(this.persistenceKey,e));if(a){const h=Zc.Ji(e,a);h&&(r=h.state)}}return this.Ir.Xi(e),this._r(),r}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bp(this.persistenceKey,e))}updateQueryState(e,r,a){this.Tr(e,r,a)}handleUserChange(e,r,a){r.forEach(h=>{this.pr(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ft("SharedClientState","READ",e,r),r}setItem(e,r){ft("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ft("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var r=this;const a=e;if(a.storageArea===this.storage){if(ft("SharedClientState","EVENT",a.key,a.newValue),a.key===this.rr)return void Br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ce.Z)(function*(){if(r.started){if(null!==a.key)if(r.cr.test(a.key)){if(null==a.newValue){const h=r.Rr(a.key);return r.br(h,null)}{const h=r.Pr(a.key,a.newValue);if(h)return r.br(h.clientId,h)}}else if(r.ar.test(a.key)){if(null!==a.newValue){const h=r.vr(a.key,a.newValue);if(h)return r.Vr(h)}}else if(r.hr.test(a.key)){if(null!==a.newValue){const h=r.Sr(a.key,a.newValue);if(h)return r.Dr(h)}}else if(a.key===r.lr){if(null!==a.newValue){const h=r.wr(a.newValue);if(h)return r.mr(h)}}else if(a.key===r.ur){const h=function(_){let C=Fo.ot;if(null!=_)try{const x=JSON.parse(_);_n("number"==typeof x),C=x}catch(x){Br("SharedClientState","Failed to read sequence number from WebStorage",x)}return C}(a.newValue);h!==Fo.ot&&r.sequenceNumberHandler(h)}else if(a.key===r.dr){const h=r.Cr(a.newValue);yield Promise.all(h.map(_=>r.syncEngine.Nr(_)))}}else r.ir.push(a)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,r,a){const h=new jp(this.currentUser,e,r,a),_=Km(this.persistenceKey,this.currentUser,e);this.setItem(_,h.Yi())}pr(e){const r=Km(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,r,a){const h=Bp(this.persistenceKey,e),_=new Zc(e,r,a);this.setItem(h,_.Yi())}Ar(e){const r=JSON.stringify(Array.from(e));this.setItem(this.dr,r)}Rr(e){const r=this.cr.exec(e);return r?r[1]:null}Pr(e,r){const a=this.Rr(e);return ta.Ji(a,r)}vr(e,r){const a=this.ar.exec(e),h=Number(a[1]);return jp.Ji(new ti(void 0!==a[2]?a[2]:null),h,r)}Sr(e,r){const a=this.hr.exec(e),h=Number(a[1]);return Zc.Ji(h,r)}wr(e){return $p.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var r=this;return(0,Ce.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.kr(e.batchId,e.state,e.error);ft("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,r){const a=r?this.sr.insert(e,r):this.sr.remove(e),h=this.gr(this.sr),_=this.gr(a),C=[],x=[];return _.forEach(H=>{h.has(H)||C.push(H)}),h.forEach(H=>{_.has(H)||x.push(H)}),this.syncEngine.Mr(C,x).then(()=>{this.sr=a})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let r=Dd();return e.forEach((a,h)=>{r=r.unionWith(h.activeTargetIds)}),r}}class Zm{constructor(){this.Fr=new Lg,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,r,a){this.$r[e]=r}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Lg,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bf{Br(e){}shutdown(){}}class z_{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Hp{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ug extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,r,a,h,_){const C=this.oo(e,r);ft("RestConnection","Sending: ",C,a);const x={};return this.uo(x,h,_),this.co(e,C,x,a).then(H=>(ft("RestConnection","Received: ",H),H),H=>{throw go("RestConnection",`${e} failed with error: `,H,"url: ",C,"request:",a),H})}ao(e,r,a,h,_,C){return this.ro(e,r,a,h,_)}uo(e,r,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ko,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((h,_)=>e[_]=h),a&&a.headers.forEach((h,_)=>e[_]=h)}oo(e,r){return`${this.so}/v1/${r}:${jh[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,r,a,h){return new Promise((_,C)=>{const x=new zu;x.listenOnce(Zl.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case Ta.NO_ERROR:const q=x.getResponseJson();ft("Connection","XHR received:",JSON.stringify(q)),_(q);break;case Ta.TIMEOUT:ft("Connection",'RPC "'+e+'" timed out'),C(new ht(Je.DEADLINE_EXCEEDED,"Request time out"));break;case Ta.HTTP_ERROR:const oe=x.getStatus();if(ft("Connection",'RPC "'+e+'" failed with status:',oe,"response text:",x.getResponseText()),oe>0){const Ie=x.getResponseJson().error;if(Ie&&Ie.status&&Ie.message){const qe=function(at){const _t=at.toLowerCase().replace(/_/g,"-");return Object.values(Je).indexOf(_t)>=0?_t:Je.UNKNOWN}(Ie.status);C(new ht(qe,Ie.message))}else C(new ht(Je.UNKNOWN,"Server responded with status "+x.getStatus()))}else C(new ht(Je.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{ft("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(h);x.send(r,"POST",H,a,15)})}ho(e,r,a){const h=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=Tc(),C=Cl(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new hf({})),this.uo(x.initMessageHeaders,r,a),(0,St.uI)()||(0,St.b$)()||(0,St.d)()||(0,St.w1)()||(0,St.Mn)()||(0,St.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const H=h.join("");ft("Connection","Creating WebChannel: "+H,x);const q=_.createWebChannel(H,x);let oe=!1,Ie=!1;const qe=new Hp({jr:_t=>{Ie?ft("Connection","Not sending because WebChannel is closed:",_t):(oe||(ft("Connection","Opening WebChannel transport."),q.open(),oe=!0),ft("Connection","WebChannel sending:",_t),q.send(_t))},Wr:()=>q.close()}),at=(_t,qt,fn)=>{_t.listen(qt,Zr=>{try{fn(Zr)}catch(us){setTimeout(()=>{throw us},0)}})};return at(q,fs.EventType.OPEN,()=>{Ie||ft("Connection","WebChannel transport opened.")}),at(q,fs.EventType.CLOSE,()=>{Ie||(Ie=!0,ft("Connection","WebChannel transport closed"),qe.eo())}),at(q,fs.EventType.ERROR,_t=>{Ie||(Ie=!0,go("Connection","WebChannel transport errored:",_t),qe.eo(new ht(Je.UNAVAILABLE,"The operation could not be completed")))}),at(q,fs.EventType.MESSAGE,_t=>{var qt;if(!Ie){const fn=_t.data[0];_n(!!fn);const Zr=fn,us=Zr.error||(null===(qt=Zr[0])||void 0===qt?void 0:qt.error);if(us){ft("Connection","WebChannel received error:",us);const xi=us.status;let To=function(Ms){const Fa=Kn[Ms];if(void 0!==Fa)return xf(Fa)}(xi),yi=us.message;void 0===To&&(To=Je.INTERNAL,yi="Unknown error status: "+xi+" with message "+us.message),Ie=!0,qe.eo(new ht(To,yi)),q.close()}else ft("Connection","WebChannel received:",fn),qe.no(fn)}}),at(C,Sc.STAT_EVENT,_t=>{_t.stat===qo.PROXY?ft("Connection","Detected buffering proxy"):_t.stat===qo.NOPROXY&&ft("Connection","Detected no buffering proxy")}),setTimeout(()=>{qe.Zr()},0),qe}}function Bg(){return"undefined"!=typeof window?window:null}function Yc(){return"undefined"!=typeof document?document:null}function Qc(s){return new Ip(s,!0)}class $h{constructor(e,r,a=1e3,h=1.5,_=6e4){this.js=e,this.timerId=r,this.lo=a,this.fo=h,this._o=_,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const r=Math.floor(this.wo+this.To()),a=Math.max(0,Date.now()-this.yo),h=Math.max(0,r-a);h>0&&ft("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.wo} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,h,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Gp{constructor(e,r,a,h,_,C,x,H){this.js=e,this.Ao=a,this.Ro=h,this.bo=_,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=x,this.listener=H,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new $h(e,r)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,r){var a=this;return(0,Ce.Z)(function*(){a.Fo(),a.$o(),a.So.cancel(),a.Po++,4!==e?a.So.reset():r&&r.code===Je.RESOURCE_EXHAUSTED?(Br(r.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),a.So.po()):r&&r.code===Je.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Bo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Jr(r)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),r=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Po===r&&this.Uo(a,h)},a=>{e(()=>{const h=new ht(Je.UNKNOWN,"Fetching auth token failed: "+a.message);return this.qo(h)})})}Uo(e,r){const a=this.Lo(this.Po);this.stream=this.Ko(e,r),this.stream.zr(()=>{a(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(h=>{a(()=>this.qo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}xo(){var e=this;this.state=5,this.So.Io((0,Ce.Z)(function*(){e.state=0,e.start()}))}qo(e){return ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return r=>{this.js.enqueueAndForget(()=>this.Po===e?r():(ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wp extends Gp{constructor(e,r,a,h,_,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,h,C),this.wt=_}Ko(e,r){return this.bo.ho("Listen",e,r)}onMessage(e){this.So.reset();const r=function(s,e){let r;if("targetChange"in e){const a="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:Bt(),h=e.targetChange.targetIds||[],_=function(H,q){return H.dt?(_n(void 0===q||"string"==typeof q),Di.fromBase64String(q||"")):(_n(void 0===q||q instanceof Uint8Array),Di.fromUint8Array(q||new Uint8Array))}(s,e.targetChange.resumeToken),C=e.targetChange.cause,x=C&&function(H){const q=void 0===H.code?Je.UNKNOWN:xf(H.code);return new ht(q,H.message||"")}(C);r=new Vc(a,h,_,x||null)}else if("documentChange"in e){const a=e.documentChange,h=eu(s,a.document.name),_=As(a.document.updateTime),C=new $i({mapValue:{fields:a.document.fields}}),x=si.newFoundDocument(h,_,C);r=new jn(a.targetIds||[],a.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const a=e.documentDelete,h=eu(s,a.document),_=a.readTime?As(a.readTime):Ht.min(),C=si.newNoDocument(h,_);r=new jn([],a.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const a=e.documentRemove,h=eu(s,a.document);r=new jn([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Bt();{const a=e.filter,_=new Af(a.count||0);r=new Lc(a.targetId,_)}}var H;return r}(this.wt,e),a=function(h){if(!("targetChange"in h))return Ht.min();const _=h.targetChange;return _.targetIds&&_.targetIds.length?Ht.min():_.readTime?As(_.readTime):Ht.min()}(e);return this.listener.Go(r,a)}Qo(e){const r={};r.database=Vl(this.wt),r.addTarget=function(h,_){let C;const x=_.target;return C=gh(x)?{documents:xs(h,x)}:{query:Vn(h,x)},C.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?C.resumeToken=ic(h,_.resumeToken):_.snapshotVersion.compareTo(Ht.min())>0&&(C.readTime=el(h,_.snapshotVersion.toTimestamp())),C}(this.wt,e);const a=function(s,e){const r=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bt()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);a&&(r.labels=a),this.Mo(r)}jo(e){const r={};r.database=Vl(this.wt),r.removeTarget=e,this.Mo(r)}}class q_ extends Gp{constructor(e,r,a,h,_,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,h,C),this.wt=_,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,r){return this.bo.ho("Write",e,r)}onMessage(e){if(_n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const r=function(s,e){return s&&s.length>0?(_n(void 0!==e),s.map(r=>function(a,h){let _=As(a.updateTime?a.updateTime:h);return _.isEqual(Ht.min())&&(_=As(h)),new wg(_,a.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),a=As(e.commitTime);return this.listener.Jo(a,r)}return _n(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Vl(this.wt),this.Mo(e)}Ho(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>jc(this.wt,a))};this.Mo(r)}}class jf extends class{}{constructor(e,r,a,h){super(),this.authCredentials=e,this.appCheckCredentials=r,this.bo=a,this.wt=h,this.Zo=!1}tu(){if(this.Zo)throw new ht(Je.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,r,a){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,_])=>this.bo.ro(e,r,a,h,_)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ht(Je.UNKNOWN,h.toString())})}ao(e,r,a,h){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,C])=>this.bo.ao(e,r,a,_,C,h)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new ht(Je.UNKNOWN,_.toString())})}terminate(){this.Zo=!0}}class Ym{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Br(r),this.su=!1):ft("OnlineStateTracker",r)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Qm{constructor(e,r,a,h,_){var C=this;this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=_,this.du.Br(x=>{a.enqueueAndForget((0,Ce.Z)(function*(){var H;Fu(C)&&(ft("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,Ce.Z)(function*(q){const oe=Lt(q);oe.lu.add(4),yield Hl(oe),oe._u.set("Unknown"),oe.lu.delete(4),yield $f(oe)}),function(q){return H.apply(this,arguments)})(C))}))}),this._u=new Ym(a,h)}}function $f(s){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,Ce.Z)(function*(s){if(Fu(s))for(const e of s.fu)yield e(!0)}),Ma.apply(this,arguments)}function Hl(s){return jg.apply(this,arguments)}function jg(){return jg=(0,Ce.Z)(function*(s){for(const e of s.fu)yield e(!1)}),jg.apply(this,arguments)}function Hf(s,e){const r=Lt(s);r.hu.has(e.targetId)||(r.hu.set(e.targetId,e),Wf(r)?Gf(r):td(r).Co()&&qp(r,e))}function zp(s,e){const r=Lt(s),a=td(r);r.hu.delete(e),a.Co()&&$g(r,e),0===r.hu.size&&(a.Co()?a.ko():Fu(r)&&r._u.set("Unknown"))}function qp(s,e){s.wu.Nt(e.targetId),td(s).Qo(e)}function $g(s,e){s.wu.Nt(e),td(s).jo(e)}function Gf(s){s.wu=new xu({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),te:e=>s.hu.get(e)||null}),td(s).start(),s._u.iu()}function Wf(s){return Fu(s)&&!td(s).Do()&&s.hu.size>0}function Fu(s){return 0===Lt(s).lu.size}function zf(s){s.wu=void 0}function zd(s){return Jc.apply(this,arguments)}function Jc(){return Jc=(0,Ce.Z)(function*(s){s.hu.forEach((e,r)=>{qp(s,e)})}),Jc.apply(this,arguments)}function Kp(s,e){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,Ce.Z)(function*(s,e){zf(s),Wf(s)?(s._u.uu(e),Gf(s)):s._u.set("Unknown")}),Hg.apply(this,arguments)}function Hh(s,e,r){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,Ce.Z)(function*(s,e,r){if(s._u.set("Online"),e instanceof Vc&&2===e.state&&e.cause)try{yield(a=(0,Ce.Z)(function*(h,_){const C=_.cause;for(const x of _.targetIds)h.hu.has(x)&&(yield h.remoteSyncer.rejectListen(x,C),h.hu.delete(x),h.wu.removeTarget(x))}),function(h,_){return a.apply(this,arguments)})(s,e)}catch(a){ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield qf(s,a)}else if(e instanceof jn?s.wu.Ut(e):e instanceof Lc?s.wu.zt(e):s.wu.Gt(e),!r.isEqual(Ht.min()))try{const a=yield Vp(s.localStore);r.compareTo(a)>=0&&(yield function(h,_){const C=h.wu.Yt(_);return C.targetChanges.forEach((x,H)=>{if(x.resumeToken.approximateByteSize()>0){const q=h.hu.get(H);q&&h.hu.set(H,q.withResumeToken(x.resumeToken,_))}}),C.targetMismatches.forEach(x=>{const H=h.hu.get(x);if(!H)return;h.hu.set(x,H.withResumeToken(Di.EMPTY_BYTE_STRING,H.snapshotVersion)),$g(h,x);const q=new uc(H.target,x,1,H.sequenceNumber);qp(h,q)}),h.remoteSyncer.applyRemoteEvent(C)}(s,r))}catch(a){ft("RemoteStore","Failed to raise snapshot:",a),yield qf(s,a)}var a}),Gh.apply(this,arguments)}function qf(s,e,r){return qd.apply(this,arguments)}function qd(){return qd=(0,Ce.Z)(function*(s,e,r){if(!Oo(e))throw e;s.lu.add(1),yield Hl(s),s._u.set("Offline"),r||(r=()=>Vp(s.localStore)),s.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){ft("RemoteStore","Retrying IndexedDB access"),yield r(),s.lu.delete(1),yield $f(s)}))}),qd.apply(this,arguments)}function Zp(s,e){return e().catch(r=>qf(s,r,e))}function Xc(s){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ce.Z)(function*(s){const e=Lt(s),r=Vu(e);let a=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;K_(e);)try{const h=yield $d(e.localStore,a);if(null===h){0===e.au.length&&r.ko();break}a=h.batchId,Yp(e,h)}catch(h){yield qf(e,h)}Wh(e)&&Qp(e)}),Jm.apply(this,arguments)}function K_(s){return Fu(s)&&s.au.length<10}function Yp(s,e){s.au.push(e);const r=Vu(s);r.Co()&&r.zo&&r.Ho(e.mutations)}function Wh(s){return Fu(s)&&!Vu(s).Do()&&s.au.length>0}function Qp(s){Vu(s).start()}function Xm(s){return ed.apply(this,arguments)}function ed(){return ed=(0,Ce.Z)(function*(s){Vu(s).Xo()}),ed.apply(this,arguments)}function Eo(s){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,Ce.Z)(function*(s){const e=Vu(s);for(const r of s.au)e.Ho(r.mutations)}),Gl.apply(this,arguments)}function Z_(s,e,r){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,Ce.Z)(function*(s,e,r){const a=s.au.shift(),h=Md.from(a,e,r);yield Zp(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield Xc(s)}),Jp.apply(this,arguments)}function e_(s,e){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,Ce.Z)(function*(s,e){var r;e&&Vu(s).zo&&(yield(r=(0,Ce.Z)(function*(a,h){if(yo(_=h.code)&&_!==Je.ABORTED){const C=a.au.shift();Vu(a).No(),yield Zp(a,()=>a.remoteSyncer.rejectFailedWrite(C.batchId,h)),yield Xc(a)}var _}),function(a,h){return r.apply(this,arguments)})(s,e)),Wh(s)&&Qp(s)}),Lu.apply(this,arguments)}function Kd(s,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,Ce.Z)(function*(s,e){const r=Lt(s);r.asyncQueue.verifyOperationInProgress(),ft("RemoteStore","RemoteStore received new credentials");const a=Fu(r);r.lu.add(3),yield Hl(r),a&&r._u.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.lu.delete(3),yield $f(r)}),Zd.apply(this,arguments)}function wo(s,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,Ce.Z)(function*(s,e){const r=Lt(s);e?(r.lu.delete(2),yield $f(r)):e||(r.lu.add(2),yield Hl(r),r._u.set("Unknown"))}),Xp.apply(this,arguments)}function td(s){return s.mu||(s.mu=function(e,r,a){const h=Lt(e);return h.tu(),new Wp(r,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,a)}(s.datastore,s.asyncQueue,{zr:zd.bind(null,s),Jr:Kp.bind(null,s),Go:Hh.bind(null,s)}),s.fu.push(function(){var e=(0,Ce.Z)(function*(r){r?(s.mu.No(),Wf(s)?Gf(s):s._u.set("Unknown")):(yield s.mu.stop(),zf(s))});return function(r){return e.apply(this,arguments)}}())),s.mu}function Vu(s){return s.gu||(s.gu=function(e,r,a){const h=Lt(e);return h.tu(),new q_(r,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,a)}(s.datastore,s.asyncQueue,{zr:Xm.bind(null,s),Jr:e_.bind(null,s),Yo:Eo.bind(null,s),Jo:Z_.bind(null,s)}),s.fu.push(function(){var e=(0,Ce.Z)(function*(r){r?(s.gu.No(),yield Xc(s)):(yield s.gu.stop(),s.au.length>0&&(ft("RemoteStore",`Stopping write stream with ${s.au.length} pending writes`),s.au=[]))});return function(r){return e.apply(this,arguments)}}())),s.gu}class eg{constructor(e,r,a,h,_){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=h,this.removalCallback=_,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,r,a,h,_){const C=Date.now()+a,x=new eg(e,r,C,h,_);return x.start(a),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ht(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Co(s,e){if(Br("AsyncQueue",`${e}: ${s}`),Oo(s))return new ht(Je.UNAVAILABLE,`${e}: ${s}`);throw s}class Yd{constructor(e){this.comparator=e?(r,a)=>e(r,a)||Mt.comparator(r.key,a.key):(r,a)=>Mt.comparator(r.key,a.key),this.keyedMap=ss(),this.sortedSet=new ri(this.comparator)}static emptySet(e){return new Yd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Yd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const h=r.getNext().key,_=a.getNext().key;if(!h.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const a=new Yd;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class tg{constructor(){this.yu=new ri(Mt.comparator)}track(e){const r=e.doc.key,a=this.yu.get(r);a?0!==e.type&&3===a.type?this.yu=this.yu.insert(r,e):3===e.type&&1!==a.type?this.yu=this.yu.insert(r,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.yu=this.yu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.yu=this.yu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.yu=this.yu.remove(r):1===e.type&&2===a.type?this.yu=this.yu.insert(r,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.yu=this.yu.insert(r,{type:2,doc:e.doc}):Bt():this.yu=this.yu.insert(r,e)}pu(){const e=[];return this.yu.inorderTraversal((r,a)=>{e.push(a)}),e}}class Qd{constructor(e,r,a,h,_,C,x,H){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=_,this.fromCache=C,this.syncStateChanged=x,this.excludesMetadataChanges=H}static fromInitialDocuments(e,r,a,h){const _=[];return r.forEach(C=>{_.push({type:0,doc:C})}),new Qd(e,r,Yd.emptySet(r),_,a,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(r[h].type!==a[h].type||!r[h].doc.isEqual(a[h].doc))return!1;return!0}}class Y_{constructor(){this.Iu=void 0,this.listeners=[]}}class t_{constructor(){this.queries=new xa(e=>wf(e),Pc),this.onlineState="Unknown",this.Tu=new Set}}function nd(s,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Ce.Z)(function*(s,e){const r=Lt(s),a=e.query;let h=!1,_=r.queries.get(a);if(_||(h=!0,_=new Y_),h)try{_.Iu=yield r.onListen(a)}catch(C){const x=Co(C,`Initialization of query '${Ed(e.query)}' failed`);return void e.onError(x)}r.queries.set(a,_),_.listeners.push(e),e.Eu(r.onlineState),_.Iu&&e.Au(_.Iu)&&Zf(r)}),Kf.apply(this,arguments)}function Jd(s,e){return ng.apply(this,arguments)}function ng(){return ng=(0,Ce.Z)(function*(s,e){const r=Lt(s),a=e.query;let h=!1;const _=r.queries.get(a);if(_){const C=_.listeners.indexOf(e);C>=0&&(_.listeners.splice(C,1),h=0===_.listeners.length)}if(h)return r.queries.delete(a),r.onUnlisten(a)}),ng.apply(this,arguments)}function Xd(s,e){const r=Lt(s);let a=!1;for(const h of e){const C=r.queries.get(h.query);if(C){for(const x of C.listeners)x.Au(h)&&(a=!0);C.Iu=h}}a&&Zf(r)}function Q_(s,e,r){const a=Lt(s),h=a.queries.get(e);if(h)for(const _ of h.listeners)_.onError(r);a.queries.delete(e)}function Zf(s){s.Tu.forEach(e=>{e.next()})}class zh{constructor(e,r,a){this.query=e,this.Ru=r,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=a||{}}Au(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Qd(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),r=!0):this.Vu(e,this.onlineState)&&(this.Su(e),r=!0),this.Pu=e,r}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let r=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),r=!0),r}Vu(e,r){return!e.fromCache||!(this.options.Du&&"Offline"!==r||e.docs.isEmpty()&&"Offline"!==r)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class J_{constructor(e,r){this.payload=e,this.byteLength=r}Cu(){return"metadata"in this.payload}}class Gg{constructor(e){this.wt=e}Wi(e){return eu(this.wt,e)}zi(e){return e.metadata.exists?tl(this.wt,e.document,!1):si.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return As(e)}}class X_{constructor(e,r,a){this.xu=e,this.localStore=r,this.wt=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wg(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const a=Wn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ku(e){const r=new Map,a=new Gg(this.wt);for(const h of e)if(h.metadata.queries){const _=a.Wi(h.metadata.name);for(const C of h.metadata.queries){const x=(r.get(C)||Qn()).add(_);r.set(C,x)}}return r}complete(){var e=this;return(0,Ce.Z)(function*(){const r=yield function(s,e,r,a){return Bh.apply(this,arguments)}(e.localStore,new Gg(e.wt),e.documents,e.xu.id),a=e.ku(e.documents);for(const h of e.queries)yield lv(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:r}})()}}function Wg(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Hi{constructor(e){this.key=e}}class Yf{constructor(e){this.key=e}}class ey{constructor(e,r){this.query=e,this.Fu=r,this.$u=null,this.current=!1,this.Bu=Qn(),this.mutatedKeys=Qn(),this.Lu=Yu(e),this.Uu=new Yd(this.Lu)}get qu(){return this.Fu}Ku(e,r){const a=r?r.Gu:new tg,h=r?r.Uu:this.Uu;let _=r?r.mutatedKeys:this.mutatedKeys,C=h,x=!1;const H="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,q="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((oe,Ie)=>{const qe=h.get(oe),at=Cf(this.query,Ie)?Ie:null,_t=!!qe&&this.mutatedKeys.has(qe.key),qt=!!at&&(at.hasLocalMutations||this.mutatedKeys.has(at.key)&&at.hasCommittedMutations);let fn=!1;qe&&at?qe.data.isEqual(at.data)?_t!==qt&&(a.track({type:3,doc:at}),fn=!0):this.Qu(qe,at)||(a.track({type:2,doc:at}),fn=!0,(H&&this.Lu(at,H)>0||q&&this.Lu(at,q)<0)&&(x=!0)):!qe&&at?(a.track({type:0,doc:at}),fn=!0):qe&&!at&&(a.track({type:1,doc:qe}),fn=!0,(H||q)&&(x=!0)),fn&&(at?(C=C.add(at),_=qt?_.add(oe):_.delete(oe)):(C=C.delete(oe),_=_.delete(oe)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const oe="F"===this.query.limitType?C.last():C.first();C=C.delete(oe.key),_=_.delete(oe.key),a.track({type:1,doc:oe})}return{Uu:C,Gu:a,Oi:x,mutatedKeys:_}}Qu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a){const h=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const _=e.Gu.pu();_.sort((q,oe)=>function(Ie,qe){const at=_t=>{switch(_t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return at(Ie)-at(qe)}(q.type,oe.type)||this.Lu(q.doc,oe.doc)),this.ju(a);const C=r?this.Wu():[],x=0===this.Bu.size&&this.current?1:0,H=x!==this.$u;return this.$u=x,0!==_.length||H?{snapshot:new Qd(this.query,e.Uu,h,_,e.mutatedKeys,0===x,H,!1),zu:C}:{zu:C}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new tg,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(r=>this.Fu=this.Fu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Fu=this.Fu.delete(r)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Qn(),this.Uu.forEach(a=>{this.Hu(a.key)&&(this.Bu=this.Bu.add(a.key))});const r=[];return e.forEach(a=>{this.Bu.has(a)||r.push(new Yf(a))}),this.Bu.forEach(a=>{e.has(a)||r.push(new Hi(a))}),r}Ju(e){this.Fu=e.ji,this.Bu=Qn();const r=this.Ku(e.documents);return this.applyChanges(r,!0)}Yu(){return Qd.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class gc{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class zg{constructor(e){this.key=e,this.Xu=!1}}class Qf{constructor(e,r,a,h,_,C){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=h,this.currentUser=_,this.maxConcurrentLimboResolutions=C,this.Zu={},this.tc=new xa(x=>wf(x),Pc),this.ec=new Map,this.nc=new Set,this.sc=new ri(Mt.comparator),this.ic=new Map,this.rc=new Pg,this.oc={},this.uc=new Map,this.cc=Ph.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function ty(s,e){return qg.apply(this,arguments)}function qg(){return qg=(0,Ce.Z)(function*(s,e){const r=ug(s);let a,h;const _=r.tc.get(e);if(_)a=_.targetId,r.sharedClientState.addLocalQueryTarget(a),h=_.view.Yu();else{const C=yield Hd(r.localStore,_a(e));r.isPrimaryClient&&Hf(r.remoteStore,C);const x=r.sharedClientState.addLocalQueryTarget(C.targetId);a=C.targetId,h=yield mc(r,e,a,"current"===x)}return h}),qg.apply(this,arguments)}function mc(s,e,r,a){return ll.apply(this,arguments)}function ll(){return ll=(0,Ce.Z)(function*(s,e,r,a){s.hc=(oe,Ie,qe)=>{return(at=(0,Ce.Z)(function*(_t,qt,fn,Zr){let us=qt.view.Ku(fn);us.Oi&&(us=yield pc(_t.localStore,qt.query,!1).then(({documents:yi})=>qt.view.Ku(yi,us)));const xi=Zr&&Zr.targetChanges.get(qt.targetId),To=qt.view.applyChanges(us,_t.isPrimaryClient,xi);return ig(_t,qt.targetId,To.zu),To.snapshot}),function(_t,qt,fn,Zr){return at.apply(this,arguments)})(s,oe,Ie,qe);var at};const h=yield pc(s.localStore,e,!0),_=new ey(e,h.ji),C=_.Ku(h.documents),x=Ra.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState),H=_.applyChanges(C,s.isPrimaryClient,x);ig(s,r,H.zu);const q=new gc(e,r,_);return s.tc.set(e,q),s.ec.has(r)?s.ec.get(r).push(e):s.ec.set(r,[e]),H.snapshot}),ll.apply(this,arguments)}function n_(s,e){return qh.apply(this,arguments)}function qh(){return qh=(0,Ce.Z)(function*(s,e){const r=Lt(s),a=r.tc.get(e),h=r.ec.get(a.targetId);if(h.length>1)return r.ec.set(a.targetId,h.filter(_=>!Pc(_,e))),void r.tc.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Na(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),zp(r.remoteStore,a.targetId),rd(r,a.targetId)}).catch(bl))):(rd(r,a.targetId),yield Na(r.localStore,a.targetId,!0))}),qh.apply(this,arguments)}function Kg(){return Kg=(0,Ce.Z)(function*(s,e,r){const a=lg(s);try{const h=yield function(_,C){const x=Lt(_),H=Gn.now(),q=C.reduce((qe,at)=>qe.add(at.key),Qn());let oe,Ie;return x.persistence.runTransaction("Locally write mutations","readwrite",qe=>{let at=va(),_t=Qn();return x.Ui.getEntries(qe,q).next(qt=>{at=qt,at.forEach((fn,Zr)=>{Zr.isValidDocument()||(_t=_t.add(fn))})}).next(()=>x.localDocuments.getOverlayedDocuments(qe,at)).next(qt=>{oe=qt;const fn=[];for(const Zr of C){const us=Sf(Zr,oe.get(Zr.key).overlayedDocument);null!=us&&fn.push(new xn(Zr.key,us,ec(us.value.mapValue),Zi.exists(!0)))}return x.mutationQueue.addMutationBatch(qe,H,fn,C)}).next(qt=>{Ie=qt;const fn=qt.applyToLocalDocumentSet(oe,_t);return x.documentOverlayCache.saveOverlays(qe,qt.batchId,fn)})}).then(()=>({batchId:Ie.batchId,changes:bd(oe)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(_,C,x){let H=_.oc[_.currentUser.toKey()];H||(H=new ri(gt)),H=H.insert(C,x),_.oc[_.currentUser.toKey()]=H}(a,h.batchId,r),yield bo(a,h.changes),yield Xc(a.remoteStore)}catch(h){const _=Co(h,"Failed to persist write");r.reject(_)}}),Kg.apply(this,arguments)}function eh(s,e){return th.apply(this,arguments)}function th(){return th=(0,Ce.Z)(function*(s,e){const r=Lt(s);try{const a=yield jd(r.localStore,e);e.targetChanges.forEach((h,_)=>{const C=r.ic.get(_);C&&(_n(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?C.Xu=!0:h.modifiedDocuments.size>0?_n(C.Xu):h.removedDocuments.size>0&&(_n(C.Xu),C.Xu=!1))}),yield bo(r,a,e)}catch(a){yield bl(a)}}),th.apply(this,arguments)}function Xf(s,e,r){const a=Lt(s);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const h=[];a.tc.forEach((_,C)=>{const x=C.view.Eu(e);x.snapshot&&h.push(x.snapshot)}),function(_,C){const x=Lt(_);x.onlineState=C;let H=!1;x.queries.forEach((q,oe)=>{for(const Ie of oe.listeners)Ie.Eu(C)&&(H=!0)}),H&&Zf(x)}(a.eventManager,e),h.length&&a.Zu.Go(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Zg(s,e,r){return ep.apply(this,arguments)}function ep(){return ep=(0,Ce.Z)(function*(s,e,r){const a=Lt(s);a.sharedClientState.updateQueryState(e,"rejected",r);const h=a.ic.get(e),_=h&&h.key;if(_){let C=new ri(Mt.comparator);C=C.insert(_,si.newNoDocument(_,Ht.min()));const x=Qn().add(_),H=new Fc(Ht.min(),new Map,new zn(gt),C,x);yield eh(a,H),a.sc=a.sc.remove(_),a.ic.delete(e),rp(a)}else yield Na(a.localStore,e,!1).then(()=>rd(a,e,r)).catch(bl)}),ep.apply(this,arguments)}function tp(s,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,Ce.Z)(function*(s,e){const r=Lt(s),a=e.batch.batchId;try{const h=yield Uh(r.localStore,e);Jg(r,a,null),rg(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield bo(r,h)}catch(h){yield bl(h)}}),Kh.apply(this,arguments)}function Yg(s,e,r){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,Ce.Z)(function*(s,e,r){const a=Lt(s);try{const h=yield function(_,C){const x=Lt(_);return x.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let q;return x.mutationQueue.lookupMutationBatch(H,C).next(oe=>(_n(null!==oe),q=oe.keys(),x.mutationQueue.removeMutationBatch(H,oe))).next(()=>x.mutationQueue.performConsistencyCheck(H)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(H,q,C)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,q)).next(()=>x.localDocuments.getDocuments(H,q))})}(a.localStore,e);Jg(a,e,r),rg(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),yield bo(a,h)}catch(h){yield bl(h)}}),Qg.apply(this,arguments)}function np(){return np=(0,Ce.Z)(function*(s,e){const r=Lt(s);Fu(r.remoteStore)||ft("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(_){const C=Lt(_);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>C.mutationQueue.getHighestUnacknowledgedBatchId(x))}(r.localStore);if(-1===a)return void e.resolve();const h=r.uc.get(a)||[];h.push(e),r.uc.set(a,h)}catch(a){const h=Co(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),np.apply(this,arguments)}function rg(s,e){(s.uc.get(e)||[]).forEach(r=>{r.resolve()}),s.uc.delete(e)}function Jg(s,e,r){const a=Lt(s);let h=a.oc[a.currentUser.toKey()];if(h){const _=h.get(e);_&&(r?_.reject(r):_.resolve(),h=h.remove(e)),a.oc[a.currentUser.toKey()]=h}}function rd(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.ec.get(e))s.tc.delete(a),r&&s.Zu.lc(a,r);s.ec.delete(e),s.isPrimaryClient&&s.rc.us(e).forEach(a=>{s.rc.containsKey(a)||Xg(s,a)})}function Xg(s,e){s.nc.delete(e.path.canonicalString());const r=s.sc.get(e);null!==r&&(zp(s.remoteStore,r),s.sc=s.sc.remove(e),s.ic.delete(r),rp(s))}function ig(s,e,r){for(const a of r)a instanceof Hi?(s.rc.addReference(a.key,e),uu(s,a)):a instanceof Yf?(ft("SyncEngine","Document no longer in limbo: "+a.key),s.rc.removeReference(a.key,e),s.rc.containsKey(a.key)||Xg(s,a.key)):Bt()}function uu(s,e){const r=e.key,a=r.path.canonicalString();s.sc.get(r)||s.nc.has(a)||(ft("SyncEngine","New document in limbo: "+r),s.nc.add(a),rp(s))}function rp(s){for(;s.nc.size>0&&s.sc.size<s.maxConcurrentLimboResolutions;){const e=s.nc.values().next().value;s.nc.delete(e);const r=new Mt(Wn.fromString(e)),a=s.cc.next();s.ic.set(a,new zg(r)),s.sc=s.sc.insert(r,a),Hf(s.remoteStore,new uc(_a(rc(r.path)),a,2,Fo.ot))}}function bo(s,e,r){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,Ce.Z)(function*(s,e,r){const a=Lt(s),h=[],_=[],C=[];var x;a.tc.isEmpty()||(a.tc.forEach((x,H)=>{C.push(a.hc(H,e,r).then(q=>{if(q){a.isPrimaryClient&&a.sharedClientState.updateQueryState(H.targetId,q.fromCache?"not-current":"current"),h.push(q);const oe=Vh.Vi(H.targetId,q);_.push(oe)}}))}),yield Promise.all(C),a.Zu.Go(h),yield(x=(0,Ce.Z)(function*(H,q){const oe=Lt(H);try{yield oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ie=>Ze.forEach(q,qe=>Ze.forEach(qe.Pi,at=>oe.persistence.referenceDelegate.addReference(Ie,qe.targetId,at)).next(()=>Ze.forEach(qe.vi,at=>oe.persistence.referenceDelegate.removeReference(Ie,qe.targetId,at)))))}catch(Ie){if(!Oo(Ie))throw Ie;ft("LocalStore","Failed to update sequence numbers: "+Ie)}for(const Ie of q){const qe=Ie.targetId;if(!Ie.fromCache){const at=oe.$i.get(qe),qt=at.withLastLimboFreeSnapshotVersion(at.snapshotVersion);oe.$i=oe.$i.insert(qe,qt)}}}),function(H,q){return x.apply(this,arguments)})(a.localStore,_))}),Zh.apply(this,arguments)}function lu(s,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,Ce.Z)(function*(s,e){const r=Lt(s);if(!r.currentUser.isEqual(e)){ft("SyncEngine","User change. New user:",e.toKey());const a=yield Lp(r.localStore,e);r.currentUser=e,(h=r).uc.forEach(C=>{C.forEach(x=>{x.reject(new ht(Je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.uc.clear(),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield bo(r,a.Ki)}var h}),Wl.apply(this,arguments)}function ry(s,e){const r=Lt(s),a=r.ic.get(e);if(a&&a.Xu)return Qn().add(a.key);{let h=Qn();const _=r.ec.get(e);if(!_)return h;for(const C of _){const x=r.tc.get(C);h=h.unionWith(x.view.qu)}return h}}function Uu(s,e){return id.apply(this,arguments)}function id(){return id=(0,Ce.Z)(function*(s,e){const r=Lt(s),a=yield pc(r.localStore,e.query,!0),h=e.view.Ju(a);return r.isPrimaryClient&&ig(r,e.targetId,h.zu),h}),id.apply(this,arguments)}function dE(s,e){return r_.apply(this,arguments)}function r_(){return r_=(0,Ce.Z)(function*(s,e){const r=Lt(s);return Fg(r.localStore,e).then(a=>bo(r,a))}),r_.apply(this,arguments)}function i_(s,e,r,a){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,Ce.Z)(function*(s,e,r,a){const h=Lt(s),_=yield function(C,x){const H=Lt(C),q=Lt(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",oe=>q.yn(oe,x).next(Ie=>Ie?H.localDocuments.getDocuments(oe,Ie):Ze.resolve(null)))}(h.localStore,e);var x;null!==_?("pending"===r?yield Xc(h.remoteStore):"acknowledged"===r||"rejected"===r?(Jg(h,e,a||null),rg(h,e),x=e,Lt(Lt(h.localStore).mutationQueue).In(x)):Bt(),yield bo(h,_)):ft("SyncEngine","Cannot apply mutation batch with id: "+e)}),Yh.apply(this,arguments)}function em(){return em=(0,Ce.Z)(function*(s,e){const r=Lt(s);if(ug(r),lg(r),!0===e&&!0!==r.ac){const a=r.sharedClientState.getAllActiveQueryTargets(),h=yield iy(r,a.toArray());r.ac=!0,yield wo(r.remoteStore,!0);for(const _ of h)Hf(r.remoteStore,_)}else if(!1===e&&!1!==r.ac){const a=[];let h=Promise.resolve();r.ec.forEach((_,C)=>{r.sharedClientState.isLocalQueryTarget(C)?a.push(C):h=h.then(()=>(rd(r,C),Na(r.localStore,C,!0))),zp(r.remoteStore,C)}),yield h,yield iy(r,a),function(_){const C=Lt(_);C.ic.forEach((x,H)=>{zp(C.remoteStore,H)}),C.rc.cs(),C.ic=new Map,C.sc=new ri(Mt.comparator)}(r),r.ac=!1,yield wo(r.remoteStore,!1)}}),em.apply(this,arguments)}function iy(s,e,r){return sg.apply(this,arguments)}function sg(){return sg=(0,Ce.Z)(function*(s,e,r){const a=Lt(s),h=[],_=[];for(const C of e){let x;const H=a.ec.get(C);if(H&&0!==H.length){x=yield Hd(a.localStore,_a(H[0]));for(const q of H){const oe=a.tc.get(q),Ie=yield Uu(a,oe);Ie.snapshot&&_.push(Ie.snapshot)}}else{const q=yield Up(a.localStore,C);x=yield Hd(a.localStore,q),yield mc(a,nh(q),C,!1)}h.push(x)}return a.Zu.Go(_),h}),sg.apply(this,arguments)}function nh(s){return vf(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function og(s){const e=Lt(s);return Lt(Lt(e.localStore).persistence).Ri()}function rh(s,e,r,a){return ip.apply(this,arguments)}function ip(){return ip=(0,Ce.Z)(function*(s,e,r,a){const h=Lt(s);if(h.ac)return void ft("SyncEngine","Ignoring unexpected query state notification.");const _=h.ec.get(e);if(_&&_.length>0)switch(r){case"current":case"not-current":{const C=yield Fg(h.localStore,bf(_[0])),x=Fc.createSynthesizedRemoteEventForCurrentChange(e,"current"===r);yield bo(h,C,x);break}case"rejected":yield Na(h.localStore,e,!0),rd(h,e,a);break;default:Bt()}}),ip.apply(this,arguments)}function o_(s,e,r){return ag.apply(this,arguments)}function ag(){return ag=(0,Ce.Z)(function*(s,e,r){const a=ug(s);if(a.ac){for(const h of e){if(a.ec.has(h)){ft("SyncEngine","Adding an already active target "+h);continue}const _=yield Up(a.localStore,h),C=yield Hd(a.localStore,_);yield mc(a,nh(_),C.targetId,!1),Hf(a.remoteStore,C)}for(const h of r)a.ec.has(h)&&(yield Na(a.localStore,h,!1).then(()=>{zp(a.remoteStore,h),rd(a,h)}).catch(bl))}}),ag.apply(this,arguments)}function ug(s){const e=Lt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=eh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ry.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zg.bind(null,e),e.Zu.Go=Xd.bind(null,e.eventManager),e.Zu.lc=Q_.bind(null,e.eventManager),e}function lg(s){const e=Lt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tp.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yg.bind(null,e),e}class Ea{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,Ce.Z)(function*(){r.wt=Qc(e.databaseInfo.databaseId),r.sharedClientState=r.dc(e),r.persistence=r._c(e),yield r.persistence.start(),r.localStore=r.wc(e),r.gcScheduler=r.mc(e,r.localStore),r.indexBackfillerScheduler=r.gc(e,r.localStore)})()}mc(e,r){return null}gc(e,r){return null}wc(e){return zm(this.persistence,new Gm,e.initialUser,this.wt)}_c(e){return new $m(Fh.Ms,this.wt)}dc(e){return new Zm}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sd extends Ea{constructor(e,r,a){super(),this.yc=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,a=this;return(0,Ce.Z)(function*(){yield r().call(a,e),yield a.yc.initialize(a,e),yield lg(a.yc.syncEngine),yield Xc(a.yc.remoteStore),yield a.persistence.ci(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return zm(this.persistence,new Gm,e.initialUser,this.wt)}mc(e,r){return new iv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}gc(e,r){const a=new gf(r,this.persistence);return new Zu(e.asyncQueue,a)}_c(e){const r=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Yi.withCacheSize(this.cacheSizeBytes):Yi.DEFAULT;return new al(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,Bg(),Yc(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Zm}}class u_ extends sd{constructor(e,r){super(e,r,!1),this.yc=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,a=this;return(0,Ce.Z)(function*(){yield r().call(a,e);const h=a.yc.syncEngine;a.sharedClientState instanceof Vg&&(a.sharedClientState.syncEngine={kr:i_.bind(null,h),Or:rh.bind(null,h),Mr:o_.bind(null,h),Ri:og.bind(null,h),Nr:dE.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.ci(function(){var _=(0,Ce.Z)(function*(C){yield function(s,e){return em.apply(this,arguments)}(a.yc.syncEngine,C),a.gcScheduler&&(C&&!a.gcScheduler.started?a.gcScheduler.start():C||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(C&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():C||a.indexBackfillerScheduler.stop())});return function(C){return _.apply(this,arguments)}}())})()}dc(e){const r=Bg();if(!Vg.V(r))throw new ht(Je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vg(r,e.asyncQueue,a,e.clientId,e.initialUser)}}class cu{initialize(e,r){var a=this;return(0,Ce.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>Xf(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=lu.bind(null,a.syncEngine),yield wo(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new t_}createDatastore(e){const r=Qc(e.databaseInfo.databaseId),a=new Ug(e.databaseInfo);return new jf(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return r=this.localStore,a=this.datastore,h=e.asyncQueue,_=x=>Xf(this.syncEngine,x,0),C=z_.V()?new z_:new Bf,new Qm(r,a,h,_,C);var r,a,h,_,C}createSyncEngine(e,r){return function(a,h,_,C,x,H,q){const oe=new Qf(a,h,_,C,x,H);return q&&(oe.ac=!0),oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,Ce.Z)(function*(r){const a=Lt(r);ft("RemoteStore","RemoteStore shutting down."),a.lu.add(5),yield Hl(a),a.du.shutdown(),a._u.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Qh(s,e=10240){let r=0;return{read:()=>(0,Ce.Z)(function*(){if(r<s.byteLength){const a={value:s.slice(r,r+e),done:!1};return r+=e,a}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class sy{constructor(e,r){this.Ec=e,this.wt=r,this.metadata=new mi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(a=>{a&&a.Cu()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.bc();if(null===r)return null;const a=e.Ac.decode(r),h=Number(a);isNaN(h)&&e.Pc(`length string (${a}) is not valid number`);const _=yield e.vc(h);return new J_(JSON.parse(_),r.length+h)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const r=e.Vc();r<0&&e.Pc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),a})()}vc(e){var r=this;return(0,Ce.Z)(function*(){for(;r.buffer.length<e;)(yield r.Sc())&&r.Pc("Reached the end of bundle when more is expected.");const a=r.Ac.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),a})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.Ec.read();if(!r.done){const a=new Uint8Array(e.buffer.length+r.value.length);a.set(e.buffer),a.set(r.value,e.buffer.length),e.buffer=a}return r.done})()}}class tm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ce.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new ht(Je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,Ce.Z)(function*(_,C){const x=Lt(_),H=Vl(x.wt)+"/documents",q={documents:C.map(at=>Xa(x.wt,at))},oe=yield x.ao("BatchGetDocuments",H,q,C.length),Ie=new Map;oe.forEach(at=>{const _t=function(s,e){return"found"in e?function(r,a){_n(!!a.found);const h=eu(r,a.found.name),_=As(a.found.updateTime),C=new $i({mapValue:{fields:a.found.fields}});return si.newFoundDocument(h,_,C)}(s,e):"missing"in e?function(r,a){_n(!!a.missing),_n(!!a.readTime);const h=eu(r,a.missing),_=As(a.readTime);return si.newNoDocument(h,_)}(s,e):Bt()}(x.wt,at);Ie.set(_t.key.toString(),_t)});const qe=[];return C.forEach(at=>{const _t=Ie.get(at.toString());_n(!!_t),qe.push(_t)}),qe}),function(_,C){return h.apply(this,arguments)})(r.datastore,e);var h;return a.forEach(h=>r.recordVersion(h)),a})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var a;e.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,h)=>{const _=Mt.fromPath(h);e.mutations.push(new Xu(_,e.precondition(_)))}),yield(a=(0,Ce.Z)(function*(h,_){const C=Lt(h),x=Vl(C.wt)+"/documents",H={writes:_.map(q=>jc(C.wt,q))};yield C.ro("Commit",x,H)}),function(h,_){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Bt();r=Ht.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!r.isEqual(a))throw new ht(Je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?Zi.updateTime(r):Zi.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ht.min()))throw new ht(Je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zi.updateTime(r)}return Zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zl{constructor(e,r,a,h,_){this.asyncQueue=e,this.datastore=r,this.options=a,this.updateFunction=h,this.deferred=_,this.Dc=a.maxAttempts,this.So=new $h(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ce.Z)(function*(){const r=new tm(e.datastore),a=e.xc(r);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(h)}).catch(_=>{e.Nc(_)}))}).catch(h=>{e.Nc(h)})}))}xc(e){try{const r=this.updateFunction(e);return!dt(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!yo(r)}return!1}}class op{constructor(e,r,a,h){var _=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=h,this.user=ti.UNAUTHENTICATED,this.clientId=Fn.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var C=(0,Ce.Z)(function*(x){ft("FirestoreClient","Received user=",x.uid),yield _.authCredentialListener(x),_.user=x});return function(x){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(a,C=>(ft("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ht(Je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(a){const h=Co(a,"Failed to shutdown persistence");r.reject(h)}})),r.promise}}function Vo(s,e){return _c.apply(this,arguments)}function _c(){return _c=(0,Ce.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),ft("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(function(){var h=(0,Ce.Z)(function*(_){a.isEqual(_)||(yield Lp(e.localStore,_),a=_)});return function(_){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),_c.apply(this,arguments)}function ap(s,e){return Pa.apply(this,arguments)}function Pa(){return Pa=(0,Ce.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield up(s);ft("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(r,a),s.setCredentialChangeListener(h=>Kd(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,_)=>Kd(e.remoteStore,_)),s.onlineComponents=e}),Pa.apply(this,arguments)}function up(s){return od.apply(this,arguments)}function od(){return od=(0,Ce.Z)(function*(s){return s.offlineComponents||(ft("FirestoreClient","Using default OfflineComponentProvider"),yield Vo(s,new Ea)),s.offlineComponents}),od.apply(this,arguments)}function yc(s){return ad.apply(this,arguments)}function ad(){return ad=(0,Ce.Z)(function*(s){return s.onlineComponents||(ft("FirestoreClient","Using default OnlineComponentProvider"),yield ap(s,new cu)),s.onlineComponents}),ad.apply(this,arguments)}function ih(s){return up(s).then(e=>e.persistence)}function ud(s){return up(s).then(e=>e.localStore)}function sh(s){return yc(s).then(e=>e.remoteStore)}function ld(s){return yc(s).then(e=>e.syncEngine)}function cl(s){return Io.apply(this,arguments)}function Io(){return Io=(0,Ce.Z)(function*(s){const e=yield yc(s),r=e.eventManager;return r.onListen=ty.bind(null,e.syncEngine),r.onUnlisten=n_.bind(null,e.syncEngine),r}),Io.apply(this,arguments)}function rm(s,e,r={}){const a=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(h,_,C,x,H){const q=new sp({next:Ie=>{_.enqueueAndForget(()=>Jd(h,oe));const qe=Ie.docs.has(C);!qe&&Ie.fromCache?H.reject(new ht(Je.UNAVAILABLE,"Failed to get document because the client is offline.")):qe&&Ie.fromCache&&x&&"server"===x.source?H.reject(new ht(Je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Ie)},error:Ie=>H.reject(Ie)}),oe=new zh(rc(C.path),q,{includeMetadataChanges:!0,Du:!0});return nd(h,oe)}(yield cl(s),s.asyncQueue,e,r,a)})),a.promise}function sm(s,e,r={}){const a=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(h,_,C,x,H){const q=new sp({next:Ie=>{_.enqueueAndForget(()=>Jd(h,oe)),Ie.fromCache&&"server"===x.source?H.reject(new ht(Je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Ie)},error:Ie=>H.reject(Ie)}),oe=new zh(C,q,{includeMetadataChanges:!0,Du:!0});return nd(h,oe)}(yield cl(s),s.asyncQueue,e,r,a)})),a.promise}const om=new Map;function am(s,e,r){if(!r)throw new ht(Je.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function oy(s,e,r,a){if(!0===e&&!0===a)throw new ht(Je.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function um(s){if(!Mt.isDocumentKey(s))throw new ht(Je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function p_(s){if(Mt.isDocumentKey(s))throw new ht(Je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function lm(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":Bt()}function Tr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ht(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=lm(s);throw new ht(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function cm(s,e){if(e<=0)throw new ht(Je.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class g_{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new ht(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ht(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,r,a){this._authCredentials=r,this._appCheckCredentials=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g_({}),this._settingsFrozen=!1,e instanceof He?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ht(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new He(h.options.projectId)}(e))}get app(){if(!this._app)throw new ht(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ht(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g_(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new S;switch(r.type){case"gapi":const a=r.client;return _n(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new ee(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new ht(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=om.get(e);r&&(ft("ComponentProvider","Removing Datastore"),om.delete(e),r.terminate())}(this),Promise.resolve()}}class Gi{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gi(this.firestore,e,this._key)}}class wa{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new wa(this.firestore,e,this._query)}}class vc extends wa{constructor(e,r,a){super(e,r,rc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gi(this.firestore,null,new Mt(e))}withConverter(e){return new vc(this.firestore,e,this._path)}}function m_(s,e,...r){if(s=(0,St.m9)(s),am("collection","path",e),s instanceof Jh){const a=Wn.fromString(e,...r);return p_(a),new vc(s,null,a)}{if(!(s instanceof Gi||s instanceof vc))throw new ht(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Wn.fromString(e,...r));return p_(a),new vc(s.firestore,null,a)}}function dm(s,e,...r){if(s=(0,St.m9)(s),1===arguments.length&&(e=Fn.I()),am("doc","path",e),s instanceof Jh){const a=Wn.fromString(e,...r);return um(a),new Gi(s,null,new Mt(a))}{if(!(s instanceof Gi||s instanceof vc))throw new ht(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Wn.fromString(e,...r));return um(a),new Gi(s.firestore,s instanceof vc?s.converter:null,new Mt(a))}}function uy(s,e){return s=(0,St.m9)(s),e=(0,St.m9)(e),(s instanceof Gi||s instanceof vc)&&(e instanceof Gi||e instanceof vc)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function hm(s,e){return s=(0,St.m9)(s),e=(0,St.m9)(e),s instanceof wa&&e instanceof wa&&s.firestore===e.firestore&&Pc(s._query,e._query)&&s.converter===e.converter}class dv{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new $h(this,"async_queue_retry"),this.Kc=()=>{const r=Yc();r&&ft("AsyncQueue","Visibility state changed to "+r.visibilityState),this.So.Eo()};const e=Yc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const r=Yc();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const r=new mi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(r){if(!Oo(r))throw r;ft("AsyncQueue","Operation failed with retryable error: "+r)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const r=this.Oc.then(()=>(this.Lc=!0,e().catch(a=>{throw this.Bc=a,this.Lc=!1,Br("INTERNAL UNHANDLED ERROR: ",function(_){let C=_.message||"";return _.stack&&(C=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),C}(a)),a}).then(a=>(this.Lc=!1,a))));return this.Oc=r,r}enqueueAfterDelay(e,r,a){this.Gc(),this.qc.indexOf(e)>-1&&(r=0);const h=eg.createAndSchedule(this,e,r,a,_=>this.Wc(_));return this.$c.push(h),h}Gc(){this.Bc&&Bt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ce.Z)(function*(){let r;do{r=e.Oc,yield r}while(r!==e.Oc)})()}Hc(e){for(const r of this.$c)if(r.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.$c)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const r=this.$c.indexOf(e);this.$c.splice(r,1)}}function fm(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class ly{constructor(){this._progressObserver={},this._taskCompletionResolver=new mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,a){this._progressObserver={next:e,error:r,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Or extends Jh{constructor(e,r,a){super(e,r,a),this.type="firestore",this._queue=new dv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cy(this),this._firestoreClient.terminate()}}function as(s){return s._firestoreClient||cy(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function cy(s){var e;const r=s._freezeSettings(),a=(_=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new xe(s._databaseId,_,s._persistenceKey,(x=r).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var _,x;s._firestoreClient=new op(s._authCredentials,s._appCheckCredentials,s._queue,a)}function hy(s,e,r){const a=new mi;return s.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield Vo(s,r),yield ap(s,e),a.resolve()}catch(h){const _=h;if(!("FirebaseError"===(C=_).name?C.code===Je.FAILED_PRECONDITION||C.code===Je.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw _;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+_),a.reject(_)}var C})).then(()=>a.promise)}function ef(s){if(s._initialized||s._terminated)throw new ht(Je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ql{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new ht(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kl(Di.fromBase64String(e))}catch(r){throw new ht(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Kl(Di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oh{constructor(e){this._methodName=e}}class cp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ht(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ht(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gt(this._lat,e._lat)||gt(this._long,e._long)}}const y_=/^__.*__$/;class _m{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return null!==this.fieldMask?new xn(e,this.data,this.fieldMask,r,this.fieldTransforms):new hr(e,this.data,r,this.fieldTransforms)}}class v_{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new xn(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ym(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class dp{constructor(e,r,a,h,_,C){this.settings=e,this.databaseId=r,this.wt=a,this.ignoreUndefinedProperties=h,void 0===_&&this.Xc(),this.fieldTransforms=_||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ta({path:a,na:!1});return h.sa(e),h}ia(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ta({path:a,na:!1});return h.Xc(),h}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return ue(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(ym(this.Zc)&&y_.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class dg{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.wt=a||Qc(e)}aa(e,r,a,h=!1){return new dp({Zc:e,methodName:r,ca:a,path:Pr.emptyPath(),na:!1,ua:h},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function tf(s){const e=s._freezeSettings(),r=Qc(s._databaseId);return new dg(s._databaseId,!!e.ignoreUndefinedProperties,r)}function nf(s,e,r,a,h,_={}){const C=s.aa(_.merge||_.mergeFields?2:0,e,r,h);D("Data must be an object, but it was:",C,a);const x=f(a,C);let H,q;if(_.merge)H=new _o(C.fieldMask),q=C.fieldTransforms;else if(_.mergeFields){const oe=[];for(const Ie of _.mergeFields){const qe=M(e,Ie,r);if(!C.contains(qe))throw new ht(Je.INVALID_ARGUMENT,`Field '${qe}' is specified in your field mask but missing from your input data.`);Oe(oe,qe)||oe.push(qe)}H=new _o(oe),q=C.fieldTransforms.filter(Ie=>H.covers(Ie.field))}else H=null,q=C.fieldTransforms;return new _m(new $i(x),H,q)}class rf extends oh{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rf}}function my(s,e,r){return new dp({Zc:3,ca:e.settings.ca,methodName:s._methodName,na:r},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class ah extends oh{_toFieldTransform(e){return new Ju(e.path,new Tu)}isEqual(e){return e instanceof ah}}class _y extends oh{constructor(e,r){super(e),this.ha=r}_toFieldTransform(e){const r=my(this,e,!0),a=this.ha.map(_=>l(_,r)),h=new Su(a);return new Ju(e.path,h)}isEqual(e){return this===e}}class vm extends oh{constructor(e,r){super(e),this.ha=r}_toFieldTransform(e){const r=my(this,e,!0),a=this.ha.map(_=>l(_,r)),h=new Au(a);return new Ju(e.path,h)}isEqual(e){return this===e}}class Em extends oh{constructor(e,r){super(e),this.la=r}_toFieldTransform(e){const r=new Pl(e.wt,wh(e.wt,this.la));return new Ju(e.path,r)}isEqual(e){return this===e}}function wm(s,e,r,a){const h=s.aa(1,e,r);D("Data must be an object, but it was:",h,a);const _=[],C=$i.empty();Xl(a,(H,q)=>{const oe=X(e,H,r);q=(0,St.m9)(q);const Ie=h.ia(oe);if(q instanceof rf)_.push(oe);else{const qe=l(q,Ie);null!=qe&&(_.push(oe),C.set(oe,qe))}});const x=new _o(_);return new v_(C,x,h.fieldTransforms)}function c(s,e,r,a,h,_){const C=s.aa(1,e,r),x=[M(e,a,r)],H=[h];if(_.length%2!=0)throw new ht(Je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let qe=0;qe<_.length;qe+=2)x.push(M(e,_[qe])),H.push(_[qe+1]);const q=[],oe=$i.empty();for(let qe=x.length-1;qe>=0;--qe)if(!Oe(q,x[qe])){const at=x[qe];let _t=H[qe];_t=(0,St.m9)(_t);const qt=C.ia(at);if(_t instanceof rf)q.push(at);else{const fn=l(_t,qt);null!=fn&&(q.push(at),oe.set(at,fn))}}const Ie=new _o(q);return new v_(oe,Ie,C.fieldTransforms)}function o(s,e,r,a=!1){return l(r,s.aa(a?4:3,e))}function l(s,e){if(y(s=(0,St.m9)(s)))return D("Unsupported field value:",e,s),f(s,e);if(s instanceof oh)return function(r,a){if(!ym(a.Zc))throw a.oa(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.oa(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(r,a){const h=[];let _=0;for(const C of r){let x=l(C,a.ra(_));null==x&&(x={nullValue:"NULL_VALUE"}),h.push(x),_++}return{arrayValue:{values:h}}}(s,e)}return function(r,a){if(null===(r=(0,St.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return wh(a.wt,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const h=Gn.fromDate(r);return{timestampValue:el(a.wt,h)}}if(r instanceof Gn){const h=new Gn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:el(a.wt,h)}}if(r instanceof cp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kl)return{bytesValue:ic(a.wt,r._byteString)};if(r instanceof Gi){const h=a.databaseId,_=r.firestore._databaseId;if(!_.isEqual(h))throw a.oa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:os(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.oa(`Unsupported field value: ${lm(r)}`)}(s,e)}function f(s,e){const r={};return za(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xl(s,(a,h)=>{const _=l(h,e.ea(a));null!=_&&(r[a]=_)}),{mapValue:{fields:r}}}function y(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Gn||s instanceof cp||s instanceof Kl||s instanceof Gi||s instanceof oh)}function D(s,e,r){if(!y(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=lm(r);throw e.oa("an object"===a?s+" a custom object":s+" "+a)}var a}function M(s,e,r){if((e=(0,St.m9)(e))instanceof ql)return e._internalPath;if("string"==typeof e)return X(s,e);throw ue("Field path arguments must be of type string or ",s,!1,void 0,r)}const K=new RegExp("[~\\*/\\[\\]]");function X(s,e,r){if(e.search(K)>=0)throw ue(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new ql(...e.split("."))._internalPath}catch(a){throw ue(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function ue(s,e,r,a,h){const _=a&&!a.isEmpty(),C=void 0!==h;let x=`Function ${e}() called with invalid data`;r&&(x+=" (via `toFirestore()`)"),x+=". ";let H="";return(_||C)&&(H+=" (found",_&&(H+=` in field ${a}`),C&&(H+=` in document ${h}`),H+=")"),new ht(Je.INVALID_ARGUMENT,x+s+H)}function Oe(s,e){return s.some(r=>r.isEqual(e))}class Le{constructor(e,r,a,h,_){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=h,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Ft("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class rt extends Le{data(){return super.data()}}function Ft(s,e){return"string"==typeof e?X(s,e):e instanceof ql?e._internalPath:e._delegate._internalPath}class jt{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tn extends Le{constructor(e,r,a,h,_,C){super(e,r,a,h,C),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Jn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(Ft("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Jn extends Tn{data(e={}){return super.data(e)}}class Ai{constructor(e,r,a,h){this._firestore=e,this._userDataWriter=r,this._snapshot=h,this.metadata=new jt(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new Jn(this._firestore,this._userDataWriter,a.key,a,new jt(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ht(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let _=0;return a._snapshot.docChanges.map(C=>({type:"added",doc:new Jn(a._firestore,a._userDataWriter,C.doc.key,C.doc,new jt(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:_++}))}{let _=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(C=>h||3!==C.type).map(C=>{const x=new Jn(a._firestore,a._userDataWriter,C.doc.key,C.doc,new jt(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter);let H=-1,q=-1;return 0!==C.type&&(H=_.indexOf(C.doc.key),_=_.delete(C.doc.key)),1!==C.type&&(_=_.add(C.doc),q=_.indexOf(C.doc.key)),{type:js(C.type),doc:x,oldIndex:H,newIndex:q}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function js(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}function Qi(s,e){return s instanceof Tn&&e instanceof Tn?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Ai&&e instanceof Ai&&s._firestore===e._firestore&&hm(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function Ns(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new ht(Je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hl{}function Oa(s,...e){for(const r of e)s=r._apply(s);return s}class hp extends hl{constructor(e,r,a){super(),this.fa=e,this.da=r,this._a=a,this.type="where"}_apply(e){const r=tf(e.firestore),a=function(h,_,C,x,H,q,oe){let Ie;if(H.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new ht(Je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){Ey(oe,q);const at=[];for(const _t of oe)at.push(Do(x,h,_t));Ie={arrayValue:{values:at}}}else Ie=Do(x,h,oe)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||Ey(oe,q),Ie=o(C,"where",oe,"in"===q||"not-in"===q);const qe=ms.create(H,q,Ie);return function(at,_t){if(_t.ht()){const fn=Ef(at);if(null!==fn&&!fn.isEqual(_t.field))throw new ht(Je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${fn.toString()}' and '${_t.field.toString()}'`);const Zr=Eh(at);null!==Zr&&vv(0,_t.field,Zr)}const qt=function(fn,Zr){for(const us of fn.filters)if(Zr.indexOf(us.op)>=0)return us.op;return null}(at,function(fn){switch(fn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(_t.op));if(null!==qt)throw new ht(Je.INVALID_ARGUMENT,qt===_t.op?`Invalid query. You cannot use more than one '${_t.op.toString()}' filter.`:`Invalid query. You cannot use '${_t.op.toString()}' filters with '${qt.toString()}' filters.`)}(h,qe),qe}(e._query,0,r,e.firestore._databaseId,this.fa,this.da,this._a);return new wa(e.firestore,e.converter,function(h,_){const C=h.filters.concat([_]);return new Lo(h.path,h.collectionGroup,h.explicitOrderBy.slice(),C,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}class hg extends hl{constructor(e,r){super(),this.fa=e,this.wa=r,this.type="orderBy"}_apply(e){const r=function(a,h,_){if(null!==a.startAt)throw new ht(Je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new ht(Je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ml(h,_);return function(x,H){if(null===Eh(x)){const q=Ef(x);null!==q&&vv(0,q,H.field)}}(a,C),C}(e._query,this.fa,this.wa);return new wa(e.firestore,e.converter,function(a,h){const _=a.explicitOrderBy.concat([h]);return new Lo(a.path,a.collectionGroup,_,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class yy extends hl{constructor(e,r,a){super(),this.type=e,this.ma=r,this.ga=a}_apply(e){return new wa(e.firestore,e.converter,wp(e._query,this.ma,this.ga))}}class vy extends hl{constructor(e,r,a){super(),this.type=e,this.ya=r,this.pa=a}_apply(e){const r=yv(e,this.type,this.ya,this.pa);return new wa(e.firestore,e.converter,(h=r,new Lo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}class mv extends hl{constructor(e,r,a){super(),this.type=e,this.ya=r,this.pa=a}_apply(e){const r=yv(e,this.type,this.ya,this.pa);return new wa(e.firestore,e.converter,(h=r,new Lo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function yv(s,e,r,a){if(r[0]=(0,St.m9)(r[0]),r[0]instanceof Le)return function(h,_,C,x,H){if(!x)throw new ht(Je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const q=[];for(const oe of Za(h))if(oe.field.isKeyField())q.push(Us(_,x.key));else{const Ie=x.data.field(oe.field);if($(Ie))throw new ht(Je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+oe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ie){const qe=oe.field.canonicalString();throw new ht(Je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${qe}' (used as the orderBy) does not exist.`)}q.push(Ie)}return new ma(q,H)}(s._query,s.firestore._databaseId,e,r[0]._document,a);{const h=tf(s.firestore);return function(_,C,x,H,q,oe){const Ie=_.explicitOrderBy;if(q.length>Ie.length)throw new ht(Je.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const qe=[];for(let at=0;at<q.length;at++){const _t=q[at];if(Ie[at].field.isKeyField()){if("string"!=typeof _t)throw new ht(Je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof _t}`);if(!Ka(_)&&-1!==_t.indexOf("/"))throw new ht(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${_t}' contains a slash.`);const qt=_.path.child(Wn.fromString(_t));if(!Mt.isDocumentKey(qt))throw new ht(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${qt}' is not because it contains an odd number of segments.`);const fn=new Mt(qt);qe.push(Us(C,fn))}else{const qt=o(x,H,_t);qe.push(qt)}}return new ma(qe,oe)}(s._query,s.firestore._databaseId,h,e,r,a)}}function Do(s,e,r){if("string"==typeof(r=(0,St.m9)(r))){if(""===r)throw new ht(Je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ka(e)&&-1!==r.indexOf("/"))throw new ht(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(Wn.fromString(r));if(!Mt.isDocumentKey(a))throw new ht(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Us(s,new Mt(a))}if(r instanceof Gi)return Us(s,r._key);throw new ht(Je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lm(r)}.`)}function Ey(s,e){if(!Array.isArray(s)||0===s.length)throw new ht(Je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new ht(Je.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vv(s,e,r){if(!r.isEqual(e))throw new ht(Je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}const fE={maxAttempts:5};class E_{convertValue(e,r="none"){switch(rn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(P(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Bt()}}convertObject(e,r){const a={};return Xl(e.fields,(h,_)=>{a[h]=this.convertValue(_,r)}),a}convertGeoPoint(e){return new cp(jr(e.latitude),jr(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=J(e);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(fe(e));default:return null}}convertTimestamp(e){const r=Yo(e);return new Gn(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=Wn.fromString(e);_n(Sh(a));const h=new He(a.get(1),a.get(3)),_=new Mt(a.popFirst(5));return h.isEqual(r)||Br(`Document ${_} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),_}}function w_(s,e,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,a}class Ev extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,r)}}class wy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=tf(e)}set(e,r,a){this._verifyNotCommitted();const h=fl(e,this._firestore),_=w_(h.converter,r,a),C=nf(this._dataReader,"WriteBatch.set",h._key,_,null!==h.converter,a);return this._mutations.push(C.toMutation(h._key,Zi.none())),this}update(e,r,a,...h){this._verifyNotCommitted();const _=fl(e,this._firestore);let C;return C="string"==typeof(r=(0,St.m9)(r))||r instanceof ql?c(this._dataReader,"WriteBatch.update",_._key,r,a,h):wm(this._dataReader,"WriteBatch.update",_._key,r),this._mutations.push(C.toMutation(_._key,Zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=fl(e,this._firestore);return this._mutations=this._mutations.concat(new kl(r._key,Zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ht(Je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fl(s,e){if((s=(0,St.m9)(s)).firestore!==e)throw new ht(Je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class fp extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,r)}}function C_(s,e,r){s=Tr(s,Gi);const a=Tr(s.firestore,Or),h=w_(s.converter,e,r);return ka(a,[nf(tf(a),"setDoc",s._key,h,null!==s.converter,r).toMutation(s._key,Zi.none())])}function Ec(s,e,r,...a){s=Tr(s,Gi);const h=Tr(s.firestore,Or),_=tf(h);let C;return C="string"==typeof(e=(0,St.m9)(e))||e instanceof ql?c(_,"updateDoc",s._key,e,r,a):wm(_,"updateDoc",s._key,e),ka(h,[C.toMutation(s._key,Zi.exists(!0))])}function wc(s,...e){var r,a,h;s=(0,St.m9)(s);let _={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||fm(e[C])||(_=e[C],C++);const x={includeMetadataChanges:_.includeMetadataChanges};if(fm(e[C])){const Ie=e[C];e[C]=null===(r=Ie.next)||void 0===r?void 0:r.bind(Ie),e[C+1]=null===(a=Ie.error)||void 0===a?void 0:a.bind(Ie),e[C+2]=null===(h=Ie.complete)||void 0===h?void 0:h.bind(Ie)}let H,q,oe;if(s instanceof Gi)q=Tr(s.firestore,Or),oe=rc(s._key.path),H={next:Ie=>{e[C]&&e[C](b_(q,s,Ie))},error:e[C+1],complete:e[C+2]};else{const Ie=Tr(s,wa);q=Tr(Ie.firestore,Or),oe=Ie._query;const qe=new fp(q);H={next:at=>{e[C]&&e[C](new Ai(q,qe,Ie,at))},error:e[C+1],complete:e[C+2]},Ns(s._query)}return function(Ie,qe,at,_t){const qt=new sp(_t),fn=new zh(qe,qt,at);return Ie.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return nd(yield cl(Ie),fn)})),()=>{qt.Tc(),Ie.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Jd(yield cl(Ie),fn)}))}}(as(q),oe,x,H)}function ka(s,e){return function(r,a){const h=new mi;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(s,e,r){return Kg.apply(this,arguments)}(yield ld(r),a,h)})),h.promise}(as(s),e)}function b_(s,e,r){const a=r.docs.get(e._key),h=new fp(s);return new Tn(s,h,e._key,a,new jt(r.hasPendingWrites,r.fromCache),e.converter)}class Iv extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=tf(e)}get(e){const r=fl(e,this._firestore),a=new Ev(this._firestore);return this._transaction.lookup([r._key]).then(h=>{if(!h||1!==h.length)return Bt();const _=h[0];if(_.isFoundDocument())return new Le(this._firestore,a,_.key,_,r.converter);if(_.isNoDocument())return new Le(this._firestore,a,r._key,null,r.converter);throw Bt()})}set(e,r,a){const h=fl(e,this._firestore),_=w_(h.converter,r,a),C=nf(this._dataReader,"Transaction.set",h._key,_,null!==h.converter,a);return this._transaction.set(h._key,C),this}update(e,r,a,...h){const _=fl(e,this._firestore);let C;return C="string"==typeof(r=(0,St.m9)(r))||r instanceof ql?c(this._dataReader,"Transaction.update",_._key,r,a,h):wm(this._dataReader,"Transaction.update",_._key,r),this._transaction.update(_._key,C),this}delete(e){const r=fl(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=fl(e,this._firestore),a=new fp(this._firestore);return super.get(e).then(h=>new Tn(this._firestore,a,r._key,h._document,new jt(!1,!1),r.converter))}}function fg(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ht("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function Av(){if("undefined"==typeof Uint8Array)throw new ht("unimplemented","Uint8Arrays are not available in this environment.")}function by(){if("undefined"==typeof atob)throw new ht("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(s,e=!0){Ko=vt.SDK_VERSION,(0,vt._registerComponent)(new Wt.wA("firestore",(r,{options:a})=>{const h=r.getProvider("app").getImmediate(),_=new Or(h,new V(r.getProvider("auth-internal")),new Ae(r.getProvider("app-check-internal")));return a=Object.assign({useFetchStreams:e},a),_._setSettings(a),_},"PUBLIC")),(0,vt.registerVersion)(fa,"3.4.13",s),(0,vt.registerVersion)(fa,"3.4.13","esm2017")}();class pg{constructor(e){this._delegate=e}static fromBase64String(e){return by(),new pg(Kl.fromBase64String(e))}static fromUint8Array(e){return Av(),new pg(Kl.fromUint8Array(e))}toBase64(){return by(),this._delegate.toBase64()}toUint8Array(){return Av(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bm(s){return function(s,e){if("object"!=typeof s||null===s)return!1;const r=s;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(s)}class Iy{enableIndexedDbPersistence(e,r){return function(s,e){ef(s=Tr(s,Or));const r=as(s),a=s._freezeSettings(),h=new cu;return hy(r,h,new sd(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function(s){ef(s=Tr(s,Or));const e=as(s),r=s._freezeSettings(),a=new cu;return hy(e,a,new u_(a,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(s){if(s._initialized&&!s._terminated)throw new ht(Je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mi;return s._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(r=(0,Ce.Z)(function*(a){if(!Vs.V())return Promise.resolve();const h=a+"main";yield Vs.delete(h)}),function(a){return r.apply(this,arguments)})(Vf(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Dy{constructor(e,r,a){this._delegate=r,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof He||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&go("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,a={}){!function(s,e,r,a={}){var h;const _=(s=Tr(s,Jh))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&go("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${r}`,ssl:!1})),a.mockUserToken){let C,x;if("string"==typeof a.mockUserToken)C=a.mockUserToken,x=ti.MOCK_USER;else{C=(0,St.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const H=a.mockUserToken.sub||a.mockUserToken.user_id;if(!H)throw new ht(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new ti(H)}s._authCredentials=new I(new N(C,x))}}(this._delegate,e,r,a)}enableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield ih(s),r=yield sh(s);return e.setNetworkEnabled(!0),function(a){const h=Lt(a);return h.lu.delete(0),$f(h)}(r)}))}(as(s=Tr(s,Or)))}(this._delegate)}disableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield ih(s),r=yield sh(s);return e.setNetworkEnabled(!1),(a=(0,Ce.Z)(function*(h){const _=Lt(h);_.lu.add(0),yield Hl(_),_._u.set("Offline")}),function(h){return a.apply(this,arguments)})(r);var a}))}(as(s=Tr(s,Or)))}(this._delegate)}enablePersistence(e){let r=!1,a=!1;return e&&(r=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,oy("synchronizeTabs",r,"experimentalForceOwningTab",a)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(s){return function(e){const r=new mi;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(s,e){return np.apply(this,arguments)}(yield ld(e),r)})),r.promise}(as(s=Tr(s,Or)))}(this._delegate)}onSnapshotsInSync(e){return function(s,e){return function(s,e){const r=new sp(e);return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return a=yield cl(s),h=r,Lt(a).Tu.add(h),void h.next();var a,h})),()=>{r.Tc(),s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return a=yield cl(s),h=r,void Lt(a).Tu.delete(h);var a,h}))}}(as(s=Tr(s,Or)),fm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ht("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gg(this,m_(this._delegate,e))}catch(r){throw du(r,"collection()","Firestore.collection()")}}doc(e){try{return new pl(this,dm(this._delegate,e))}catch(r){throw du(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hu(this,function(s,e){if(s=Tr(s,Jh),am("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ht(Je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wa(s,null,(r=e,new Lo(Wn.emptyPath(),r)));var r}(this._delegate,e))}catch(r){throw du(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(s,e,r){s=Tr(s,Or);const a=Object.assign(Object.assign({},fE),r);return function(h){if(h.maxAttempts<1)throw new ht(Je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(s,e,r){const a=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const h=yield(_=s,yc(_).then(C=>C.datastore));var _;new zl(s.asyncQueue,h,r,e,a).run()})),a.promise}(as(s),h=>e(new Iv(s,h)),a)}(this._delegate,r=>e(new Ty(this,r)))}batch(){return as(this._delegate),new Sy(new wy(this._delegate,e=>ka(this._delegate,e)))}loadBundle(e){return function(s,e){const r=as(s=Tr(s,Or)),a=new ly;return function(s,e,r,a){const h=function(_,C){let x;return x="string"==typeof _?(new TextEncoder).encode(_):_,H=function(H,q){if(H instanceof Uint8Array)return Qh(H,q);if(H instanceof ArrayBuffer)return Qh(new Uint8Array(H),q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new sy(H,C);var H}(r,Qc(e));s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(s,e,r){const a=Lt(s);var h;(h=(0,Ce.Z)(function*(_,C,x){try{const H=yield C.getMetadata();if(yield function(qe,at){const _t=Lt(qe),qt=As(at.createTime);return _t.persistence.runTransaction("hasNewerBundle","readonly",fn=>_t.Ds.getBundleMetadata(fn,at.id)).then(fn=>!!fn&&fn.createTime.compareTo(qt)>=0)}(_.localStore,H))return yield C.close(),x._completeWith({taskState:"Success",documentsLoaded:(qe=H).totalDocuments,bytesLoaded:qe.totalBytes,totalDocuments:qe.totalDocuments,totalBytes:qe.totalBytes}),Promise.resolve(new Set);x._updateProgress(Wg(H));const q=new X_(H,_.localStore,C.wt);let oe=yield C.fc();for(;oe;){const qe=yield q.Nu(oe);qe&&x._updateProgress(qe),oe=yield C.fc()}const Ie=yield q.complete();return yield bo(_,Ie.Mu,void 0),yield function(qe,at){const _t=Lt(qe);return _t.persistence.runTransaction("Save bundle","readwrite",qt=>_t.Ds.saveBundleMetadata(qt,at))}(_.localStore,H),x._completeWith(Ie.progress),Promise.resolve(Ie.Ou)}catch(H){return go("SyncEngine",`Loading bundle failed with ${H}`),x._failWith(H),Promise.resolve(new Set)}var qe}),function(_,C,x){return h.apply(this,arguments)})(a,e,r).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield ld(s),h,a)}))}(r,s._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function(s,e){return function(s,e){return s.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(r,a){const h=Lt(r);return h.persistence.runTransaction("Get named query","readonly",_=>h.Ds.getNamedQuery(_,a))}(yield ud(s),e)}))}(as(s=Tr(s,Or)),e).then(r=>r?new wa(s,null,r.query):null)}(this._delegate,e).then(r=>r?new hu(this,r):null)}}class Im extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new pg(new Kl(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return pl.forKey(r,this.firestore,null)}}class Ty{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new Im(e)}get(e){const r=pp(e);return this._delegate.get(r).then(a=>new Dm(this._firestore,new Tn(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,r.converter)))}set(e,r,a){const h=pp(e);return a?(fg("Transaction.set",a),this._delegate.set(h,r,a)):this._delegate.set(h,r),this}update(e,r,a,...h){const _=pp(e);return 2===arguments.length?this._delegate.update(_,r):this._delegate.update(_,r,a,...h),this}delete(e){const r=pp(e);return this._delegate.delete(r),this}}class Sy{constructor(e){this._delegate=e}set(e,r,a){const h=pp(e);return a?(fg("WriteBatch.set",a),this._delegate.set(h,r,a)):this._delegate.set(h,r),this}update(e,r,a,...h){const _=pp(e);return 2===arguments.length?this._delegate.update(_,r):this._delegate.update(_,r,a,...h),this}delete(e){const r=pp(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class af{constructor(e,r,a){this._firestore=e,this._userDataWriter=r,this._delegate=a}fromFirestore(e,r){const a=new Jn(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tm(this._firestore,a),null!=r?r:{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const a=af.INSTANCES;let h=a.get(e);h||(h=new WeakMap,a.set(e,h));let _=h.get(r);return _||(_=new af(e,new Im(e),r),h.set(r,_)),_}}af.INSTANCES=new WeakMap;class pl{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Im(e)}static forPath(e,r,a){if(e.length%2!=0)throw new ht("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pl(r,new Gi(r._delegate,a,new Mt(e)))}static forKey(e,r,a){return new pl(r,new Gi(r._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new gg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gg(this.firestore,m_(this._delegate,e))}catch(r){throw du(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Gi&&uy(this._delegate,e)}set(e,r){r=fg("DocumentReference.set",r);try{return r?C_(this._delegate,e,r):C_(this._delegate,e)}catch(a){throw du(a,"setDoc()","DocumentReference.set()")}}update(e,r,...a){try{return 1===arguments.length?Ec(this._delegate,e):Ec(this._delegate,e,r,...a)}catch(h){throw du(h,"updateDoc()","DocumentReference.update()")}}delete(){return function(s){return ka(Tr(s.firestore,Or),[new kl(s._key,Zi.none())])}(this._delegate)}onSnapshot(...e){const r=Rv(e),a=Nv(e,h=>new Dm(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return wc(this._delegate,r,a)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(s){s=Tr(s,Gi);const e=Tr(s.firestore,Or),r=as(e),a=new fp(e);return function(s,e){const r=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(a=(0,Ce.Z)(function*(h,_,C){try{const x=yield function(H,q){const oe=Lt(H);return oe.persistence.runTransaction("read document","readonly",Ie=>oe.localDocuments.getDocument(Ie,q))}(h,_);x.isFoundDocument()?C.resolve(x):x.isNoDocument()?C.resolve(null):C.reject(new ht(Je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const H=Co(x,`Failed to get document '${_} from cache`);C.reject(H)}}),function(h,_,C){return a.apply(this,arguments)})(yield ud(s),e,r);var a})),r.promise}(r,s._key).then(h=>new Tn(e,a,s._key,h,new jt(null!==h&&h.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Tr(s,Gi);const e=Tr(s.firestore,Or);return rm(as(e),s._key,{source:"server"}).then(r=>b_(e,s,r))}(this._delegate):function(s){s=Tr(s,Gi);const e=Tr(s.firestore,Or);return rm(as(e),s._key).then(r=>b_(e,s,r))}(this._delegate),r.then(a=>new Dm(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new pl(this.firestore,this._delegate.withConverter(e?af.getInstance(this.firestore,e):null))}}function du(s,e,r){return s.message=s.message.replace(e,r),s}function Rv(s){for(const e of s)if("object"==typeof e&&!bm(e))return e;return{}}function Nv(s,e){var r,a;let h;return h=bm(s[0])?s[0]:bm(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:_=>{h.next&&h.next(e(_))},error:null===(r=h.error)||void 0===r?void 0:r.bind(h),complete:null===(a=h.complete)||void 0===a?void 0:a.bind(h)}}class Dm{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new pl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return Qi(this._delegate,e._delegate)}}class Tm extends Dm{data(e){const r=this._delegate.data(e);return function(s,e){s||Bt()}(void 0!==r),r}}class hu{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Im(e)}where(e,r,a){try{return new hu(this.firestore,Oa(this._delegate,function(s,e,r){const a=e,h=Ft("where",s);return new hp(h,a,r)}(e,r,a)))}catch(h){throw du(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new hu(this.firestore,Oa(this._delegate,function(s,e="asc"){const r=e,a=Ft("orderBy",s);return new hg(a,r)}(e,r)))}catch(a){throw du(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hu(this.firestore,Oa(this._delegate,function(s){return cm("limit",s),new yy("limit",s,"F")}(e)))}catch(r){throw du(r,"limit()","Query.limit()")}}limitToLast(e){try{return new hu(this.firestore,Oa(this._delegate,function(s){return cm("limitToLast",s),new yy("limitToLast",s,"L")}(e)))}catch(r){throw du(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hu(this.firestore,Oa(this._delegate,function(...s){return new vy("startAt",s,!0)}(...e)))}catch(r){throw du(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hu(this.firestore,Oa(this._delegate,function(...s){return new vy("startAfter",s,!1)}(...e)))}catch(r){throw du(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hu(this.firestore,Oa(this._delegate,function(...s){return new mv("endBefore",s,!1)}(...e)))}catch(r){throw du(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hu(this.firestore,Oa(this._delegate,function(...s){return new mv("endAt",s,!0)}(...e)))}catch(r){throw du(r,"endAt()","Query.endAt()")}}isEqual(e){return hm(this._delegate,e._delegate)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(s){s=Tr(s,wa);const e=Tr(s.firestore,Or),r=as(e),a=new fp(e);return function(s,e){const r=new mi;return s.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(a=(0,Ce.Z)(function*(h,_,C){try{const x=yield pc(h,_,!0),H=new ey(_,x.ji),q=H.Ku(x.documents),oe=H.applyChanges(q,!1);C.resolve(oe.snapshot)}catch(x){const H=Co(x,`Failed to execute query '${_} against cache`);C.reject(H)}}),function(h,_,C){return a.apply(this,arguments)})(yield ud(s),e,r);var a})),r.promise}(r,s._query).then(h=>new Ai(e,a,s,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Tr(s,wa);const e=Tr(s.firestore,Or),r=as(e),a=new fp(e);return sm(r,s._query,{source:"server"}).then(h=>new Ai(e,a,s,h))}(this._delegate):function(s){s=Tr(s,wa);const e=Tr(s.firestore,Or),r=as(e),a=new fp(e);return Ns(s._query),sm(r,s._query).then(h=>new Ai(e,a,s,h))}(this._delegate),r.then(a=>new Ay(this.firestore,new Ai(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const r=Rv(e),a=Nv(e,h=>new Ay(this.firestore,new Ai(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return wc(this._delegate,r,a)}withConverter(e){return new hu(this.firestore,this._delegate.withConverter(e?af.getInstance(this.firestore,e):null))}}class bE{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Tm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ay{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new hu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new bE(this._firestore,r))}forEach(e,r){this._delegate.forEach(a=>{e.call(r,new Tm(this._firestore,a))})}isEqual(e){return Qi(this._delegate,e._delegate)}}class gg extends hu{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pl(this.firestore,e):null}doc(e){try{return new pl(this.firestore,void 0===e?dm(this._delegate):dm(this._delegate,e))}catch(r){throw du(r,"doc()","CollectionReference.doc()")}}add(e){return function(s,e){const r=Tr(s.firestore,Or),a=dm(s),h=w_(s.converter,e);return ka(r,[nf(tf(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,Zi.exists(!1))]).then(()=>a)}(this._delegate,e).then(r=>new pl(this.firestore,r))}isEqual(e){return uy(this._delegate,e._delegate)}withConverter(e){return new gg(this.firestore,this._delegate.withConverter(e?af.getInstance(this.firestore,e):null))}}function pp(s){return Tr(s,Gi)}class xy{constructor(...e){this._delegate=new ql(...e)}static documentId(){return new xy(Pr.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof ql&&this._delegate._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=new ah("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new gp(e)}static delete(){const e=new rf("deleteField");return e._methodName="FieldValue.delete",new gp(e)}static arrayUnion(...e){const r=function(...s){return new _y("arrayUnion",s)}(...e);return r._methodName="FieldValue.arrayUnion",new gp(r)}static arrayRemove(...e){const r=function(...s){return new vm("arrayRemove",s)}(...e);return r._methodName="FieldValue.arrayRemove",new gp(r)}static increment(e){const r=function(s){return new Em("increment",s)}(e);return r._methodName="FieldValue.increment",new gp(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IE={Firestore:Dy,GeoPoint:cp,Timestamp:Gn,Blob:pg,Transaction:Ty,WriteBatch:Sy,DocumentReference:pl,DocumentSnapshot:Dm,Query:hu,QueryDocumentSnapshot:Tm,QuerySnapshot:Ay,CollectionReference:gg,FieldPath:xy,FieldValue:gp,setLogLevel:function(s){!function(s){pa.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function(s){(function(s,e){s.INTERNAL.registerComponent(new Wt.wA("firestore-compat",r=>((e,r)=>new Dy(e,r,new Iy))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},IE)))})(s),s.registerVersion("@firebase/firestore-compat","0.1.22")}(Ve.Z);var uf=z(8006),SE=z(905),AE=z(7841);function Ry(s,e){return function(s,e=U.z){return new ie.y(r=>{let a;return null!=e?e.schedule(()=>{a=s.onSnapshot({includeMetadataChanges:!0},r)}):a=s.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=a&&a()}})}(s,e)}function D_(s,e){return Ry(s,e).pipe((0,pe.U)(r=>({payload:r,type:"query"})))}function Sm(s,e){return D_(s,e).pipe((0,ce.O)(void 0),he(),(0,pe.U)(([r,a])=>{const h=a.payload.docChanges(),_=h.map(C=>({type:C.type,payload:C}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((C,x)=>{const H=h.find(oe=>oe.doc.ref.isEqual(C.ref)),q=null==r?void 0:r.payload.docs.find(oe=>oe.ref.isEqual(C.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(C.metadata)||!H&&q&&JSON.stringify(q.metadata)===JSON.stringify(C.metadata)||_.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:C}})}),_}))}function Ny(s,e,r){return Sm(s,r).pipe((0,Be.R)((a,h)=>function(s,e,r){return e.forEach(a=>{r.indexOf(a.type)>-1&&(s=function(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return T_(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=s.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return T_(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return T_(s,e.oldIndex,1)}return s}(s,a))}),s}(a,h.map(_=>_.payload),e),[]),(0,Ye.x)(),(0,pe.U)(a=>a.map(h=>({type:h.type,payload:h}))))}function T_(s,e,r,...a){const h=s.slice();return h.splice(e,r,...a),h}function S_(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class My{constructor(e,r,a){this.ref=e,this.query=r,this.afs=a}stateChanges(e){let r=Sm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,pe.U)(a=>a.filter(h=>e.indexOf(h.type)>-1)))),r.pipe((0,ce.O)(void 0),he(),(0,it.h)(([a,h])=>h.length>0||!a),(0,pe.U)(([a,h])=>h),de.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Be.R)((r,a)=>[...r,...a],[]))}snapshotChanges(e){const r=S_(e);return Ny(this.query,r,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return D_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),de.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(de.iC)}add(e){return this.ref.add(e)}doc(e){return new lf(this.ref.doc(e),this.afs)}}class lf{constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const a=this.ref.collection(e),{ref:h,query:_}=RE(a,r);return new My(h,_,this.afs)}snapshotChanges(){return function(s,e){return Ry(s,e).pipe((0,ce.O)(void 0),he(),(0,pe.U)(([r,a])=>a.exists?(null==r?void 0:r.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pe.U)(({payload:r})=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data()))}get(e){return(0,Ne.D)(this.ref.get(e)).pipe(de.iC)}}class xE{constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Sm(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)),(0,it.h)(r=>r.length>0),de.iC):Sm(this.query,this.afs.schedulers.outsideAngular).pipe(de.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Be.R)((r,a)=>[...r,...a],[]))}snapshotChanges(e){const r=S_(e);return Ny(this.query,r,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return D_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(a=>a.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),de.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(de.iC)}}const Fv=new T.OlP("angularfire2.enableFirestorePersistence"),mp=new T.OlP("angularfire2.firestore.persistenceSettings"),H0=new T.OlP("angularfire2.firestore.settings"),Py=new T.OlP("angularfire2.firestore.use-emulator");function RE(s,e=(r=>r)){return{query:e(s),ref:s}}let Oy=(()=>{class s{constructor(r,a,h,_,C,x,H,q,oe,Ie,qe,at,_t,qt,fn,Zr,us){this.schedulers=H;const xi=(0,ze.on)(r,x,a),To=oe;Ie&&(0,uf.nw)(xi,x,qe,_t,qt,fn,at,Zr),[this.firestore,this.persistenceEnabled$]=(0,ze.cc)(`${xi.name}.firestore`,"AngularFirestore",xi.name,()=>{const yi=x.runOutsideAngular(()=>xi.firestore());if(_&&yi.settings(_),To&&yi.useEmulator(...To),h&&!(0,Ct.PM)(C)){const Ms=()=>{try{return(0,Ne.D)(yi.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(Fa){return"undefined"!=typeof console&&console.warn(Fa),(0,Se.of)(!1)}};return[yi,x.runOutsideAngular(Ms)]}return[yi,(0,Se.of)(!1)]},[_,To,h])}collection(r,a){let h;h="string"==typeof r?this.firestore.collection(r):r;const{ref:_,query:C}=RE(h,a),x=this.schedulers.ngZone.run(()=>_);return new My(x,C,this)}collectionGroup(r,a){const h=a||(C=>C),_=this.firestore.collectionGroup(r);return new xE(h(_),this)}doc(r){let a;a="string"==typeof r?this.firestore.doc(r):r;const h=this.schedulers.ngZone.run(()=>a);return new lf(h,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(r){return new(r||s)(T.LFG(ze.Dh),T.LFG(ze.xv,8),T.LFG(Fv,8),T.LFG(H0,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(de.HU),T.LFG(mp,8),T.LFG(Py,8),T.LFG(uf.zQ,8),T.LFG(uf.Qv,8),T.LFG(uf.L6,8),T.LFG(uf._Q,8),T.LFG(uf.rT,8),T.LFG(uf.lh,8),T.LFG(uf.f7,8),T.LFG(SE.nm,8))},s.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),Lv=(()=>{class s{constructor(){AE.Z.registerVersion("angularfire",de.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:s,providers:[{provide:Fv,useValue:!0},{provide:mp,useValue:r}]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=T.oAB({type:s}),s.\u0275inj=T.cJS({providers:[Oy]}),s})()},8939:(kt,$e,z)=>{"use strict";z.d($e,{hO:()=>Be,xv:()=>we,Dh:()=>he,GT:()=>de,cc:()=>Ye,on:()=>se,pX:()=>Se});var T=z(7716),U=z(7841),ie=z(6913);kt=z.hmd(kt);const Ne=["ngOnDestroy"],Se=(We,Ve,Ce,vt={})=>new Proxy(We,{get:(Wt,en)=>Ce.runOutsideAngular(()=>{var St;if(We[en])return(null===(St=null==vt?void 0:vt.spy)||void 0===St?void 0:St.get)&&vt.spy.get(en,We[en]),We[en];if(Ne.indexOf(en)>-1)return()=>{};const hn=Ve.toPromise().then(lt=>{const Fe=lt&&lt[en];return"function"==typeof Fe?Fe.bind(lt):Fe&&Fe.then?Fe.then(bt=>Ce.run(()=>bt)):Ce.run(()=>Fe)});return new Proxy(()=>{},{get:(lt,Fe)=>hn[Fe],apply:(lt,Fe,bt)=>hn.then(ot=>{var Pt;const Yt=ot&&ot(...bt);return(null===(Pt=null==vt?void 0:vt.spy)||void 0===Pt?void 0:Pt.apply)&&vt.spy.apply(en,bt,Yt),Yt})})})}),de=(We,Ve)=>{Ve.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(vt=>{Object.defineProperty(We.prototype,vt,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,vt))})})};class Pe{constructor(Ve){return Ve}}const he=new T.OlP("angularfire2.app.options"),we=new T.OlP("angularfire2.app.name");function se(We,Ve,Ce){const Wt="object"==typeof Ce&&Ce||{};Wt.name=Wt.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const St=U.Z.apps.filter(hn=>hn&&hn.name===Wt.name)[0]||Ve.runOutsideAngular(()=>U.Z.initializeApp(We,Wt));try{JSON.stringify(We)!==JSON.stringify(St.options)&&ce("error",`${St.name} Firebase App already initialized with different options${kt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(hn){}return new Pe(St)}const ce=(We,...Ve)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[We](...Ve)},pe={provide:Pe,useFactory:se,deps:[he,T.R0b,[new T.FiY,we]]};let Be=(()=>{class We{constructor(Ce){U.Z.registerVersion("angularfire",ie.q4.full,"core"),U.Z.registerVersion("angularfire",ie.q4.full,"app-compat"),U.Z.registerVersion("angular",T.q4F.full,Ce.toString())}static initializeApp(Ce,vt){return{ngModule:We,providers:[{provide:he,useValue:Ce},{provide:we,useValue:vt}]}}}return We.\u0275fac=function(Ce){return new(Ce||We)(T.LFG(T.Lbi))},We.\u0275mod=T.oAB({type:We}),We.\u0275inj=T.cJS({providers:[pe]}),We})();function Ye(We,Ve,Ce,vt,Wt){const[,en,St]=globalThis.\u0275AngularfireInstanceCache.find(hn=>hn[0]===We)||[];if(en)return function(We,Ve){try{return We.toString()===Ve.toString()}catch(Ce){return We===Ve}}(Wt,St)||(Ct("error",`${Ve} was already initialized on the ${Ce} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),Ct("warn",{is:Wt,was:St})),en;{const hn=vt();return globalThis.\u0275AngularfireInstanceCache.push([We,hn,Wt]),hn}}const ze=!!kt.hot,Ct=(We,...Ve)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[We](...Ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6913:(kt,$e,z)=>{"use strict";z.d($e,{q4:()=>Vs,iC:()=>Di,fc:()=>_o,HU:()=>ji,vb:()=>Xl,JM:()=>ph});var T=z(7716),U=z(2329),ie=z(8239),Ne=z(8026),Se=z(3854),de=z(3910),Pe=z(5422),he=z(3173);const we="@firebase/installations",se="0.5.12",pe=`w:${se}`,Be="FIS_v2",Ve=new Se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(P){return P instanceof Se.ZR&&P.code.includes("request-failed")}function vt({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Wt(P){return{token:P.token,requestStatus:2,expiresIn:ot(P.expiresIn),creationTime:Date.now()}}function en(P,$){return St.apply(this,arguments)}function St(){return(St=(0,ie.Z)(function*(P,$){const fe=(yield $.json()).error;return Ve.create("request-failed",{requestName:P,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function hn({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function lt(P,{refreshToken:$}){const J=hn(P);return J.append("Authorization",function(P){return`${Be} ${P}`}($)),J}function Fe(P){return bt.apply(this,arguments)}function bt(){return(bt=(0,ie.Z)(function*(P){const $=yield P();return $.status>=500&&$.status<600?P():$})).apply(this,arguments)}function ot(P){return Number(P.replace("s","000"))}function Yt(P,$){return It.apply(this,arguments)}function It(){return(It=(0,ie.Z)(function*({appConfig:P,heartbeatServiceProvider:$},{fid:J}){const fe=vt(P),xe=hn(P),He=$.getImmediate({optional:!0});if(He){const yn=yield He.getHeartbeatsHeader();yn&&xe.append("x-firebase-client",yn)}const Rt={method:"POST",headers:xe,body:JSON.stringify({fid:J,authVersion:Be,appId:P.appId,sdkVersion:pe})},Gt=yield Fe(()=>fetch(fe,Rt));if(Gt.ok){const yn=yield Gt.json();return{fid:yn.fid||J,registrationStatus:2,refreshToken:yn.refreshToken,authToken:Wt(yn.authToken)}}throw yield en("Create Installation",Gt)})).apply(this,arguments)}function fr(P){return new Promise($=>{setTimeout($,P)})}const Lr=/^[cdef][\w-]{21}$/;function pn(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const J=function(P){return function(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Lr.test(J)?J:""}catch(P){return""}}function gn(P){return`${P.appName}!${P.appId}`}const ln=new Map;function Zt(P,$){const J=gn(P);on(J,$),function(P,$){const J=(!yr&&"BroadcastChannel"in self&&(yr=new BroadcastChannel("[Firebase] FID Change"),yr.onmessage=P=>{on(P.data.key,P.data.fid)}),yr);J&&J.postMessage({key:P,fid:$}),0===ln.size&&yr&&(yr.close(),yr=null)}(J,$)}function on(P,$){const J=ln.get(P);if(J)for(const fe of J)fe($)}let yr=null;const kn="firebase-installations-store";let tt=null;function an(){return tt||(tt=(0,he.X3)("firebase-installations-database",1,{upgrade:(P,$)=>{0===$&&P.createObjectStore(kn)}})),tt}function xt(P,$){return qn.apply(this,arguments)}function qn(){return(qn=(0,ie.Z)(function*(P,$){const J=gn(P),xe=(yield an()).transaction(kn,"readwrite"),He=xe.objectStore(kn),dt=yield He.get(J);return yield He.put($,J),yield xe.done,(!dt||dt.fid!==$.fid)&&Zt(P,$.fid),$})).apply(this,arguments)}function cr(P){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,ie.Z)(function*(P){const $=gn(P),fe=(yield an()).transaction(kn,"readwrite");yield fe.objectStore(kn).delete($),yield fe.done})).apply(this,arguments)}function Sr(P,$){return wr.apply(this,arguments)}function wr(){return(wr=(0,ie.Z)(function*(P,$){const J=gn(P),xe=(yield an()).transaction(kn,"readwrite"),He=xe.objectStore(kn),dt=yield He.get(J),Rt=$(dt);return void 0===Rt?yield He.delete(J):yield He.put(Rt,J),yield xe.done,Rt&&(!dt||dt.fid!==Rt.fid)&&Zt(P,Rt.fid),Rt})).apply(this,arguments)}function br(P){return gr.apply(this,arguments)}function gr(){return(gr=(0,ie.Z)(function*(P){let $;const J=yield Sr(P.appConfig,fe=>{const xe=_s(fe),He=nr(P,xe);return $=He.registrationPromise,He.installationEntry});return""===J.fid?{installationEntry:yield $}:{installationEntry:J,registrationPromise:$}})).apply(this,arguments)}function _s(P){return Dt(P||{fid:pn(),registrationStatus:0})}function nr(P,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(Ve.create("app-offline"))};const J={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},fe=function(P,$){return tn.apply(this,arguments)}(P,J);return{installationEntry:J,registrationPromise:fe}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:Ni(P)}:{installationEntry:$}}function tn(){return(tn=(0,ie.Z)(function*(P,$){try{const J=yield Yt(P,$);return xt(P.appConfig,J)}catch(J){throw Ce(J)&&409===J.customData.serverCode?yield cr(P.appConfig):yield xt(P.appConfig,{fid:$.fid,registrationStatus:0}),J}})).apply(this,arguments)}function Ni(P){return ys.apply(this,arguments)}function ys(){return(ys=(0,ie.Z)(function*(P){let $=yield ci(P.appConfig);for(;1===$.registrationStatus;)yield fr(100),$=yield ci(P.appConfig);if(0===$.registrationStatus){const{installationEntry:J,registrationPromise:fe}=yield br(P);return fe||J}return $})).apply(this,arguments)}function ci(P){return Sr(P,$=>{if(!$)throw Ve.create("installation-not-found");return Dt($)})}function Dt(P){return function(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function zr(P,$){return In.apply(this,arguments)}function In(){return(In=(0,ie.Z)(function*({appConfig:P,heartbeatServiceProvider:$},J){const fe=Dn(P,J),xe=lt(P,J),He=$.getImmediate({optional:!0});if(He){const yn=yield He.getHeartbeatsHeader();yn&&xe.append("x-firebase-client",yn)}const Rt={method:"POST",headers:xe,body:JSON.stringify({installation:{sdkVersion:pe,appId:P.appId}})},Gt=yield Fe(()=>fetch(fe,Rt));if(Gt.ok)return Wt(yield Gt.json());throw yield en("Generate Auth Token",Gt)})).apply(this,arguments)}function Dn(P,{fid:$}){return`${vt(P)}/${$}/authTokens:generate`}function _e(P){return De.apply(this,arguments)}function De(){return(De=(0,ie.Z)(function*(P,$=!1){let J;const fe=yield Sr(P.appConfig,He=>{if(!sn(He))throw Ve.create("not-registered");const dt=He.authToken;if(!$&&Jt(dt))return He;if(1===dt.requestStatus)return J=ge(P,$),He;{if(!navigator.onLine)throw Ve.create("app-offline");const Rt=Mi(He);return J=nt(P,Rt),Rt}});return J?yield J:fe.authToken})).apply(this,arguments)}function ge(P,$){return ve.apply(this,arguments)}function ve(){return(ve=(0,ie.Z)(function*(P,$){let J=yield Te(P.appConfig);for(;1===J.authToken.requestStatus;)yield fr(100),J=yield Te(P.appConfig);const fe=J.authToken;return 0===fe.requestStatus?_e(P,$):fe})).apply(this,arguments)}function Te(P){return Sr(P,$=>{if(!sn($))throw Ve.create("not-registered");return function(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function nt(P,$){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,ie.Z)(function*(P,$){try{const J=yield zr(P,$),fe=Object.assign(Object.assign({},$),{authToken:J});return yield xt(P.appConfig,fe),J}catch(J){if(!Ce(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const fe=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield xt(P.appConfig,fe)}else yield cr(P.appConfig);throw J}})).apply(this,arguments)}function sn(P){return void 0!==P&&2===P.registrationStatus}function Jt(P){return 2===P.requestStatus&&!function(P){const $=Date.now();return $<P.creationTime||P.creationTime+P.expiresIn<$+36e5}(P)}function Mi(P){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:$})}function Pi(){return(Pi=(0,ie.Z)(function*(P){const $=P,{installationEntry:J,registrationPromise:fe}=yield br($);return fe?fe.catch(console.error):_e($).catch(console.error),J.fid})).apply(this,arguments)}function Ji(){return(Ji=(0,ie.Z)(function*(P,$=!1){const J=P;return yield ls(J),(yield _e(J,$)).token})).apply(this,arguments)}function ls(P){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,ie.Z)(function*(P){const{registrationPromise:$}=yield br(P);$&&(yield $)})).apply(this,arguments)}function Hn(P){return Ve.create("missing-app-config-values",{valueName:P})}const $r="installations";(0,Ne._registerComponent)(new de.wA($r,P=>{const $=P.getProvider("app").getImmediate(),J=function(P){if(!P||!P.options)throw Hn("App Configuration");if(!P.name)throw Hn("App Name");const $=["projectId","apiKey","appId"];for(const J of $)if(!P.options[J])throw Hn(J);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}($);return{app:$,appConfig:J,heartbeatServiceProvider:(0,Ne._getProvider)($,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Ne._registerComponent)(new de.wA("installations-internal",P=>{const $=P.getProvider("app").getImmediate(),J=(0,Ne._getProvider)($,$r).getImmediate();return{getId:()=>function(P){return Pi.apply(this,arguments)}(J),getToken:xe=>function(P){return Ji.apply(this,arguments)}(J,xe)}},"PRIVATE")),(0,Ne.registerVersion)(we,se),(0,Ne.registerVersion)(we,se,"esm2017");const Xr="@firebase/remote-config",Mr=new Se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class So{constructor($,J,fe,xe){this.client=$,this.storage=J,this.storageCache=fe,this.logger=xe}isCachedDataFresh($,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-J,xe=fe<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${xe}.`),xe}fetch($){var J=this;return(0,ie.Z)(function*(){const[fe,xe]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(xe&&J.isCachedDataFresh($.cacheMaxAgeMillis,fe))return xe;$.eTag=xe&&xe.eTag;const He=yield J.client.fetch($),dt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===He.status&&dt.push(J.storage.setLastSuccessfulFetchResponse(He)),yield Promise.all(dt),He})()}}function Hr(P=navigator){return P.languages&&P.languages[0]||P.language}class Li{constructor($,J,fe,xe,He,dt){this.firebaseInstallations=$,this.sdkVersion=J,this.namespace=fe,this.projectId=xe,this.apiKey=He,this.appId=dt}fetch($){var J=this;return(0,ie.Z)(function*(){var fe,xe,He;const[dt,Rt]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),yn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,Ln={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},rn={sdk_version:J.sdkVersion,app_instance_id:dt,app_instance_id_token:Rt,app_id:J.appId,language_code:Hr()},tr={method:"POST",headers:Ln,body:JSON.stringify(rn)},Dr=fetch(yn,tr),is=new Promise((Qo,Du)=>{$.signal.addEventListener(()=>{const Tl=new Error("The operation was aborted.");Tl.name="AbortError",Du(Tl)})});let ii;try{yield Promise.race([Dr,is]),ii=yield Dr}catch(Qo){let Du="fetch-client-network";throw"AbortError"===(null===(fe=Qo)||void 0===fe?void 0:fe.name)&&(Du="fetch-timeout"),Mr.create(Du,{originalErrorMessage:null===(xe=Qo)||void 0===xe?void 0:xe.message})}let gs=ii.status;const Dl=ii.headers.get("ETag")||void 0;let Us,Cr;if(200===ii.status){let Qo;try{Qo=yield ii.json()}catch(Du){throw Mr.create("fetch-client-parse",{originalErrorMessage:null===(He=Du)||void 0===He?void 0:He.message})}Us=Qo.entries,Cr=Qo.state}if("INSTANCE_STATE_UNSPECIFIED"===Cr?gs=500:"NO_CHANGE"===Cr?gs=304:("NO_TEMPLATE"===Cr||"EMPTY_CONFIG"===Cr)&&(Us={}),304!==gs&&200!==gs)throw Mr.create("fetch-status",{httpStatus:gs});return{status:gs,eTag:Dl,config:Us}})()}}class be{constructor($,J){this.client=$,this.storage=J}fetch($){var J=this;return(0,ie.Z)(function*(){const fe=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch($,fe)})()}attemptFetch($,{throttleEndTimeMillis:J,backoffCount:fe}){var xe=this;return(0,ie.Z)(function*(){yield function(P,$){return new Promise((J,fe)=>{const xe=Math.max($-Date.now(),0),He=setTimeout(J,xe);P.addEventListener(()=>{clearTimeout(He),fe(Mr.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,J);try{const He=yield xe.client.fetch($);return yield xe.storage.deleteThrottleMetadata(),He}catch(He){if(!function(P){if(!(P instanceof Se.ZR&&P.customData))return!1;const $=Number(P.customData.httpStatus);return 429===$||500===$||503===$||504===$}(He))throw He;const dt={throttleEndTimeMillis:Date.now()+(0,Se.$s)(fe),backoffCount:fe+1};return yield xe.storage.setThrottleMetadata(dt),xe.attemptFetch($,dt)}})()}}class yt{constructor($,J,fe,xe,He){this.app=$,this._client=J,this._storageCache=fe,this._storage=xe,this._logger=He,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function te(P,$){var J;const fe=P.target.error||void 0;return Mr.create($,{originalErrorMessage:fe&&(null===(J=fe)||void 0===J?void 0:J.message)})}const dn="app_namespace_store";class ts{constructor($,J,fe,xe=function(){return new Promise((P,$)=>{var J;try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=xe=>{$(te(xe,"storage-open"))},fe.onsuccess=xe=>{P(xe.target.result)},fe.onupgradeneeded=xe=>{0===xe.oldVersion&&xe.target.result.createObjectStore(dn,{keyPath:"compositeKey"})}}catch(fe){$(Mr.create("storage-open",{originalErrorMessage:null===(J=fe)||void 0===J?void 0:J.message}))}})}()){this.appId=$,this.appName=J,this.namespace=fe,this.openDbPromise=xe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var J=this;return(0,ie.Z)(function*(){const fe=yield J.openDbPromise;return new Promise((xe,He)=>{var dt;const Gt=fe.transaction([dn],"readonly").objectStore(dn),yn=J.createCompositeKey($);try{const Ln=Gt.get(yn);Ln.onerror=rn=>{He(te(rn,"storage-get"))},Ln.onsuccess=rn=>{const tr=rn.target.result;xe(tr?tr.value:void 0)}}catch(Ln){He(Mr.create("storage-get",{originalErrorMessage:null===(dt=Ln)||void 0===dt?void 0:dt.message}))}})})()}set($,J){var fe=this;return(0,ie.Z)(function*(){const xe=yield fe.openDbPromise;return new Promise((He,dt)=>{var Rt;const yn=xe.transaction([dn],"readwrite").objectStore(dn),Ln=fe.createCompositeKey($);try{const rn=yn.put({compositeKey:Ln,value:J});rn.onerror=tr=>{dt(te(tr,"storage-set"))},rn.onsuccess=()=>{He()}}catch(rn){dt(Mr.create("storage-set",{originalErrorMessage:null===(Rt=rn)||void 0===Rt?void 0:Rt.message}))}})})()}delete($){var J=this;return(0,ie.Z)(function*(){const fe=yield J.openDbPromise;return new Promise((xe,He)=>{var dt;const Gt=fe.transaction([dn],"readwrite").objectStore(dn),yn=J.createCompositeKey($);try{const Ln=Gt.delete(yn);Ln.onerror=rn=>{He(te(rn,"storage-delete"))},Ln.onsuccess=()=>{xe()}}catch(Ln){He(Mr.create("storage-delete",{originalErrorMessage:null===(dt=Ln)||void 0===dt?void 0:dt.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class er{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,ie.Z)(function*(){const J=$.storage.getLastFetchStatus(),fe=$.storage.getLastSuccessfulFetchTimestampMillis(),xe=$.storage.getActiveConfig(),He=yield J;He&&($.lastFetchStatus=He);const dt=yield fe;dt&&($.lastSuccessfulFetchTimestampMillis=dt);const Rt=yield xe;Rt&&($.activeConfig=Rt)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function uo(){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,ie.Z)(function*(){if(!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch(P){return!1}})).apply(this,arguments)}(0,Ne._registerComponent)(new de.wA("remote-config",function($,{instanceIdentifier:J}){const fe=$.getProvider("app").getImmediate(),xe=$.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Mr.create("registration-window");if(!(0,Se.hl)())throw Mr.create("indexed-db-unavailable");const{projectId:He,apiKey:dt,appId:Rt}=fe.options;if(!He)throw Mr.create("registration-project-id");if(!dt)throw Mr.create("registration-api-key");if(!Rt)throw Mr.create("registration-app-id");const Gt=new ts(Rt,fe.name,J=J||"firebase"),yn=new er(Gt),Ln=new Pe.Yd(Xr);Ln.logLevel=Pe.in.ERROR;const rn=new Li(xe,Ne.SDK_VERSION,J,He,dt,Rt),tr=new be(rn,Gt),Dr=new So(tr,Gt,yn,Ln),is=new yt(fe,Dr,yn,Gt,Ln);return function(P){const $=(0,Se.m9)(P);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(is),is},"PUBLIC").setMultipleInstances(!0)),(0,Ne.registerVersion)(Xr,"0.3.11"),(0,Ne.registerVersion)(Xr,"0.3.11","esm2017");const lo="/firebase-messaging-sw.js",_l="/firebase-cloud-messaging-push-scope",$s="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cs="google.c.a.c_id",ia="google.c.a.c_l",jo="google.c.a.ts",ws="google.c.a.e";var ds=(()=>{return(P=ds||(ds={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",ds;var P})();function ei(P){const $=new Uint8Array(P);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ci(P){const J=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(J),xe=new Uint8Array(fe.length);for(let He=0;He<fe.length;++He)xe[He]=fe.charCodeAt(He);return xe}const co="fcm_token_details_db",zi="fcm_token_object_Store";function pr(P){return hs.apply(this,arguments)}function hs(){return hs=(0,ie.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(He=>He.name).includes(co))return null;let $=null;return(yield(0,he.X3)(co,5,{upgrade:(fe=(0,ie.Z)(function*(xe,He,dt,Rt){var Gt;if(He<2||!xe.objectStoreNames.contains(zi))return;const yn=Rt.objectStore(zi),Ln=yield yn.index("fcmSenderId").get(P);if(yield yn.clear(),Ln)if(2===He){const rn=Ln;if(!rn.auth||!rn.p256dh||!rn.endpoint)return;$={token:rn.fcmToken,createTime:null!==(Gt=rn.createTime)&&void 0!==Gt?Gt:Date.now(),subscriptionOptions:{auth:rn.auth,p256dh:rn.p256dh,endpoint:rn.endpoint,swScope:rn.swScope,vapidKey:"string"==typeof rn.vapidKey?rn.vapidKey:ei(rn.vapidKey)}}}else if(3===He){const rn=Ln;$={token:rn.fcmToken,createTime:rn.createTime,subscriptionOptions:{auth:ei(rn.auth),p256dh:ei(rn.p256dh),endpoint:rn.endpoint,swScope:rn.swScope,vapidKey:ei(rn.vapidKey)}}}else if(4===He){const rn=Ln;$={token:rn.fcmToken,createTime:rn.createTime,subscriptionOptions:{auth:ei(rn.auth),p256dh:ei(rn.p256dh),endpoint:rn.endpoint,swScope:rn.swScope,vapidKey:ei(rn.vapidKey)}}}}),function(He,dt,Rt,Gt){return fe.apply(this,arguments)})})).close(),yield(0,he.Lj)(co),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Fs($)?$:null;var fe}),hs.apply(this,arguments)}function Fs(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:$}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}const Ls="firebase-messaging-store";let Cs=null;function F(){return Cs||(Cs=(0,he.X3)("firebase-messaging-database",1,{upgrade:(P,$)=>{0===$&&P.createObjectStore(Ls)}})),Cs}function Q(P){return B.apply(this,arguments)}function B(){return(B=(0,ie.Z)(function*(P){const $=L(P),fe=yield(yield F()).transaction(Ls).objectStore(Ls).get($);if(fe)return fe;{const xe=yield pr(P.appConfig.senderId);if(xe)return yield ne(P,xe),xe}})).apply(this,arguments)}function ne(P,$){return me.apply(this,arguments)}function me(){return(me=(0,ie.Z)(function*(P,$){const J=L(P),xe=(yield F()).transaction(Ls,"readwrite");return yield xe.objectStore(Ls).put($,J),yield xe.done,$})).apply(this,arguments)}function Qe(P){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,ie.Z)(function*(P){const $=L(P),fe=(yield F()).transaction(Ls,"readwrite");yield fe.objectStore(Ls).delete($),yield fe.done})).apply(this,arguments)}function L({appConfig:P}){return P.appId}const R=new Se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Y(P,$){return ke.apply(this,arguments)}function ke(){return(ke=(0,ie.Z)(function*(P,$){var J;const fe=yield Ui(P),xe=Kt($),He={method:"POST",headers:fe,body:JSON.stringify(xe)};let dt;try{dt=yield(yield fetch(qr(P.appConfig),He)).json()}catch(Rt){throw R.create("token-subscribe-failed",{errorInfo:null===(J=Rt)||void 0===J?void 0:J.toString()})}if(dt.error)throw R.create("token-subscribe-failed",{errorInfo:dt.error.message});if(!dt.token)throw R.create("token-subscribe-no-token");return dt.token})).apply(this,arguments)}function Et(P,$){return un.apply(this,arguments)}function un(){return(un=(0,ie.Z)(function*(P,$){var J;const fe=yield Ui(P),xe=Kt($.subscriptionOptions),He={method:"PATCH",headers:fe,body:JSON.stringify(xe)};let dt;try{dt=yield(yield fetch(`${qr(P.appConfig)}/${$.token}`,He)).json()}catch(Rt){throw R.create("token-update-failed",{errorInfo:null===(J=Rt)||void 0===J?void 0:J.toString()})}if(dt.error)throw R.create("token-update-failed",{errorInfo:dt.error.message});if(!dt.token)throw R.create("token-update-no-token");return dt.token})).apply(this,arguments)}function or(P,$){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,ie.Z)(function*(P,$){var J;const xe={method:"DELETE",headers:yield Ui(P)};try{const dt=yield(yield fetch(`${qr(P.appConfig)}/${$}`,xe)).json();if(dt.error)throw R.create("token-unsubscribe-failed",{errorInfo:dt.error.message})}catch(He){throw R.create("token-unsubscribe-failed",{errorInfo:null===(J=He)||void 0===J?void 0:J.toString()})}})).apply(this,arguments)}function qr({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function Ui(P){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,ie.Z)(function*({appConfig:P,installations:$}){const J=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function Kt({p256dh:P,auth:$,endpoint:J,vapidKey:fe}){const xe={web:{endpoint:J,auth:$,p256dh:P}};return fe!==$s&&(xe.web.applicationPubKey=fe),xe}const Ho=6048e5;function sa(P){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,ie.Z)(function*(P){const $=yield aa(P.swRegistration,P.vapidKey),J={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:$.endpoint,auth:ei($.getKey("auth")),p256dh:ei($.getKey("p256dh"))},fe=yield Q(P.firebaseDependencies);if(fe){if($u(fe.subscriptionOptions,J))return Date.now()>=fe.createTime+Ho?pd(P,{token:fe.token,createTime:Date.now(),subscriptionOptions:J}):fe.token;try{yield or(P.firebaseDependencies,fe.token)}catch(xe){console.warn(xe)}return ct(P.firebaseDependencies,J)}return ct(P.firebaseDependencies,J)})).apply(this,arguments)}function oa(P){return fu.apply(this,arguments)}function fu(){return(fu=(0,ie.Z)(function*(P){const $=yield Q(P.firebaseDependencies);$&&(yield or(P.firebaseDependencies,$.token),yield Qe(P.firebaseDependencies));const J=yield P.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()})).apply(this,arguments)}function pd(P,$){return pu.apply(this,arguments)}function pu(){return(pu=(0,ie.Z)(function*(P,$){try{const J=yield Et(P.firebaseDependencies,$),fe=Object.assign(Object.assign({},$),{token:J,createTime:Date.now()});return yield ne(P.firebaseDependencies,fe),J}catch(J){throw yield oa(P),J}})).apply(this,arguments)}function ct(P,$){return bn.apply(this,arguments)}function bn(){return(bn=(0,ie.Z)(function*(P,$){const fe={token:yield Y(P,$),createTime:Date.now(),subscriptionOptions:$};return yield ne(P,fe),fe.token})).apply(this,arguments)}function aa(P,$){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,ie.Z)(function*(P,$){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ci($)})})).apply(this,arguments)}function $u(P,$){return $.vapidKey===P.vapidKey&&$.endpoint===P.endpoint&&$.auth===P.auth&&$.p256dh===P.p256dh}function Go(P){const $={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function(P,$){if(!$.notification)return;P.notification={};const J=$.notification.title;J&&(P.notification.title=J);const fe=$.notification.body;fe&&(P.notification.body=fe);const xe=$.notification.image;xe&&(P.notification.image=xe)}($,P),function(P,$){!$.data||(P.data=$.data)}($,P),function(P,$){var J,fe,xe,He,dt;if(!$.fcmOptions&&!(null===(J=$.notification)||void 0===J?void 0:J.click_action))return;P.fcmOptions={};const Rt=null!==(xe=null===(fe=$.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==xe?xe:null===(He=$.notification)||void 0===He?void 0:He.click_action;Rt&&(P.fcmOptions.link=Rt);const Gt=null===(dt=$.fcmOptions)||void 0===dt?void 0:dt.analytics_label;Gt&&(P.fcmOptions.analyticsLabel=Gt)}($,P),$}function Ic(P){return"object"==typeof P&&!!P&&cs in P}function Ba(P,$){const J=[];for(let fe=0;fe<P.length;fe++)J.push(P.charAt(fe)),fe<$.length&&J.push($.charAt(fe));return J.join("")}function xo(P){return R.create("missing-app-config-values",{valueName:P})}Ba("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ba("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gi{constructor($,J,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const xe=function(P){if(!P||!P.options)throw xo("App Configuration Object");if(!P.name)throw xo("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:J}=P;for(const fe of $)if(!J[fe])throw xo(fe);return{appName:P.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:xe,installations:J,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function zs(P){return ua.apply(this,arguments)}function ua(){return(ua=(0,ie.Z)(function*(P){var $;try{P.swRegistration=yield navigator.serviceWorker.register(lo,{scope:_l}),P.swRegistration.update().catch(()=>{})}catch(J){throw R.create("failed-service-worker-registration",{browserErrorMessage:null===($=J)||void 0===$?void 0:$.message})}})).apply(this,arguments)}function Ro(P,$){return qi.apply(this,arguments)}function qi(){return(qi=(0,ie.Z)(function*(P,$){if(!$&&!P.swRegistration&&(yield zs(P)),$||!P.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw R.create("invalid-sw-registration");P.swRegistration=$}})).apply(this,arguments)}function yl(P,$){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,ie.Z)(function*(P,$){$?P.vapidKey=$:P.vapidKey||(P.vapidKey=$s)})).apply(this,arguments)}function qs(){return(qs=(0,ie.Z)(function*(P,$){if(!navigator)throw R.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw R.create("permission-blocked");return yield yl(P,null==$?void 0:$.vapidKey),yield Ro(P,null==$?void 0:$.serviceWorkerRegistration),sa(P)})).apply(this,arguments)}function ba(P,$,J){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,ie.Z)(function*(P,$,J){const fe=vl($);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:J[cs],message_name:J[ia],message_time:J[jo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vl(P){switch(P){case ds.NOTIFICATION_CLICKED:return"notification_open";case ds.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wo(){return(Wo=(0,ie.Z)(function*(P,$){const J=$.data;if(!J.isFirebaseMessaging)return;P.onMessageHandler&&J.messageType===ds.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Go(J)):P.onMessageHandler.next(Go(J)));const fe=J.data;Ic(fe)&&"1"===fe[ws]&&(yield ba(P,J.messageType,fe))})).apply(this,arguments)}const ja="@firebase/messaging";function gu(){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,ie.Z)(function*(){try{yield(0,Se.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,Se.hl)()&&(0,Se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Ne._registerComponent)(new de.wA("messaging",P=>{const $=new gi(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function(P,$){return Wo.apply(this,arguments)}($,J)),$},"PUBLIC")),(0,Ne._registerComponent)(new de.wA("messaging-internal",P=>{const $=P.getProvider("messaging").getImmediate();return{getToken:fe=>function(P,$){return qs.apply(this,arguments)}($,fe)}},"PRIVATE")),(0,Ne.registerVersion)(ja,"0.9.16"),(0,Ne.registerVersion)(ja,"0.9.16","esm2017");const da="analytics",Ii="firebase_id",Zs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Da="https://www.googletagmanager.com/gtag/js",ui=new Pe.Yd("@firebase/analytics");function vu(P){return Promise.all(P.map($=>$.catch(J=>J)))}function Ds(P,$){const J=document.createElement("script");J.src=`${Da}?l=${P}&id=${$}`,J.async=!0,document.head.appendChild(J)}function No(P,$,J,fe,xe,He){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,ie.Z)(function*(P,$,J,fe,xe,He){const dt=fe[xe];try{if(dt)yield $[dt];else{const Gt=(yield vu(J)).find(yn=>yn.measurementId===xe);Gt&&(yield $[Gt.appId])}}catch(Rt){ui.error(Rt)}P("config",xe,He)})).apply(this,arguments)}function wl(P,$,J,fe,xe){return po.apply(this,arguments)}function po(){return(po=(0,ie.Z)(function*(P,$,J,fe,xe){try{let He=[];if(xe&&xe.send_to){let dt=xe.send_to;Array.isArray(dt)||(dt=[dt]);const Rt=yield vu(J);for(const Gt of dt){const yn=Rt.find(rn=>rn.measurementId===Gt),Ln=yn&&$[yn.appId];if(!Ln){He=[];break}He.push(Ln)}}0===He.length&&(He=Object.values($)),yield Promise.all(He),P("event",fe,xe||{})}catch(He){ui.error(He)}})).apply(this,arguments)}function Ki(){const P=window.document.getElementsByTagName("script");for(const $ of Object.values(P))if($.src&&$.src.includes(Da))return $;return null}const Ys=new Se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ta=new class{constructor($={},J=1e3){this.throttleMetadata=$,this.intervalMillis=J}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,J){this.throttleMetadata[$]=J}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function Zl(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function Sc(P){return qo.apply(this,arguments)}function qo(){return(qo=(0,ie.Z)(function*(P){var $;const{appId:J,apiKey:fe}=P,xe={method:"GET",headers:Zl(fe)},He=Zs.replace("{app-id}",J),dt=yield fetch(He,xe);if(200!==dt.status&&304!==dt.status){let Rt="";try{const Gt=yield dt.json();(null===($=Gt.error)||void 0===$?void 0:$.message)&&(Rt=Gt.error.message)}catch(Gt){}throw Ys.create("config-fetch-failed",{httpStatus:dt.status,responseMessage:Rt})}return dt.json()})).apply(this,arguments)}function hf(P){return fs.apply(this,arguments)}function fs(){return(fs=(0,ie.Z)(function*(P,$=Ta,J){const{appId:fe,apiKey:xe,measurementId:He}=P.options;if(!fe)throw Ys.create("no-app-id");if(!xe){if(He)return{measurementId:He,appId:fe};throw Ys.create("no-api-key")}const dt=$.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Rt=new pa;return setTimeout((0,ie.Z)(function*(){Rt.abort()}),void 0!==J?J:6e4),zu({appId:fe,apiKey:xe,measurementId:He},dt,Rt,$)})).apply(this,arguments)}function zu(P,$,J){return fa.apply(this,arguments)}function fa(){return(fa=(0,ie.Z)(function*(P,{throttleEndTimeMillis:$,backoffCount:J},fe,xe=Ta){var He,dt;const{appId:Rt,measurementId:Gt}=P;try{yield ti(fe,$)}catch(yn){if(Gt)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Gt} provided in the "measurementId" field in the local Firebase config. [${null===(He=yn)||void 0===He?void 0:He.message}]`),{appId:Rt,measurementId:Gt};throw yn}try{const yn=yield Sc(P);return xe.deleteThrottleMetadata(Rt),yn}catch(yn){const Ln=yn;if(!Ko(Ln)){if(xe.deleteThrottleMetadata(Rt),Gt)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Gt} provided in the "measurementId" field in the local Firebase config. [${null==Ln?void 0:Ln.message}]`),{appId:Rt,measurementId:Gt};throw yn}const rn=503===Number(null===(dt=null==Ln?void 0:Ln.customData)||void 0===dt?void 0:dt.httpStatus)?(0,Se.$s)(J,xe.intervalMillis,30):(0,Se.$s)(J,xe.intervalMillis),tr={throttleEndTimeMillis:Date.now()+rn,backoffCount:J+1};return xe.setThrottleMetadata(Rt,tr),ui.debug(`Calling attemptFetch again in ${rn} millis`),zu(P,tr,fe,xe)}})).apply(this,arguments)}function ti(P,$){return new Promise((J,fe)=>{const xe=Math.max($-Date.now(),0),He=setTimeout(J,xe);P.addEventListener(()=>{clearTimeout(He),fe(Ys.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}function Ko(P){if(!(P instanceof Se.ZR&&P.customData))return!1;const $=Number(P.customData.httpStatus);return 429===$||500===$||503===$||504===$}class pa{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let Eu,ht;function ft(){return(ft=(0,ie.Z)(function*(P,$,J,fe,xe){if(xe&&xe.global)P("event",J,fe);else{const He=yield $;P("event",J,Object.assign(Object.assign({},fe),{send_to:He}))}})).apply(this,arguments)}function mi(P){ht=P}function N(P){Eu=P}function S(){return I.apply(this,arguments)}function I(){return(I=(0,ie.Z)(function*(){var P;if(!(0,Se.hl)())return ui.warn(Ys.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Se.eu)()}catch($){return ui.warn(Ys.create("indexeddb-unavailable",{errorInfo:null===(P=$)||void 0===P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function G(){return(G=(0,ie.Z)(function*(P,$,J,fe,xe,He,dt){var Rt;const Gt=hf(P);Gt.then(Dr=>{J[Dr.measurementId]=Dr.appId,P.options.measurementId&&Dr.measurementId!==P.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Dr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Dr=>ui.error(Dr)),$.push(Gt);const yn=S().then(Dr=>{if(Dr)return fe.getId()}),[Ln,rn]=yield Promise.all([Gt,yn]);Ki()||Ds(He,Ln.measurementId),ht&&(xe("consent","default",ht),mi(void 0)),xe("js",new Date);const tr=null!==(Rt=null==dt?void 0:dt.config)&&void 0!==Rt?Rt:{};return tr.origin="firebase",tr.update=!0,null!=rn&&(tr[Ii]=rn),xe("config",Ln.measurementId,tr),Eu&&(xe("set",Eu),N(void 0)),Ln.measurementId})).apply(this,arguments)}class ee{constructor($){this.app=$}_delete(){return delete le[this.app.options.appId],Promise.resolve()}}let le={},Ae=[];const st={};let gt,An,Ut="dataLayer",Pn=!1;function Ts(P,$,J){!function(){const P=[];if((0,Se.ru)()&&P.push("This is a browser extension environment."),(0,Se.zI)()||P.push("Cookies are not available."),P.length>0){const $=P.map((fe,xe)=>`(${xe+1}) ${fe}`).join(" "),J=Ys.create("invalid-analytics-context",{errorInfo:$});ui.warn(J.message)}}();const fe=P.options.appId;if(!fe)throw Ys.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw Ys.create("no-api-key");ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=le[fe])throw Ys.create("already-exists",{id:fe});if(!Pn){!function(P){let $=[];Array.isArray(window[P])?$=window[P]:window[P]=$}(Ut);const{wrappedGtag:He,gtagCore:dt}=function(P,$,J,fe,xe){let He=function(...dt){window[fe].push(arguments)};return window[xe]&&"function"==typeof window[xe]&&(He=window[xe]),window[xe]=function(P,$,J,fe){function He(){return(He=(0,ie.Z)(function*(dt,Rt,Gt){try{"event"===dt?yield wl(P,$,J,Rt,Gt):"config"===dt?yield No(P,$,J,fe,Rt,Gt):"consent"===dt?P("consent","update",Gt):P("set",Rt)}catch(yn){ui.error(yn)}})).apply(this,arguments)}return function(dt,Rt,Gt){return He.apply(this,arguments)}}(He,P,$,J),{gtagCore:He,wrappedGtag:window[xe]}}(le,Ae,st,Ut,"gtag");An=He,gt=dt,Pn=!0}return le[fe]=function(P,$,J,fe,xe,He,dt){return G.apply(this,arguments)}(P,Ae,st,$,gt,Ut,J),new ee(P)}function Pr(){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,ie.Z)(function*(){if((0,Se.ru)()||!(0,Se.zI)()||!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch(P){return!1}})).apply(this,arguments)}const Zo="@firebase/analytics";(0,Ne._registerComponent)(new de.wA(da,($,{options:J})=>Ts($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,Ne._registerComponent)(new de.wA("analytics-internal",function($){try{const J=$.getProvider(da).getImmediate();return{logEvent:(fe,xe,He)=>function(P,$,J,fe){P=(0,Se.m9)(P),function(P,$,J,fe,xe){return ft.apply(this,arguments)}(An,le[P.app.options.appId],$,J,fe).catch(xe=>ui.error(xe))}(J,fe,xe,He)}}catch(J){throw Ys.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,Ne.registerVersion)(Zo,"0.8.0"),(0,Ne.registerVersion)(Zo,"0.8.0","esm2017");var pf=z(7771),bl=z(3637),Wa=z(3342),Ze=z(309),_i=z(3101);const Vs=new T.GfV("7.4.1"),Il="__angularfire_symbol__analyticsIsSupportedValue",qu="__angularfire_symbol__analyticsIsSupported",Oo="__angularfire_symbol__remoteConfigIsSupportedValue",mo="__angularfire_symbol__remoteConfigIsSupported",ps="__angularfire_symbol__messagingIsSupportedValue",Ku="__angularfire_symbol__messagingIsSupported";function ph(P,$,J){if($){if(1===$.length)return $[0];const He=$.filter(dt=>dt.app===J);if(1===He.length)return He[0]}return J.container.getProvider(P).getImmediate({optional:!0})}globalThis[qu]||(globalThis[qu]=Pr().then(P=>globalThis[Il]=P).catch(()=>globalThis[Il]=!1)),globalThis[Ku]||(globalThis[Ku]=gu().then(P=>globalThis[ps]=P).catch(()=>globalThis[ps]=!1)),globalThis[mo]||(globalThis[mo]=uo().then(P=>globalThis[Oo]=P).catch(()=>globalThis[Oo]=!1));const Xl=(P,$)=>{const J=$?[$]:(0,U.C6)(),fe=[];return J.forEach(xe=>{xe.container.getProvider(P).instances.forEach(dt=>{fe.includes(dt)||fe.push(dt)})}),fe};function za(){}class ri{constructor($,J=pf.N){this.zone=$,this.delegate=J}now(){return this.delegate.now()}schedule($,J,fe){const xe=this.zone;return this.delegate.schedule(function(dt){xe.runGuarded(()=>{$.apply(this,[dt])})},J,fe)}}class Ss{constructor($){this.zone=$,this.task=null}call($,J){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",za,{},za,za)),J.pipe((0,Wa.b)({next:fe,complete:fe,error:fe})).subscribe($).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ji=(()=>{class P{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new ri(Zone.current)),this.insideAngular=J.run(()=>new ri(Zone.current,bl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(J){return new(J||P)(T.LFG(T.R0b))},P.\u0275prov=T.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function zn(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function _o(P){return P.pipe((0,Ze.QV)(zn().outsideAngular))}function Di(P){return zn(),function(P){return function(J){return(J=J.lift(new Ss(P.ngZone))).pipe((0,_i.R)(P.outsideAngular),(0,Ze.QV)(P.insideAngular))}}(zn())(P)}},665:(kt,$e,z)=>{"use strict";z.d($e,{Fj:()=>We,qu:()=>Qe,u:()=>Gr,sg:()=>Re,u5:()=>B,JU:()=>pe,JJ:()=>Nn,JL:()=>Sr,On:()=>Ei,UX:()=>ne,Q7:()=>ei,kI:()=>St});var T=z(7716),U=z(8583),ie=z(7574),Ne=z(9796),Se=z(8002),de=z(1555),Pe=z(4402);function we(L,O){return new ie.y(R=>{const Y=L.length;if(0===Y)return void R.complete();const ke=new Array(Y);let Et=0,un=0;for(let or=0;or<Y;or++){const Vi=(0,Pe.D)(L[or]);let qr=!1;R.add(Vi.subscribe({next:Ui=>{qr||(qr=!0,un++),ke[or]=Ui},error:Ui=>R.error(Ui),complete:()=>{Et++,(Et===Y||!qr)&&(un===Y&&R.next(O?O.reduce((Ui,Sn,Kt)=>(Ui[Sn]=ke[Kt],Ui),{}):ke),R.complete())}}))}})}let se=(()=>{class L{constructor(R,Y){this._renderer=R,this._elementRef=Y,this.onChange=ke=>{},this.onTouched=()=>{}}setProperty(R,Y){this._renderer.setProperty(this._elementRef.nativeElement,R,Y)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}}return L.\u0275fac=function(R){return new(R||L)(T.Y36(T.Qsj),T.Y36(T.SBq))},L.\u0275dir=T.lG2({type:L}),L})(),ce=(()=>{class L extends se{}return L.\u0275fac=function(){let O;return function(Y){return(O||(O=T.n5z(L)))(Y||L)}}(),L.\u0275dir=T.lG2({type:L,features:[T.qOj]}),L})();const pe=new T.OlP("NgValueAccessor"),it={provide:pe,useExisting:(0,T.Gpc)(()=>We),multi:!0},Ct=new T.OlP("CompositionEventMode");let We=(()=>{class L extends se{constructor(R,Y,ke){super(R,Y),this._compositionMode=ke,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const L=(0,U.q)()?(0,U.q)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(R){this.setProperty("value",null==R?"":R)}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}}return L.\u0275fac=function(R){return new(R||L)(T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(Ct,8))},L.\u0275dir=T.lG2({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(R,Y){1&R&&T.NdJ("input",function(Et){return Y._handleInput(Et.target.value)})("blur",function(){return Y.onTouched()})("compositionstart",function(){return Y._compositionStart()})("compositionend",function(Et){return Y._compositionEnd(Et.target.value)})},features:[T._Bn([it]),T.qOj]}),L})();function Ve(L){return null==L||0===L.length}function Ce(L){return null!=L&&"number"==typeof L.length}const vt=new T.OlP("NgValidators"),Wt=new T.OlP("NgAsyncValidators"),en=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class St{static min(O){return L=O,O=>{if(Ve(O.value)||Ve(L))return null;const R=parseFloat(O.value);return!isNaN(R)&&R<L?{min:{min:L,actual:O.value}}:null};var L}static max(O){return L=O,O=>{if(Ve(O.value)||Ve(L))return null;const R=parseFloat(O.value);return!isNaN(R)&&R>L?{max:{max:L,actual:O.value}}:null};var L}static required(O){return Fe(O)}static requiredTrue(O){return!0===O.value?null:{required:!0}}static email(O){return Ve((L=O).value)||en.test(L.value)?null:{email:!0};var L}static minLength(O){return L=O,O=>Ve(O.value)||!Ce(O.value)?null:O.value.length<L?{minlength:{requiredLength:L,actualLength:O.value.length}}:null;var L}static maxLength(O){return L=O,O=>Ce(O.value)&&O.value.length>L?{maxlength:{requiredLength:L,actualLength:O.value.length}}:null;var L}static pattern(O){return function(L){if(!L)return fr;let O,R;return"string"==typeof L?(R="","^"!==L.charAt(0)&&(R+="^"),R+=L,"$"!==L.charAt(L.length-1)&&(R+="$"),O=new RegExp(R)):(R=L.toString(),O=L),Y=>{if(Ve(Y.value))return null;const ke=Y.value;return O.test(ke)?null:{pattern:{requiredPattern:R,actualValue:ke}}}}(O)}static nullValidator(O){return null}static compose(O){return ln(O)}static composeAsync(O){return Qt(O)}}function Fe(L){return Ve(L.value)?{required:!0}:null}function fr(L){return null}function Fr(L){return null!=L}function Lr(L){const O=(0,T.QGY)(L)?(0,Pe.D)(L):L;return(0,T.CqO)(O),O}function Yr(L){let O={};return L.forEach(R=>{O=null!=R?Object.assign(Object.assign({},O),R):O}),0===Object.keys(O).length?null:O}function pn(L,O){return O.map(R=>R(L))}function gn(L){return L.map(O=>function(L){return!L.validate}(O)?O:R=>O.validate(R))}function ln(L){if(!L)return null;const O=L.filter(Fr);return 0==O.length?null:function(R){return Yr(pn(R,O))}}function Zt(L){return null!=L?ln(gn(L)):null}function Qt(L){if(!L)return null;const O=L.filter(Fr);return 0==O.length?null:function(R){return function(...L){if(1===L.length){const O=L[0];if((0,Ne.k)(O))return we(O,null);if((0,de.K)(O)&&Object.getPrototypeOf(O)===Object.prototype){const R=Object.keys(O);return we(R.map(Y=>O[Y]),R)}}if("function"==typeof L[L.length-1]){const O=L.pop();return we(L=1===L.length&&(0,Ne.k)(L[0])?L[0]:L,null).pipe((0,Se.U)(R=>O(...R)))}return we(L,null)}(pn(R,O).map(Lr)).pipe((0,Se.U)(Yr))}}function Vt(L){return null!=L?Qt(gn(L)):null}function on(L,O){return null===L?[O]:Array.isArray(L)?[...L,O]:[L,O]}function Bn(L){return L._rawValidators}function yr(L){return L._rawAsyncValidators}function mn(L){return L?Array.isArray(L)?L:[L]:[]}function On(L,O){return Array.isArray(L)?L.includes(O):L===O}function ur(L,O){const R=mn(O);return mn(L).forEach(ke=>{On(R,ke)||R.push(ke)}),R}function Qr(L,O){return mn(O).filter(R=>!On(L,R))}let kn=(()=>{class L{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Zt(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Vt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,Y){return!!this.control&&this.control.hasError(R,Y)}getError(R,Y){return this.control?this.control.getError(R,Y):null}}return L.\u0275fac=function(R){return new(R||L)},L.\u0275dir=T.lG2({type:L}),L})(),tt=(()=>{class L extends kn{get formDirective(){return null}get path(){return null}}return L.\u0275fac=function(){let O;return function(Y){return(O||(O=T.n5z(L)))(Y||L)}}(),L.\u0275dir=T.lG2({type:L,features:[T.qOj]}),L})();class an extends kn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xt{constructor(O){this._cd=O}is(O){var R,Y,ke;return"submitted"===O?!!(null===(R=this._cd)||void 0===R?void 0:R.submitted):!!(null===(ke=null===(Y=this._cd)||void 0===Y?void 0:Y.control)||void 0===ke?void 0:ke[O])}}let Nn=(()=>{class L extends xt{constructor(R){super(R)}}return L.\u0275fac=function(R){return new(R||L)(T.Y36(an,2))},L.\u0275dir=T.lG2({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(R,Y){2&R&&T.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))},features:[T.qOj]}),L})(),Sr=(()=>{class L extends xt{constructor(R){super(R)}}return L.\u0275fac=function(R){return new(R||L)(T.Y36(tt,10))},L.\u0275dir=T.lG2({type:L,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(R,Y){2&R&&T.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))("ng-submitted",Y.is("submitted"))},features:[T.qOj]}),L})();function zr(L,O){return[...O.path,L]}function In(L,O){ge(L,O),O.valueAccessor.writeValue(L.value),function(L,O){O.valueAccessor.registerOnChange(R=>{L._pendingValue=R,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&Tt(L,O)})}(L,O),function(L,O){const R=(Y,ke)=>{O.valueAccessor.writeValue(Y),ke&&O.viewToModelUpdate(Y)};L.registerOnChange(R),O._registerOnDestroy(()=>{L._unregisterOnChange(R)})}(L,O),function(L,O){O.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&Tt(L,O),"submit"!==L.updateOn&&L.markAsTouched()})}(L,O),function(L,O){if(O.valueAccessor.setDisabledState){const R=Y=>{O.valueAccessor.setDisabledState(Y)};L.registerOnDisabledChange(R),O._registerOnDestroy(()=>{L._unregisterOnDisabledChange(R)})}}(L,O)}function Dn(L,O,R=!0){const Y=()=>{};O.valueAccessor&&(O.valueAccessor.registerOnChange(Y),O.valueAccessor.registerOnTouched(Y)),ve(L,O),L&&(O._invokeOnDestroyCallbacks(),L._registerOnCollectionChange(()=>{}))}function _e(L,O){L.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange(O)})}function ge(L,O){const R=Bn(L);null!==O.validator?L.setValidators(on(R,O.validator)):"function"==typeof R&&L.setValidators([R]);const Y=yr(L);null!==O.asyncValidator?L.setAsyncValidators(on(Y,O.asyncValidator)):"function"==typeof Y&&L.setAsyncValidators([Y]);const ke=()=>L.updateValueAndValidity();_e(O._rawValidators,ke),_e(O._rawAsyncValidators,ke)}function ve(L,O){let R=!1;if(null!==L){if(null!==O.validator){const ke=Bn(L);if(Array.isArray(ke)&&ke.length>0){const Et=ke.filter(un=>un!==O.validator);Et.length!==ke.length&&(R=!0,L.setValidators(Et))}}if(null!==O.asyncValidator){const ke=yr(L);if(Array.isArray(ke)&&ke.length>0){const Et=ke.filter(un=>un!==O.asyncValidator);Et.length!==ke.length&&(R=!0,L.setAsyncValidators(Et))}}}const Y=()=>{};return _e(O._rawValidators,Y),_e(O._rawAsyncValidators,Y),R}function Tt(L,O){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function Jr(L,O){if(!L.hasOwnProperty("model"))return!1;const R=L.model;return!!R.isFirstChange()||!Object.is(O,R.currentValue)}function Ji(L,O){if(!O)return null;let R,Y,ke;return Array.isArray(O),O.forEach(Et=>{Et.constructor===We?R=Et:function(L){return Object.getPrototypeOf(L.constructor)===ce}(Et)?Y=Et:ke=Et}),ke||Y||R||null}function ls(L,O){const R=L.indexOf(O);R>-1&&L.splice(R,1)}const rr="VALID",dr="INVALID",Ir="PENDING",nn="DISABLED";function Ar(L){return($r(L)?L.validators:L)||null}function At(L){return Array.isArray(L)?Zt(L):L||null}function vn(L,O){return($r(O)?O.asyncValidators:L)||null}function Hn(L){return Array.isArray(L)?Vt(L):L||null}function $r(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}class vr{constructor(O,R){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=O,this._rawAsyncValidators=R,this._composedValidatorFn=At(this._rawValidators),this._composedAsyncValidatorFn=Hn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===rr}get invalid(){return this.status===dr}get pending(){return this.status==Ir}get disabled(){return this.status===nn}get enabled(){return this.status!==nn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._rawValidators=O,this._composedValidatorFn=At(O)}setAsyncValidators(O){this._rawAsyncValidators=O,this._composedAsyncValidatorFn=Hn(O)}addValidators(O){this.setValidators(ur(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(ur(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(Qr(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(Qr(O,this._rawAsyncValidators))}hasValidator(O){return On(this._rawValidators,O)}hasAsyncValidator(O){return On(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(R=>{R.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(R=>{R.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=Ir,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const R=this._parentMarkedDirty(O.onlySelf);this.status=nn,this.errors=null,this._forEachChild(Y=>{Y.disable(Object.assign(Object.assign({},O),{onlySelf:!0}))}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},O),{skipPristineCheck:R})),this._onDisabledChange.forEach(Y=>Y(!0))}enable(O={}){const R=this._parentMarkedDirty(O.onlySelf);this.status=rr,this._forEachChild(Y=>{Y.enable(Object.assign(Object.assign({},O),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},O),{skipPristineCheck:R})),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rr||this.status===Ir)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nn:rr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=Ir,this._hasOwnPendingAsyncValidator=!0;const R=Lr(this.asyncValidator(this));this._asyncValidationSubscription=R.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,R={}){this.errors=O,this._updateControlsErrors(!1!==R.emitEvent)}get(O){return function(L,O,R){if(null==O||(Array.isArray(O)||(O=O.split(".")),Array.isArray(O)&&0===O.length))return null;let Y=L;return O.forEach(ke=>{Y=Y instanceof xr?Y.controls.hasOwnProperty(ke)?Y.controls[ke]:null:Y instanceof ir&&Y.at(ke)||null}),Y}(this,O)}getError(O,R){const Y=R?this.get(R):this;return Y&&Y.errors?Y.errors[O]:null}hasError(O,R){return!!this.getError(O,R)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new T.vpe,this.statusChanges=new T.vpe}_calculateStatus(){return this._allControlsDisabled()?nn:this.errors?dr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ir)?Ir:this._anyControlsHaveStatus(dr)?dr:rr}_anyControlsHaveStatus(O){return this._anyControls(R=>R.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_isBoxedValue(O){return"object"==typeof O&&null!==O&&2===Object.keys(O).length&&"value"in O&&"disabled"in O}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){$r(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class En extends vr{constructor(O=null,R,Y){super(Ar(R),vn(Y,R)),this._onChange=[],this._applyFormState(O),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(O,R={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue(O,R={}){this.setValue(O,R)}reset(O=null,R={}){this._applyFormState(O),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){ls(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){ls(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){this._isBoxedValue(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}}class xr extends vr{constructor(O,R,Y){super(Ar(R),vn(Y,R)),this.controls=O,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,R){return this.controls[O]?this.controls[O]:(this.controls[O]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl(O,R,Y={}){this.registerControl(O,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl(O,R={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl(O,R,Y={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],R&&this.registerControl(O,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,R={}){this._checkAllValuesPresent(O),Object.keys(O).forEach(Y=>{this._throwIfControlMissing(Y),this.controls[Y].setValue(O[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(O,R={}){null!=O&&(Object.keys(O).forEach(Y=>{this.controls[Y]&&this.controls[Y].patchValue(O[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(O={},R={}){this._forEachChild((Y,ke)=>{Y.reset(O[ke],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this._reduceChildren({},(O,R,Y)=>(O[Y]=R instanceof En?R.value:R.getRawValue(),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(R,Y)=>!!Y._syncPendingControls()||R);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_throwIfControlMissing(O){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[O])throw new Error(`Cannot find form control with name: ${O}.`)}_forEachChild(O){Object.keys(this.controls).forEach(R=>{const Y=this.controls[R];Y&&O(Y,R)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const R of Object.keys(this.controls)){const Y=this.controls[R];if(this.contains(R)&&O(Y))return!0}return!1}_reduceValue(){return this._reduceChildren({},(O,R,Y)=>((R.enabled||this.disabled)&&(O[Y]=R.value),O))}_reduceChildren(O,R){let Y=O;return this._forEachChild((ke,Et)=>{Y=R(Y,ke,Et)}),Y}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(O){this._forEachChild((R,Y)=>{if(void 0===O[Y])throw new Error(`Must supply a value for form control with name: '${Y}'.`)})}}class ir extends vr{constructor(O,R,Y){super(Ar(R),vn(Y,R)),this.controls=O,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[O]}push(O,R={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}insert(O,R,Y={}){this.controls.splice(O,0,R),this._registerControl(R),this.updateValueAndValidity({emitEvent:Y.emitEvent})}removeAt(O,R={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),this.updateValueAndValidity({emitEvent:R.emitEvent})}setControl(O,R,Y={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),R&&(this.controls.splice(O,0,R),this._registerControl(R)),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,R={}){this._checkAllValuesPresent(O),O.forEach((Y,ke)=>{this._throwIfControlMissing(ke),this.at(ke).setValue(Y,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(O,R={}){null!=O&&(O.forEach((Y,ke)=>{this.at(ke)&&this.at(ke).patchValue(Y,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(O=[],R={}){this._forEachChild((Y,ke)=>{Y.reset(O[ke],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this.controls.map(O=>O instanceof En?O.value:O.getRawValue())}clear(O={}){this.controls.length<1||(this._forEachChild(R=>R._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_syncPendingControls(){let O=this.controls.reduce((R,Y)=>!!Y._syncPendingControls()||R,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_throwIfControlMissing(O){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(O))throw new Error(`Cannot find form control at index ${O}`)}_forEachChild(O){this.controls.forEach((R,Y)=>{O(R,Y)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(R=>R.enabled&&O(R))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_checkAllValuesPresent(O){this._forEachChild((R,Y)=>{if(void 0===O[Y])throw new Error(`Must supply a value for form control at index: ${Y}.`)})}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}}const Mn={provide:an,useExisting:(0,T.Gpc)(()=>Ei)},io=(()=>Promise.resolve(null))();let Ei=(()=>{class L extends an{constructor(R,Y,ke,Et){super(),this.control=new En,this._registered=!1,this.update=new T.vpe,this._parent=R,this._setValidators(Y),this._setAsyncValidators(ke),this.valueAccessor=Ji(0,Et)}ngOnChanges(R){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in R&&this._updateDisabled(R),Jr(R,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?zr(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){In(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(R){io.then(()=>{this.control.setValue(R,{emitViewToModelChange:!1})})}_updateDisabled(R){const Y=R.isDisabled.currentValue,ke=""===Y||Y&&"false"!==Y;io.then(()=>{ke&&!this.control.disabled?this.control.disable():!ke&&this.control.disabled&&this.control.enable()})}}return L.\u0275fac=function(R){return new(R||L)(T.Y36(tt,9),T.Y36(vt,10),T.Y36(Wt,10),T.Y36(pe,10))},L.\u0275dir=T.lG2({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T._Bn([Mn]),T.qOj,T.TTD]}),L})(),Os=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=T.oAB({type:L}),L.\u0275inj=T.cJS({}),L})();const So=new T.OlP("NgModelWithFormControlWarning"),es={provide:tt,useExisting:(0,T.Gpc)(()=>Re)};let Re=(()=>{class L extends tt{constructor(R,Y){super(),this.validators=R,this.asyncValidators=Y,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new T.vpe,this._setValidators(R),this._setAsyncValidators(Y)}ngOnChanges(R){this._checkFormPresent(),R.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ve(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(R){const Y=this.form.get(R.path);return In(Y,R),Y.updateValueAndValidity({emitEvent:!1}),this.directives.push(R),Y}getControl(R){return this.form.get(R.path)}removeControl(R){Dn(R.control||null,R,!1),ls(this.directives,R)}addFormGroup(R){this._setUpFormContainer(R)}removeFormGroup(R){this._cleanUpFormContainer(R)}getFormGroup(R){return this.form.get(R.path)}addFormArray(R){this._setUpFormContainer(R)}removeFormArray(R){this._cleanUpFormContainer(R)}getFormArray(R){return this.form.get(R.path)}updateModel(R,Y){this.form.get(R.path).setValue(Y)}onSubmit(R){return this.submitted=!0,function(L,O){L._syncPendingControls(),O.forEach(R=>{const Y=R.control;"submit"===Y.updateOn&&Y._pendingChange&&(R.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(R),!1}onReset(){this.resetForm()}resetForm(R){this.form.reset(R),this.submitted=!1}_updateDomValue(){this.directives.forEach(R=>{const Y=R.control,ke=this.form.get(R.path);Y!==ke&&(Dn(Y||null,R),ke instanceof En&&(In(ke,R),R.control=ke))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(R){const Y=this.form.get(R.path);(function(L,O){ge(L,O)})(Y,R),Y.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(R){if(this.form){const Y=this.form.get(R.path);Y&&function(L,O){return ve(L,O)}(Y,R)&&Y.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ge(this.form,this),this._oldForm&&ve(this._oldForm,this)}_checkFormPresent(){}}return L.\u0275fac=function(R){return new(R||L)(T.Y36(vt,10),T.Y36(Wt,10))},L.\u0275dir=T.lG2({type:L,selectors:[["","formGroup",""]],hostBindings:function(R,Y){1&R&&T.NdJ("submit",function(Et){return Y.onSubmit(Et)})("reset",function(){return Y.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([es]),T.qOj,T.TTD]}),L})();const dn={provide:an,useExisting:(0,T.Gpc)(()=>Gr)};let Gr=(()=>{class L extends an{constructor(R,Y,ke,Et,un){super(),this._ngModelWarningConfig=un,this._added=!1,this.update=new T.vpe,this._ngModelWarningSent=!1,this._parent=R,this._setValidators(Y),this._setAsyncValidators(ke),this.valueAccessor=Ji(0,Et)}set isDisabled(R){}ngOnChanges(R){this._added||this._setUpControl(),Jr(R,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}get path(){return zr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return L.\u0275fac=function(R){return new(R||L)(T.Y36(tt,13),T.Y36(vt,10),T.Y36(Wt,10),T.Y36(pe,10),T.Y36(So,8))},L.\u0275dir=T.lG2({type:L,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[T._Bn([dn]),T.qOj,T.TTD]}),L._ngModelWarningSentOnce=!1,L})();const Hs={provide:vt,useExisting:(0,T.Gpc)(()=>ei),multi:!0};let ei=(()=>{class L{constructor(){this._required=!1}get required(){return this._required}set required(R){this._required=null!=R&&!1!==R&&"false"!=`${R}`,this._onChange&&this._onChange()}validate(R){return this.required?Fe(R):null}registerOnValidatorChange(R){this._onChange=R}}return L.\u0275fac=function(R){return new(R||L)},L.\u0275dir=T.lG2({type:L,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(R,Y){2&R&&T.uIk("required",Y.required?"":null)},inputs:{required:"required"},features:[T._Bn([Hs])]}),L})(),Q=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=T.oAB({type:L}),L.\u0275inj=T.cJS({imports:[[Os]]}),L})(),B=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=T.oAB({type:L}),L.\u0275inj=T.cJS({imports:[Q]}),L})(),ne=(()=>{class L{static withConfig(R){return{ngModule:L,providers:[{provide:So,useValue:R.warnOnNgModelWithFormControl}]}}}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=T.oAB({type:L}),L.\u0275inj=T.cJS({imports:[Q]}),L})(),Qe=(()=>{class L{group(R,Y=null){const ke=this._reduceControls(R);let or,Et=null,un=null;return null!=Y&&(function(L){return void 0!==L.asyncValidators||void 0!==L.validators||void 0!==L.updateOn}(Y)?(Et=null!=Y.validators?Y.validators:null,un=null!=Y.asyncValidators?Y.asyncValidators:null,or=null!=Y.updateOn?Y.updateOn:void 0):(Et=null!=Y.validator?Y.validator:null,un=null!=Y.asyncValidator?Y.asyncValidator:null)),new xr(ke,{asyncValidators:un,updateOn:or,validators:Et})}control(R,Y,ke){return new En(R,Y,ke)}array(R,Y,ke){const Et=R.map(un=>this._createControl(un));return new ir(Et,Y,ke)}_reduceControls(R){const Y={};return Object.keys(R).forEach(ke=>{Y[ke]=this._createControl(R[ke])}),Y}_createControl(R){return R instanceof En||R instanceof xr||R instanceof ir?R:Array.isArray(R)?this.control(R[0],R.length>1?R[1]:null,R.length>2?R[2]:null):this.control(R)}}return L.\u0275fac=function(R){return new(R||L)},L.\u0275prov=(0,T.Yz7)({factory:function(){return new L},token:L,providedIn:ne}),L})()},5002:(kt,$e,z)=>{"use strict";z.d($e,{F0:()=>Bi,Bz:()=>pa,lC:()=>Mo});var T=z(8583),U=z(7716),ie=z(9765),Ne=z(7971);class Se extends ie.xQ{constructor(S){super(),this._value=S}get value(){return this.getValue()}_subscribe(S){const I=super._subscribe(S);return I&&!I.closed&&S.next(this._value),I}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ne.N;return this._value}next(S){super.next(this._value=S)}}var de=z(4869),Pe=z(9796),he=z(5197),we=z(509),se=z(6693);const ce={};class Be{constructor(S){this.resultSelector=S}call(S,I){return I.subscribe(new Ye(S,this.resultSelector))}}class Ye extends he.L{constructor(S,I){super(S),this.resultSelector=I,this.active=0,this.values=[],this.observables=[]}_next(S){this.values.push(ce),this.observables.push(S)}_complete(){const S=this.observables,I=S.length;if(0===I)this.destination.complete();else{this.active=I,this.toRespond=I;for(let V=0;V<I;V++)this.add((0,we.D)(this,S[V],void 0,V))}}notifyComplete(S){0==(this.active-=1)&&this.destination.complete()}notifyNext(S,I,V){const G=this.values,le=this.toRespond?G[V]===ce?--this.toRespond:this.toRespond:0;G[V]=I,0===le&&(this.resultSelector?this._tryResultSelector(G):this.destination.next(G.slice()))}_tryResultSelector(S){let I;try{I=this.resultSelector.apply(this,S)}catch(V){return void this.destination.error(V)}this.destination.next(I)}}var it=z(7574),ze=z(4402),Ct=z(9193);function We(N){return new it.y(S=>{let I;try{I=N()}catch(G){return void S.error(G)}return(I?(0,ze.D)(I):(0,Ct.c)()).subscribe(S)})}var Ve=z(5917),Ce=z(3410),vt=z(8071),Wt=z(2441),en=z(5345);function St(N){return function(I){const V=new hn(N),G=I.lift(V);return V.caught=G}}class hn{constructor(S){this.selector=S}call(S,I){return I.subscribe(new lt(S,this.selector,this.caught))}}class lt extends en.Ds{constructor(S,I,V){super(S),this.selector=I,this.caught=V}error(S){if(!this.isStopped){let I;try{I=this.selector(S,this.caught)}catch(ee){return void super.error(ee)}this._unsubscribeAndRecycle();const V=new en.IY(this);this.add(V);const G=(0,en.ft)(I,V);G!==V&&this.add(G)}}}var Fe=z(9773);function bt(N,S){return(0,Fe.zg)(N,S,1)}var ot=z(5435),Pt=z(7393),Yt=z(7108);function It(N){return function(I){return 0===N?(0,Ct.c)():I.lift(new fr(N))}}class fr{constructor(S){if(this.total=S,this.total<0)throw new Yt.W}call(S,I){return I.subscribe(new Fr(S,this.total))}}class Fr extends Pt.L{constructor(S,I){super(S),this.total=I,this.ring=new Array,this.count=0}_next(S){const I=this.ring,V=this.total,G=this.count++;I.length<V?I.push(S):I[G%V]=S}_complete(){const S=this.destination;let I=this.count;if(I>0){const V=this.count>=this.total?this.total:this.count,G=this.ring;for(let ee=0;ee<V;ee++){const le=I++%V;S.next(G[le])}}S.complete()}}var Lr=z(4635),Yr=z(5242),pn=z(4487),gn=z(5319);class Zt{constructor(S){this.callback=S}call(S,I){return I.subscribe(new Qt(S,this.callback))}}class Qt extends Pt.L{constructor(S,I){super(S),this.add(new gn.w(I))}}var Vt=z(8002),on=z(3190),Bn=z(5257),yr=z(9761),mn=z(2145),On=z(8049),ur=z(3342),Qr=z(1307),kn=z(3282);class tt{constructor(S,I){this.id=S,this.url=I}}class an extends tt{constructor(S,I,V="imperative",G=null){super(S,I),this.navigationTrigger=V,this.restoredState=G}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xt extends tt{constructor(S,I,V){super(S,I),this.urlAfterRedirects=V}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qn extends tt{constructor(S,I,V){super(S,I),this.reason=V}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cr extends tt{constructor(S,I,V){super(S,I),this.error=V}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nn extends tt{constructor(S,I,V,G){super(S,I),this.urlAfterRedirects=V,this.state=G}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends tt{constructor(S,I,V,G){super(S,I),this.urlAfterRedirects=V,this.state=G}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wr extends tt{constructor(S,I,V,G,ee){super(S,I),this.urlAfterRedirects=V,this.state=G,this.shouldActivate=ee}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class br extends tt{constructor(S,I,V,G){super(S,I),this.urlAfterRedirects=V,this.state=G}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gr extends tt{constructor(S,I,V,G){super(S,I),this.urlAfterRedirects=V,this.state=G}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _s{constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nr{constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ot{constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tn{constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ni{constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ys{constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ci{constructor(S,I,V){this.routerEvent=S,this.position=I,this.anchor=V}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Dt="primary";class Yn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I[0]:I}return null}getAll(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function zr(N){return new Yn(N)}const In="ngNavigationCancelingError";function Dn(N){const S=Error("NavigationCancelingError: "+N);return S[In]=!0,S}function De(N,S,I){const V=I.path.split("/");if(V.length>N.length||"full"===I.pathMatch&&(S.hasChildren()||V.length<N.length))return null;const G={};for(let ee=0;ee<V.length;ee++){const le=V[ee],Ae=N[ee];if(le.startsWith(":"))G[le.substring(1)]=Ae;else if(le!==Ae.path)return null}return{consumed:N.slice(0,V.length),posParams:G}}function ve(N,S){const I=N?Object.keys(N):void 0,V=S?Object.keys(S):void 0;if(!I||!V||I.length!=V.length)return!1;let G;for(let ee=0;ee<I.length;ee++)if(G=I[ee],!Te(N[G],S[G]))return!1;return!0}function Te(N,S){if(Array.isArray(N)&&Array.isArray(S)){if(N.length!==S.length)return!1;const I=[...N].sort(),V=[...S].sort();return I.every((G,ee)=>V[ee]===G)}return N===S}function nt(N){return Array.prototype.concat.apply([],N)}function Tt(N){return N.length>0?N[N.length-1]:null}function Jt(N,S){for(const I in N)N.hasOwnProperty(I)&&S(N[I],I)}function $n(N){return(0,U.CqO)(N)?N:(0,U.QGY)(N)?(0,ze.D)(Promise.resolve(N)):(0,Ve.of)(N)}const Cn={exact:function Ji(N,S,I){if(!At(N.segments,S.segments)||!dr(N.segments,S.segments,I)||N.numberOfChildren!==S.numberOfChildren)return!1;for(const V in S.children)if(!N.children[V]||!Ji(N.children[V],S.children[V],I))return!1;return!0},subset:Uo},Jr={exact:function(N,S){return ve(N,S)},subset:function(N,S){return Object.keys(S).length<=Object.keys(N).length&&Object.keys(S).every(I=>Te(N[I],S[I]))},ignored:()=>!0};function Pi(N,S,I){return Cn[I.paths](N.root,S.root,I.matrixParams)&&Jr[I.queryParams](N.queryParams,S.queryParams)&&!("exact"===I.fragment&&N.fragment!==S.fragment)}function Uo(N,S,I){return rr(N,S,S.segments,I)}function rr(N,S,I,V){if(N.segments.length>I.length){const G=N.segments.slice(0,I.length);return!(!At(G,I)||S.hasChildren()||!dr(G,I,V))}if(N.segments.length===I.length){if(!At(N.segments,I)||!dr(N.segments,I,V))return!1;for(const G in S.children)if(!N.children[G]||!Uo(N.children[G],S.children[G],V))return!1;return!0}{const G=I.slice(0,N.segments.length),ee=I.slice(N.segments.length);return!!(At(N.segments,G)&&dr(N.segments,G,V)&&N.children[Dt])&&rr(N.children[Dt],S,ee,V)}}function dr(N,S,I){return S.every((V,G)=>Jr[I](N[G].parameters,V.parameters))}class Ir{constructor(S,I,V){this.root=S,this.queryParams=I,this.fragment=V}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zr(this.queryParams)),this._queryParamMap}toString(){return vr.serialize(this)}}class nn{constructor(S,I){this.segments=S,this.children=I,this.parent=null,Jt(I,(V,G)=>V.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return En(this)}}class di{constructor(S,I){this.path=S,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=zr(this.parameters)),this._parameterMap}toString(){return Mr(this)}}function At(N,S){return N.length===S.length&&N.every((I,V)=>I.path===S[V].path)}class Hn{}class $r{parse(S){const I=new Ei(S);return new Ir(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(S){const I=`/${xr(S.root,!0)}`,V=function(N){const S=Object.keys(N).map(I=>{const V=N[I];return Array.isArray(V)?V.map(G=>`${Xr(I)}=${Xr(G)}`).join("&"):`${Xr(I)}=${Xr(V)}`}).filter(I=>!!I);return S.length?`?${S.join("&")}`:""}(S.queryParams);var N;return`${I}${V}${"string"==typeof S.fragment?`#${N=S.fragment,encodeURI(N)}`:""}`}}const vr=new $r;function En(N){return N.segments.map(S=>Mr(S)).join("/")}function xr(N,S){if(!N.hasChildren())return En(N);if(S){const I=N.children[Dt]?xr(N.children[Dt],!1):"",V=[];return Jt(N.children,(G,ee)=>{ee!==Dt&&V.push(`${ee}:${xr(G,!1)}`)}),V.length>0?`${I}(${V.join("//")})`:I}{const I=function(N,S){let I=[];return Jt(N.children,(V,G)=>{G===Dt&&(I=I.concat(S(V,G)))}),Jt(N.children,(V,G)=>{G!==Dt&&(I=I.concat(S(V,G)))}),I}(N,(V,G)=>G===Dt?[xr(N.children[Dt],!1)]:[`${G}:${xr(V,!1)}`]);return 1===Object.keys(N.children).length&&null!=N.children[Dt]?`${En(N)}/${I[0]}`:`${En(N)}/(${I.join("//")})`}}function ir(N){return encodeURIComponent(N).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xr(N){return ir(N).replace(/%3B/gi,";")}function cn(N){return ir(N).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rr(N){return decodeURIComponent(N)}function vi(N){return Rr(N.replace(/\+/g,"%20"))}function Mr(N){return`${cn(N.path)}${function(N){return Object.keys(N).map(S=>`;${cn(S)}=${cn(N[S])}`).join("")}(N.parameters)}`}const Es=/^[^\/()?;=#]+/;function Fi(N){const S=N.match(Es);return S?S[0]:""}const hi=/^[^=?&#]+/,Bo=/^[^?&#]+/;class Ei{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let V={};return this.peekStartsWith("(")&&(V=this.parseParens(!1)),(S.length>0||Object.keys(I).length>0)&&(V[Dt]=new nn(S,I)),V}parseSegment(){const S=Fi(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(S),new di(Rr(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const I=Fi(this.remaining);if(!I)return;this.capture(I);let V="";if(this.consumeOptional("=")){const G=Fi(this.remaining);G&&(V=G,this.capture(V))}S[Rr(I)]=Rr(V)}parseQueryParam(S){const I=function(N){const S=N.match(hi);return S?S[0]:""}(this.remaining);if(!I)return;this.capture(I);let V="";if(this.consumeOptional("=")){const le=function(N){const S=N.match(Bo);return S?S[0]:""}(this.remaining);le&&(V=le,this.capture(V))}const G=vi(I),ee=vi(V);if(S.hasOwnProperty(G)){let le=S[G];Array.isArray(le)||(le=[le],S[G]=le),le.push(ee)}else S[G]=ee}parseParens(S){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const V=Fi(this.remaining),G=this.remaining[V.length];if("/"!==G&&")"!==G&&";"!==G)throw new Error(`Cannot parse url '${this.url}'`);let ee;V.indexOf(":")>-1?(ee=V.substr(0,V.indexOf(":")),this.capture(ee),this.capture(":")):S&&(ee=Dt);const le=this.parseChildren();I[ee]=1===Object.keys(le).length?le[Dt]:new nn([],le),this.consumeOptional("//")}return I}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new Error(`Expected "${S}".`)}}class so{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const I=this.pathFromRoot(S);return I.length>1?I[I.length-2]:null}children(S){const I=wi(S,this._root);return I?I.children.map(V=>V.value):[]}firstChild(S){const I=wi(S,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(S){const I=Wi(S,this._root);return I.length<2?[]:I[I.length-2].children.map(G=>G.value).filter(G=>G!==S)}pathFromRoot(S){return Wi(S,this._root).map(I=>I.value)}}function wi(N,S){if(N===S.value)return S;for(const I of S.children){const V=wi(N,I);if(V)return V}return null}function Wi(N,S){if(N===S.value)return[S];for(const I of S.children){const V=Wi(N,I);if(V.length)return V.unshift(S),V}return[]}class Er{constructor(S,I){this.value=S,this.children=I}toString(){return`TreeNode(${this.value})`}}function Vr(N){const S={};return N&&N.children.forEach(I=>S[I.value.outlet]=I),S}class Os extends so{constructor(S,I){super(S),this.snapshot=I,es(this,S)}toString(){return this.snapshot.toString()}}function Xi(N,S){const I=function(N,S){const le=new Hr([],{},{},"",{},Dt,S,null,N.root,-1,{});return new Li("",new Er(le,[]))}(N,S),V=new Se([new di("",{})]),G=new Se({}),ee=new Se({}),le=new Se({}),Ae=new Se(""),st=new sr(V,G,le,Ae,ee,Dt,S,I.root);return st.snapshot=I.root,new Os(new Er(st,[]),I)}class sr{constructor(S,I,V,G,ee,le,Ae,st){this.url=S,this.params=I,this.queryParams=V,this.fragment=G,this.data=ee,this.outlet=le,this.component=Ae,this._futureSnapshot=st}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(S=>zr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(S=>zr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oo(N,S="emptyOnly"){const I=N.pathFromRoot;let V=0;if("always"!==S)for(V=I.length-1;V>=1;){const G=I[V],ee=I[V-1];if(G.routeConfig&&""===G.routeConfig.path)V--;else{if(ee.component)break;V--}}return function(N){return N.reduce((S,I)=>({params:Object.assign(Object.assign({},S.params),I.params),data:Object.assign(Object.assign({},S.data),I.data),resolve:Object.assign(Object.assign({},S.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(V))}class Hr{constructor(S,I,V,G,ee,le,Ae,st,Ut,Fn,gt){this.url=S,this.params=I,this.queryParams=V,this.fragment=G,this.data=ee,this.outlet=le,this.component=Ae,this.routeConfig=st,this._urlSegment=Ut,this._lastPathIndex=Fn,this._resolve=gt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(V=>V.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Li extends so{constructor(S,I){super(I),this.url=S,es(this,I)}toString(){return Re(this._root)}}function es(N,S){S.value._routerState=N,S.children.forEach(I=>es(N,I))}function Re(N){const S=N.children.length>0?` { ${N.children.map(Re).join(", ")} } `:"";return`${N.value}${S}`}function be(N){if(N.snapshot){const S=N.snapshot,I=N._futureSnapshot;N.snapshot=I,ve(S.queryParams,I.queryParams)||N.queryParams.next(I.queryParams),S.fragment!==I.fragment&&N.fragment.next(I.fragment),ve(S.params,I.params)||N.params.next(I.params),function(N,S){if(N.length!==S.length)return!1;for(let I=0;I<N.length;++I)if(!ve(N[I],S[I]))return!1;return!0}(S.url,I.url)||N.url.next(I.url),ve(S.data,I.data)||N.data.next(I.data)}else N.snapshot=N._futureSnapshot,N.data.next(N._futureSnapshot.data)}function Ge(N,S){const I=ve(N.params,S.params)&&function(N,S){return At(N,S)&&N.every((I,V)=>ve(I.parameters,S[V].parameters))}(N.url,S.url);return I&&!(!N.parent!=!S.parent)&&(!N.parent||Ge(N.parent,S.parent))}function yt(N,S,I){if(I&&N.shouldReuseRoute(S.value,I.value.snapshot)){const V=I.value;V._futureSnapshot=S.value;const G=function(N,S,I){return S.children.map(V=>{for(const G of I.children)if(N.shouldReuseRoute(V.value,G.value.snapshot))return yt(N,V,G);return yt(N,V)})}(N,S,I);return new Er(V,G)}{if(N.shouldAttach(S.value)){const ee=N.retrieve(S.value);if(null!==ee){const le=ee.route;return te(S,le),le}}const V=function(N){return new sr(new Se(N.url),new Se(N.params),new Se(N.queryParams),new Se(N.fragment),new Se(N.data),N.outlet,N.component,N)}(S.value),G=S.children.map(ee=>yt(N,ee));return new Er(V,G)}}function te(N,S){if(N.value.routeConfig!==S.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(N.children.length!==S.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");S.value._futureSnapshot=N.value;for(let I=0;I<N.children.length;++I)te(N.children[I],S.children[I])}function ai(N){return"object"==typeof N&&null!=N&&!N.outlets&&!N.segmentPath}function ts(N){return"object"==typeof N&&null!=N&&N.outlets}function er(N,S,I,V,G){let ee={};return V&&Jt(V,(le,Ae)=>{ee[Ae]=Array.isArray(le)?le.map(st=>`${st}`):`${le}`}),new Ir(I.root===N?S:ao(I.root,N,S),ee,G)}function ao(N,S,I){const V={};return Jt(N.children,(G,ee)=>{V[ee]=G===S?I:ao(G,S,I)}),new nn(N.segments,V)}class ns{constructor(S,I,V){if(this.isAbsolute=S,this.numberOfDoubleDots=I,this.commands=V,S&&V.length>0&&ai(V[0]))throw new Error("Root segment cannot have matrix parameters");const G=V.find(ts);if(G&&G!==Tt(V))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uo{constructor(S,I,V){this.segmentGroup=S,this.processChildren=I,this.index=V}}function $s(N,S,I){if(N||(N=new nn([],{})),0===N.segments.length&&N.hasChildren())return ks(N,S,I);const V=function(N,S,I){let V=0,G=S;const ee={match:!1,pathIndex:0,commandIndex:0};for(;G<N.segments.length;){if(V>=I.length)return ee;const le=N.segments[G],Ae=I[V];if(ts(Ae))break;const st=`${Ae}`,Ut=V<I.length-1?I[V+1]:null;if(G>0&&void 0===st)break;if(st&&Ut&&"object"==typeof Ut&&void 0===Ut.outlets){if(!Hs(st,Ut,le))return ee;V+=2}else{if(!Hs(st,{},le))return ee;V++}G++}return{match:!0,pathIndex:G,commandIndex:V}}(N,S,I),G=I.slice(V.commandIndex);if(V.match&&V.pathIndex<N.segments.length){const ee=new nn(N.segments.slice(0,V.pathIndex),{});return ee.children[Dt]=new nn(N.segments.slice(V.pathIndex),N.children),ks(ee,0,G)}return V.match&&0===G.length?new nn(N.segments,{}):V.match&&!N.hasChildren()?ia(N,S,I):V.match?ks(N,0,G):ia(N,S,I)}function ks(N,S,I){if(0===I.length)return new nn(N.segments,{});{const V=function(N){return ts(N[0])?N[0].outlets:{[Dt]:N}}(I),G={};return Jt(V,(ee,le)=>{"string"==typeof ee&&(ee=[ee]),null!==ee&&(G[le]=$s(N.children[le],S,ee))}),Jt(N.children,(ee,le)=>{void 0===V[le]&&(G[le]=ee)}),new nn(N.segments,G)}}function ia(N,S,I){const V=N.segments.slice(0,S);let G=0;for(;G<I.length;){const ee=I[G];if(ts(ee)){const st=jo(ee.outlets);return new nn(V,st)}if(0===G&&ai(I[0])){V.push(new di(N.segments[S].path,ws(I[0]))),G++;continue}const le=ts(ee)?ee.outlets[Dt]:`${ee}`,Ae=G<I.length-1?I[G+1]:null;le&&Ae&&ai(Ae)?(V.push(new di(le,ws(Ae))),G+=2):(V.push(new di(le,{})),G++)}return new nn(V,{})}function jo(N){const S={};return Jt(N,(I,V)=>{"string"==typeof I&&(I=[I]),null!==I&&(S[V]=ia(new nn([],{}),0,I))}),S}function ws(N){const S={};return Jt(N,(I,V)=>S[V]=`${I}`),S}function Hs(N,S,I){return N==I.path&&ve(S,I.parameters)}class ei{constructor(S,I,V,G){this.routeReuseStrategy=S,this.futureState=I,this.currState=V,this.forwardEvent=G}activate(S){const I=this.futureState._root,V=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,V,S),be(this.futureState.root),this.activateChildRoutes(I,V,S)}deactivateChildRoutes(S,I,V){const G=Vr(I);S.children.forEach(ee=>{const le=ee.value.outlet;this.deactivateRoutes(ee,G[le],V),delete G[le]}),Jt(G,(ee,le)=>{this.deactivateRouteAndItsChildren(ee,V)})}deactivateRoutes(S,I,V){const G=S.value,ee=I?I.value:null;if(G===ee)if(G.component){const le=V.getContext(G.outlet);le&&this.deactivateChildRoutes(S,I,le.children)}else this.deactivateChildRoutes(S,I,V);else ee&&this.deactivateRouteAndItsChildren(I,V)}deactivateRouteAndItsChildren(S,I){this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,I):this.deactivateRouteAndOutlet(S,I)}detachAndStoreRouteSubtree(S,I){const V=I.getContext(S.value.outlet);if(V&&V.outlet){const G=V.outlet.detach(),ee=V.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:G,route:S,contexts:ee})}}deactivateRouteAndOutlet(S,I){const V=I.getContext(S.value.outlet),G=V&&S.value.component?V.children:I,ee=Vr(S);for(const le of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[le],G);V&&V.outlet&&(V.outlet.deactivate(),V.children.onOutletDeactivated(),V.attachRef=null,V.resolver=null,V.route=null)}activateChildRoutes(S,I,V){const G=Vr(I);S.children.forEach(ee=>{this.activateRoutes(ee,G[ee.value.outlet],V),this.forwardEvent(new ys(ee.value.snapshot))}),S.children.length&&this.forwardEvent(new tn(S.value.snapshot))}activateRoutes(S,I,V){const G=S.value,ee=I?I.value:null;if(be(G),G===ee)if(G.component){const le=V.getOrCreateContext(G.outlet);this.activateChildRoutes(S,I,le.children)}else this.activateChildRoutes(S,I,V);else if(G.component){const le=V.getOrCreateContext(G.outlet);if(this.routeReuseStrategy.shouldAttach(G.snapshot)){const Ae=this.routeReuseStrategy.retrieve(G.snapshot);this.routeReuseStrategy.store(G.snapshot,null),le.children.onOutletReAttached(Ae.contexts),le.attachRef=Ae.componentRef,le.route=Ae.route.value,le.outlet&&le.outlet.attach(Ae.componentRef,Ae.route.value),Ci(Ae.route)}else{const Ae=function(N){for(let S=N.parent;S;S=S.parent){const I=S.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(G.snapshot),st=Ae?Ae.module.componentFactoryResolver:null;le.attachRef=null,le.route=G,le.resolver=st,le.outlet&&le.outlet.activateWith(G,st),this.activateChildRoutes(S,null,le.children)}}else this.activateChildRoutes(S,null,V)}}function Ci(N){be(N.value),N.children.forEach(Ci)}class fi{constructor(S,I){this.routes=S,this.module=I}}function zi(N){return"function"==typeof N}function hs(N){return N instanceof Ir}const Cs=Symbol("INITIAL_VALUE");function F(){return(0,on.w)(N=>function(...N){let S,I;return(0,de.K)(N[N.length-1])&&(I=N.pop()),"function"==typeof N[N.length-1]&&(S=N.pop()),1===N.length&&(0,Pe.k)(N[0])&&(N=N[0]),(0,se.n)(N,I).lift(new Be(S))}(N.map(S=>S.pipe((0,Bn.q)(1),(0,yr.O)(Cs)))).pipe((0,mn.R)((S,I)=>{let V=!1;return I.reduce((G,ee,le)=>G!==Cs?G:(ee===Cs&&(V=!0),V||!1!==ee&&le!==I.length-1&&!hs(ee)?G:ee),S)},Cs),(0,ot.h)(S=>S!==Cs),(0,Vt.U)(S=>hs(S)?S:!0===S),(0,Bn.q)(1)))}let Q=(()=>{class N{}return N.\u0275fac=function(I){return new(I||N)},N.\u0275cmp=U.Xpm({type:N,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,V){1&I&&U._UZ(0,"router-outlet")},directives:function(){return[Mo]},encapsulation:2}),N})();function B(N,S=""){for(let I=0;I<N.length;I++){const V=N[I];ne(V,me(S,V))}}function ne(N,S){N.children&&B(N.children,S)}function me(N,S){return S?N||S.path?N&&!S.path?`${N}/`:!N&&S.path?S.path:`${N}/${S.path}`:"":N}function Qe(N){const S=N.children&&N.children.map(Qe),I=S?Object.assign(Object.assign({},N),{children:S}):Object.assign({},N);return!I.component&&(S||I.loadChildren)&&I.outlet&&I.outlet!==Dt&&(I.component=Q),I}function Ke(N){return N.outlet||Dt}function L(N,S){const I=N.filter(V=>Ke(V)===S);return I.push(...N.filter(V=>Ke(V)!==S)),I}const O={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function R(N,S,I){var V;if(""===S.path)return"full"===S.pathMatch&&(N.hasChildren()||I.length>0)?Object.assign({},O):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ee=(S.matcher||De)(I,N,S);if(!ee)return Object.assign({},O);const le={};Jt(ee.posParams,(st,Ut)=>{le[Ut]=st.path});const Ae=ee.consumed.length>0?Object.assign(Object.assign({},le),ee.consumed[ee.consumed.length-1].parameters):le;return{matched:!0,consumedSegments:ee.consumed,lastChild:ee.consumed.length,parameters:Ae,positionalParamSegments:null!==(V=ee.posParams)&&void 0!==V?V:{}}}function Y(N,S,I,V,G="corrected"){if(I.length>0&&function(N,S,I){return I.some(V=>Vi(N,S,V)&&Ke(V)!==Dt)}(N,I,V)){const le=new nn(S,function(N,S,I,V){const G={};G[Dt]=V,V._sourceSegment=N,V._segmentIndexShift=S.length;for(const ee of I)if(""===ee.path&&Ke(ee)!==Dt){const le=new nn([],{});le._sourceSegment=N,le._segmentIndexShift=S.length,G[Ke(ee)]=le}return G}(N,S,V,new nn(I,N.children)));return le._sourceSegment=N,le._segmentIndexShift=S.length,{segmentGroup:le,slicedSegments:[]}}if(0===I.length&&function(N,S,I){return I.some(V=>Vi(N,S,V))}(N,I,V)){const le=new nn(N.segments,function(N,S,I,V,G,ee){const le={};for(const Ae of V)if(Vi(N,I,Ae)&&!G[Ke(Ae)]){const st=new nn([],{});st._sourceSegment=N,st._segmentIndexShift="legacy"===ee?N.segments.length:S.length,le[Ke(Ae)]=st}return Object.assign(Object.assign({},G),le)}(N,S,I,V,N.children,G));return le._sourceSegment=N,le._segmentIndexShift=S.length,{segmentGroup:le,slicedSegments:I}}const ee=new nn(N.segments,N.children);return ee._sourceSegment=N,ee._segmentIndexShift=S.length,{segmentGroup:ee,slicedSegments:I}}function Vi(N,S,I){return(!(N.hasChildren()||S.length>0)||"full"!==I.pathMatch)&&""===I.path}function qr(N,S,I,V){return!!(Ke(N)===V||V!==Dt&&Vi(S,I,N))&&("**"===N.path||R(S,N,I).matched)}function Ui(N,S,I){return 0===S.length&&!N.children[I]}class Sn{constructor(S){this.segmentGroup=S||null}}class Kt{constructor(S){this.urlTree=S}}function Ho(N){return new it.y(S=>S.error(new Sn(N)))}function sa(N){return new it.y(S=>S.error(new Kt(N)))}function Ua(N){return new it.y(S=>S.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${N}'`)))}class pd{constructor(S,I,V,G,ee){this.configLoader=I,this.urlSerializer=V,this.urlTree=G,this.config=ee,this.allowRedirects=!0,this.ngModule=S.get(U.h0i)}apply(){const S=Y(this.urlTree.root,[],[],this.config).segmentGroup,I=new nn(S.segments,S.children);return this.expandSegmentGroup(this.ngModule,this.config,I,Dt).pipe((0,Vt.U)(ee=>this.createUrlTree(ct(ee),this.urlTree.queryParams,this.urlTree.fragment))).pipe(St(ee=>{if(ee instanceof Kt)return this.allowRedirects=!1,this.match(ee.urlTree);throw ee instanceof Sn?this.noMatchError(ee):ee}))}match(S){return this.expandSegmentGroup(this.ngModule,this.config,S.root,Dt).pipe((0,Vt.U)(G=>this.createUrlTree(ct(G),S.queryParams,S.fragment))).pipe(St(G=>{throw G instanceof Sn?this.noMatchError(G):G}))}noMatchError(S){return new Error(`Cannot match any routes. URL Segment: '${S.segmentGroup}'`)}createUrlTree(S,I,V){const G=S.segments.length>0?new nn([],{[Dt]:S}):S;return new Ir(G,I,V)}expandSegmentGroup(S,I,V,G){return 0===V.segments.length&&V.hasChildren()?this.expandChildren(S,I,V).pipe((0,Vt.U)(ee=>new nn([],ee))):this.expandSegment(S,V,I,V.segments,G,!0)}expandChildren(S,I,V){const G=[];for(const ee of Object.keys(V.children))"primary"===ee?G.unshift(ee):G.push(ee);return(0,ze.D)(G).pipe(bt(ee=>{const le=V.children[ee],Ae=L(I,ee);return this.expandSegmentGroup(S,Ae,le,ee).pipe((0,Vt.U)(st=>({segment:st,outlet:ee})))}),(0,mn.R)((ee,le)=>(ee[le.outlet]=le.segment,ee),{}),function(N,S){const I=arguments.length>=2;return V=>V.pipe(N?(0,ot.h)((G,ee)=>N(G,ee,V)):pn.y,It(1),I?(0,Yr.d)(S):(0,Lr.T)(()=>new Ce.K))}())}expandSegment(S,I,V,G,ee,le){return(0,ze.D)(V).pipe(bt(Ae=>this.expandSegmentAgainstRoute(S,I,V,Ae,G,ee,le).pipe(St(Ut=>{if(Ut instanceof Sn)return(0,Ve.of)(null);throw Ut}))),(0,On.P)(Ae=>!!Ae),St((Ae,st)=>{if(Ae instanceof Ce.K||"EmptyError"===Ae.name){if(Ui(I,G,ee))return(0,Ve.of)(new nn([],{}));throw new Sn(I)}throw Ae}))}expandSegmentAgainstRoute(S,I,V,G,ee,le,Ae){return qr(G,I,ee,le)?void 0===G.redirectTo?this.matchSegmentAgainstRoute(S,I,G,ee,le):Ae&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,I,V,G,ee,le):Ho(I):Ho(I)}expandSegmentAgainstRouteUsingRedirect(S,I,V,G,ee,le){return"**"===G.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,V,G,le):this.expandRegularSegmentAgainstRouteUsingRedirect(S,I,V,G,ee,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,I,V,G){const ee=this.applyRedirectCommands([],V.redirectTo,{});return V.redirectTo.startsWith("/")?sa(ee):this.lineralizeSegments(V,ee).pipe((0,Fe.zg)(le=>{const Ae=new nn(le,{});return this.expandSegment(S,Ae,I,le,G,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,I,V,G,ee,le){const{matched:Ae,consumedSegments:st,lastChild:Ut,positionalParamSegments:Fn}=R(I,G,ee);if(!Ae)return Ho(I);const gt=this.applyRedirectCommands(st,G.redirectTo,Fn);return G.redirectTo.startsWith("/")?sa(gt):this.lineralizeSegments(G,gt).pipe((0,Fe.zg)(An=>this.expandSegment(S,I,V,An.concat(ee.slice(Ut)),le,!1)))}matchSegmentAgainstRoute(S,I,V,G,ee){if("**"===V.path)return V.loadChildren?(V._loadedConfig?(0,Ve.of)(V._loadedConfig):this.configLoader.load(S.injector,V)).pipe((0,Vt.U)(An=>(V._loadedConfig=An,new nn(G,{})))):(0,Ve.of)(new nn(G,{}));const{matched:le,consumedSegments:Ae,lastChild:st}=R(I,V,G);if(!le)return Ho(I);const Ut=G.slice(st);return this.getChildConfig(S,V,G).pipe((0,Fe.zg)(gt=>{const An=gt.module,Pn=gt.routes,{segmentGroup:Gn,slicedSegments:Ht}=Y(I,Ae,Ut,Pn),Ts=new nn(Gn.segments,Gn.children);if(0===Ht.length&&Ts.hasChildren())return this.expandChildren(An,Pn,Ts).pipe((0,Vt.U)(Mt=>new nn(Ae,Mt)));if(0===Pn.length&&0===Ht.length)return(0,Ve.of)(new nn(Ae,{}));const Wn=Ke(V)===ee;return this.expandSegment(An,Ts,Pn,Ht,Wn?Dt:ee,!0).pipe((0,Vt.U)(Pr=>new nn(Ae.concat(Pr.segments),Pr.children)))}))}getChildConfig(S,I,V){return I.children?(0,Ve.of)(new fi(I.children,S)):I.loadChildren?void 0!==I._loadedConfig?(0,Ve.of)(I._loadedConfig):this.runCanLoadGuards(S.injector,I,V).pipe((0,Fe.zg)(G=>{return G?this.configLoader.load(S.injector,I).pipe((0,Vt.U)(ee=>(I._loadedConfig=ee,ee))):(N=I,new it.y(S=>S.error(Dn(`Cannot load children because the guard of the route "path: '${N.path}'" returned false`))));var N})):(0,Ve.of)(new fi([],S))}runCanLoadGuards(S,I,V){const G=I.canLoad;if(!G||0===G.length)return(0,Ve.of)(!0);const ee=G.map(le=>{const Ae=S.get(le);let st;if((N=Ae)&&zi(N.canLoad))st=Ae.canLoad(I,V);else{if(!zi(Ae))throw new Error("Invalid CanLoad guard");st=Ae(I,V)}var N;return $n(st)});return(0,Ve.of)(ee).pipe(F(),(0,ur.b)(le=>{if(!hs(le))return;const Ae=Dn(`Redirecting to "${this.urlSerializer.serialize(le)}"`);throw Ae.url=le,Ae}),(0,Vt.U)(le=>!0===le))}lineralizeSegments(S,I){let V=[],G=I.root;for(;;){if(V=V.concat(G.segments),0===G.numberOfChildren)return(0,Ve.of)(V);if(G.numberOfChildren>1||!G.children[Dt])return Ua(S.redirectTo);G=G.children[Dt]}}applyRedirectCommands(S,I,V){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),S,V)}applyRedirectCreatreUrlTree(S,I,V,G){const ee=this.createSegmentGroup(S,I.root,V,G);return new Ir(ee,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(S,I){const V={};return Jt(S,(G,ee)=>{if("string"==typeof G&&G.startsWith(":")){const Ae=G.substring(1);V[ee]=I[Ae]}else V[ee]=G}),V}createSegmentGroup(S,I,V,G){const ee=this.createSegments(S,I.segments,V,G);let le={};return Jt(I.children,(Ae,st)=>{le[st]=this.createSegmentGroup(S,Ae,V,G)}),new nn(ee,le)}createSegments(S,I,V,G){return I.map(ee=>ee.path.startsWith(":")?this.findPosParam(S,ee,G):this.findOrReturn(ee,V))}findPosParam(S,I,V){const G=V[I.path.substring(1)];if(!G)throw new Error(`Cannot redirect to '${S}'. Cannot find '${I.path}'.`);return G}findOrReturn(S,I){let V=0;for(const G of I){if(G.path===S.path)return I.splice(V),G;V++}return S}}function ct(N){const S={};for(const V of Object.keys(N.children)){const ee=ct(N.children[V]);(ee.segments.length>0||ee.hasChildren())&&(S[V]=ee)}return function(N){if(1===N.numberOfChildren&&N.children[Dt]){const S=N.children[Dt];return new nn(N.segments.concat(S.segments),S.children)}return N}(new nn(N.segments,S))}class aa{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class Nr{constructor(S,I){this.component=S,this.route=I}}function $u(N,S,I){const V=N._root;return Gs(V,S?S._root:null,I,[V.value])}function bs(N,S,I){const V=function(N){if(!N)return null;for(let S=N.parent;S;S=S.parent){const I=S.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(S);return(V?V.module.injector:I).get(N)}function Gs(N,S,I,V,G={canDeactivateChecks:[],canActivateChecks:[]}){const ee=Vr(S);return N.children.forEach(le=>{(function(N,S,I,V,G={canDeactivateChecks:[],canActivateChecks:[]}){const ee=N.value,le=S?S.value:null,Ae=I?I.getContext(N.value.outlet):null;if(le&&ee.routeConfig===le.routeConfig){const st=function(N,S,I){if("function"==typeof I)return I(N,S);switch(I){case"pathParamsChange":return!At(N.url,S.url);case"pathParamsOrQueryParamsChange":return!At(N.url,S.url)||!ve(N.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ge(N,S)||!ve(N.queryParams,S.queryParams);default:return!Ge(N,S)}}(le,ee,ee.routeConfig.runGuardsAndResolvers);st?G.canActivateChecks.push(new aa(V)):(ee.data=le.data,ee._resolvedData=le._resolvedData),Gs(N,S,ee.component?Ae?Ae.children:null:I,V,G),st&&Ae&&Ae.outlet&&Ae.outlet.isActivated&&G.canDeactivateChecks.push(new Nr(Ae.outlet.component,le))}else le&&Ws(S,Ae,G),G.canActivateChecks.push(new aa(V)),Gs(N,null,ee.component?Ae?Ae.children:null:I,V,G)})(le,ee[le.value.outlet],I,V.concat([le.value]),G),delete ee[le.value.outlet]}),Jt(ee,(le,Ae)=>Ws(le,I.getContext(Ae),G)),G}function Ws(N,S,I){const V=Vr(N),G=N.value;Jt(V,(ee,le)=>{Ws(ee,G.component?S?S.children.getContext(le):null:S,I)}),I.canDeactivateChecks.push(new Nr(G.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,G))}class Is{}function qs(N){return new it.y(S=>S.error(N))}class Hu{constructor(S,I,V,G,ee,le){this.rootComponentType=S,this.config=I,this.urlTree=V,this.url=G,this.paramsInheritanceStrategy=ee,this.relativeLinkResolution=le}recognize(){const S=Y(this.urlTree.root,[],[],this.config.filter(le=>void 0===le.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,S,Dt);if(null===I)return null;const V=new Hr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),G=new Er(V,I),ee=new Li(this.url,G);return this.inheritParamsAndData(ee._root),ee}inheritParamsAndData(S){const I=S.value,V=oo(I,this.paramsInheritanceStrategy);I.params=Object.freeze(V.params),I.data=Object.freeze(V.data),S.children.forEach(G=>this.inheritParamsAndData(G))}processSegmentGroup(S,I,V){return 0===I.segments.length&&I.hasChildren()?this.processChildren(S,I):this.processSegment(S,I,I.segments,V)}processChildren(S,I){const V=[];for(const ee of Object.keys(I.children)){const le=I.children[ee],Ae=L(S,ee),st=this.processSegmentGroup(Ae,le,ee);if(null===st)return null;V.push(...st)}const G=ja(V);return G.sort((S,I)=>S.value.outlet===Dt?-1:I.value.outlet===Dt?1:S.value.outlet.localeCompare(I.value.outlet)),G}processSegment(S,I,V,G){for(const ee of S){const le=this.processSegmentAgainstRoute(ee,I,V,G);if(null!==le)return le}return Ui(I,V,G)?[]:null}processSegmentAgainstRoute(S,I,V,G){if(S.redirectTo||!qr(S,I,V,G))return null;let ee,le=[],Ae=[];if("**"===S.path){const Pn=V.length>0?Tt(V).parameters:{};ee=new Hr(V,Pn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,El(S),Ke(S),S.component,S,Gu(I),Ks(I)+V.length,gu(S))}else{const Pn=R(I,S,V);if(!Pn.matched)return null;le=Pn.consumedSegments,Ae=V.slice(Pn.lastChild),ee=new Hr(le,Pn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,El(S),Ke(S),S.component,S,Gu(I),Ks(I)+le.length,gu(S))}const st=(N=S).children?N.children:N.loadChildren?N._loadedConfig.routes:[],{segmentGroup:Ut,slicedSegments:Fn}=Y(I,le,Ae,st.filter(Pn=>void 0===Pn.redirectTo),this.relativeLinkResolution);var N;if(0===Fn.length&&Ut.hasChildren()){const Pn=this.processChildren(st,Ut);return null===Pn?null:[new Er(ee,Pn)]}if(0===st.length&&0===Fn.length)return[new Er(ee,[])];const gt=Ke(S)===G,An=this.processSegment(st,Ut,Fn,gt?Dt:G);return null===An?null:[new Er(ee,An)]}}function Wo(N){const S=N.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function ja(N){const S=[],I=new Set;for(const V of N){if(!Wo(V)){S.push(V);continue}const G=S.find(ee=>V.value.routeConfig===ee.value.routeConfig);void 0!==G?(G.children.push(...V.children),I.add(G)):S.push(V)}for(const V of I){const G=ja(V.children);S.push(new Er(V.value,G))}return S.filter(V=>!I.has(V))}function Gu(N){let S=N;for(;S._sourceSegment;)S=S._sourceSegment;return S}function Ks(N){let S=N,I=S._segmentIndexShift?S._segmentIndexShift:0;for(;S._sourceSegment;)S=S._sourceSegment,I+=S._segmentIndexShift?S._segmentIndexShift:0;return I-1}function El(N){return N.data||{}}function gu(N){return N.resolve||{}}function Ur(N){return(0,on.w)(S=>{const I=N(S);return I?(0,ze.D)(I).pipe((0,Vt.U)(()=>S)):(0,Ve.of)(S)})}class fh extends class{shouldDetach(S){return!1}store(S,I){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,I){return S.routeConfig===I.routeConfig}}{}const da=new U.OlP("ROUTES");class Ii{constructor(S,I,V,G){this.loader=S,this.compiler=I,this.onLoadStartListener=V,this.onLoadEndListener=G}load(S,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const G=this.loadModuleFactory(I.loadChildren).pipe((0,Vt.U)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(I);const le=ee.create(S);return new fi(nt(le.injector.get(da,void 0,U.XFs.Self|U.XFs.Optional)).map(Qe),le)}),St(ee=>{throw I._loader$=void 0,ee}));return I._loader$=new Wt.c(G,()=>new ie.xQ).pipe((0,Qr.x)()),I._loader$}loadModuleFactory(S){return"string"==typeof S?(0,ze.D)(this.loader.load(S)):$n(S()).pipe((0,Fe.zg)(I=>I instanceof U.YKP?(0,Ve.of)(I):(0,ze.D)(this.compiler.compileModuleAsync(I))))}}class yu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new zo,this.attachRef=null}}class zo{constructor(){this.contexts=new Map}onChildOutletCreated(S,I){const V=this.getOrCreateContext(S);V.outlet=I,this.contexts.set(S,V)}onChildOutletDestroyed(S){const I=this.getContext(S);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let I=this.getContext(S);return I||(I=new yu,this.contexts.set(S,I)),I}getContext(S){return this.contexts.get(S)||null}}class Da{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,I){return S}}function ui(N){throw N}function vu(N,S,I){return S.parse("/")}function Ds(N,S){return(0,Ve.of)(null)}const ha={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},No={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Bi=(()=>{class N{constructor(I,V,G,ee,le,Ae,st,Ut){this.rootComponentType=I,this.urlSerializer=V,this.rootContexts=G,this.location=ee,this.config=Ut,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ie.xQ,this.errorHandler=ui,this.malformedUriErrorHandler=vu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ds,afterPreactivation:Ds},this.urlHandlingStrategy=new Da,this.routeReuseStrategy=new fh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=le.get(U.h0i),this.console=le.get(U.c2e);const An=le.get(U.R0b);this.isNgZoneEnabled=An instanceof U.R0b&&U.R0b.isInAngularZone(),this.resetConfig(Ut),this.currentUrlTree=new Ir(new nn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ii(Ae,st,Pn=>this.triggerEvent(new _s(Pn)),Pn=>this.triggerEvent(new nr(Pn))),this.routerState=Xi(this.currentUrlTree,this.rootComponentType),this.transitions=new Se({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const V=this.events;return I.pipe((0,ot.h)(G=>0!==G.id),(0,Vt.U)(G=>Object.assign(Object.assign({},G),{extractedUrl:this.urlHandlingStrategy.extract(G.rawUrl)})),(0,on.w)(G=>{let ee=!1,le=!1;return(0,Ve.of)(G).pipe((0,ur.b)(Ae=>{this.currentNavigation={id:Ae.id,initialUrl:Ae.currentRawUrl,extractedUrl:Ae.extractedUrl,trigger:Ae.source,extras:Ae.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,on.w)(Ae=>{const st=this.browserUrlTree.toString(),Ut=!this.navigated||Ae.extractedUrl.toString()!==st||st!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ut)&&this.urlHandlingStrategy.shouldProcessUrl(Ae.rawUrl))return po(Ae.source)&&(this.browserUrlTree=Ae.extractedUrl),(0,Ve.of)(Ae).pipe((0,on.w)(gt=>{const An=this.transitions.getValue();return V.next(new an(gt.id,this.serializeUrl(gt.extractedUrl),gt.source,gt.restoredState)),An!==this.transitions.getValue()?Ct.E:Promise.resolve(gt)}),function(N,S,I,V){return(0,on.w)(G=>function(N,S,I,V,G){return new pd(N,S,I,V,G).apply()}(N,S,I,G.extractedUrl,V).pipe((0,Vt.U)(ee=>Object.assign(Object.assign({},G),{urlAfterRedirects:ee}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ur.b)(gt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:gt.urlAfterRedirects})}),function(N,S,I,V,G){return(0,Fe.zg)(ee=>function(N,S,I,V,G="emptyOnly",ee="legacy"){try{const le=new Hu(N,S,I,V,G,ee).recognize();return null===le?qs(new Is):(0,Ve.of)(le)}catch(le){return qs(le)}}(N,S,ee.urlAfterRedirects,I(ee.urlAfterRedirects),V,G).pipe((0,Vt.U)(le=>Object.assign(Object.assign({},ee),{targetSnapshot:le}))))}(this.rootComponentType,this.config,gt=>this.serializeUrl(gt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ur.b)(gt=>{"eager"===this.urlUpdateStrategy&&(gt.extras.skipLocationChange||this.setBrowserUrl(gt.urlAfterRedirects,gt),this.browserUrlTree=gt.urlAfterRedirects);const An=new Nn(gt.id,this.serializeUrl(gt.extractedUrl),this.serializeUrl(gt.urlAfterRedirects),gt.targetSnapshot);V.next(An)}));if(Ut&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:An,extractedUrl:Pn,source:Gn,restoredState:Ht,extras:Ts}=Ae,Wn=new an(An,this.serializeUrl(Pn),Gn,Ht);V.next(Wn);const Po=Xi(Pn,this.rootComponentType).snapshot;return(0,Ve.of)(Object.assign(Object.assign({},Ae),{targetSnapshot:Po,urlAfterRedirects:Pn,extras:Object.assign(Object.assign({},Ts),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ae.rawUrl,this.browserUrlTree=Ae.urlAfterRedirects,Ae.resolve(null),Ct.E}),Ur(Ae=>{const{targetSnapshot:st,id:Ut,extractedUrl:Fn,rawUrl:gt,extras:{skipLocationChange:An,replaceUrl:Pn}}=Ae;return this.hooks.beforePreactivation(st,{navigationId:Ut,appliedUrlTree:Fn,rawUrlTree:gt,skipLocationChange:!!An,replaceUrl:!!Pn})}),(0,ur.b)(Ae=>{const st=new Sr(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot);this.triggerEvent(st)}),(0,Vt.U)(Ae=>Object.assign(Object.assign({},Ae),{guards:$u(Ae.targetSnapshot,Ae.currentSnapshot,this.rootContexts)})),function(N,S){return(0,Fe.zg)(I=>{const{targetSnapshot:V,currentSnapshot:G,guards:{canActivateChecks:ee,canDeactivateChecks:le}}=I;return 0===le.length&&0===ee.length?(0,Ve.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function(N,S,I,V){return(0,ze.D)(N).pipe((0,Fe.zg)(G=>function(N,S,I,V,G){const ee=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,Ve.of)(!0);const le=ee.map(Ae=>{const st=bs(Ae,S,G);let Ut;if(function(N){return N&&zi(N.canDeactivate)}(st))Ut=$n(st.canDeactivate(N,S,I,V));else{if(!zi(st))throw new Error("Invalid CanDeactivate guard");Ut=$n(st(N,S,I,V))}return Ut.pipe((0,On.P)())});return(0,Ve.of)(le).pipe(F())}(G.component,G.route,I,S,V)),(0,On.P)(G=>!0!==G,!0))}(le,V,G,N).pipe((0,Fe.zg)(Ae=>Ae&&function(N){return"boolean"==typeof N}(Ae)?function(N,S,I,V){return(0,ze.D)(S).pipe(bt(G=>(0,vt.z)(function(N,S){return null!==N&&S&&S(new Ot(N)),(0,Ve.of)(!0)}(G.route.parent,V),function(N,S){return null!==N&&S&&S(new Ni(N)),(0,Ve.of)(!0)}(G.route,V),function(N,S,I){const V=S[S.length-1],ee=S.slice(0,S.length-1).reverse().map(le=>function(N){const S=N.routeConfig?N.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:N,guards:S}:null}(le)).filter(le=>null!==le).map(le=>We(()=>{const Ae=le.guards.map(st=>{const Ut=bs(st,le.node,I);let Fn;if(function(N){return N&&zi(N.canActivateChild)}(Ut))Fn=$n(Ut.canActivateChild(V,N));else{if(!zi(Ut))throw new Error("Invalid CanActivateChild guard");Fn=$n(Ut(V,N))}return Fn.pipe((0,On.P)())});return(0,Ve.of)(Ae).pipe(F())}));return(0,Ve.of)(ee).pipe(F())}(N,G.path,I),function(N,S,I){const V=S.routeConfig?S.routeConfig.canActivate:null;if(!V||0===V.length)return(0,Ve.of)(!0);const G=V.map(ee=>We(()=>{const le=bs(ee,S,I);let Ae;if(function(N){return N&&zi(N.canActivate)}(le))Ae=$n(le.canActivate(S,N));else{if(!zi(le))throw new Error("Invalid CanActivate guard");Ae=$n(le(S,N))}return Ae.pipe((0,On.P)())}));return(0,Ve.of)(G).pipe(F())}(N,G.route,I))),(0,On.P)(G=>!0!==G,!0))}(V,ee,N,S):(0,Ve.of)(Ae)),(0,Vt.U)(Ae=>Object.assign(Object.assign({},I),{guardsResult:Ae})))})}(this.ngModule.injector,Ae=>this.triggerEvent(Ae)),(0,ur.b)(Ae=>{if(hs(Ae.guardsResult)){const Ut=Dn(`Redirecting to "${this.serializeUrl(Ae.guardsResult)}"`);throw Ut.url=Ae.guardsResult,Ut}const st=new wr(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot,!!Ae.guardsResult);this.triggerEvent(st)}),(0,ot.h)(Ae=>!!Ae.guardsResult||(this.restoreHistory(Ae),this.cancelNavigationTransition(Ae,""),!1)),Ur(Ae=>{if(Ae.guards.canActivateChecks.length)return(0,Ve.of)(Ae).pipe((0,ur.b)(st=>{const Ut=new br(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(Ut)}),(0,on.w)(st=>{let Ut=!1;return(0,Ve.of)(st).pipe(function(N,S){return(0,Fe.zg)(I=>{const{targetSnapshot:V,guards:{canActivateChecks:G}}=I;if(!G.length)return(0,Ve.of)(I);let ee=0;return(0,ze.D)(G).pipe(bt(le=>function(N,S,I,V){return function(N,S,I,V){const G=Object.keys(N);if(0===G.length)return(0,Ve.of)({});const ee={};return(0,ze.D)(G).pipe((0,Fe.zg)(le=>function(N,S,I,V){const G=bs(N,S,V);return $n(G.resolve?G.resolve(S,I):G(S,I))}(N[le],S,I,V).pipe((0,ur.b)(Ae=>{ee[le]=Ae}))),It(1),(0,Fe.zg)(()=>Object.keys(ee).length===G.length?(0,Ve.of)(ee):Ct.E))}(N._resolve,N,S,V).pipe((0,Vt.U)(ee=>(N._resolvedData=ee,N.data=Object.assign(Object.assign({},N.data),oo(N,I).resolve),null)))}(le.route,V,N,S)),(0,ur.b)(()=>ee++),It(1),(0,Fe.zg)(le=>ee===G.length?(0,Ve.of)(I):Ct.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ur.b)({next:()=>Ut=!0,complete:()=>{Ut||(this.restoreHistory(st),this.cancelNavigationTransition(st,"At least one route resolver didn't emit any value."))}}))}),(0,ur.b)(st=>{const Ut=new gr(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(Ut)}))}),Ur(Ae=>{const{targetSnapshot:st,id:Ut,extractedUrl:Fn,rawUrl:gt,extras:{skipLocationChange:An,replaceUrl:Pn}}=Ae;return this.hooks.afterPreactivation(st,{navigationId:Ut,appliedUrlTree:Fn,rawUrlTree:gt,skipLocationChange:!!An,replaceUrl:!!Pn})}),(0,Vt.U)(Ae=>{const st=function(N,S,I){const V=yt(N,S._root,I?I._root:void 0);return new Os(V,S)}(this.routeReuseStrategy,Ae.targetSnapshot,Ae.currentRouterState);return Object.assign(Object.assign({},Ae),{targetRouterState:st})}),(0,ur.b)(Ae=>{this.currentUrlTree=Ae.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ae.urlAfterRedirects,Ae.rawUrl),this.routerState=Ae.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ae.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ae),this.browserUrlTree=Ae.urlAfterRedirects)}),((N,S,I)=>(0,Vt.U)(V=>(new ei(S,V.targetRouterState,V.currentRouterState,I).activate(N),V)))(this.rootContexts,this.routeReuseStrategy,Ae=>this.triggerEvent(Ae)),(0,ur.b)({next(){ee=!0},complete(){ee=!0}}),function(N){return S=>S.lift(new Zt(N))}(()=>{var Ae;if(!ee&&!le){const st=`Navigation ID ${G.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(G),this.cancelNavigationTransition(G,st)):this.cancelNavigationTransition(G,st)}(null===(Ae=this.currentNavigation)||void 0===Ae?void 0:Ae.id)===G.id&&(this.currentNavigation=null)}),St(Ae=>{if(le=!0,function(N){return N&&N[In]}(Ae)){const st=hs(Ae.url);st||(this.navigated=!0,this.restoreHistory(G,!0));const Ut=new qn(G.id,this.serializeUrl(G.extractedUrl),Ae.message);V.next(Ut),st?setTimeout(()=>{const Fn=this.urlHandlingStrategy.merge(Ae.url,this.rawUrlTree),gt={skipLocationChange:G.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||po(G.source)};this.scheduleNavigation(Fn,"imperative",null,gt,{resolve:G.resolve,reject:G.reject,promise:G.promise})},0):G.resolve(!1)}else{this.restoreHistory(G,!0);const st=new cr(G.id,this.serializeUrl(G.extractedUrl),Ae);V.next(st);try{G.resolve(this.errorHandler(Ae))}catch(Ut){G.reject(Ut)}}return Ct.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}getTransition(){const I=this.transitions.value;return I.urlAfterRedirects=this.browserUrlTree,I}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const V=this.extractLocationChangeInfoFromEvent(I);this.shouldScheduleNavigation(this.lastLocationChangeInfo,V)&&setTimeout(()=>{const{source:G,state:ee,urlTree:le}=V,Ae={replaceUrl:!0};if(ee){const st=Object.assign({},ee);delete st.navigationId,delete st.\u0275routerPageId,0!==Object.keys(st).length&&(Ae.state=st)}this.scheduleNavigation(le,G,ee,Ae)},0),this.lastLocationChangeInfo=V}))}extractLocationChangeInfoFromEvent(I){var V;return{source:"popstate"===I.type?"popstate":"hashchange",urlTree:this.parseUrl(I.url),state:(null===(V=I.state)||void 0===V?void 0:V.navigationId)?I.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(I,V){if(!I)return!0;const G=V.urlTree.toString()===I.urlTree.toString();return V.transitionId!==I.transitionId||!G||!("hashchange"===V.source&&"popstate"===I.source||"popstate"===V.source&&"hashchange"===I.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){B(I),this.config=I.map(Qe),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,V={}){const{relativeTo:G,queryParams:ee,fragment:le,queryParamsHandling:Ae,preserveFragment:st}=V,Ut=G||this.routerState.root,Fn=st?this.currentUrlTree.fragment:le;let gt=null;switch(Ae){case"merge":gt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ee);break;case"preserve":gt=this.currentUrlTree.queryParams;break;default:gt=ee||null}return null!==gt&&(gt=this.removeEmptyProps(gt)),function(N,S,I,V,G){if(0===I.length)return er(S.root,S.root,S,V,G);const ee=function(N){if("string"==typeof N[0]&&1===N.length&&"/"===N[0])return new ns(!0,0,N);let S=0,I=!1;const V=N.reduce((G,ee,le)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const Ae={};return Jt(ee.outlets,(st,Ut)=>{Ae[Ut]="string"==typeof st?st.split("/"):st}),[...G,{outlets:Ae}]}if(ee.segmentPath)return[...G,ee.segmentPath]}return"string"!=typeof ee?[...G,ee]:0===le?(ee.split("/").forEach((Ae,st)=>{0==st&&"."===Ae||(0==st&&""===Ae?I=!0:".."===Ae?S++:""!=Ae&&G.push(Ae))}),G):[...G,ee]},[]);return new ns(I,S,V)}(I);if(ee.toRoot())return er(S.root,new nn([],{}),S,V,G);const le=function(N,S,I){if(N.isAbsolute)return new uo(S.root,!0,0);if(-1===I.snapshot._lastPathIndex){const ee=I.snapshot._urlSegment;return new uo(ee,ee===S.root,0)}const V=ai(N.commands[0])?0:1;return function(N,S,I){let V=N,G=S,ee=I;for(;ee>G;){if(ee-=G,V=V.parent,!V)throw new Error("Invalid number of '../'");G=V.segments.length}return new uo(V,!1,G-ee)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+V,N.numberOfDoubleDots)}(ee,S,N),Ae=le.processChildren?ks(le.segmentGroup,le.index,ee.commands):$s(le.segmentGroup,le.index,ee.commands);return er(le.segmentGroup,Ae,S,V,G)}(Ut,this.currentUrlTree,I,gt,null!=Fn?Fn:null)}navigateByUrl(I,V={skipLocationChange:!1}){const G=hs(I)?I:this.parseUrl(I),ee=this.urlHandlingStrategy.merge(G,this.rawUrlTree);return this.scheduleNavigation(ee,"imperative",null,V)}navigate(I,V={skipLocationChange:!1}){return function(N){for(let S=0;S<N.length;S++){const I=N[S];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${S}`)}}(I),this.navigateByUrl(this.createUrlTree(I,V),V)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let V;try{V=this.urlSerializer.parse(I)}catch(G){V=this.malformedUriErrorHandler(G,this.urlSerializer,I)}return V}isActive(I,V){let G;if(G=!0===V?Object.assign({},ha):!1===V?Object.assign({},No):V,hs(I))return Pi(this.currentUrlTree,I,G);const ee=this.parseUrl(I);return Pi(this.currentUrlTree,ee,G)}removeEmptyProps(I){return Object.keys(I).reduce((V,G)=>{const ee=I[G];return null!=ee&&(V[G]=ee),V},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new xt(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,V,G,ee,le){var Ae,st;if(this.disposed)return Promise.resolve(!1);const Ut=this.getTransition(),Fn=po(V)&&Ut&&!po(Ut.source),Pn=(this.lastSuccessfulId===Ut.id||this.currentNavigation?Ut.rawUrl:Ut.urlAfterRedirects).toString()===I.toString();if(Fn&&Pn)return Promise.resolve(!0);let Gn,Ht,Ts;le?(Gn=le.resolve,Ht=le.reject,Ts=le.promise):Ts=new Promise((Pr,Mt)=>{Gn=Pr,Ht=Mt});const Wn=++this.navigationId;let Po;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(G=this.location.getState()),Po=G&&G.\u0275routerPageId?G.\u0275routerPageId:ee.replaceUrl||ee.skipLocationChange?null!==(Ae=this.browserPageId)&&void 0!==Ae?Ae:0:(null!==(st=this.browserPageId)&&void 0!==st?st:0)+1):Po=0,this.setTransition({id:Wn,targetPageId:Po,source:V,restoredState:G,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:ee,resolve:Gn,reject:Ht,promise:Ts,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ts.catch(Pr=>Promise.reject(Pr))}setBrowserUrl(I,V){const G=this.urlSerializer.serialize(I),ee=Object.assign(Object.assign({},V.extras.state),this.generateNgRouterState(V.id,V.targetPageId));this.location.isCurrentPathEqualTo(G)||V.extras.replaceUrl?this.location.replaceState(G,"",ee):this.location.go(G,"",ee)}restoreHistory(I,V=!1){var G,ee;if("computed"===this.canceledNavigationResolution){const le=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(G=this.currentNavigation)||void 0===G?void 0:G.finalUrl)||0===le?this.currentUrlTree===(null===(ee=this.currentNavigation)||void 0===ee?void 0:ee.finalUrl)&&0===le&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(le)}else"replace"===this.canceledNavigationResolution&&(V&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,V){const G=new qn(I.id,this.serializeUrl(I.extractedUrl),V);this.triggerEvent(G),I.resolve(!1)}generateNgRouterState(I,V){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:V}:{navigationId:I}}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(U.DyG),U.LFG(Hn),U.LFG(zo),U.LFG(T.Ye),U.LFG(U.zs3),U.LFG(U.v3s),U.LFG(U.Sil),U.LFG(void 0))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})();function po(N){return"imperative"!==N}let Mo=(()=>{class N{constructor(I,V,G,ee,le){this.parentContexts=I,this.location=V,this.resolver=G,this.changeDetector=le,this.activated=null,this._activatedRoute=null,this.activateEvents=new U.vpe,this.deactivateEvents=new U.vpe,this.name=ee||Dt,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,I}attach(I,V){this.activated=I,this._activatedRoute=V,this.location.insert(I.hostView)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,V){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const le=(V=V||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),Ae=this.parentContexts.getOrCreateContext(this.name).children,st=new Tc(I,Ae,this.location.injector);this.activated=this.location.createComponent(le,this.location.length,st),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return N.\u0275fac=function(I){return new(I||N)(U.Y36(zo),U.Y36(U.s_b),U.Y36(U._Vd),U.$8M("name"),U.Y36(U.sBO))},N.\u0275dir=U.lG2({type:N,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),N})();class Tc{constructor(S,I,V){this.route=S,this.childContexts=I,this.parent=V}get(S,I){return S===sr?this.route:S===zo?this.childContexts:this.parent.get(S,I)}}class Cl{}class Zl{preload(S,I){return(0,Ve.of)(null)}}let Sc=(()=>{class N{constructor(I,V,G,ee,le){this.router=I,this.injector=ee,this.preloadingStrategy=le,this.loader=new Ii(V,G,Ut=>I.triggerEvent(new _s(Ut)),Ut=>I.triggerEvent(new nr(Ut)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ot.h)(I=>I instanceof xt),bt(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(U.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,V){const G=[];for(const ee of V)if(ee.loadChildren&&!ee.canLoad&&ee._loadedConfig){const le=ee._loadedConfig;G.push(this.processRoutes(le.module,le.routes))}else ee.loadChildren&&!ee.canLoad?G.push(this.preloadConfig(I,ee)):ee.children&&G.push(this.processRoutes(I,ee.children));return(0,ze.D)(G).pipe((0,kn.J)(),(0,Vt.U)(ee=>{}))}preloadConfig(I,V){return this.preloadingStrategy.preload(V,()=>(V._loadedConfig?(0,Ve.of)(V._loadedConfig):this.loader.load(I.injector,V)).pipe((0,Fe.zg)(ee=>(V._loadedConfig=ee,this.processRoutes(ee.module,ee.routes)))))}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(Bi),U.LFG(U.v3s),U.LFG(U.Sil),U.LFG(U.zs3),U.LFG(Cl))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})(),qo=(()=>{class N{constructor(I,V,G={}){this.router=I,this.viewportScroller=V,this.options=G,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},G.scrollPositionRestoration=G.scrollPositionRestoration||"disabled",G.anchorScrolling=G.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof an?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof xt&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof ci&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,V){this.router.triggerEvent(new ci(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,V))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(Bi),U.LFG(T.EM),U.LFG(void 0))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})();const fs=new U.OlP("ROUTER_CONFIGURATION"),zu=new U.OlP("ROUTER_FORROOT_GUARD"),ti=[T.Ye,{provide:Hn,useClass:$r},{provide:Bi,useFactory:function(N,S,I,V,G,ee,le,Ae={},st,Ut){const Fn=new Bi(null,N,S,I,V,G,ee,nt(le));return st&&(Fn.urlHandlingStrategy=st),Ut&&(Fn.routeReuseStrategy=Ut),function(N,S){N.errorHandler&&(S.errorHandler=N.errorHandler),N.malformedUriErrorHandler&&(S.malformedUriErrorHandler=N.malformedUriErrorHandler),N.onSameUrlNavigation&&(S.onSameUrlNavigation=N.onSameUrlNavigation),N.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=N.paramsInheritanceStrategy),N.relativeLinkResolution&&(S.relativeLinkResolution=N.relativeLinkResolution),N.urlUpdateStrategy&&(S.urlUpdateStrategy=N.urlUpdateStrategy)}(Ae,Fn),Ae.enableTracing&&Fn.events.subscribe(gt=>{var An,Pn;null===(An=console.group)||void 0===An||An.call(console,`Router Event: ${gt.constructor.name}`),console.log(gt.toString()),console.log(gt),null===(Pn=console.groupEnd)||void 0===Pn||Pn.call(console)}),Fn},deps:[Hn,zo,T.Ye,U.zs3,U.v3s,U.Sil,da,fs,[class{},new U.FiY],[class{},new U.FiY]]},zo,{provide:sr,useFactory:function(N){return N.routerState.root},deps:[Bi]},{provide:U.v3s,useClass:U.EAV},Sc,Zl,class{preload(S,I){return I().pipe(St(()=>(0,Ve.of)(null)))}},{provide:fs,useValue:{enableTracing:!1}}];function Ko(){return new U.PXZ("Router",Bi)}let pa=(()=>{class N{constructor(I,V){}static forRoot(I,V){return{ngModule:N,providers:[ti,Br(I),{provide:zu,useFactory:ft,deps:[[Bi,new U.FiY,new U.tp0]]},{provide:fs,useValue:V||{}},{provide:T.S$,useFactory:gd,deps:[T.lw,[new U.tBr(T.mr),new U.FiY],fs]},{provide:qo,useFactory:Eu,deps:[Bi,T.EM,fs]},{provide:Cl,useExisting:V&&V.preloadingStrategy?V.preloadingStrategy:Zl},{provide:U.PXZ,multi:!0,useFactory:Ko},[_n,{provide:U.ip1,multi:!0,useFactory:Yl,deps:[_n]},{provide:Je,useFactory:Lt,deps:[_n]},{provide:U.tb,multi:!0,useExisting:Je}]]}}static forChild(I){return{ngModule:N,providers:[Br(I)]}}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(zu,8),U.LFG(Bi,8))},N.\u0275mod=U.oAB({type:N}),N.\u0275inj=U.cJS({}),N})();function Eu(N,S,I){return I.scrollOffset&&S.setOffset(I.scrollOffset),new qo(N,S,I)}function gd(N,S,I={}){return I.useHash?new T.Do(N,S):new T.b0(N,S)}function ft(N){return"guarded"}function Br(N){return[{provide:U.deG,multi:!0,useValue:N},{provide:da,multi:!0,useValue:N}]}let _n=(()=>{class N{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ie.xQ}appInitializer(){return this.injector.get(T.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let V=null;const G=new Promise(Ae=>V=Ae),ee=this.injector.get(Bi),le=this.injector.get(fs);return"disabled"===le.initialNavigation?(ee.setUpLocationChangeListener(),V(!0)):"enabled"===le.initialNavigation||"enabledBlocking"===le.initialNavigation?(ee.hooks.afterPreactivation=()=>this.initNavigation?(0,Ve.of)(null):(this.initNavigation=!0,V(!0),this.resultOfPreactivationDone),ee.initialNavigation()):V(!0),G})}bootstrapListener(I){const V=this.injector.get(fs),G=this.injector.get(Sc),ee=this.injector.get(qo),le=this.injector.get(Bi),Ae=this.injector.get(U.z2F);I===Ae.components[0]&&(("enabledNonBlocking"===V.initialNavigation||void 0===V.initialNavigation)&&le.initialNavigation(),G.setUpPreloading(),ee.init(),le.resetRootComponentType(Ae.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return N.\u0275fac=function(I){return new(I||N)(U.LFG(U.zs3))},N.\u0275prov=U.Yz7({token:N,factory:N.\u0275fac}),N})();function Yl(N){return N.appInitializer.bind(N)}function Lt(N){return N.bootstrapListener.bind(N)}const Je=new U.OlP("Router Initializer")},3854:(kt,$e,z)=>{"use strict";z.d($e,{BH:()=>Be,LL:()=>It,ZR:()=>Yt,gQ:()=>tt,zI:()=>bt,hu:()=>U,g5:()=>ie,US:()=>de,tV:()=>we,h$:()=>Pe,L:()=>he,$s:()=>Yn,r3:()=>Qt,Sg:()=>Ye,ne:()=>an,p$:()=>se,vZ:()=>yr,ZB:()=>ce,gK:()=>wr,pd:()=>kn,m9:()=>Dn,z$:()=>it,GJ:()=>Zt,jU:()=>We,ru:()=>Ve,d:()=>vt,xb:()=>on,w1:()=>Wt,hl:()=>lt,uI:()=>ze,UG:()=>Ct,Yr:()=>St,b$:()=>Ce,G6:()=>hn,Mn:()=>en,w9:()=>ln,cI:()=>Lr,UI:()=>Bn,xO:()=>ur,zd:()=>Qr,DV:()=>Vt,ug:()=>Ot,dS:()=>nr,Pz:()=>Yr,Dv:()=>Sr,Wj:()=>gr,lb:()=>_s,eu:()=>Fe});const U=function(_e,De){if(!_e)throw ie(De)},ie=function(_e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+_e)},Ne=function(_e){const De=[];let ge=0;for(let ve=0;ve<_e.length;ve++){let Te=_e.charCodeAt(ve);Te<128?De[ge++]=Te:Te<2048?(De[ge++]=Te>>6|192,De[ge++]=63&Te|128):55296==(64512&Te)&&ve+1<_e.length&&56320==(64512&_e.charCodeAt(ve+1))?(Te=65536+((1023&Te)<<10)+(1023&_e.charCodeAt(++ve)),De[ge++]=Te>>18|240,De[ge++]=Te>>12&63|128,De[ge++]=Te>>6&63|128,De[ge++]=63&Te|128):(De[ge++]=Te>>12|224,De[ge++]=Te>>6&63|128,De[ge++]=63&Te|128)}return De},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(_e,De){if(!Array.isArray(_e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=De?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Te=0;Te<_e.length;Te+=3){const nt=_e[Te],Tt=Te+1<_e.length,sn=Tt?_e[Te+1]:0,Jt=Te+2<_e.length,$n=Jt?_e[Te+2]:0;let Jr=(15&sn)<<2|$n>>6,Pi=63&$n;Jt||(Pi=64,Tt||(Jr=64)),ve.push(ge[nt>>2],ge[(3&nt)<<4|sn>>4],ge[Jr],ge[Pi])}return ve.join("")},encodeString(_e,De){return this.HAS_NATIVE_SUPPORT&&!De?btoa(_e):this.encodeByteArray(Ne(_e),De)},decodeString(_e,De){return this.HAS_NATIVE_SUPPORT&&!De?atob(_e):function(_e){const De=[];let ge=0,ve=0;for(;ge<_e.length;){const Te=_e[ge++];if(Te<128)De[ve++]=String.fromCharCode(Te);else if(Te>191&&Te<224){const nt=_e[ge++];De[ve++]=String.fromCharCode((31&Te)<<6|63&nt)}else if(Te>239&&Te<365){const Jt=((7&Te)<<18|(63&_e[ge++])<<12|(63&_e[ge++])<<6|63&_e[ge++])-65536;De[ve++]=String.fromCharCode(55296+(Jt>>10)),De[ve++]=String.fromCharCode(56320+(1023&Jt))}else{const nt=_e[ge++],Tt=_e[ge++];De[ve++]=String.fromCharCode((15&Te)<<12|(63&nt)<<6|63&Tt)}}return De.join("")}(this.decodeStringToByteArray(_e,De))},decodeStringToByteArray(_e,De){this.init_();const ge=De?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Te=0;Te<_e.length;){const nt=ge[_e.charAt(Te++)],sn=Te<_e.length?ge[_e.charAt(Te)]:0;++Te;const $n=Te<_e.length?ge[_e.charAt(Te)]:64;++Te;const Cn=Te<_e.length?ge[_e.charAt(Te)]:64;if(++Te,null==nt||null==sn||null==$n||null==Cn)throw Error();ve.push(nt<<2|sn>>4),64!==$n&&(ve.push(sn<<4&240|$n>>2),64!==Cn&&ve.push($n<<6&192|Cn))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let _e=0;_e<this.ENCODED_VALS.length;_e++)this.byteToCharMap_[_e]=this.ENCODED_VALS.charAt(_e),this.charToByteMap_[this.byteToCharMap_[_e]]=_e,this.byteToCharMapWebSafe_[_e]=this.ENCODED_VALS_WEBSAFE.charAt(_e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[_e]]=_e,_e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(_e)]=_e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(_e)]=_e)}}},Pe=function(_e){const De=Ne(_e);return de.encodeByteArray(De,!0)},he=function(_e){return Pe(_e).replace(/\./g,"")},we=function(_e){try{return de.decodeString(_e,!0)}catch(De){console.error("base64Decode failed: ",De)}return null};function se(_e){return ce(void 0,_e)}function ce(_e,De){if(!(De instanceof Object))return De;switch(De.constructor){case Date:return new Date(De.getTime());case Object:void 0===_e&&(_e={});break;case Array:_e=[];break;default:return De}for(const ge in De)!De.hasOwnProperty(ge)||!pe(ge)||(_e[ge]=ce(_e[ge],De[ge]));return _e}function pe(_e){return"__proto__"!==_e}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((De,ge)=>{this.resolve=De,this.reject=ge})}wrapCallback(De){return(ge,ve)=>{ge?this.reject(ge):this.resolve(ve),"function"==typeof De&&(this.promise.catch(()=>{}),1===De.length?De(ge):De(ge,ve))}}}function Ye(_e,De){if(_e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=De||"demo-project",Te=_e.iat||0,nt=_e.sub||_e.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Tt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Te,exp:Te+3600,auth_time:Te,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},_e);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Tt)),""].join(".")}function it(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(_e){return!1}}function We(){return"object"==typeof self&&self.self===self}function Ve(){const _e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof _e&&void 0!==_e.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vt(){return it().indexOf("Electron/")>=0}function Wt(){const _e=it();return _e.indexOf("MSIE ")>=0||_e.indexOf("Trident/")>=0}function en(){return it().indexOf("MSAppHost/")>=0}function St(){return!1}function hn(){return!Ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lt(){return"object"==typeof indexedDB}function Fe(){return new Promise((_e,De)=>{try{let ge=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Te=self.indexedDB.open(ve);Te.onsuccess=()=>{Te.result.close(),ge||self.indexedDB.deleteDatabase(ve),_e(!0)},Te.onupgradeneeded=()=>{ge=!1},Te.onerror=()=>{var nt;De((null===(nt=Te.error)||void 0===nt?void 0:nt.message)||"")}}catch(ge){De(ge)}})}function bt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Yt extends Error{constructor(De,ge,ve){super(ge),this.code=De,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(De,ge,ve){this.service=De,this.serviceName=ge,this.errors=ve}create(De,...ge){const ve=ge[0]||{},Te=`${this.service}/${De}`,nt=this.errors[De],Tt=nt?function(_e,De){return _e.replace(Fr,(ge,ve)=>{const Te=De[ve];return null!=Te?String(Te):`<${ve}?>`})}(nt,ve):"Error";return new Yt(Te,`${this.serviceName}: ${Tt} (${Te}).`,ve)}}const Fr=/\{\$([^}]+)}/g;function Lr(_e){return JSON.parse(_e)}function Yr(_e){return JSON.stringify(_e)}const pn=function(_e){let De={},ge={},ve={},Te="";try{const nt=_e.split(".");De=Lr(we(nt[0])||""),ge=Lr(we(nt[1])||""),Te=nt[2],ve=ge.d||{},delete ge.d}catch(nt){}return{header:De,claims:ge,data:ve,signature:Te}},ln=function(_e){const ge=pn(_e).claims;return!!ge&&"object"==typeof ge&&ge.hasOwnProperty("iat")},Zt=function(_e){const De=pn(_e).claims;return"object"==typeof De&&!0===De.admin};function Qt(_e,De){return Object.prototype.hasOwnProperty.call(_e,De)}function Vt(_e,De){if(Object.prototype.hasOwnProperty.call(_e,De))return _e[De]}function on(_e){for(const De in _e)if(Object.prototype.hasOwnProperty.call(_e,De))return!1;return!0}function Bn(_e,De,ge){const ve={};for(const Te in _e)Object.prototype.hasOwnProperty.call(_e,Te)&&(ve[Te]=De.call(ge,_e[Te],Te,_e));return ve}function yr(_e,De){if(_e===De)return!0;const ge=Object.keys(_e),ve=Object.keys(De);for(const Te of ge){if(!ve.includes(Te))return!1;const nt=_e[Te],Tt=De[Te];if(mn(nt)&&mn(Tt)){if(!yr(nt,Tt))return!1}else if(nt!==Tt)return!1}for(const Te of ve)if(!ge.includes(Te))return!1;return!0}function mn(_e){return null!==_e&&"object"==typeof _e}function ur(_e){const De=[];for(const[ge,ve]of Object.entries(_e))Array.isArray(ve)?ve.forEach(Te=>{De.push(encodeURIComponent(ge)+"="+encodeURIComponent(Te))}):De.push(encodeURIComponent(ge)+"="+encodeURIComponent(ve));return De.length?"&"+De.join("&"):""}function Qr(_e){const De={};return _e.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Te,nt]=ve.split("=");De[decodeURIComponent(Te)]=decodeURIComponent(nt)}}),De}function kn(_e){const De=_e.indexOf("?");if(!De)return"";const ge=_e.indexOf("#",De);return _e.substring(De,ge>0?ge:void 0)}class tt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let De=1;De<this.blockSize;++De)this.pad_[De]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(De,ge){ge||(ge=0);const ve=this.W_;if("string"==typeof De)for(let Cn=0;Cn<16;Cn++)ve[Cn]=De.charCodeAt(ge)<<24|De.charCodeAt(ge+1)<<16|De.charCodeAt(ge+2)<<8|De.charCodeAt(ge+3),ge+=4;else for(let Cn=0;Cn<16;Cn++)ve[Cn]=De[ge]<<24|De[ge+1]<<16|De[ge+2]<<8|De[ge+3],ge+=4;for(let Cn=16;Cn<80;Cn++){const Jr=ve[Cn-3]^ve[Cn-8]^ve[Cn-14]^ve[Cn-16];ve[Cn]=4294967295&(Jr<<1|Jr>>>31)}let $n,Mi,Te=this.chain_[0],nt=this.chain_[1],Tt=this.chain_[2],sn=this.chain_[3],Jt=this.chain_[4];for(let Cn=0;Cn<80;Cn++){Cn<40?Cn<20?($n=sn^nt&(Tt^sn),Mi=1518500249):($n=nt^Tt^sn,Mi=1859775393):Cn<60?($n=nt&Tt|sn&(nt|Tt),Mi=2400959708):($n=nt^Tt^sn,Mi=3395469782);const Jr=(Te<<5|Te>>>27)+$n+Jt+Mi+ve[Cn]&4294967295;Jt=sn,sn=Tt,Tt=4294967295&(nt<<30|nt>>>2),nt=Te,Te=Jr}this.chain_[0]=this.chain_[0]+Te&4294967295,this.chain_[1]=this.chain_[1]+nt&4294967295,this.chain_[2]=this.chain_[2]+Tt&4294967295,this.chain_[3]=this.chain_[3]+sn&4294967295,this.chain_[4]=this.chain_[4]+Jt&4294967295}update(De,ge){if(null==De)return;void 0===ge&&(ge=De.length);const ve=ge-this.blockSize;let Te=0;const nt=this.buf_;let Tt=this.inbuf_;for(;Te<ge;){if(0===Tt)for(;Te<=ve;)this.compress_(De,Te),Te+=this.blockSize;if("string"==typeof De){for(;Te<ge;)if(nt[Tt]=De.charCodeAt(Te),++Tt,++Te,Tt===this.blockSize){this.compress_(nt),Tt=0;break}}else for(;Te<ge;)if(nt[Tt]=De[Te],++Tt,++Te,Tt===this.blockSize){this.compress_(nt),Tt=0;break}}this.inbuf_=Tt,this.total_+=ge}digest(){const De=[];let ge=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Te=this.blockSize-1;Te>=56;Te--)this.buf_[Te]=255&ge,ge/=256;this.compress_(this.buf_);let ve=0;for(let Te=0;Te<5;Te++)for(let nt=24;nt>=0;nt-=8)De[ve]=this.chain_[Te]>>nt&255,++ve;return De}}function an(_e,De){const ge=new xt(_e,De);return ge.subscribe.bind(ge)}class xt{constructor(De,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{De(this)}).catch(ve=>{this.error(ve)})}next(De){this.forEachObserver(ge=>{ge.next(De)})}error(De){this.forEachObserver(ge=>{ge.error(De)}),this.close(De)}complete(){this.forEachObserver(De=>{De.complete()}),this.close()}subscribe(De,ge,ve){let Te;if(void 0===De&&void 0===ge&&void 0===ve)throw new Error("Missing Observer.");Te=function(_e,De){if("object"!=typeof _e||null===_e)return!1;for(const ge of["next","error","complete"])if(ge in _e&&"function"==typeof _e[ge])return!0;return!1}(De)?De:{next:De,error:ge,complete:ve},void 0===Te.next&&(Te.next=Nn),void 0===Te.error&&(Te.error=Nn),void 0===Te.complete&&(Te.complete=Nn);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Te.error(this.finalError):Te.complete()}catch(Tt){}}),this.observers.push(Te),nt}unsubscribeOne(De){void 0===this.observers||void 0===this.observers[De]||(delete this.observers[De],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(De){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,De)}sendOne(De,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[De])try{ge(this.observers[De])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(De){this.finalized||(this.finalized=!0,void 0!==De&&(this.finalError=De),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}const Sr=function(_e,De,ge,ve){let Te;if(ve<De?Te="at least "+De:ve>ge&&(Te=0===ge?"none":"no more than "+ge),Te)throw new Error(_e+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+Te+".")};function wr(_e,De){return`${_e} failed: ${De} argument `}function gr(_e,De,ge,ve){if((!ve||ge)&&"function"!=typeof ge)throw new Error(wr(_e,De)+"must be a valid function.")}function _s(_e,De,ge,ve){if((!ve||ge)&&("object"!=typeof ge||null===ge))throw new Error(wr(_e,De)+"must be a valid context object.")}const nr=function(_e){const De=[];let ge=0;for(let ve=0;ve<_e.length;ve++){let Te=_e.charCodeAt(ve);if(Te>=55296&&Te<=56319){const nt=Te-55296;ve++,U(ve<_e.length,"Surrogate pair missing trail surrogate."),Te=65536+(nt<<10)+(_e.charCodeAt(ve)-56320)}Te<128?De[ge++]=Te:Te<2048?(De[ge++]=Te>>6|192,De[ge++]=63&Te|128):Te<65536?(De[ge++]=Te>>12|224,De[ge++]=Te>>6&63|128,De[ge++]=63&Te|128):(De[ge++]=Te>>18|240,De[ge++]=Te>>12&63|128,De[ge++]=Te>>6&63|128,De[ge++]=63&Te|128)}return De},Ot=function(_e){let De=0;for(let ge=0;ge<_e.length;ge++){const ve=_e.charCodeAt(ge);ve<128?De++:ve<2048?De+=2:ve>=55296&&ve<=56319?(De+=4,ge++):De+=3}return De};function Yn(_e,De=1e3,ge=2){const ve=De*Math.pow(ge,_e),Te=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Te)}function Dn(_e){return _e&&_e._delegate?_e._delegate:_e}},2329:(kt,$e,z)=>{"use strict";z.d($e,{Mq:()=>T.getApp,C6:()=>T.getApps});var T=z(8026);(0,T.registerVersion)("firebase","9.9.1","app")},7841:(kt,$e,z)=>{"use strict";z.d($e,{Z:()=>T.Z});var T=z(3394);T.Z.registerVersion("firebase","9.9.1","app-compat")},1530:(kt,$e,z)=>{"use strict";z.r($e);var T=z(8239),U=z(3394),ie=z(3854),Ne=z(8026);function he(E,g){var m={};for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&g.indexOf(b)<0&&(m[b]=E[b]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(b=Object.getOwnPropertySymbols(E);j<b.length;j++)g.indexOf(b[j])<0&&Object.prototype.propertyIsEnumerable.call(E,b[j])&&(m[b[j]]=E[b[j]])}return m}var It=z(5422),fr=z(3910);const Zt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Vt=new ie.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bn=new It.Yd("@firebase/auth");function yr(E,...g){Bn.logLevel<=It.in.ERROR&&Bn.error(`Auth (${Ne.SDK_VERSION}): ${E}`,...g)}function mn(E,...g){throw kn(E,...g)}function On(E,...g){return kn(E,...g)}function ur(E,g,m){const b=Object.assign(Object.assign({},Qt()),{[g]:m});return new ie.LL("auth","Firebase",b).create(g,{appName:E.name})}function Qr(E,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&mn(E,"argument-error"),ur(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kn(E,...g){if("string"!=typeof E){const m=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(m,...b)}return Vt.create(E,...g)}function tt(E,g,...m){if(!E)throw kn(g,...m)}function an(E){const g="INTERNAL ASSERTION FAILED: "+E;throw yr(g),new Error(g)}function xt(E,g){E||an(g)}const qn=new Map;function cr(E){xt(E instanceof Function,"Expected a class definition");let g=qn.get(E);return g?(xt(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,qn.set(E,g),g)}function wr(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function br(){return"http:"===gr()||"https:"===gr()}function gr(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Ot{constructor(g,m){this.shortDelay=g,this.longDelay=m,xt(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,ie.uI)()||(0,ie.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(br()||(0,ie.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function tn(E,g){xt(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Ni{static initialize(g,m,b){this.fetchImpl=g,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void an("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void an("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void an("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ys={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ci=new Ot(3e4,6e4);function Dt(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function Yn(E,g,m,b){return zr.apply(this,arguments)}function zr(){return(zr=(0,T.Z)(function*(E,g,m,b,j={}){return In(E,j,(0,T.Z)(function*(){let Z={},ye={};b&&("GET"===g?ye=b:Z={body:JSON.stringify(b)});const Ue=(0,ie.xO)(Object.assign({key:E.config.apiKey},ye)).slice(1),wt=yield E._getAdditionalHeaders();return wt["Content-Type"]="application/json",E.languageCode&&(wt["X-Firebase-Locale"]=E.languageCode),Ni.fetch()(ge(E,E.config.apiHost,m,Ue),Object.assign({method:g,headers:wt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function In(E,g,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,T.Z)(function*(E,g,m){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},ys),g);try{const j=new ve(E),Z=yield Promise.race([m(),j.promise]);j.clearNetworkTimeout();const ye=yield Z.json();if("needConfirmation"in ye)throw Te(E,"account-exists-with-different-credential",ye);if(Z.ok&&!("errorMessage"in ye))return ye;{const Ue=Z.ok?ye.errorMessage:ye.error.message,[wt,mt]=Ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wt)throw Te(E,"credential-already-in-use",ye);if("EMAIL_EXISTS"===wt)throw Te(E,"email-already-in-use",ye);if("USER_DISABLED"===wt)throw Te(E,"user-disabled",ye);const zt=b[wt]||wt.toLowerCase().replace(/[_\s]+/g,"-");if(mt)throw ur(E,zt,mt);mn(E,zt)}}catch(j){if(j instanceof ie.ZR)throw j;mn(E,"network-request-failed")}})).apply(this,arguments)}function _e(E,g,m,b){return De.apply(this,arguments)}function De(){return(De=(0,T.Z)(function*(E,g,m,b,j={}){const Z=yield Yn(E,g,m,b,j);return"mfaPendingCredential"in Z&&mn(E,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function ge(E,g,m,b){const j=`${g}${m}?${b}`;return E.config.emulator?tn(E.config,j):`${E.config.apiScheme}://${j}`}class ve{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(On(this.auth,"network-request-failed")),ci.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Te(E,g,m){const b={appName:E.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const j=On(E,g,b);return j.customData._tokenResponse=m,j}function Tt(){return(Tt=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function sn(E,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function $n(E,g){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Cn(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Ps(){return(Ps=(0,T.Z)(function*(E,g=!1){const m=(0,ie.m9)(E),b=yield m.getIdToken(g),j=ls(b);tt(j&&j.exp&&j.auth_time&&j.iat,m.auth,"internal-error");const Z="object"==typeof j.firebase?j.firebase:void 0,ye=null==Z?void 0:Z.sign_in_provider;return{claims:j,token:b,authTime:Cn(Ji(j.auth_time)),issuedAtTime:Cn(Ji(j.iat)),expirationTime:Cn(Ji(j.exp)),signInProvider:ye||null,signInSecondFactor:(null==Z?void 0:Z.sign_in_second_factor)||null}})).apply(this,arguments)}function Ji(E){return 1e3*Number(E)}function ls(E){var g;const[m,b,j]=E.split(".");if(void 0===m||void 0===b||void 0===j)return yr("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,ie.tV)(b);return Z?JSON.parse(Z):(yr("Failed to decode base64 JWT payload"),null)}catch(Z){return yr("Caught error parsing JWT payload as JSON",null===(g=Z)||void 0===g?void 0:g.toString()),null}}function rr(E,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,T.Z)(function*(E,g,m=!1){if(m)return g;try{return yield g}catch(b){throw b instanceof ie.ZR&&Ir(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function Ir({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class nn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const j=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,j)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,T.Z)(function*(){yield m.iteration()}),b)}iteration(){var g=this;return(0,T.Z)(function*(){var m;try{yield g.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(m=b)||void 0===m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class di{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cn(this.lastLoginAt),this.creationTime=Cn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ar(E){return At.apply(this,arguments)}function At(){return(At=(0,T.Z)(function*(E){var g;const m=E.auth,b=yield E.getIdToken(),j=yield rr(E,$n(m,{idToken:b}));tt(null==j?void 0:j.users.length,m,"internal-error");const Z=j.users[0];E._notifyReloadListener(Z);const ye=(null===(g=Z.providerUserInfo)||void 0===g?void 0:g.length)?vr(Z.providerUserInfo):[],Ue=$r(E.providerData,ye),zt=!!E.isAnonymous&&!(E.email&&Z.passwordHash||(null==Ue?void 0:Ue.length)),Xt={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Ue,metadata:new di(Z.createdAt,Z.lastLoginAt),isAnonymous:zt};Object.assign(E,Xt)})).apply(this,arguments)}function Hn(){return(Hn=(0,T.Z)(function*(E){const g=(0,ie.m9)(E);yield Ar(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function $r(E,g){return[...E.filter(b=>!g.some(j=>j.providerId===b.providerId)),...g]}function vr(E){return E.map(g=>{var{providerId:m}=g,b=he(g,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function xr(){return(xr=(0,T.Z)(function*(E,g){const m=yield In(E,{},(0,T.Z)(function*(){const b=(0,ie.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:j,apiKey:Z}=E.config,ye=ge(E,j,"/v1/token",`key=${Z}`),Ue=yield E._getAdditionalHeaders();return Ue["Content-Type"]="application/x-www-form-urlencoded",Ni.fetch()(ye,{method:"POST",headers:Ue,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class ir{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){tt(g.idToken,"internal-error"),tt(void 0!==g.idToken,"internal-error"),tt(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(E){const g=ls(E);return tt(g,"internal-error"),tt(void 0!==g.exp,"internal-error"),tt(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var b=this;return(0,T.Z)(function*(){return tt(!b.accessToken||b.refreshToken,g,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var b=this;return(0,T.Z)(function*(){const{accessToken:j,refreshToken:Z,expiresIn:ye}=yield function(E,g){return xr.apply(this,arguments)}(g,m);b.updateTokensAndExpiration(j,Z,Number(ye))})()}updateTokensAndExpiration(g,m,b){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,m){const{refreshToken:b,accessToken:j,expirationTime:Z}=m,ye=new ir;return b&&(tt("string"==typeof b,"internal-error",{appName:g}),ye.refreshToken=b),j&&(tt("string"==typeof j,"internal-error",{appName:g}),ye.accessToken=j),Z&&(tt("number"==typeof Z,"internal-error",{appName:g}),ye.expirationTime=Z),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ir,this.toJSON())}_performRefresh(){return an("not implemented")}}function Xr(E,g){tt("string"==typeof E||void 0===E,"internal-error",{appName:g})}class Oi{constructor(g){var{uid:m,auth:b,stsTokenManager:j}=g,Z=he(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=j,this.accessToken=j.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new di(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,T.Z)(function*(){const b=yield rr(m,m.stsTokenManager.getToken(m.auth,g));return tt(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(g){return function(E){return Ps.apply(this,arguments)}(this,g)}reload(){return function(E){return Hn.apply(this,arguments)}(this)}_assign(g){this!==g&&(tt(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Oi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var b=this;return(0,T.Z)(function*(){let j=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),j=!0),m&&(yield Ar(b)),yield b.auth._persistUserIfCurrent(b),j&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,T.Z)(function*(){const m=yield g.getIdToken();return yield rr(g,function(E,g){return Tt.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var b,j,Z,ye,Ue,wt,mt,zt;const Xt=null!==(b=m.displayName)&&void 0!==b?b:void 0,_r=null!==(j=m.email)&&void 0!==j?j:void 0,Bs=null!==(Z=m.phoneNumber)&&void 0!==Z?Z:void 0,Mu=null!==(ye=m.photoURL)&&void 0!==ye?ye:void 0,Ah=null!==(Ue=m.tenantId)&&void 0!==Ue?Ue:void 0,xd=null!==(wt=m._redirectEventId)&&void 0!==wt?wt:void 0,Pf=null!==(mt=m.createdAt)&&void 0!==mt?mt:void 0,oc=null!==(zt=m.lastLoginAt)&&void 0!==zt?zt:void 0,{uid:Rd,emailVerified:Nd,isAnonymous:Hc,providerData:Of,stsTokenManager:ac}=m;tt(Rd&&ac,g,"internal-error");const Ul=ir.fromJSON(this.name,ac);tt("string"==typeof Rd,g,"internal-error"),Xr(Xt,g.name),Xr(_r,g.name),tt("boolean"==typeof Nd,g,"internal-error"),tt("boolean"==typeof Hc,g,"internal-error"),Xr(Bs,g.name),Xr(Mu,g.name),Xr(Ah,g.name),Xr(xd,g.name),Xr(Pf,g.name),Xr(oc,g.name);const tu=new Oi({uid:Rd,auth:g,email:_r,emailVerified:Nd,displayName:Xt,isAnonymous:Hc,photoURL:Mu,phoneNumber:Bs,tenantId:Ah,stsTokenManager:Ul,createdAt:Pf,lastLoginAt:oc});return Of&&Array.isArray(Of)&&(tu.providerData=Of.map(Gc=>Object.assign({},Gc))),xd&&(tu._redirectEventId=xd),tu}static _fromIdTokenResponse(g,m,b=!1){return(0,T.Z)(function*(){const j=new ir;j.updateFromServerResponse(m);const Z=new Oi({uid:m.localId,auth:g,stsTokenManager:j,isAnonymous:b});return yield Ar(Z),Z})()}}const Rr=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(m,b){var j=this;return(0,T.Z)(function*(){j.storage[m]=b})()}_get(m){var b=this;return(0,T.Z)(function*(){const j=b.storage[m];return void 0===j?null:j})()}_remove(m){var b=this;return(0,T.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return E.type="NONE",E})();function vi(E,g,m){return`firebase:${E}:${g}:${m}`}class Mr{constructor(g,m,b){this.persistence=g,this.auth=m,this.userKey=b;const{config:j,name:Z}=this.auth;this.fullUserKey=vi(this.userKey,j.apiKey,Z),this.fullPersistenceKey=vi("persistence",j.apiKey,Z),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,T.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?Oi._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,T.Z)(function*(){if(m.persistence===g)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,b="authUser"){return(0,T.Z)(function*(){if(!m.length)return new Mr(cr(Rr),g,b);const j=(yield Promise.all(m.map(function(){var mt=(0,T.Z)(function*(zt){if(yield zt._isAvailable())return zt});return function(zt){return mt.apply(this,arguments)}}()))).filter(mt=>mt);let Z=j[0]||cr(Rr);const ye=vi(b,g.config.apiKey,g.name);let Ue=null;for(const mt of m)try{const zt=yield mt._get(ye);if(zt){const Xt=Oi._fromJSON(g,zt);mt!==Z&&(Ue=Xt),Z=mt;break}}catch(zt){}const wt=j.filter(mt=>mt._shouldAllowMigration);return Z._shouldAllowMigration&&wt.length?(Z=wt[0],Ue&&(yield Z._set(ye,Ue.toJSON())),yield Promise.all(m.map(function(){var mt=(0,T.Z)(function*(zt){if(zt!==Z)try{yield zt._remove(ye)}catch(Xt){}});return function(zt){return mt.apply(this,arguments)}}())),new Mr(Z,g,b)):new Mr(Z,g,b)})()}}function vs(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(hi(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ki(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Bo(g))return"Blackberry";if(io(g))return"Webos";if(Es(g))return"Safari";if((g.includes("chrome/")||Fi(g))&&!g.includes("edge/"))return"Chrome";if(Mn(g))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function ki(E=(0,ie.z$)()){return/firefox\//i.test(E)}function Es(E=(0,ie.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Fi(E=(0,ie.z$)()){return/crios\//i.test(E)}function hi(E=(0,ie.z$)()){return/iemobile/i.test(E)}function Mn(E=(0,ie.z$)()){return/android/i.test(E)}function Bo(E=(0,ie.z$)()){return/blackberry/i.test(E)}function io(E=(0,ie.z$)()){return/webos/i.test(E)}function Ei(E=(0,ie.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Er(E=(0,ie.z$)()){return Ei(E)||Mn(E)||io(E)||Bo(E)||/windows phone/i.test(E)||hi(E)}function Os(E,g=[]){let m;switch(E){case"Browser":m=vs((0,ie.z$)());break;case"Worker":m=`${vs((0,ie.z$)())}-${E}`;break;default:m=E}const b=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${Ne.SDK_VERSION}/${b}`}class Xi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const b=Z=>new Promise((ye,Ue)=>{try{ye(g(Z))}catch(wt){Ue(wt)}});b.onAbort=m,this.queue.push(b);const j=this.queue.length-1;return()=>{this.queue[j]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,T.Z)(function*(){var b;if(m.auth.currentUser===g)return;const j=[];try{for(const Z of m.queue)yield Z(g),Z.onAbort&&j.push(Z.onAbort)}catch(Z){j.reverse();for(const ye of j)try{ye()}catch(Ue){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=Z)||void 0===b?void 0:b.message})}})()}}class oi{constructor(g,m,b){this.app=g,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oo(this),this.idTokenSubscription=new oo(this),this.beforeStateQueue=new Xi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,m){var b=this;return m&&(this._popupRedirectResolver=cr(m)),this._initializationPromise=this.queue((0,T.Z)(function*(){var j,Z;if(!b._deleted&&(b.persistenceManager=yield Mr.create(b,g),!b._deleted)){if(null===(j=b._popupRedirectResolver)||void 0===j?void 0:j._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(ye){}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(Z=b.currentUser)||void 0===Z?void 0:Z.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,T.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,T.Z)(function*(){var b;const j=yield m.assertedPersistence.getCurrentUser();let Z=j,ye=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ue=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,wt=null==Z?void 0:Z._redirectEventId,mt=yield m.tryRedirectSignIn(g);(!Ue||Ue===wt)&&(null==mt?void 0:mt.user)&&(Z=mt.user,ye=!0)}if(!Z)return m.directlySetCurrentUser(null);if(!Z._redirectEventId){if(ye)try{yield m.beforeStateQueue.runMiddleware(Z)}catch(Ue){Z=j,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ue))}return Z?m.reloadAndSetCurrentUserOrClear(Z):m.directlySetCurrentUser(null)}return tt(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===Z._redirectEventId?m.directlySetCurrentUser(Z):m.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(g){var m=this;return(0,T.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(j){yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,T.Z)(function*(){var b;try{yield Ar(g)}catch(j){if("auth/network-request-failed"!==(null===(b=j)||void 0===b?void 0:b.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,T.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,T.Z)(function*(){const b=g?(0,ie.m9)(g):null;return b&&tt(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(g,m=!1){var b=this;return(0,T.Z)(function*(){if(!b._deleted)return g&&tt(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,T.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,T.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,T.Z)(function*(){yield m.assertedPersistence.setPersistence(cr(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new ie.LL("auth","Firebase",g())}onAuthStateChanged(g,m,b){return this.registerStateListener(this.authStateSubscription,g,m,b)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,b){return this.registerStateListener(this.idTokenSubscription,g,m,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var b=this;return(0,T.Z)(function*(){const j=yield b.getOrInitRedirectPersistenceManager(m);return null===g?j.removeCurrentUser():j.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,T.Z)(function*(){if(!m.redirectPersistenceManager){const b=g&&cr(g)||m._popupRedirectResolver;tt(b,m,"argument-error"),m.redirectPersistenceManager=yield Mr.create(m,[cr(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,T.Z)(function*(){var b,j;return m._isInitialized&&(yield m.queue((0,T.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===g?m._currentUser:(null===(j=m.redirectUser)||void 0===j?void 0:j._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,T.Z)(function*(){if(g===m.currentUser)return m.queue((0,T.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,b,j){if(this._deleted)return()=>{};const Z="function"==typeof m?m:m.next.bind(m),ye=this._isInitialized?Promise.resolve():this._initializationPromise;return tt(ye,this,"internal-error"),ye.then(()=>Z(this.currentUser)),"function"==typeof m?g.addObserver(m,b,j):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,T.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Os(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,T.Z)(function*(){var m;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const j=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return j&&(b["X-Firebase-Client"]=j),b})()}}function sr(E){return(0,ie.m9)(E)}class oo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,ie.ne)(m=>this.observer=m)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hr(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function es(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class be{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return an("not implemented")}_getIdTokenResponse(g){return an("not implemented")}_linkToIdToken(g,m){return an("not implemented")}_getReauthenticationResolver(g){return an("not implemented")}}function Ge(E,g){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:resetPassword",Dt(E,g))})).apply(this,arguments)}function yt(E,g){return te.apply(this,arguments)}function te(){return(te=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function dn(E,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:update",Dt(E,g))})).apply(this,arguments)}function ai(){return(ai=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signInWithPassword",Dt(E,g))})).apply(this,arguments)}function ts(E,g){return er.apply(this,arguments)}function er(){return(er=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:sendOobCode",Dt(E,g))})).apply(this,arguments)}function ao(E,g){return ns.apply(this,arguments)}function ns(){return(ns=(0,T.Z)(function*(E,g){return ts(E,g)})).apply(this,arguments)}function ra(E,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,T.Z)(function*(E,g){return ts(E,g)})).apply(this,arguments)}function Ao(E,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,T.Z)(function*(E,g){return ts(E,g)})).apply(this,arguments)}function _l(E,g){return $s.apply(this,arguments)}function $s(){return($s=(0,T.Z)(function*(E,g){return ts(E,g)})).apply(this,arguments)}function cs(){return(cs=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signInWithEmailLink",Dt(E,g))})).apply(this,arguments)}function jo(){return(jo=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signInWithEmailLink",Dt(E,g))})).apply(this,arguments)}class ws extends be{constructor(g,m,b,j=null){super("password",b),this._email=g,this._password=m,this._tenantId=j}static _fromEmailAndPassword(g,m){return new ws(g,m,"password")}static _fromEmailAndCode(g,m,b=null){return new ws(g,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,T.Z)(function*(){switch(m.signInMethod){case"password":return function(E,g){return ai.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(E,g){return cs.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:mn(g,"internal-error")}})()}_linkToIdToken(g,m){var b=this;return(0,T.Z)(function*(){switch(b.signInMethod){case"password":return yt(g,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(E,g){return jo.apply(this,arguments)}(g,{idToken:m,email:b._email,oobCode:b._password});default:mn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Hs(E,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signInWithIdp",Dt(E,g))})).apply(this,arguments)}class Ci extends be{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Ci(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):mn("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:j}=m,Z=he(m,["providerId","signInMethod"]);if(!b||!j)return null;const ye=new Ci(b,j);return ye.idToken=Z.idToken||void 0,ye.accessToken=Z.accessToken||void 0,ye.secret=Z.secret,ye.nonce=Z.nonce,ye.pendingToken=Z.pendingToken||null,ye}_getIdTokenResponse(g){return Hs(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,Hs(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hs(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,ie.xO)(m)}return g}}function co(E,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:sendVerificationCode",Dt(E,g))})).apply(this,arguments)}function pr(){return(pr=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signInWithPhoneNumber",Dt(E,g))})).apply(this,arguments)}function Fs(){return(Fs=(0,T.Z)(function*(E,g){const m=yield _e(E,"POST","/v1/accounts:signInWithPhoneNumber",Dt(E,g));if(m.temporaryProof)throw Te(E,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const $o={USER_NOT_FOUND:"user-not-found"};function Ls(){return(Ls=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signInWithPhoneNumber",Dt(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),$o)})).apply(this,arguments)}class Cs extends be{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Cs({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Cs({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function(E,g){return pr.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function(E,g){return Fs.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(E,g){return Ls.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:b,verificationCode:j}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:b,code:j}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:b,phoneNumber:j,temporaryProof:Z}=g;return b||m||j||Z?new Cs({verificationId:m,verificationCode:b,phoneNumber:j,temporaryProof:Z}):null}}class B{constructor(g){var m,b,j,Z,ye,Ue;const wt=(0,ie.zd)((0,ie.pd)(g)),mt=null!==(m=wt.apiKey)&&void 0!==m?m:null,zt=null!==(b=wt.oobCode)&&void 0!==b?b:null,Xt=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(j=wt.mode)&&void 0!==j?j:null);tt(mt&&zt&&Xt,"argument-error"),this.apiKey=mt,this.operation=Xt,this.code=zt,this.continueUrl=null!==(Z=wt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(ye=wt.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Ue=wt.tenantId)&&void 0!==Ue?Ue:null}static parseLink(g){const m=function(E){const g=(0,ie.zd)((0,ie.pd)(E)).link,m=g?(0,ie.zd)((0,ie.pd)(g)).deep_link_id:null,b=(0,ie.zd)((0,ie.pd)(E)).deep_link_id;return(b?(0,ie.zd)((0,ie.pd)(b)).link:null)||b||m||g||E}(g);try{return new B(m)}catch(b){return null}}}let me=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(m,b){return ws._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const j=B.parseLink(b);return tt(j,"argument-error"),ws._fromEmailAndCode(m,j.code,j.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Qe{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ke extends Qe{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class L extends Ke{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return tt("providerId"in m&&"signInMethod"in m,"argument-error"),Ci._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return tt(g.idToken||g.accessToken,"argument-error"),Ci._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return L.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return L.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:j,pendingToken:Z,nonce:ye,providerId:Ue}=g;if(!b&&!j&&!m&&!Z||!Ue)return null;try{return new L(Ue)._credential({idToken:m,accessToken:b,nonce:ye,pendingToken:Z})}catch(wt){return null}}}let O=(()=>{class E extends Ke{constructor(){super("facebook.com")}static credential(m){return Ci._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),R=(()=>{class E extends Ke{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Ci._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:j}=m;if(!b&&!j)return null;try{return E.credential(b,j)}catch(Z){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Y=(()=>{class E extends Ke{constructor(){super("github.com")}static credential(m){return Ci._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Et extends be{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Hs(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,Hs(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hs(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:j,pendingToken:Z}=m;return b&&j&&Z&&b===j?new Et(b,Z):null}static _create(g,m){return new Et(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class or extends Qe{constructor(g){tt(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return or.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return or.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Et.fromJSON(g);return tt(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:b}=g;if(!m||!b)return null;try{return Et._create(b,m)}catch(j){return null}}}let Vi=(()=>{class E extends Ke{constructor(){super("twitter.com")}static credential(m,b){return Ci._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:j}=m;if(!b||!j)return null;try{return E.credential(b,j)}catch(Z){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function qr(E,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signUp",Dt(E,g))})).apply(this,arguments)}class Sn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,b,j=!1){return(0,T.Z)(function*(){const Z=yield Oi._fromIdTokenResponse(g,b,j),ye=Kt(b);return new Sn({user:Z,providerId:ye,_tokenResponse:b,operationType:m})})()}static _forOperation(g,m,b){return(0,T.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const j=Kt(b);return new Sn({user:g,providerId:j,_tokenResponse:b,operationType:m})})()}}function Kt(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function sa(){return(sa=(0,T.Z)(function*(E){var g;const m=sr(E);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new Sn({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield qr(m,{returnSecureToken:!0}),j=yield Sn._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(j.user),j})).apply(this,arguments)}class Ua extends ie.ZR{constructor(g,m,b,j){var Z;super(m.code,m.message),this.operationType=b,this.user=j,Object.setPrototypeOf(this,Ua.prototype),this.customData={appName:g.name,tenantId:null!==(Z=g.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,m,b,j){return new Ua(g,m,b,j)}}function oa(E,g,m,b){return("reauthenticate"===g?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?Ua._fromErrorAndOperation(E,Z,g,b):Z})}function fu(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function pu(){return(pu=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E);yield aa(!0,m,g);const{providerUserInfo:b}=yield sn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),j=fu(b||[]);return m.providerData=m.providerData.filter(Z=>j.has(Z.providerId)),j.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ct(E,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,T.Z)(function*(E,g,m=!1){const b=yield rr(E,g._linkToIdToken(E.auth,yield E.getIdToken()),m);return Sn._forOperation(E,"link",b)})).apply(this,arguments)}function aa(E,g,m){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,T.Z)(function*(E,g,m){yield Ar(g);const j=!1===E?"provider-already-linked":"no-such-provider";tt(fu(g.providerData).has(m)===E,g.auth,j)})).apply(this,arguments)}function $u(E,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,T.Z)(function*(E,g,m=!1){var b;const{auth:j}=E,Z="reauthenticate";try{const ye=yield rr(E,oa(j,Z,g,E),m);tt(ye.idToken,j,"internal-error");const Ue=ls(ye.idToken);tt(Ue,j,"internal-error");const{sub:wt}=Ue;return tt(E.uid===wt,j,"user-mismatch"),Sn._forOperation(E,Z,ye)}catch(ye){throw"auth/user-not-found"===(null===(b=ye)||void 0===b?void 0:b.code)&&mn(j,"user-mismatch"),ye}})).apply(this,arguments)}function bs(E,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,T.Z)(function*(E,g,m=!1){const b="signIn",j=yield oa(E,b,g),Z=yield Sn._fromIdTokenResponse(E,b,j);return m||(yield E._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function Gs(E,g){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,T.Z)(function*(E,g){return bs(sr(E),g)})).apply(this,arguments)}function Ba(E,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E);return yield aa(!1,m,g.providerId),ct(m,g)})).apply(this,arguments)}function xo(E,g){return gi.apply(this,arguments)}function gi(){return(gi=(0,T.Z)(function*(E,g){return $u((0,ie.m9)(E),g)})).apply(this,arguments)}function zs(E,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,T.Z)(function*(E,g){return _e(E,"POST","/v1/accounts:signInWithCustomToken",Dt(E,g))})).apply(this,arguments)}function qi(){return(qi=(0,T.Z)(function*(E,g){const m=sr(E),b=yield zs(m,{token:g,returnSecureToken:!0}),j=yield Sn._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(j.user),j})).apply(this,arguments)}class yl{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Wr._fromServerResponse(g,m):mn(g,"internal-error")}}class Wr extends yl{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Wr(m)}}function Is(E,g,m){var b;tt((null===(b=m.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),tt(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(tt(m.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(tt(m.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function ba(){return(ba=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j={requestType:"PASSWORD_RESET",email:g};m&&Is(b,j,m),yield ra(b,j)})).apply(this,arguments)}function vl(){return(vl=(0,T.Z)(function*(E,g,m){yield Ge((0,ie.m9)(E),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Wo(){return(Wo=(0,T.Z)(function*(E,g){yield dn((0,ie.m9)(E),{oobCode:g})})).apply(this,arguments)}function ja(E,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E),b=yield Ge(m,{oobCode:g}),j=b.requestType;switch(tt(j,m,"internal-error"),j){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(b.mfaInfo,m,"internal-error");default:tt(b.email,m,"internal-error")}let Z=null;return b.mfaInfo&&(Z=yl._fromServerResponse(sr(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:Z},operation:j}})).apply(this,arguments)}function Ks(){return(Ks=(0,T.Z)(function*(E,g){const{data:m}=yield ja((0,ie.m9)(E),g);return m.email})).apply(this,arguments)}function gu(){return(gu=(0,T.Z)(function*(E,g,m){const b=sr(E),j=yield qr(b,{returnSecureToken:!0,email:g,password:m}),Z=yield Sn._fromIdTokenResponse(b,"signIn",j);return yield b._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function $a(){return($a=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j={requestType:"EMAIL_SIGNIN",email:g};tt(m.handleCodeInApp,b,"argument-error"),m&&Is(b,j,m),yield Ao(b,j)})).apply(this,arguments)}function Ur(){return(Ur=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j=me.credentialWithLink(g,m||wr());return tt(j._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Gs(b,j)})).apply(this,arguments)}function Wu(E,g){return _u.apply(this,arguments)}function _u(){return(_u=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:createAuthUri",Dt(E,g))})).apply(this,arguments)}function da(){return(da=(0,T.Z)(function*(E,g){const b={identifier:g,continueUri:br()?wr():"http://localhost"},{signinMethods:j}=yield Wu((0,ie.m9)(E),b);return j||[]})).apply(this,arguments)}function yu(){return(yu=(0,T.Z)(function*(E,g){const m=(0,ie.m9)(E),j={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&Is(m.auth,j,g);const{email:Z}=yield ao(m.auth,j);Z!==E.email&&(yield E.reload())})).apply(this,arguments)}function Zs(){return(Zs=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};m&&Is(b.auth,Z,m);const{email:ye}=yield _l(b.auth,Z);ye!==E.email&&(yield E.reload())})).apply(this,arguments)}function Da(E,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,T.Z)(function*(E,g){return Yn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ds(){return(Ds=(0,T.Z)(function*(E,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const b=(0,ie.m9)(E),Z={idToken:yield b.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},ye=yield rr(b,Da(b.auth,Z));b.displayName=ye.displayName||null,b.photoURL=ye.photoUrl||null;const Ue=b.providerData.find(({providerId:wt})=>"password"===wt);Ue&&(Ue.displayName=b.displayName,Ue.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ye)})).apply(this,arguments)}function Bi(E,g,m){return wl.apply(this,arguments)}function wl(){return(wl=(0,T.Z)(function*(E,g,m){const{auth:b}=E,Z={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(Z.email=g),m&&(Z.password=m);const ye=yield rr(E,yt(b,Z));yield E._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class rs{constructor(g,m,b={}){this.isNewUser=g,this.providerId=m,this.profile=b}}class Ha extends rs{constructor(g,m,b,j){super(g,m,b),this.username=j}}class Ki extends rs{constructor(g,m){super(g,"facebook.com",m)}}class Dc extends Ha{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Ys extends rs{constructor(g,m){super(g,"google.com",m)}}class Mo extends Ha{constructor(g,m,b){super(g,"twitter.com",m,b)}}function Tc(E){const{user:g,_tokenResponse:m}=E;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(E){var g,m;if(!E)return null;const{providerId:b}=E,j=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},Z=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const ye=null===(m=null===(g=ls(E.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(ye)return new rs(Z,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!b)return null;switch(b){case"facebook.com":return new Ki(Z,j);case"github.com":return new Dc(Z,j);case"google.com":return new Ys(Z,j);case"twitter.com":return new Mo(Z,j,E.screenName||null);case"custom":case"anonymous":return new rs(Z,null);default:return new rs(Z,b,j)}}(m)}class ti{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new ti("enroll",g)}static _fromMfaPendingCredential(g){return new ti("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,b;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ti._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(b=g.multiFactorSession)||void 0===b?void 0:b.idToken)return ti._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ko{constructor(g,m,b){this.session=g,this.hints=m,this.signInResolver=b}static _fromError(g,m){const b=sr(g),j=m.customData._serverResponse,Z=(j.mfaInfo||[]).map(Ue=>yl._fromServerResponse(b,Ue));tt(j.mfaPendingCredential,b,"internal-error");const ye=ti._fromMfaPendingCredential(j.mfaPendingCredential);return new Ko(ye,Z,function(){var Ue=(0,T.Z)(function*(wt){const mt=yield wt._process(b,ye);delete j.mfaInfo,delete j.mfaPendingCredential;const zt=Object.assign(Object.assign({},j),{idToken:mt.idToken,refreshToken:mt.refreshToken});switch(m.operationType){case"signIn":const Xt=yield Sn._fromIdTokenResponse(b,m.operationType,zt);return yield b._updateCurrentUser(Xt.user),Xt;case"reauthenticate":return tt(m.user,b,"internal-error"),Sn._forOperation(m.user,m.operationType,zt);default:mn(b,"internal-error")}});return function(wt){return Ue.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,T.Z)(function*(){return m.signInResolver(g)})()}}function Eu(E,g){return Yn(E,"POST","/v2/accounts/mfaEnrollment:start",Dt(E,g))}class Br{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>yl._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new Br(g)}getSession(){var g=this;return(0,T.Z)(function*(){return ti._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var b=this;return(0,T.Z)(function*(){const j=g,Z=yield b.getSession(),ye=yield rr(b.user,j._process(b.user.auth,Z,m));return yield b.user._updateTokensIfNecessary(ye),b.user.reload()})()}unenroll(g){var m=this;return(0,T.Z)(function*(){var b;const j="string"==typeof g?g:g.uid,Z=yield m.user.getIdToken(),ye=yield rr(m.user,function(E,g){return Yn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(E,g))}(m.user.auth,{idToken:Z,mfaEnrollmentId:j}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ue})=>Ue!==j),yield m.user._updateTokensIfNecessary(ye);try{yield m.user.reload()}catch(Ue){if("auth/user-token-expired"!==(null===(b=Ue)||void 0===b?void 0:b.code))throw Ue}})()}}const go=new WeakMap,Bt="__sak";class _n{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Bt,"1"),this.storage.removeItem(Bt),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const mi=(()=>{class E extends _n{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,ie.z$)();return Es(E)||Ei(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Er(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const j=this.storage.getItem(b),Z=this.localCache[b];j!==Z&&m(b,Z,j)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((Ue,wt,mt)=>{this.notifyListeners(Ue,mt)});const j=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ue=this.storage.getItem(j);if(m.newValue!==Ue)null!==m.newValue?this.storage.setItem(j,m.newValue):this.storage.removeItem(j);else if(this.localCache[j]===m.newValue&&!b)return}const Z=()=>{const Ue=this.storage.getItem(j);!b&&this.localCache[j]===Ue||this.notifyListeners(j,Ue)},ye=this.storage.getItem(j);(0,ie.w1)()&&10===document.documentMode&&ye!==m.newValue&&m.newValue!==m.oldValue?setTimeout(Z,10):Z()}notifyListeners(m,b){this.localCache[m]=b;const j=this.listeners[m];if(j)for(const Z of Array.from(j))Z(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,j)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:j}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var j=()=>super._set,Z=this;return(0,T.Z)(function*(){yield j().call(Z,m,b),Z.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,j=this;return(0,T.Z)(function*(){const Z=yield b().call(j,m);return j.localCache[m]=JSON.stringify(Z),Z})()}_remove(m){var b=()=>super._remove,j=this;return(0,T.Z)(function*(){yield b().call(j,m),delete j.localCache[m]})()}}return E.type="LOCAL",E})(),S=(()=>{class E extends _n{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return E.type="SESSION",E})();let V=(()=>{class E{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(Z=>Z.isListeningto(m));if(b)return b;const j=new E(m);return this.receivers.push(j),j}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,T.Z)(function*(){const j=m,{eventId:Z,eventType:ye,data:Ue}=j.data,wt=b.handlersMap[ye];if(!(null==wt?void 0:wt.size))return;j.ports[0].postMessage({status:"ack",eventId:Z,eventType:ye});const mt=Array.from(wt).map(function(){var Xt=(0,T.Z)(function*(_r){return _r(j.origin,Ue)});return function(_r){return Xt.apply(this,arguments)}}()),zt=yield function(E){return Promise.all(E.map(function(){var g=(0,T.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return g.apply(this,arguments)}}()))}(mt);j.ports[0].postMessage({status:"done",eventId:Z,eventType:ye,response:zt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function G(E="",g=10){let m="";for(let b=0;b<g;b++)m+=Math.floor(10*Math.random());return E+m}class ee{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,b=50){var j=this;return(0,T.Z)(function*(){const Z="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let ye,Ue;return new Promise((wt,mt)=>{const zt=G("",20);Z.port1.start();const Xt=setTimeout(()=>{mt(new Error("unsupported_event"))},b);Ue={messageChannel:Z,onMessage(_r){const Bs=_r;if(Bs.data.eventId===zt)switch(Bs.data.status){case"ack":clearTimeout(Xt),ye=setTimeout(()=>{mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),wt(Bs.data.response);break;default:clearTimeout(Xt),clearTimeout(ye),mt(new Error("invalid_response"))}}},j.handlers.add(Ue),Z.port1.addEventListener("message",Ue.onMessage),j.target.postMessage({eventType:g,eventId:zt,data:m},[Z.port2])}).finally(()=>{Ue&&j.removeMessageHandler(Ue)})})()}}function le(){return window}function st(){return void 0!==le().WorkerGlobalScope&&"function"==typeof le().importScripts}function Fn(){return(Fn=(0,T.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Pn="firebaseLocalStorageDb",Ht="firebaseLocalStorage",Ts="fbase_key";class Wn{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Po(E,g){return E.transaction([Ht],g?"readwrite":"readonly").objectStore(Ht)}function Mt(){const E=indexedDB.open(Pn,1);return new Promise((g,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(Ht,{keyPath:Ts})}catch(j){m(j)}}),E.addEventListener("success",(0,T.Z)(function*(){const b=E.result;b.objectStoreNames.contains(Ht)?g(b):(b.close(),yield function(){const E=indexedDB.deleteDatabase(Pn);return new Wn(E).toPromise()}(),g(yield Mt()))}))})}function ni(E,g,m){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,T.Z)(function*(E,g,m){const b=Po(E,!0).put({[Ts]:g,value:m});return new Wn(b).toPromise()})).apply(this,arguments)}function Ac(){return(Ac=(0,T.Z)(function*(E,g){const m=Po(E,!1).get(g),b=yield new Wn(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Jl(E,g){const m=Po(E,!0).delete(g);return new Wn(m).toPromise()}const Cu=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,T.Z)(function*(){return m.db||(m.db=yield Mt()),m.db})()}_withRetries(m){var b=this;return(0,T.Z)(function*(){let j=0;for(;;)try{const Z=yield b._openDb();return yield m(Z)}catch(Z){if(j++>3)throw Z;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,T.Z)(function*(){return st()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,T.Z)(function*(){m.receiver=V._getInstance(st()?self:null),m.receiver._subscribe("keyChanged",function(){var b=(0,T.Z)(function*(j,Z){return{keyProcessed:(yield m._poll()).includes(Z.key)}});return function(j,Z){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,T.Z)(function*(j,Z){return["keyChanged"]});return function(j,Z){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,T.Z)(function*(){var b,j;if(m.activeServiceWorker=yield function(){return Fn.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ee(m.activeServiceWorker);const Z=yield m.sender._send("ping",{},800);!Z||(null===(b=Z[0])||void 0===b?void 0:b.fulfilled)&&(null===(j=Z[0])||void 0===j?void 0:j.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,T.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch(j){}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Mt();return yield ni(m,Bt,"1"),yield Jl(m,Bt),!0}catch(m){}return!1})()}_withPendingWrite(m){var b=this;return(0,T.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var j=this;return(0,T.Z)(function*(){return j._withPendingWrite((0,T.Z)(function*(){return yield j._withRetries(Z=>ni(Z,m,b)),j.localCache[m]=b,j.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,T.Z)(function*(){const j=yield b._withRetries(Z=>function(E,g){return Ac.apply(this,arguments)}(Z,m));return b.localCache[m]=j,j})()}_remove(m){var b=this;return(0,T.Z)(function*(){return b._withPendingWrite((0,T.Z)(function*(){return yield b._withRetries(j=>Jl(j,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,T.Z)(function*(){const b=yield m._withRetries(ye=>{const Ue=Po(ye,!1).getAll();return new Wn(Ue).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const j=[],Z=new Set;for(const{fbase_key:ye,value:Ue}of b)Z.add(ye),JSON.stringify(m.localCache[ye])!==JSON.stringify(Ue)&&(m.notifyListeners(ye,Ue),j.push(ye));for(const ye of Object.keys(m.localCache))m.localCache[ye]&&!Z.has(ye)&&(m.notifyListeners(ye,null),j.push(ye));return j})()}notifyListeners(m,b){this.localCache[m]=b;const j=this.listeners[m];if(j)for(const Z of Array.from(j))Z(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function ff(E,g){return Yn(E,"POST","/v2/accounts/mfaSignIn:start",Dt(E,g))}function Wa(){return(Wa=(0,T.Z)(function*(E){return(yield Yn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _i(E){return new Promise((g,m)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=g,b.onerror=j=>{const Z=On("internal-error");Z.customData=j,m(Z)},b.type="text/javascript",b.charset="UTF-8",function(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(b)})}function Vs(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Oo=1e12;class mo{constructor(g){this.auth=g,this.counter=Oo,this._widgets=new Map}render(g,m){const b=this.counter;return this._widgets.set(b,new ps(g,this.auth.name,m||{})),this.counter++,b}reset(g){var m;const b=g||Oo;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Oo))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,T.Z)(function*(){var b;return null===(b=m._widgets.get(g||Oo))||void 0===b||b.execute(),""})()}}class ps{constructor(g,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const j="string"==typeof g?document.getElementById(g):g;tt(j,"argument-error",{appName:m}),this.container=j,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}();const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ko=Vs("rcb"),Zu=new Ot(3e4,6e4);class Fo{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=le().grecaptcha)||void 0===g?void 0:g.render)}load(g,m=""){return tt((E=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(le().grecaptcha):new Promise((b,j)=>{const Z=le().setTimeout(()=>{j(On(g,"network-request-failed"))},Zu.get());le()[ko]=()=>{le().clearTimeout(Z),delete le()[ko];const Ue=le().grecaptcha;if(!Ue)return void j(On(g,"internal-error"));const wt=Ue.render;Ue.render=(mt,zt)=>{const Xt=wt(mt,zt);return this.counter++,Xt},this.hostLanguage=m,b(Ue)},_i(`https://www.google.com/recaptcha/api.js??${(0,ie.xO)({onload:ko,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(Z),j(On(g,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!!(null===(m=le().grecaptcha)||void 0===m?void 0:m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xl{load(g){return(0,T.Z)(function*(){return new mo(g)})()}clearedOneInstance(){}}const za="recaptcha",ri={theme:"light",type:"image"};class Ss{constructor(g,m=Object.assign({},ri),b){this.parameters=m,this.type=za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sr(b),this.isInvisible="invisible"===this.parameters.size,tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const j="string"==typeof g?document.getElementById(g):g;tt(j,this.auth,"argument-error"),this.container=j,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xl:new Fo,this.validateStartingState()}verify(){var g=this;return(0,T.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(m)||new Promise(Z=>{const ye=Ue=>{!Ue||(g.tokenChangeListeners.delete(ye),Z(Ue))};g.tokenChangeListeners.add(ye),g.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof g)g(m);else if("string"==typeof g){const b=le()[g];"function"==typeof b&&b(m)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,T.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,T.Z)(function*(){tt(br()&&!st(),g.auth,"internal-error"),yield function(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function(E){return Wa.apply(this,arguments)}(g.auth);tt(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class zn{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Cs._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function Qs(){return(Qs=(0,T.Z)(function*(E,g,m){const b=sr(E),j=yield Yo(b,g,(0,ie.m9)(m));return new zn(j,Z=>Gs(b,Z))})).apply(this,arguments)}function bu(){return(bu=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);yield aa(!1,b,"phone");const j=yield Yo(b.auth,g,(0,ie.m9)(m));return new zn(j,Z=>Ba(b,Z))})).apply(this,arguments)}function Iu(){return(Iu=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E),j=yield Yo(b.auth,g,(0,ie.m9)(m));return new zn(j,Z=>xo(b,Z))})).apply(this,arguments)}function Yo(E,g,m){return jr.apply(this,arguments)}function jr(){return(jr=(0,T.Z)(function*(E,g,m){var b;const j=yield m.verify();try{let Z;if(tt("string"==typeof j,E,"argument-error"),tt(m.type===za,E,"argument-error"),Z="string"==typeof g?{phoneNumber:g}:g,"session"in Z){const ye=Z.session;if("phoneNumber"in Z)return tt("enroll"===ye.type,E,"internal-error"),(yield Eu(E,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:j}})).phoneSessionInfo.sessionInfo;{tt("signin"===ye.type,E,"internal-error");const Ue=(null===(b=Z.multiFactorHint)||void 0===b?void 0:b.uid)||Z.multiFactorUid;return tt(Ue,E,"missing-multi-factor-info"),(yield ff(E,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Ue,phoneSignInInfo:{recaptchaToken:j}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield co(E,{phoneNumber:Z.phoneNumber,recaptchaToken:j});return ye}}finally{m._reset()}})).apply(this,arguments)}function $(){return($=(0,T.Z)(function*(E,g){yield ct((0,ie.m9)(E),g)})).apply(this,arguments)}let J=(()=>{class E{constructor(m){this.providerId=E.PROVIDER_ID,this.auth=sr(m)}verifyPhoneNumber(m,b){return Yo(this.auth,m,(0,ie.m9)(b))}static credential(m,b){return Cs._fromVerification(m,b)}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:j}=m;return b&&j?Cs._fromTokenResponse(b,j):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function fe(E,g){return g?cr(g):(tt(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class xe extends be{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Hs(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Hs(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Hs(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function He(E){return bs(E.auth,new xe(E),E.bypassAuthState)}function dt(E){const{auth:g,user:m}=E;return tt(m,g,"internal-error"),$u(m,new xe(E),E.bypassAuthState)}function Rt(E){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,T.Z)(function*(E){const{auth:g,user:m}=E;return tt(m,g,"internal-error"),ct(m,new xe(E),E.bypassAuthState)})).apply(this,arguments)}class yn{constructor(g,m,b,j,Z=!1){this.auth=g,this.resolver=b,this.user=j,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,T.Z)(function*(b,j){g.pendingPromise={resolve:b,reject:j};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(Z){g.reject(Z)}});return function(b,j){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,T.Z)(function*(){const{urlResponse:b,sessionId:j,postBody:Z,tenantId:ye,error:Ue,type:wt}=g;if(Ue)return void m.reject(Ue);const mt={auth:m.auth,requestUri:b,sessionId:j,tenantId:ye||void 0,postBody:Z||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(wt)(mt))}catch(zt){m.reject(zt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return He;case"linkViaPopup":case"linkViaRedirect":return Rt;case"reauthViaPopup":case"reauthViaRedirect":return dt;default:mn(this.auth,"internal-error")}}resolve(g){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ln=new Ot(2e3,1e4);function tr(){return(tr=(0,T.Z)(function*(E,g,m){const b=sr(E);Qr(E,g,Qe);const j=fe(b,m);return new Dl(b,"signInViaPopup",g,j).executeNotNull()})).apply(this,arguments)}function is(){return(is=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);Qr(b.auth,g,Qe);const j=fe(b.auth,m);return new Dl(b.auth,"reauthViaPopup",g,j,b).executeNotNull()})).apply(this,arguments)}function gs(){return(gs=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);Qr(b.auth,g,Qe);const j=fe(b.auth,m);return new Dl(b.auth,"linkViaPopup",g,j,b).executeNotNull()})).apply(this,arguments)}let Dl=(()=>{class E extends yn{constructor(m,b,j,Z,ye){super(m,b,Z,ye),this.provider=j,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var m=this;return(0,T.Z)(function*(){const b=yield m.execute();return tt(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,T.Z)(function*(){xt(1===m.filter.length,"Popup operations only handle one event");const b=G();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(j=>{m.reject(j)}),m.resolver._isIframeWebStorageSupported(m.auth,j=>{j||m.reject(On(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,j;this.pollId=(null===(j=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===j?void 0:j.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ln.get())};m()}}return E.currentPopupAction=null,E})();const Cr=new Map;class Qo extends yn{constructor(g,m,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,T.Z)(function*(){let b=Cr.get(m.auth._key());if(!b){try{const Z=(yield function(E,g){return Tl.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;b=()=>Promise.resolve(Z)}catch(j){b=()=>Promise.reject(j)}Cr.set(m.auth._key(),b)}return m.bypassAuthState||Cr.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,b=this;return(0,T.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(b,g);if("unknown"!==g.type){if(g.eventId){const j=yield b.auth._redirectUserForId(g.eventId);if(j)return b.user=j,m().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function Tl(){return(Tl=(0,T.Z)(function*(E,g){const m=Al(g),b=Aa(E);if(!(yield b._isAvailable()))return!1;const j="true"===(yield b._get(m));return yield b._remove(m),j})).apply(this,arguments)}function md(E,g){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,T.Z)(function*(E,g){return Aa(E)._set(Al(g),"true")})).apply(this,arguments)}function Sl(E,g){Cr.set(E._key(),g)}function Aa(E){return cr(E._redirectPersistence)}function Al(E){return vi("pendingRedirect",E.config.apiKey,E.name)}function ec(){return(ec=(0,T.Z)(function*(E,g,m){const b=sr(E);Qr(E,g,Qe);const j=fe(b,m);return yield md(j,b),j._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function tc(){return(tc=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);Qr(b.auth,g,Qe);const j=fe(b.auth,m);yield md(j,b.auth);const Z=yield ms(b);return j._openRedirect(b.auth,g,"reauthViaRedirect",Z)})).apply(this,arguments)}function xl(){return(xl=(0,T.Z)(function*(E,g,m){const b=(0,ie.m9)(E);Qr(b.auth,g,Qe);const j=fe(b.auth,m);yield aa(!1,b,g.providerId),yield md(j,b.auth);const Z=yield ms(b);return j._openRedirect(b.auth,g,"linkViaRedirect",Z)})).apply(this,arguments)}function Rl(){return(Rl=(0,T.Z)(function*(E,g){return yield sr(E)._initializationPromise,Nc(E,g,!1)})).apply(this,arguments)}function Nc(E,g){return mh.apply(this,arguments)}function mh(){return(mh=(0,T.Z)(function*(E,g,m=!1){const b=sr(E),j=fe(b,g),ye=yield new Qo(b,j,m).execute();return ye&&!m&&(delete ye.user._redirectEventId,yield b._persistUserIfCurrent(ye.user),yield b._setRedirectUser(null,g)),ye})).apply(this,arguments)}function ms(E){return _h.apply(this,arguments)}function _h(){return(_h=(0,T.Z)(function*(E){const g=G(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class nc{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(m=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nl(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var b;if(g.error&&!Nl(g)){const j=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(On(this.auth,j))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const b=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yd(g))}saveEventToCache(g){this.cachedEventUids.add(yd(g)),this.lastProcessedEventTime=Date.now()}}function yd(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function Nl({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===(null==g?void 0:g.code)}function yh(E){return vh.apply(this,arguments)}function vh(){return(vh=(0,T.Z)(function*(E,g={}){return Yn(E,"GET","/v1/projects",g)})).apply(this,arguments)}const ma=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ml=/^https?/;function Mc(){return(Mc=(0,T.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield yh(E);for(const m of g)try{if(yf(m))return}catch(b){}mn(E,"unauthorized-domain")})).apply(this,arguments)}function yf(E){const g=wr(),{protocol:m,hostname:b}=new URL(g);if(E.startsWith("chrome-extension://")){const ye=new URL(E);return""===ye.hostname&&""===b?"chrome-extension:"===m&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&ye.hostname===b}if(!Ml.test(m))return!1;if(ma.test(E))return b===E;const j=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+j+"|"+j+")$","i").test(b)}const Lo=new Ot(3e4,6e4);function vf(){const E=le().___jsl;if(null==E?void 0:E.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}let vd=null;function Eh(E){return vd=vd||function(E){return new Promise((g,m)=>{var b,j,Z;function ye(){vf(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{vf(),m(On(E,"network-request-failed"))},timeout:Lo.get()})}if(null===(j=null===(b=le().gapi)||void 0===b?void 0:b.iframes)||void 0===j?void 0:j.Iframe)g(gapi.iframes.getContext());else{if(!(null===(Z=le().gapi)||void 0===Z?void 0:Z.load)){const Ue=Vs("iframefcb");return le()[Ue]=()=>{gapi.load?ye():m(On(E,"network-request-failed"))},_i(`https://apis.google.com/js/api.js?onload=${Ue}`).catch(wt=>m(wt))}ye()}}).catch(g=>{throw vd=null,g})}(E),vd}const Ef=new Ot(5e3,15e3),_a={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pc(E){const g=E.config;tt(g.authDomain,E,"auth-domain-config-required");const m=g.emulator?tn(g,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:E.name,v:Ne.SDK_VERSION},j=wp.get(E.config.apiHost);j&&(b.eid=j);const Z=E._getFrameworks();return Z.length&&(b.fw=Z.join(",")),`${m}?${(0,ie.xO)(b).slice(1)}`}function Ed(){return Ed=(0,T.Z)(function*(E){const g=yield Eh(E),m=le().gapi;return tt(m,E,"internal-error"),g.open({where:document.body,url:Pc(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_a,dontclear:!0},b=>new Promise(function(){var j=(0,T.Z)(function*(Z,ye){yield b.restyle({setHideOnLeave:!1});const Ue=On(E,"network-request-failed"),wt=le().setTimeout(()=>{ye(Ue)},Ef.get());function mt(){le().clearTimeout(wt),Z(b)}b.ping(mt).then(mt,()=>{ye(Ue)})});return function(Z,ye){return j.apply(this,arguments)}}()))}),Ed.apply(this,arguments)}const Cf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Df{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function ya(E,g,m,b,j,Z){tt(E.config.authDomain,E,"auth-domain-config-required"),tt(E.config.apiKey,E,"invalid-api-key");const ye={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:b,v:Ne.SDK_VERSION,eventId:j};if(g instanceof Qe){g.setDefaultLanguage(E.languageCode),ye.providerId=g.providerId||"",(0,ie.xb)(g.getCustomParameters())||(ye.customParameters=JSON.stringify(g.getCustomParameters()));for(const[wt,mt]of Object.entries(Z||{}))ye[wt]=mt}if(g instanceof Ke){const wt=g.getScopes().filter(mt=>""!==mt);wt.length>0&&(ye.scopes=wt.join(","))}E.tenantId&&(ye.tid=E.tenantId);const Ue=ye;for(const wt of Object.keys(Ue))void 0===Ue[wt]&&delete Ue[wt];return`${function({config:E}){return E.emulator?tn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,ie.xO)(Ue).slice(1)}`}const Su="webStorageSupport";class Pl extends class{constructor(g){this.factorId=g}_process(g,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,b);case"signin":return this._finalizeSignIn(g,m.credential);default:return an("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Pl(g)}_finalizeEnroll(g,m,b){return function(E,g){return Yn(E,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(E,g))}(g,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function(E,g){return Yn(E,"POST","/v2/accounts/mfaSignIn:finalize",Dt(E,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Eg=(()=>{class E{constructor(){}static assertion(m){return Pl._fromCredential(m)}}return E.FACTOR_ID="phone",E})();var E,kc="@firebase/auth";class Ch{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,T.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(b=>{var j;g((null===(j=b)||void 0===j?void 0:j.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ya(){return window}function Ol(){return Ol=(0,T.Z)(function*(E,g,m){var b;const{BuildInfo:j}=Ya();xt(g.sessionId,"AuthEvent did not contain a session ID");const Z=yield Ih(g.sessionId),ye={};return Ei()?ye.ibi=j.packageName:Mn()?ye.apn=j.packageName:mn(E,"operation-not-supported-in-this-environment"),j.displayName&&(ye.appDisplayName=j.displayName),ye.sessionId=Z,ya(E,m,g.type,void 0,null!==(b=g.eventId)&&void 0!==b?b:void 0,ye)}),Ol.apply(this,arguments)}function mr(){return mr=(0,T.Z)(function*(E){const{BuildInfo:g}=Ya(),m={};Ei()?m.iosBundleId=g.packageName:Mn()?m.androidPackageName=g.packageName:mn(E,"operation-not-supported-in-this-environment"),yield yh(E,m)}),mr.apply(this,arguments)}function Qa(){return Qa=(0,T.Z)(function*(E,g,m){const{cordova:b}=Ya();let j=()=>{};try{yield new Promise((Z,ye)=>{let Ue=null;function wt(){var Xt;Z();const _r=null===(Xt=b.plugins.browsertab)||void 0===Xt?void 0:Xt.close;"function"==typeof _r&&_r(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function mt(){Ue||(Ue=window.setTimeout(()=>{ye(On(E,"redirect-cancelled-by-user"))},2e3))}function zt(){"visible"===(null==document?void 0:document.visibilityState)&&mt()}g.addPassiveListener(wt),document.addEventListener("resume",mt,!1),Mn()&&document.addEventListener("visibilitychange",zt,!1),j=()=>{g.removePassiveListener(wt),document.removeEventListener("resume",mt,!1),document.removeEventListener("visibilitychange",zt,!1),Ue&&window.clearTimeout(Ue)}})}finally{j()}}),Qa.apply(this,arguments)}function Ih(E){return kl.apply(this,arguments)}function kl(){return kl=(0,T.Z)(function*(E){const g=Xu(E),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(j=>j.toString(16).padStart(2,"0")).join("")}),kl.apply(this,arguments)}function Xu(E){if(xt(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(E);const g=new ArrayBuffer(E.length),m=new Uint8Array(g);for(let b=0;b<E.length;b++)m[b]=E.charCodeAt(b);return m}E="Browser",(0,Ne._registerComponent)(new fr.wA("auth",(g,{options:m})=>{const b=g.getProvider("app").getImmediate(),j=g.getProvider("heartbeat"),{apiKey:Z,authDomain:ye}=b.options;return((Ue,wt)=>{tt(Z&&!Z.includes(":"),"invalid-api-key",{appName:Ue.name}),tt(!(null==ye?void 0:ye.includes(":")),"argument-error",{appName:Ue.name});const mt={apiKey:Z,authDomain:ye,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Os(E)},zt=new oi(Ue,wt,mt);return function(E,g){const m=(null==g?void 0:g.persistence)||[],b=(Array.isArray(m)?m:[m]).map(cr);(null==g?void 0:g.errorMap)&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(b,null==g?void 0:g.popupRedirectResolver)}(zt,m),zt})(b,j)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,b)=>{g.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new fr.wA("auth-internal",g=>{const m=sr(g.getProvider("auth").getImmediate());return new Ch(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(kc,"0.20.5",void 0),(0,Ne.registerVersion)(kc,"0.20.5","esm2017");class Kn extends nc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,T.Z)(function*(){yield g.initPromise})()}}function xf(E){return xa.apply(this,arguments)}function xa(){return xa=(0,T.Z)(function*(E){const g=yield Fl()._get(ss(E));return g&&(yield Fl()._remove(ss(E))),g}),xa.apply(this,arguments)}function va(){const E=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*g.length);E.push(g.charAt(b))}return E.join("")}function Fl(){return cr(mi)}function ss(E){return vi("authEvent",E.config.apiKey,E.name)}function Ll(E){if(!(null==E?void 0:E.includes("?")))return{};const[g,...m]=E.split("?");return(0,ie.zd)(m.join("?"))}function Qn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:On("no-auth-event")}}function jn(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function Vc(E=(0,ie.z$)()){return!("file:"!==jn()&&"ionic:"!==jn()&&"capacitor:"!==jn()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nf(){try{const E=self.localStorage,g=G();if(E)return E.setItem(g,"1"),E.removeItem(g),!function(E=(0,ie.z$)()){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)||function(E=(0,ie.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,ie.hl)()}catch(E){return vo()&&(0,ie.hl)()}return!1}function vo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ip(){return("http:"===jn()||"https:"===jn()||(0,ie.ru)()||Vc())&&!((0,ie.b$)()||(0,ie.UG)())&&Nf()&&!vo()}function el(){return Vc()&&"undefined"!=typeof document}function Mf(){return Mf=(0,T.Z)(function*(){return!!el()&&new Promise(E=>{const g=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),E(!0)})})}),Mf.apply(this,arguments)}const os={LOCAL:"local",NONE:"none",SESSION:"session"},sc=tt,Xa="persistence";function Bc(E){return Th.apply(this,arguments)}function Th(){return Th=(0,T.Z)(function*(E){yield E._initializationPromise;const g=Xo(),m=vi(Xa,E.config.apiKey,E.name);g&&g.setItem(m,E._getPersistence())}),Th.apply(this,arguments)}function Xo(){var E;try{return(null===(E="undefined"!=typeof window?window:null)||void 0===E?void 0:E.sessionStorage)||null}catch(g){return null}}const Kr=tt;class tl{constructor(){this.browserResolver=cr(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S,this._completeRedirectFn=Nc,this._overrideRedirectResult=Sl}_openPopup(g,m,b,j){var Z=this;return(0,T.Z)(function*(){var ye;xt(null===(ye=Z.eventManagers[g._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Ue=ya(g,m,b,wr(),j);return function(E,g,m,b=500,j=600){const Z=Math.max((window.screen.availHeight-j)/2,0).toString(),ye=Math.max((window.screen.availWidth-b)/2,0).toString();let Ue="";const wt=Object.assign(Object.assign({},Cf),{width:b.toString(),height:j.toString(),top:Z,left:ye}),mt=(0,ie.z$)().toLowerCase();m&&(Ue=Fi(mt)?"_blank":m),ki(mt)&&(g=g||"http://localhost",wt.scrollbars="yes");const zt=Object.entries(wt).reduce((_r,[Bs,Mu])=>`${_r}${Bs}=${Mu},`,"");if(function(E=(0,ie.z$)()){var g;return Ei(E)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(mt)&&"_self"!==Ue)return function(E,g){const m=document.createElement("a");m.href=E,m.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(g||"",Ue),new Df(null);const Xt=window.open(g||"",Ue,zt);tt(Xt,E,"popup-blocked");try{Xt.focus()}catch(_r){}return new Df(Xt)}(g,Ue,G())})()}_openRedirect(g,m,b,j){var Z=this;return(0,T.Z)(function*(){return yield Z._originValidation(g),E=ya(g,m,b,wr(),j),le().location.href=E,new Promise(()=>{});var E})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:j,promise:Z}=this.eventManagers[m];return j?Promise.resolve(j):(xt(Z,"If manager is not set, promise should be"),Z)}const b=this.initAndGetManager(g);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(g){var m=this;return(0,T.Z)(function*(){const b=yield function(E){return Ed.apply(this,arguments)}(g),j=new nc(g);return b.register("authEvent",Z=>(tt(null==Z?void 0:Z.authEvent,g,"invalid-auth-event"),{status:j.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:j},m.iframes[g._key()]=b,j})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Su,{type:Su},j=>{var Z;const ye=null===(Z=null==j?void 0:j[0])||void 0===Z?void 0:Z[Su];void 0!==ye&&m(!!ye),mn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(E){return Mc.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return Er()||Es()||Ei()}}),this.cordovaResolver=cr(class{constructor(){this._redirectPersistence=S,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nc,this._overrideRedirectResult=Sl}_initialize(g){var m=this;return(0,T.Z)(function*(){const b=g._key();let j=m.eventManagers.get(b);return j||(j=new Kn(g),m.eventManagers.set(b,j),m.attachCallbackListeners(g,j)),j})()}_openPopup(g){mn(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,b,j){var Z=this;return(0,T.Z)(function*(){!function(E){var g,m,b,j,Z,ye,Ue,wt,mt,zt;const Xt=Ya();tt("function"==typeof(null===(g=null==Xt?void 0:Xt.universalLinks)||void 0===g?void 0:g.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tt(void 0!==(null===(m=null==Xt?void 0:Xt.BuildInfo)||void 0===m?void 0:m.packageName),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tt("function"==typeof(null===(Z=null===(j=null===(b=null==Xt?void 0:Xt.cordova)||void 0===b?void 0:b.plugins)||void 0===j?void 0:j.browsertab)||void 0===Z?void 0:Z.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt("function"==typeof(null===(wt=null===(Ue=null===(ye=null==Xt?void 0:Xt.cordova)||void 0===ye?void 0:ye.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===wt?void 0:wt.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt("function"==typeof(null===(zt=null===(mt=null==Xt?void 0:Xt.cordova)||void 0===mt?void 0:mt.InAppBrowser)||void 0===zt?void 0:zt.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ye=yield Z._initialize(g);yield ye.initialized(),ye.resetRedirect(),Cr.clear(),yield Z._originValidation(g);const Ue=function(E,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:va(),postBody:null,tenantId:E.tenantId,error:On(E,"no-auth-event")}}(g,b,j);yield function(E,g){return Fl()._set(ss(E),g)}(g,Ue);const wt=yield function(E,g,m){return Ol.apply(this,arguments)}(g,Ue,m),mt=yield function(E){const{cordova:g}=Ya();return new Promise(m=>{g.plugins.browsertab.isAvailable(b=>{let j=null;b?g.plugins.browsertab.openUrl(E):j=g.InAppBrowser.open(E,function(E=(0,ie.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),m(j)})})}(wt);return function(E,g,m){return Qa.apply(this,arguments)}(g,ye,mt)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(E){return mr.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:b,handleOpenURL:j,BuildInfo:Z}=Ya(),ye=setTimeout((0,T.Z)(function*(){yield xf(g),m.onEvent(Qn())}),500),Ue=function(){var zt=(0,T.Z)(function*(Xt){clearTimeout(ye);const _r=yield xf(g);let Bs=null;_r&&(null==Xt?void 0:Xt.url)&&(Bs=function(E,g){var m,b;const j=function(E){const g=Ll(E),m=g.link?decodeURIComponent(g.link):void 0,b=Ll(m).link,j=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Ll(j).link||j||b||m||E}(g);if(j.includes("/__/auth/callback")){const Z=Ll(j),ye=Z.firebaseError?function(E){try{return JSON.parse(E)}catch(g){return null}}(decodeURIComponent(Z.firebaseError)):null,Ue=null===(b=null===(m=null==ye?void 0:ye.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],wt=Ue?On(Ue):null;return wt?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:wt,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:j,postBody:null}}return null}(_r,Xt.url)),m.onEvent(Bs||Qn())});return function(_r){return zt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,Ue);const wt=j,mt=`${Z.packageName.toLowerCase()}://`;Ya().handleOpenURL=function(){var zt=(0,T.Z)(function*(Xt){if(Xt.toLowerCase().startsWith(mt)&&Ue({url:Xt}),"function"==typeof wt)try{wt(Xt)}catch(_r){console.error(_r)}});return function(Xt){return zt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=S,this._completeRedirectFn=Nc,this._overrideRedirectResult=Sl}_initialize(g){var m=this;return(0,T.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,b,j){var Z=this;return(0,T.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(g,m,b,j)})()}_openRedirect(g,m,b,j){var Z=this;return(0,T.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(g,m,b,j)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return el()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Kr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,T.Z)(function*(){if(g.underlyingResolver)return;const m=yield function(){return Mf.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function Dp(E){return E.unwrap()}function jc(E){return Ru(E)}function Ru(E){const{_tokenResponse:g}=E instanceof ie.ZR?E.customData:E;if(!g)return null;if(!(E instanceof ie.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return J.credentialFromResult(E);const m=g.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=R;break;case"facebook.com":b=O;break;case"github.com":b=Y;break;case"twitter.com":b=Vi;break;default:const{oauthIdToken:j,oauthAccessToken:Z,oauthTokenSecret:ye,pendingToken:Ue,nonce:wt}=g;return Z||ye||j||Ue?Ue?m.startsWith("saml.")?Et._create(m,Ue):Ci._fromParams({providerId:m,signInMethod:m,pendingToken:Ue,idToken:j,accessToken:Z}):new L(m).credential({idToken:j,accessToken:Z,rawNonce:wt}):null}return E instanceof ie.ZR?b.credentialFromError(E):b.credentialFromResult(E)}function xs(E,g){return g.catch(m=>{throw m instanceof ie.ZR&&function(E,g){var m,b;const j=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=g)||void 0===b?void 0:b.code))g.resolver=new ea(E,function(E,g){var m;const b=(0,ie.m9)(E),j=g;return tt(g.customData.operationType,b,"argument-error"),tt(null===(m=j.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),Ko._fromError(b,j)}(E,g));else if(j){const Z=Ru(g),ye=g;Z&&(ye.credential=Z,ye.tenantId=j.tenantId||void 0,ye.email=j.email||void 0,ye.phoneNumber=j.phoneNumber||void 0)}}(E,m),m}).then(m=>{const j=m.user;return{operationType:m.operationType,credential:jc(m),additionalUserInfo:Tc(m),user:il.getOrCreate(j)}})}function Vn(E,g){return rl.apply(this,arguments)}function rl(){return rl=(0,T.Z)(function*(E,g){const m=yield g;return{verificationId:m.verificationId,confirm:b=>xs(E,m.confirm(b))}}),rl.apply(this,arguments)}class ea{constructor(g,m){this.resolver=m,this.auth=function(E){return E.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return xs(Dp(this.auth),this.resolver.resolveSignIn(g))}}class il{constructor(g){this._delegate=g,this.multiFactor=function(E){const g=(0,ie.m9)(E);return go.has(g)||go.set(g,Br._fromUser(g)),go.get(g)}(g)}static getOrCreate(g){return il.USER_MAP.has(g)||il.USER_MAP.set(g,new il(g)),il.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,T.Z)(function*(){return xs(m.auth,Ba(m._delegate,g))})()}linkWithPhoneNumber(g,m){var b=this;return(0,T.Z)(function*(){return Vn(b.auth,function(E,g,m){return bu.apply(this,arguments)}(b._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,T.Z)(function*(){return xs(m.auth,function(E,g,m){return gs.apply(this,arguments)}(m._delegate,g,tl))})()}linkWithRedirect(g){var m=this;return(0,T.Z)(function*(){return yield Bc(sr(m.auth)),function(E,g,m){return function(E,g,m){return xl.apply(this,arguments)}(E,g,m)}(m._delegate,g,tl)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,T.Z)(function*(){return xs(m.auth,xo(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return Vn(this.auth,function(E,g,m){return Iu.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return xs(this.auth,function(E,g,m){return is.apply(this,arguments)}(this._delegate,g,tl))}reauthenticateWithRedirect(g){var m=this;return(0,T.Z)(function*(){return yield Bc(sr(m.auth)),function(E,g,m){return function(E,g,m){return tc.apply(this,arguments)}(E,g,m)}(m._delegate,g,tl)})()}sendEmailVerification(g){return function(E,g){return yu.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,T.Z)(function*(){return yield function(E,g){return pu.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function(E,g){return Bi((0,ie.m9)(E),g,null)}(this._delegate,g)}updatePassword(g){return function(E,g){return Bi((0,ie.m9)(E),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(E,g){return $.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(E,g){return Ds.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function(E,g,m){return Zs.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}il.USER_MAP=new WeakMap;const li=tt;let Sd=(()=>{class E{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=m.options;li(j,"invalid-api-key",{appName:m.name}),li(j,"invalid-api-key",{appName:m.name});const Z="undefined"!=typeof window?tl:void 0;this._delegate=b.initialize({options:{persistence:Xs(j,m.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(Zt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?il.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function(E,g,m){const b=sr(E);tt(b._canInitEmulator,b,"emulator-config-failed"),tt(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const j=!!(null==m?void 0:m.disableWarnings),Z=Hr(g),{host:ye,port:Ue}=function(E){const g=Hr(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",j=/^(\[[^\]]+\])(:|$)/.exec(b);if(j){const Z=j[1];return{host:Z,port:es(b.substr(Z.length+1))}}{const[Z,ye]=b.split(":");return{host:Z,port:es(ye)}}}(g);b.config.emulator={url:`${Z}//${ye}${null===Ue?"":`:${Ue}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ye,port:Ue,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:j})}),j||function(){function E(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,m,b)}applyActionCode(m){return function(E,g){return Wo.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return ja(this._delegate,m)}confirmPasswordReset(m,b){return function(E,g,m){return vl.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var j=this;return(0,T.Z)(function*(){return xs(j._delegate,function(E,g,m){return gu.apply(this,arguments)}(j._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(E,g){return da.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(E,g){const m=B.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,T.Z)(function*(){li(Ip(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function(E,g){return Rl.apply(this,arguments)}(m._delegate,tl);return b?xs(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(E,g){sr(E)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,b,j){const{next:Z,error:ye,complete:Ue}=$c(m,b,j);return this._delegate.onAuthStateChanged(Z,ye,Ue)}onIdTokenChanged(m,b,j){const{next:Z,error:ye,complete:Ue}=$c(m,b,j);return this._delegate.onIdTokenChanged(Z,ye,Ue)}sendSignInLinkToEmail(m,b){return function(E,g,m){return $a.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function(E,g,m){return ba.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,T.Z)(function*(){let j;switch(function(E,g){sc(Object.values(os).includes(g),E,"invalid-persistence-type"),(0,ie.b$)()?sc(g!==os.SESSION,E,"unsupported-persistence-type"):(0,ie.UG)()?sc(g===os.NONE,E,"unsupported-persistence-type"):vo()?sc(g===os.NONE||g===os.LOCAL&&(0,ie.hl)(),E,"unsupported-persistence-type"):sc(g===os.NONE||Nf(),E,"unsupported-persistence-type")}(b._delegate,m),m){case os.SESSION:j=S;break;case os.LOCAL:j=(yield cr(Cu)._isAvailable())?Cu:mi;break;case os.NONE:j=Rr;break;default:return mn("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return xs(this._delegate,function(E){return sa.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return xs(this._delegate,Gs(this._delegate,m))}signInWithCustomToken(m){return xs(this._delegate,function(E,g){return qi.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return xs(this._delegate,function(E,g,m){return Gs((0,ie.m9)(E),me.credential(g,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return xs(this._delegate,function(E,g,m){return Ur.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Vn(this._delegate,function(E,g,m){return Qs.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,T.Z)(function*(){return li(Ip(),b._delegate,"operation-not-supported-in-this-environment"),xs(b._delegate,function(E,g,m){return tr.apply(this,arguments)}(b._delegate,m,tl))})()}signInWithRedirect(m){var b=this;return(0,T.Z)(function*(){return li(Ip(),b._delegate,"operation-not-supported-in-this-environment"),yield Bc(b._delegate),function(E,g,m){return function(E,g,m){return ec.apply(this,arguments)}(E,g,m)}(b._delegate,m,tl)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(E,g){return Ks.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=os,E})();function $c(E,g,m){let b=E;"function"!=typeof E&&({next:b,error:g,complete:m}=E);const j=b;return{next:ye=>j(ye&&il.getOrCreate(ye)),error:g,complete:m}}function Xs(E,g){const m=function(E,g){const m=Xo();if(!m)return[];const b=vi(Xa,E,g);switch(m.getItem(b)){case os.NONE:return[Rr];case os.LOCAL:return[Cu,S];case os.SESSION:return[S];default:return[]}}(E,g);if("undefined"!=typeof self&&!m.includes(Cu)&&m.push(Cu),"undefined"!=typeof window)for(const b of[mi,S])m.includes(b)||m.push(b);return m.includes(Rr)||m.push(Rr),m}class Nu{constructor(){this.providerId="phone",this._delegate=new J(Dp(U.Z.auth()))}static credential(g,m){return J.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}Nu.PHONE_SIGN_IN_METHOD=J.PHONE_SIGN_IN_METHOD,Nu.PROVIDER_ID=J.PROVIDER_ID;const Ad=tt;class Tp{constructor(g,m,b=U.Z.app()){var j;Ad(null===(j=b.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Ss(g,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(E){E.INTERNAL.registerComponent(new fr.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),b=g.getProvider("auth");return new Sd(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:me,FacebookAuthProvider:O,GithubAuthProvider:Y,GoogleAuthProvider:R,OAuthProvider:L,SAMLAuthProvider:or,PhoneAuthProvider:Nu,PhoneMultiFactorGenerator:Eg,RecaptchaVerifier:Tp,TwitterAuthProvider:Vi,Auth:Sd,AuthCredential:be,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.2.18")}(U.Z)},7574:(kt,$e,z)=>{"use strict";z.d($e,{y:()=>ce});var T=z(7393),ie=z(9181),Ne=z(6490),de=z(6554),Pe=z(4487);var se=z(2494);let ce=(()=>{class Be{constructor(it){this._isScalar=!1,it&&(this._subscribe=it)}lift(it){const ze=new Be;return ze.source=this,ze.operator=it,ze}subscribe(it,ze,Ct){const{operator:We}=this,Ve=function(Be,Ye,it){if(Be){if(Be instanceof T.L)return Be;if(Be[ie.b])return Be[ie.b]()}return Be||Ye||it?new T.L(Be,Ye,it):new T.L(Ne.c)}(it,ze,Ct);if(Ve.add(We?We.call(Ve,this.source):this.source||se.v.useDeprecatedSynchronousErrorHandling&&!Ve.syncErrorThrowable?this._subscribe(Ve):this._trySubscribe(Ve)),se.v.useDeprecatedSynchronousErrorHandling&&Ve.syncErrorThrowable&&(Ve.syncErrorThrowable=!1,Ve.syncErrorThrown))throw Ve.syncErrorValue;return Ve}_trySubscribe(it){try{return this._subscribe(it)}catch(ze){se.v.useDeprecatedSynchronousErrorHandling&&(it.syncErrorThrown=!0,it.syncErrorValue=ze),function(Be){for(;Be;){const{closed:Ye,destination:it,isStopped:ze}=Be;if(Ye||ze)return!1;Be=it&&it instanceof T.L?it:null}return!0}(it)?it.error(ze):console.warn(ze)}}forEach(it,ze){return new(ze=pe(ze))((Ct,We)=>{let Ve;Ve=this.subscribe(Ce=>{try{it(Ce)}catch(vt){We(vt),Ve&&Ve.unsubscribe()}},We,Ct)})}_subscribe(it){const{source:ze}=this;return ze&&ze.subscribe(it)}[de.L](){return this}pipe(...it){return 0===it.length?this:function(Be){return 0===Be.length?Pe.y:1===Be.length?Be[0]:function(it){return Be.reduce((ze,Ct)=>Ct(ze),it)}}(it)(this)}toPromise(it){return new(it=pe(it))((ze,Ct)=>{let We;this.subscribe(Ve=>We=Ve,Ve=>Ct(Ve),()=>ze(We))})}}return Be.create=Ye=>new Be(Ye),Be})();function pe(Be){if(Be||(Be=se.v.Promise||Promise),!Be)throw new Error("no Promise impl found");return Be}},6490:(kt,$e,z)=>{"use strict";z.d($e,{c:()=>ie});var T=z(2494),U=z(4449);const ie={closed:!0,next(Ne){},error(Ne){if(T.v.useDeprecatedSynchronousErrorHandling)throw Ne;(0,U.z)(Ne)},complete(){}}},5197:(kt,$e,z)=>{"use strict";z.d($e,{L:()=>U});var T=z(7393);class U extends T.L{notifyNext(Ne,Se,de,Pe,he){this.destination.next(Se)}notifyError(Ne,Se){this.destination.error(Ne)}notifyComplete(Ne){this.destination.complete()}}},9765:(kt,$e,z)=>{"use strict";z.d($e,{Yc:()=>Pe,xQ:()=>he});var T=z(7574),U=z(7393),ie=z(5319),Ne=z(7971),Se=z(8858),de=z(9181);class Pe extends U.L{constructor(ce){super(ce),this.destination=ce}}let he=(()=>{class se extends T.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[de.b](){return new Pe(this)}lift(pe){const Be=new we(this,this);return Be.operator=pe,Be}next(pe){if(this.closed)throw new Ne.N;if(!this.isStopped){const{observers:Be}=this,Ye=Be.length,it=Be.slice();for(let ze=0;ze<Ye;ze++)it[ze].next(pe)}}error(pe){if(this.closed)throw new Ne.N;this.hasError=!0,this.thrownError=pe,this.isStopped=!0;const{observers:Be}=this,Ye=Be.length,it=Be.slice();for(let ze=0;ze<Ye;ze++)it[ze].error(pe);this.observers.length=0}complete(){if(this.closed)throw new Ne.N;this.isStopped=!0;const{observers:pe}=this,Be=pe.length,Ye=pe.slice();for(let it=0;it<Be;it++)Ye[it].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(pe){if(this.closed)throw new Ne.N;return super._trySubscribe(pe)}_subscribe(pe){if(this.closed)throw new Ne.N;return this.hasError?(pe.error(this.thrownError),ie.w.EMPTY):this.isStopped?(pe.complete(),ie.w.EMPTY):(this.observers.push(pe),new Se.W(this,pe))}asObservable(){const pe=new T.y;return pe.source=this,pe}}return se.create=(ce,pe)=>new we(ce,pe),se})();class we extends he{constructor(ce,pe){super(),this.destination=ce,this.source=pe}next(ce){const{destination:pe}=this;pe&&pe.next&&pe.next(ce)}error(ce){const{destination:pe}=this;pe&&pe.error&&this.destination.error(ce)}complete(){const{destination:ce}=this;ce&&ce.complete&&this.destination.complete()}_subscribe(ce){const{source:pe}=this;return pe?this.source.subscribe(ce):ie.w.EMPTY}}},8858:(kt,$e,z)=>{"use strict";z.d($e,{W:()=>U});var T=z(5319);class U extends T.w{constructor(Ne,Se){super(),this.subject=Ne,this.subscriber=Se,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ne=this.subject,Se=Ne.observers;if(this.subject=null,!Se||0===Se.length||Ne.isStopped||Ne.closed)return;const de=Se.indexOf(this.subscriber);-1!==de&&Se.splice(de,1)}}},7393:(kt,$e,z)=>{"use strict";z.d($e,{L:()=>Pe});var T=z(9105),U=z(6490),ie=z(5319),Ne=z(9181),Se=z(2494),de=z(4449);class Pe extends ie.w{constructor(se,ce,pe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=U.c;break;case 1:if(!se){this.destination=U.c;break}if("object"==typeof se){se instanceof Pe?(this.syncErrorThrowable=se.syncErrorThrowable,this.destination=se,se.add(this)):(this.syncErrorThrowable=!0,this.destination=new he(this,se));break}default:this.syncErrorThrowable=!0,this.destination=new he(this,se,ce,pe)}}[Ne.b](){return this}static create(se,ce,pe){const Be=new Pe(se,ce,pe);return Be.syncErrorThrowable=!1,Be}next(se){this.isStopped||this._next(se)}error(se){this.isStopped||(this.isStopped=!0,this._error(se))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(se){this.destination.next(se)}_error(se){this.destination.error(se),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:se}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=se,this}}class he extends Pe{constructor(se,ce,pe,Be){super(),this._parentSubscriber=se;let Ye,it=this;(0,T.m)(ce)?Ye=ce:ce&&(Ye=ce.next,pe=ce.error,Be=ce.complete,ce!==U.c&&(it=Object.create(ce),(0,T.m)(it.unsubscribe)&&this.add(it.unsubscribe.bind(it)),it.unsubscribe=this.unsubscribe.bind(this))),this._context=it,this._next=Ye,this._error=pe,this._complete=Be}next(se){if(!this.isStopped&&this._next){const{_parentSubscriber:ce}=this;Se.v.useDeprecatedSynchronousErrorHandling&&ce.syncErrorThrowable?this.__tryOrSetError(ce,this._next,se)&&this.unsubscribe():this.__tryOrUnsub(this._next,se)}}error(se){if(!this.isStopped){const{_parentSubscriber:ce}=this,{useDeprecatedSynchronousErrorHandling:pe}=Se.v;if(this._error)pe&&ce.syncErrorThrowable?(this.__tryOrSetError(ce,this._error,se),this.unsubscribe()):(this.__tryOrUnsub(this._error,se),this.unsubscribe());else if(ce.syncErrorThrowable)pe?(ce.syncErrorValue=se,ce.syncErrorThrown=!0):(0,de.z)(se),this.unsubscribe();else{if(this.unsubscribe(),pe)throw se;(0,de.z)(se)}}}complete(){if(!this.isStopped){const{_parentSubscriber:se}=this;if(this._complete){const ce=()=>this._complete.call(this._context);Se.v.useDeprecatedSynchronousErrorHandling&&se.syncErrorThrowable?(this.__tryOrSetError(se,ce),this.unsubscribe()):(this.__tryOrUnsub(ce),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(se,ce){try{se.call(this._context,ce)}catch(pe){if(this.unsubscribe(),Se.v.useDeprecatedSynchronousErrorHandling)throw pe;(0,de.z)(pe)}}__tryOrSetError(se,ce,pe){if(!Se.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ce.call(this._context,pe)}catch(Be){return Se.v.useDeprecatedSynchronousErrorHandling?(se.syncErrorValue=Be,se.syncErrorThrown=!0,!0):((0,de.z)(Be),!0)}return!1}_unsubscribe(){const{_parentSubscriber:se}=this;this._context=null,this._parentSubscriber=null,se.unsubscribe()}}},5319:(kt,$e,z)=>{"use strict";z.d($e,{w:()=>de});var T=z(9796),U=z(1555),ie=z(9105);const Se=(()=>{function he(we){return Error.call(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((se,ce)=>`${ce+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we,this}return he.prototype=Object.create(Error.prototype),he})();class de{constructor(we){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,we&&(this._ctorUnsubscribe=!0,this._unsubscribe=we)}unsubscribe(){let we;if(this.closed)return;let{_parentOrParents:se,_ctorUnsubscribe:ce,_unsubscribe:pe,_subscriptions:Be}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,se instanceof de)se.remove(this);else if(null!==se)for(let Ye=0;Ye<se.length;++Ye)se[Ye].remove(this);if((0,ie.m)(pe)){ce&&(this._unsubscribe=void 0);try{pe.call(this)}catch(Ye){we=Ye instanceof Se?Pe(Ye.errors):[Ye]}}if((0,T.k)(Be)){let Ye=-1,it=Be.length;for(;++Ye<it;){const ze=Be[Ye];if((0,U.K)(ze))try{ze.unsubscribe()}catch(Ct){we=we||[],Ct instanceof Se?we=we.concat(Pe(Ct.errors)):we.push(Ct)}}}if(we)throw new Se(we)}add(we){let se=we;if(!we)return de.EMPTY;switch(typeof we){case"function":se=new de(we);case"object":if(se===this||se.closed||"function"!=typeof se.unsubscribe)return se;if(this.closed)return se.unsubscribe(),se;if(!(se instanceof de)){const Be=se;se=new de,se._subscriptions=[Be]}break;default:throw new Error("unrecognized teardown "+we+" added to Subscription.")}let{_parentOrParents:ce}=se;if(null===ce)se._parentOrParents=this;else if(ce instanceof de){if(ce===this)return se;se._parentOrParents=[ce,this]}else{if(-1!==ce.indexOf(this))return se;ce.push(this)}const pe=this._subscriptions;return null===pe?this._subscriptions=[se]:pe.push(se),se}remove(we){const se=this._subscriptions;if(se){const ce=se.indexOf(we);-1!==ce&&se.splice(ce,1)}}}var he;function Pe(he){return he.reduce((we,se)=>we.concat(se instanceof Se?se.errors:se),[])}de.EMPTY=((he=new de).closed=!0,he)},2494:(kt,$e,z)=>{"use strict";z.d($e,{v:()=>U});let T=!1;const U={Promise:void 0,set useDeprecatedSynchronousErrorHandling(ie){if(ie){const Ne=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Ne.stack)}else T&&console.log("RxJS: Back to a better error behavior. Thank you. <3");T=ie},get useDeprecatedSynchronousErrorHandling(){return T}}},5345:(kt,$e,z)=>{"use strict";z.d($e,{IY:()=>Ne,Ds:()=>de,ft:()=>he});var T=z(7393),U=z(7574),ie=z(7444);class Ne extends T.L{constructor(se){super(),this.parent=se}_next(se){this.parent.notifyNext(se)}_error(se){this.parent.notifyError(se),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class de extends T.L{notifyNext(se){this.destination.next(se)}notifyError(se){this.destination.error(se)}notifyComplete(){this.destination.complete()}}function he(we,se){if(se.closed)return;if(we instanceof U.y)return we.subscribe(se);let ce;try{ce=(0,ie.s)(we)(se)}catch(pe){se.error(pe)}return ce}},2441:(kt,$e,z)=>{"use strict";z.d($e,{c:()=>Se,N:()=>de});var T=z(9765),U=z(7574),ie=z(5319),Ne=z(1307);class Se extends U.y{constructor(ce,pe){super(),this.source=ce,this.subjectFactory=pe,this._refCount=0,this._isComplete=!1}_subscribe(ce){return this.getSubject().subscribe(ce)}getSubject(){const ce=this._subject;return(!ce||ce.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ce=this._connection;return ce||(this._isComplete=!1,ce=this._connection=new ie.w,ce.add(this.source.subscribe(new Pe(this.getSubject(),this))),ce.closed&&(this._connection=null,ce=ie.w.EMPTY)),ce}refCount(){return(0,Ne.x)()(this)}}const de=(()=>{const se=Se.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}}})();class Pe extends T.Yc{constructor(ce,pe){super(ce),this.connectable=pe}_error(ce){this._unsubscribe(),super._error(ce)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ce=this.connectable;if(ce){this.connectable=null;const pe=ce._connection;ce._refCount=0,ce._subject=null,ce._connection=null,pe&&pe.unsubscribe()}}}},8071:(kt,$e,z)=>{"use strict";z.d($e,{z:()=>Ne});var T=z(5917),U=z(3282);function Ne(...Se){return(0,U.J)(1)((0,T.of)(...Se))}},9193:(kt,$e,z)=>{"use strict";z.d($e,{E:()=>U,c:()=>ie});var T=z(7574);const U=new T.y(Se=>Se.complete());function ie(Se){return Se?function(Se){return new T.y(de=>Se.schedule(()=>de.complete()))}(Se):U}},4402:(kt,$e,z)=>{"use strict";z.d($e,{D:()=>it});var T=z(7574),U=z(7444),ie=z(5319),Ne=z(6554),Pe=z(4087),he=z(377),ce=z(4072),pe=z(9489);function it(ze,Ct){return Ct?function(ze,Ct){if(null!=ze){if(function(ze){return ze&&"function"==typeof ze[Ne.L]}(ze))return function(ze,Ct){return new T.y(We=>{const Ve=new ie.w;return Ve.add(Ct.schedule(()=>{const Ce=ze[Ne.L]();Ve.add(Ce.subscribe({next(vt){Ve.add(Ct.schedule(()=>We.next(vt)))},error(vt){Ve.add(Ct.schedule(()=>We.error(vt)))},complete(){Ve.add(Ct.schedule(()=>We.complete()))}}))})),Ve})}(ze,Ct);if((0,ce.t)(ze))return function(ze,Ct){return new T.y(We=>{const Ve=new ie.w;return Ve.add(Ct.schedule(()=>ze.then(Ce=>{Ve.add(Ct.schedule(()=>{We.next(Ce),Ve.add(Ct.schedule(()=>We.complete()))}))},Ce=>{Ve.add(Ct.schedule(()=>We.error(Ce)))}))),Ve})}(ze,Ct);if((0,pe.z)(ze))return(0,Pe.r)(ze,Ct);if(function(ze){return ze&&"function"==typeof ze[he.hZ]}(ze)||"string"==typeof ze)return function(ze,Ct){if(!ze)throw new Error("Iterable cannot be null");return new T.y(We=>{const Ve=new ie.w;let Ce;return Ve.add(()=>{Ce&&"function"==typeof Ce.return&&Ce.return()}),Ve.add(Ct.schedule(()=>{Ce=ze[he.hZ](),Ve.add(Ct.schedule(function(){if(We.closed)return;let vt,Wt;try{const en=Ce.next();vt=en.value,Wt=en.done}catch(en){return void We.error(en)}Wt?We.complete():(We.next(vt),this.schedule())}))})),Ve})}(ze,Ct)}throw new TypeError((null!==ze&&typeof ze||ze)+" is not observable")}(ze,Ct):ze instanceof T.y?ze:new T.y((0,U.s)(ze))}},6693:(kt,$e,z)=>{"use strict";z.d($e,{n:()=>Ne});var T=z(7574),U=z(5015),ie=z(4087);function Ne(Se,de){return de?(0,ie.r)(Se,de):new T.y((0,U.V)(Se))}},6682:(kt,$e,z)=>{"use strict";z.d($e,{T:()=>Se});var T=z(7574),U=z(4869),ie=z(3282),Ne=z(6693);function Se(...de){let Pe=Number.POSITIVE_INFINITY,he=null,we=de[de.length-1];return(0,U.K)(we)?(he=de.pop(),de.length>1&&"number"==typeof de[de.length-1]&&(Pe=de.pop())):"number"==typeof we&&(Pe=de.pop()),null===he&&1===de.length&&de[0]instanceof T.y?de[0]:(0,ie.J)(Pe)((0,Ne.n)(de,he))}},5917:(kt,$e,z)=>{"use strict";z.d($e,{of:()=>Ne});var T=z(4869),U=z(6693),ie=z(4087);function Ne(...Se){let de=Se[Se.length-1];return(0,T.K)(de)?(Se.pop(),(0,ie.r)(Se,de)):(0,U.n)(Se)}},5242:(kt,$e,z)=>{"use strict";z.d($e,{d:()=>U});var T=z(7393);function U(Se=null){return de=>de.lift(new ie(Se))}class ie{constructor(de){this.defaultValue=de}call(de,Pe){return Pe.subscribe(new Ne(de,this.defaultValue))}}class Ne extends T.L{constructor(de,Pe){super(de),this.defaultValue=Pe,this.isEmpty=!0}_next(de){this.isEmpty=!1,this.destination.next(de)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(kt,$e,z)=>{"use strict";z.d($e,{x:()=>U});var T=z(7393);function U(Se,de){return Pe=>Pe.lift(new ie(Se,de))}class ie{constructor(de,Pe){this.compare=de,this.keySelector=Pe}call(de,Pe){return Pe.subscribe(new Ne(de,this.compare,this.keySelector))}}class Ne extends T.L{constructor(de,Pe,he){super(de),this.keySelector=he,this.hasKey=!1,"function"==typeof Pe&&(this.compare=Pe)}compare(de,Pe){return de===Pe}_next(de){let Pe;try{const{keySelector:we}=this;Pe=we?we(de):de}catch(we){return this.destination.error(we)}let he=!1;if(this.hasKey)try{const{compare:we}=this;he=we(this.key,Pe)}catch(we){return this.destination.error(we)}else this.hasKey=!0;he||(this.key=Pe,this.destination.next(de))}}},5435:(kt,$e,z)=>{"use strict";z.d($e,{h:()=>U});var T=z(7393);function U(Se,de){return function(he){return he.lift(new ie(Se,de))}}class ie{constructor(de,Pe){this.predicate=de,this.thisArg=Pe}call(de,Pe){return Pe.subscribe(new Ne(de,this.predicate,this.thisArg))}}class Ne extends T.L{constructor(de,Pe,he){super(de),this.predicate=Pe,this.thisArg=he,this.count=0}_next(de){let Pe;try{Pe=this.predicate.call(this.thisArg,de,this.count++)}catch(he){return void this.destination.error(he)}Pe&&this.destination.next(de)}}},8049:(kt,$e,z)=>{"use strict";z.d($e,{P:()=>Pe});var T=z(3410),U=z(5435),ie=z(5257),Ne=z(5242),Se=z(4635),de=z(4487);function Pe(he,we){const se=arguments.length>=2;return ce=>ce.pipe(he?(0,U.h)((pe,Be)=>he(pe,Be,ce)):de.y,(0,ie.q)(1),se?(0,Ne.d)(we):(0,Se.T)(()=>new T.K))}},8002:(kt,$e,z)=>{"use strict";z.d($e,{U:()=>U});var T=z(7393);function U(Se,de){return function(he){if("function"!=typeof Se)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return he.lift(new ie(Se,de))}}class ie{constructor(de,Pe){this.project=de,this.thisArg=Pe}call(de,Pe){return Pe.subscribe(new Ne(de,this.project,this.thisArg))}}class Ne extends T.L{constructor(de,Pe,he){super(de),this.project=Pe,this.count=0,this.thisArg=he||this}_next(de){let Pe;try{Pe=this.project.call(this.thisArg,de,this.count++)}catch(he){return void this.destination.error(he)}this.destination.next(Pe)}}},3282:(kt,$e,z)=>{"use strict";z.d($e,{J:()=>ie});var T=z(9773),U=z(4487);function ie(Ne=Number.POSITIVE_INFINITY){return(0,T.zg)(U.y,Ne)}},9773:(kt,$e,z)=>{"use strict";z.d($e,{zg:()=>Ne});var T=z(8002),U=z(4402),ie=z(5345);function Ne(he,we,se=Number.POSITIVE_INFINITY){return"function"==typeof we?ce=>ce.pipe(Ne((pe,Be)=>(0,U.D)(he(pe,Be)).pipe((0,T.U)((Ye,it)=>we(pe,Ye,Be,it))),se)):("number"==typeof we&&(se=we),ce=>ce.lift(new Se(he,se)))}class Se{constructor(we,se=Number.POSITIVE_INFINITY){this.project=we,this.concurrent=se}call(we,se){return se.subscribe(new de(we,this.project,this.concurrent))}}class de extends ie.Ds{constructor(we,se,ce=Number.POSITIVE_INFINITY){super(we),this.project=se,this.concurrent=ce,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(we){this.active<this.concurrent?this._tryNext(we):this.buffer.push(we)}_tryNext(we){let se;const ce=this.index++;try{se=this.project(we,ce)}catch(pe){return void this.destination.error(pe)}this.active++,this._innerSub(se)}_innerSub(we){const se=new ie.IY(this),ce=this.destination;ce.add(se);const pe=(0,ie.ft)(we,se);pe!==se&&ce.add(pe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(we){this.destination.next(we)}notifyComplete(){const we=this.buffer;this.active--,we.length>0?this._next(we.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(kt,$e,z)=>{"use strict";z.d($e,{ht:()=>ce,QV:()=>we});var T=z(7393),U=z(9193),ie=z(5917),Ne=z(7574);class he{constructor(Ye,it,ze){this.kind=Ye,this.value=it,this.error=ze,this.hasValue="N"===Ye}observe(Ye){switch(this.kind){case"N":return Ye.next&&Ye.next(this.value);case"E":return Ye.error&&Ye.error(this.error);case"C":return Ye.complete&&Ye.complete()}}do(Ye,it,ze){switch(this.kind){case"N":return Ye&&Ye(this.value);case"E":return it&&it(this.error);case"C":return ze&&ze()}}accept(Ye,it,ze){return Ye&&"function"==typeof Ye.next?this.observe(Ye):this.do(Ye,it,ze)}toObservable(){switch(this.kind){case"N":return(0,ie.of)(this.value);case"E":return Be=this.error,new Ne.y(it=>it.error(Be));case"C":return(0,U.c)()}var Be;throw new Error("unexpected notification kind value")}static createNext(Ye){return void 0!==Ye?new he("N",Ye):he.undefinedValueNotification}static createError(Ye){return new he("E",void 0,Ye)}static createComplete(){return he.completeNotification}}function we(Be,Ye=0){return function(ze){return ze.lift(new se(Be,Ye))}}he.completeNotification=new he("C"),he.undefinedValueNotification=new he("N",void 0);class se{constructor(Ye,it=0){this.scheduler=Ye,this.delay=it}call(Ye,it){return it.subscribe(new ce(Ye,this.scheduler,this.delay))}}class ce extends T.L{constructor(Ye,it,ze=0){super(Ye),this.scheduler=it,this.delay=ze}static dispatch(Ye){const{notification:it,destination:ze}=Ye;it.observe(ze),this.unsubscribe()}scheduleMessage(Ye){this.destination.add(this.scheduler.schedule(ce.dispatch,this.delay,new pe(Ye,this.destination)))}_next(Ye){this.scheduleMessage(he.createNext(Ye))}_error(Ye){this.scheduleMessage(he.createError(Ye)),this.unsubscribe()}_complete(){this.scheduleMessage(he.createComplete()),this.unsubscribe()}}class pe{constructor(Ye,it){this.notification=Ye,this.destination=it}}},1307:(kt,$e,z)=>{"use strict";z.d($e,{x:()=>U});var T=z(7393);function U(){return function(de){return de.lift(new ie(de))}}class ie{constructor(de){this.connectable=de}call(de,Pe){const{connectable:he}=this;he._refCount++;const we=new Ne(de,he),se=Pe.subscribe(we);return we.closed||(we.connection=he.connect()),se}}class Ne extends T.L{constructor(de,Pe){super(de),this.connectable=Pe}_unsubscribe(){const{connectable:de}=this;if(!de)return void(this.connection=null);this.connectable=null;const Pe=de._refCount;if(Pe<=0)return void(this.connection=null);if(de._refCount=Pe-1,Pe>1)return void(this.connection=null);const{connection:he}=this,we=de._connection;this.connection=null,we&&(!he||we===he)&&we.unsubscribe()}}},2145:(kt,$e,z)=>{"use strict";z.d($e,{R:()=>U});var T=z(7393);function U(Se,de){let Pe=!1;return arguments.length>=2&&(Pe=!0),function(we){return we.lift(new ie(Se,de,Pe))}}class ie{constructor(de,Pe,he=!1){this.accumulator=de,this.seed=Pe,this.hasSeed=he}call(de,Pe){return Pe.subscribe(new Ne(de,this.accumulator,this.seed,this.hasSeed))}}class Ne extends T.L{constructor(de,Pe,he,we){super(de),this.accumulator=Pe,this._seed=he,this.hasSeed=we,this.index=0}get seed(){return this._seed}set seed(de){this.hasSeed=!0,this._seed=de}_next(de){if(this.hasSeed)return this._tryNext(de);this.seed=de,this.destination.next(de)}_tryNext(de){const Pe=this.index++;let he;try{he=this.accumulator(this.seed,de,Pe)}catch(we){this.destination.error(we)}this.seed=he,this.destination.next(he)}}},8819:(kt,$e,z)=>{"use strict";z.d($e,{B:()=>Pe});var T=z(2441);var Ne=z(1307),Se=z(9765);function de(){return new Se.xQ}function Pe(){return he=>(0,Ne.x)()(function(he,we){return function(ce){let pe;pe="function"==typeof he?he:function(){return he};const Be=Object.create(ce,T.N);return Be.source=ce,Be.subjectFactory=pe,Be}}(de)(he))}},9761:(kt,$e,z)=>{"use strict";z.d($e,{O:()=>ie});var T=z(8071),U=z(4869);function ie(...Ne){const Se=Ne[Ne.length-1];return(0,U.K)(Se)?(Ne.pop(),de=>(0,T.z)(Ne,de,Se)):de=>(0,T.z)(Ne,de)}},3101:(kt,$e,z)=>{"use strict";z.d($e,{R:()=>Ct});var T=z(7574);let U=1;const ie=Promise.resolve(),Ne={};function Se(Ve){return Ve in Ne&&(delete Ne[Ve],!0)}const de={setImmediate(Ve){const Ce=U++;return Ne[Ce]=!0,ie.then(()=>Se(Ce)&&Ve()),Ce},clearImmediate(Ve){Se(Ve)}};var he=z(6465),se=z(6102);const Be=new class extends se.v{flush(Ce){this.active=!0,this.scheduled=void 0;const{actions:vt}=this;let Wt,en=-1,St=vt.length;Ce=Ce||vt.shift();do{if(Wt=Ce.execute(Ce.state,Ce.delay))break}while(++en<St&&(Ce=vt.shift()));if(this.active=!1,Wt){for(;++en<St&&(Ce=vt.shift());)Ce.unsubscribe();throw Wt}}}(class extends he.o{constructor(Ce,vt){super(Ce,vt),this.scheduler=Ce,this.work=vt}requestAsyncId(Ce,vt,Wt=0){return null!==Wt&&Wt>0?super.requestAsyncId(Ce,vt,Wt):(Ce.actions.push(this),Ce.scheduled||(Ce.scheduled=de.setImmediate(Ce.flush.bind(Ce,null))))}recycleAsyncId(Ce,vt,Wt=0){if(null!==Wt&&Wt>0||null===Wt&&this.delay>0)return super.recycleAsyncId(Ce,vt,Wt);0===Ce.actions.length&&(de.clearImmediate(vt),Ce.scheduled=void 0)}});var Ye=z(9796);class ze extends T.y{constructor(Ce,vt=0,Wt=Be){var Ve;super(),this.source=Ce,this.delayTime=vt,this.scheduler=Wt,(!(!(0,Ye.k)(Ve=vt)&&Ve-parseFloat(Ve)+1>=0)||vt<0)&&(this.delayTime=0),(!Wt||"function"!=typeof Wt.schedule)&&(this.scheduler=Be)}static create(Ce,vt=0,Wt=Be){return new ze(Ce,vt,Wt)}static dispatch(Ce){const{source:vt,subscriber:Wt}=Ce;return this.add(vt.subscribe(Wt))}_subscribe(Ce){return this.scheduler.schedule(ze.dispatch,this.delayTime,{source:this.source,subscriber:Ce})}}function Ct(Ve,Ce=0){return function(Wt){return Wt.lift(new We(Ve,Ce))}}class We{constructor(Ce,vt){this.scheduler=Ce,this.delay=vt}call(Ce,vt){return new ze(vt,this.delay,this.scheduler).subscribe(Ce)}}},3190:(kt,$e,z)=>{"use strict";z.d($e,{w:()=>Ne});var T=z(8002),U=z(4402),ie=z(5345);function Ne(Pe,he){return"function"==typeof he?we=>we.pipe(Ne((se,ce)=>(0,U.D)(Pe(se,ce)).pipe((0,T.U)((pe,Be)=>he(se,pe,ce,Be))))):we=>we.lift(new Se(Pe))}class Se{constructor(he){this.project=he}call(he,we){return we.subscribe(new de(he,this.project))}}class de extends ie.Ds{constructor(he,we){super(he),this.project=we,this.index=0}_next(he){let we;const se=this.index++;try{we=this.project(he,se)}catch(ce){return void this.destination.error(ce)}this._innerSub(we)}_innerSub(he){const we=this.innerSubscription;we&&we.unsubscribe();const se=new ie.IY(this),ce=this.destination;ce.add(se),this.innerSubscription=(0,ie.ft)(he,se),this.innerSubscription!==se&&ce.add(this.innerSubscription)}_complete(){const{innerSubscription:he}=this;(!he||he.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(he){this.destination.next(he)}}},5257:(kt,$e,z)=>{"use strict";z.d($e,{q:()=>Ne});var T=z(7393),U=z(7108),ie=z(9193);function Ne(Pe){return he=>0===Pe?(0,ie.c)():he.lift(new Se(Pe))}class Se{constructor(he){if(this.total=he,this.total<0)throw new U.W}call(he,we){return we.subscribe(new de(he,this.total))}}class de extends T.L{constructor(he,we){super(he),this.total=we,this.count=0}_next(he){const we=this.total,se=++this.count;se<=we&&(this.destination.next(he),se===we&&(this.destination.complete(),this.unsubscribe()))}}},3342:(kt,$e,z)=>{"use strict";z.d($e,{b:()=>Ne});var T=z(7393);function U(){}var ie=z(9105);function Ne(Pe,he,we){return function(ce){return ce.lift(new Se(Pe,he,we))}}class Se{constructor(he,we,se){this.nextOrObserver=he,this.error=we,this.complete=se}call(he,we){return we.subscribe(new de(he,this.nextOrObserver,this.error,this.complete))}}class de extends T.L{constructor(he,we,se,ce){super(he),this._tapNext=U,this._tapError=U,this._tapComplete=U,this._tapError=se||U,this._tapComplete=ce||U,(0,ie.m)(we)?(this._context=this,this._tapNext=we):we&&(this._context=we,this._tapNext=we.next||U,this._tapError=we.error||U,this._tapComplete=we.complete||U)}_next(he){try{this._tapNext.call(this._context,he)}catch(we){return void this.destination.error(we)}this.destination.next(he)}_error(he){try{this._tapError.call(this._context,he)}catch(we){return void this.destination.error(we)}this.destination.error(he)}_complete(){try{this._tapComplete.call(this._context)}catch(he){return void this.destination.error(he)}return this.destination.complete()}}},4635:(kt,$e,z)=>{"use strict";z.d($e,{T:()=>ie});var T=z(3410),U=z(7393);function ie(Pe=de){return he=>he.lift(new Ne(Pe))}class Ne{constructor(he){this.errorFactory=he}call(he,we){return we.subscribe(new Se(he,this.errorFactory))}}class Se extends U.L{constructor(he,we){super(he),this.errorFactory=we,this.hasValue=!1}_next(he){this.hasValue=!0,this.destination.next(he)}_complete(){if(this.hasValue)return this.destination.complete();{let he;try{he=this.errorFactory()}catch(we){he=we}this.destination.error(he)}}}function de(){return new T.K}},4087:(kt,$e,z)=>{"use strict";z.d($e,{r:()=>ie});var T=z(7574),U=z(5319);function ie(Ne,Se){return new T.y(de=>{const Pe=new U.w;let he=0;return Pe.add(Se.schedule(function(){he!==Ne.length?(de.next(Ne[he++]),de.closed||Pe.add(this.schedule())):de.complete()})),Pe})}},6465:(kt,$e,z)=>{"use strict";z.d($e,{o:()=>ie});var T=z(5319);class U extends T.w{constructor(Se,de){super()}schedule(Se,de=0){return this}}class ie extends U{constructor(Se,de){super(Se,de),this.scheduler=Se,this.work=de,this.pending=!1}schedule(Se,de=0){if(this.closed)return this;this.state=Se;const Pe=this.id,he=this.scheduler;return null!=Pe&&(this.id=this.recycleAsyncId(he,Pe,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(he,this.id,de),this}requestAsyncId(Se,de,Pe=0){return setInterval(Se.flush.bind(Se,this),Pe)}recycleAsyncId(Se,de,Pe=0){if(null!==Pe&&this.delay===Pe&&!1===this.pending)return de;clearInterval(de)}execute(Se,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(Se,de);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,de){let he,Pe=!1;try{this.work(Se)}catch(we){Pe=!0,he=!!we&&we||new Error(we)}if(Pe)return this.unsubscribe(),he}_unsubscribe(){const Se=this.id,de=this.scheduler,Pe=de.actions,he=Pe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==he&&Pe.splice(he,1),null!=Se&&(this.id=this.recycleAsyncId(de,Se,null)),this.delay=null}}},6102:(kt,$e,z)=>{"use strict";z.d($e,{v:()=>U});let T=(()=>{class ie{constructor(Se,de=ie.now){this.SchedulerAction=Se,this.now=de}schedule(Se,de=0,Pe){return new this.SchedulerAction(this,Se).schedule(Pe,de)}}return ie.now=()=>Date.now(),ie})();class U extends T{constructor(Ne,Se=T.now){super(Ne,()=>U.delegate&&U.delegate!==this?U.delegate.now():Se()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Ne,Se=0,de){return U.delegate&&U.delegate!==this?U.delegate.schedule(Ne,Se,de):super.schedule(Ne,Se,de)}flush(Ne){const{actions:Se}=this;if(this.active)return void Se.push(Ne);let de;this.active=!0;do{if(de=Ne.execute(Ne.state,Ne.delay))break}while(Ne=Se.shift());if(this.active=!1,de){for(;Ne=Se.shift();)Ne.unsubscribe();throw de}}}},3637:(kt,$e,z)=>{"use strict";z.d($e,{z:()=>ie,P:()=>Ne});var T=z(6465);const ie=new(z(6102).v)(T.o),Ne=ie},7771:(kt,$e,z)=>{"use strict";z.d($e,{c:()=>de,N:()=>Se});var T=z(6465),ie=z(6102);const Se=new class extends ie.v{}(class extends T.o{constructor(he,we){super(he,we),this.scheduler=he,this.work=we}schedule(he,we=0){return we>0?super.schedule(he,we):(this.delay=we,this.state=he,this.scheduler.flush(this),this)}execute(he,we){return we>0||this.closed?super.execute(he,we):this._execute(he,we)}requestAsyncId(he,we,se=0){return null!==se&&se>0||null===se&&this.delay>0?super.requestAsyncId(he,we,se):he.flush(this)}}),de=Se},377:(kt,$e,z)=>{"use strict";z.d($e,{hZ:()=>U});const U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(kt,$e,z)=>{"use strict";z.d($e,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(kt,$e,z)=>{"use strict";z.d($e,{b:()=>T});const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(kt,$e,z)=>{"use strict";z.d($e,{W:()=>U});const U=(()=>{function ie(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ie.prototype=Object.create(Error.prototype),ie})()},3410:(kt,$e,z)=>{"use strict";z.d($e,{K:()=>U});const U=(()=>{function ie(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return ie.prototype=Object.create(Error.prototype),ie})()},7971:(kt,$e,z)=>{"use strict";z.d($e,{N:()=>U});const U=(()=>{function ie(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ie.prototype=Object.create(Error.prototype),ie})()},4449:(kt,$e,z)=>{"use strict";function T(U){setTimeout(()=>{throw U},0)}z.d($e,{z:()=>T})},4487:(kt,$e,z)=>{"use strict";function T(U){return U}z.d($e,{y:()=>T})},9796:(kt,$e,z)=>{"use strict";z.d($e,{k:()=>T});const T=Array.isArray||(U=>U&&"number"==typeof U.length)},9489:(kt,$e,z)=>{"use strict";z.d($e,{z:()=>T});const T=U=>U&&"number"==typeof U.length&&"function"!=typeof U},9105:(kt,$e,z)=>{"use strict";function T(U){return"function"==typeof U}z.d($e,{m:()=>T})},1555:(kt,$e,z)=>{"use strict";function T(U){return null!==U&&"object"==typeof U}z.d($e,{K:()=>T})},4072:(kt,$e,z)=>{"use strict";function T(U){return!!U&&"function"!=typeof U.subscribe&&"function"==typeof U.then}z.d($e,{t:()=>T})},4869:(kt,$e,z)=>{"use strict";function T(U){return U&&"function"==typeof U.schedule}z.d($e,{K:()=>T})},7444:(kt,$e,z)=>{"use strict";z.d($e,{s:()=>ce});var T=z(5015),U=z(4449),Ne=z(377),de=z(6554),he=z(9489),we=z(4072),se=z(1555);const ce=pe=>{if(pe&&"function"==typeof pe[de.L])return(pe=>Be=>{const Ye=pe[de.L]();if("function"!=typeof Ye.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ye.subscribe(Be)})(pe);if((0,he.z)(pe))return(0,T.V)(pe);if((0,we.t)(pe))return(pe=>Be=>(pe.then(Ye=>{Be.closed||(Be.next(Ye),Be.complete())},Ye=>Be.error(Ye)).then(null,U.z),Be))(pe);if(pe&&"function"==typeof pe[Ne.hZ])return(pe=>Be=>{const Ye=pe[Ne.hZ]();for(;;){let it;try{it=Ye.next()}catch(ze){return Be.error(ze),Be}if(it.done){Be.complete();break}if(Be.next(it.value),Be.closed)break}return"function"==typeof Ye.return&&Be.add(()=>{Ye.return&&Ye.return()}),Be})(pe);{const Ye=`You provided ${(0,se.K)(pe)?"an invalid object":`'${pe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ye)}}},5015:(kt,$e,z)=>{"use strict";z.d($e,{V:()=>T});const T=U=>ie=>{for(let Ne=0,Se=U.length;Ne<Se&&!ie.closed;Ne++)ie.next(U[Ne]);ie.complete()}},509:(kt,$e,z)=>{"use strict";z.d($e,{D:()=>Se});var T=z(7393);class U extends T.L{constructor(Pe,he,we){super(),this.parent=Pe,this.outerValue=he,this.outerIndex=we,this.index=0}_next(Pe){this.parent.notifyNext(this.outerValue,Pe,this.outerIndex,this.index++,this)}_error(Pe){this.parent.notifyError(Pe,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ie=z(7444),Ne=z(7574);function Se(de,Pe,he,we,se=new U(de,he,we)){if(!se.closed)return Pe instanceof Ne.y?Pe.subscribe(se):(0,ie.s)(Pe)(se)}},5160:(kt,$e,z)=>{"use strict";var T=z(8583),U=z(7716);class ie extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ne extends ie{static makeCurrent(){(0,T.HT)(new Ne)}onAndCancel(o,l,f){return o.addEventListener(l,f,!1),()=>{o.removeEventListener(l,f,!1)}}dispatchEvent(o,l){o.dispatchEvent(l)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,l){return(l=l||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,l){return"window"===l?window:"document"===l?o:"body"===l?o.body:null}getBaseHref(o){const l=(Se=Se||document.querySelector("base"),Se?Se.getAttribute("href"):null);return null==l?null:function(c){Pe=Pe||document.createElement("a"),Pe.setAttribute("href",c);const o=Pe.pathname;return"/"===o.charAt(0)?o:`/${o}`}(l)}resetBaseElement(){Se=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return(0,T.Mx)(document.cookie,o)}}let Pe,Se=null;const we=new U.OlP("TRANSITION_ID"),ce=[{provide:U.ip1,useFactory:function(c,o,l){return()=>{l.get(U.CZH).donePromise.then(()=>{const f=(0,T.q)(),y=o.querySelectorAll(`style[ng-transition="${c}"]`);for(let D=0;D<y.length;D++)f.remove(y[D])})}},deps:[we,T.K0,U.zs3],multi:!0}];class pe{static init(){(0,U.VLi)(new pe)}addToWindow(o){U.dqk.getAngularTestability=(f,y=!0)=>{const D=o.findTestabilityInTree(f,y);if(null==D)throw new Error("Could not find testability for element.");return D},U.dqk.getAllAngularTestabilities=()=>o.getAllTestabilities(),U.dqk.getAllAngularRootElements=()=>o.getAllRootElements(),U.dqk.frameworkStabilizers||(U.dqk.frameworkStabilizers=[]),U.dqk.frameworkStabilizers.push(f=>{const y=U.dqk.getAllAngularTestabilities();let D=y.length,M=!1;const K=function(X){M=M||X,D--,0==D&&f(M)};y.forEach(function(X){X.whenStable(K)})})}findTestabilityInTree(o,l,f){if(null==l)return null;const y=o.getTestability(l);return null!=y?y:f?(0,T.q)().isShadowRoot(l)?this.findTestabilityInTree(o,l.host,!0):this.findTestabilityInTree(o,l.parentElement,!0):null}}let Be=(()=>{class c{build(){return new XMLHttpRequest}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();const ot=new U.OlP("EventManagerPlugins");let Pt=(()=>{class c{constructor(l,f){this._zone=f,this._eventNameToPlugin=new Map,l.forEach(y=>y.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,f,y){return this._findPluginFor(f).addEventListener(l,f,y)}addGlobalEventListener(l,f,y){return this._findPluginFor(f).addGlobalEventListener(l,f,y)}getZone(){return this._zone}_findPluginFor(l){const f=this._eventNameToPlugin.get(l);if(f)return f;const y=this._plugins;for(let D=0;D<y.length;D++){const M=y[D];if(M.supports(l))return this._eventNameToPlugin.set(l,M),M}throw new Error(`No event manager plugin found for event ${l}`)}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(ot),U.LFG(U.R0b))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();class Yt{constructor(o){this._doc=o}addGlobalEventListener(o,l,f){const y=(0,T.q)().getGlobalEventTarget(this._doc,o);if(!y)throw new Error(`Unsupported event target ${y} for event ${l}`);return this.addEventListener(y,l,f)}}let It=(()=>{class c{constructor(){this._stylesSet=new Set}addStyles(l){const f=new Set;l.forEach(y=>{this._stylesSet.has(y)||(this._stylesSet.add(y),f.add(y))}),this.onStylesAdded(f)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})(),fr=(()=>{class c extends It{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,f,y){l.forEach(D=>{const M=this._doc.createElement("style");M.textContent=D,y.push(f.appendChild(M))})}addHost(l){const f=[];this._addStylesToHost(this._stylesSet,l,f),this._hostNodes.set(l,f)}removeHost(l){const f=this._hostNodes.get(l);f&&f.forEach(Fr),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((f,y)=>{this._addStylesToHost(l,y,f)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(Fr))}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(T.K0))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();function Fr(c){(0,T.q)().remove(c)}const Lr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yr=/%COMP%/g;function Vt(c,o,l){for(let f=0;f<o.length;f++){let y=o[f];Array.isArray(y)?Vt(c,y,l):(y=y.replace(Yr,c),l.push(y))}return l}function on(c){return o=>{if("__ngUnwrap__"===o)return c;!1===c(o)&&(o.preventDefault(),o.returnValue=!1)}}let yr=(()=>{class c{constructor(l,f,y){this.eventManager=l,this.sharedStylesHost=f,this.appId=y,this.rendererByCompId=new Map,this.defaultRenderer=new mn(l)}createRenderer(l,f){if(!l||!f)return this.defaultRenderer;switch(f.encapsulation){case U.ifc.Emulated:{let y=this.rendererByCompId.get(f.id);return y||(y=new kn(this.eventManager,this.sharedStylesHost,f,this.appId),this.rendererByCompId.set(f.id,y)),y.applyToHost(l),y}case 1:case U.ifc.ShadowDom:return new tt(this.eventManager,this.sharedStylesHost,l,f);default:if(!this.rendererByCompId.has(f.id)){const y=Vt(f.id,f.styles,[]);this.sharedStylesHost.addStyles(y),this.rendererByCompId.set(f.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(Pt),U.LFG(fr),U.LFG(U.AFp))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();class mn{constructor(o){this.eventManager=o,this.data=Object.create(null)}destroy(){}createElement(o,l){return l?document.createElementNS(Lr[l]||l,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,l){o.appendChild(l)}insertBefore(o,l,f){o&&o.insertBefore(l,f)}removeChild(o,l){o&&o.removeChild(l)}selectRootElement(o,l){let f="string"==typeof o?document.querySelector(o):o;if(!f)throw new Error(`The selector "${o}" did not match any elements`);return l||(f.textContent=""),f}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,l,f,y){if(y){l=y+":"+l;const D=Lr[y];D?o.setAttributeNS(D,l,f):o.setAttribute(l,f)}else o.setAttribute(l,f)}removeAttribute(o,l,f){if(f){const y=Lr[f];y?o.removeAttributeNS(y,l):o.removeAttribute(`${f}:${l}`)}else o.removeAttribute(l)}addClass(o,l){o.classList.add(l)}removeClass(o,l){o.classList.remove(l)}setStyle(o,l,f,y){y&(U.JOm.DashCase|U.JOm.Important)?o.style.setProperty(l,f,y&U.JOm.Important?"important":""):o.style[l]=f}removeStyle(o,l,f){f&U.JOm.DashCase?o.style.removeProperty(l):o.style[l]=""}setProperty(o,l,f){o[l]=f}setValue(o,l){o.nodeValue=l}listen(o,l,f){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,l,on(f)):this.eventManager.addEventListener(o,l,on(f))}}class kn extends mn{constructor(o,l,f,y){super(o),this.component=f;const D=Vt(y+"-"+f.id,f.styles,[]);l.addStyles(D),this.contentAttr="_ngcontent-%COMP%".replace(Yr,y+"-"+f.id),this.hostAttr="_nghost-%COMP%".replace(Yr,y+"-"+f.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,l){const f=super.createElement(o,l);return super.setAttribute(f,this.contentAttr,""),f}}class tt extends mn{constructor(o,l,f,y){super(o),this.sharedStylesHost=l,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=Vt(y.id,y.styles,[]);for(let M=0;M<D.length;M++){const K=document.createElement("style");K.textContent=D[M],this.shadowRoot.appendChild(K)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,l){return super.appendChild(this.nodeOrShadowRoot(o),l)}insertBefore(o,l,f){return super.insertBefore(this.nodeOrShadowRoot(o),l,f)}removeChild(o,l){return super.removeChild(this.nodeOrShadowRoot(o),l)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let an=(()=>{class c extends Yt{constructor(l){super(l)}supports(l){return!0}addEventListener(l,f,y){return l.addEventListener(f,y,!1),()=>this.removeEventListener(l,f,y)}removeEventListener(l,f,y){return l.removeEventListener(f,y)}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(T.K0))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();const nr=["alt","control","meta","shift"],tn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ni={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},zr={alt:c=>c.altKey,control:c=>c.ctrlKey,meta:c=>c.metaKey,shift:c=>c.shiftKey};let In=(()=>{class c extends Yt{constructor(l){super(l)}supports(l){return null!=c.parseEventName(l)}addEventListener(l,f,y){const D=c.parseEventName(f),M=c.eventCallback(D.fullKey,y,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(l,D.domEventName,M))}static parseEventName(l){const f=l.toLowerCase().split("."),y=f.shift();if(0===f.length||"keydown"!==y&&"keyup"!==y)return null;const D=c._normalizeKey(f.pop());let M="";if(nr.forEach(X=>{const ue=f.indexOf(X);ue>-1&&(f.splice(ue,1),M+=X+".")}),M+=D,0!=f.length||0===D.length)return null;const K={};return K.domEventName=y,K.fullKey=M,K}static getEventFullKey(l){let f="",y=function(c){let o=c.key;if(null==o){if(o=c.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===c.location&&Ni.hasOwnProperty(o)&&(o=Ni[o]))}return tn[o]||o}(l);return y=y.toLowerCase()," "===y?y="space":"."===y&&(y="dot"),nr.forEach(D=>{D!=y&&zr[D](l)&&(f+=D+".")}),f+=y,f}static eventCallback(l,f,y){return D=>{c.getEventFullKey(D)===l&&y.runGuarded(()=>f(D))}}static _normalizeKey(l){return"esc"===l?"escape":l}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(T.K0))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac}),c})();const Cn=(0,U.eFA)(U._c5,"browser",[{provide:U.Lbi,useValue:T.bD},{provide:U.g9A,useValue:function(){Ne.makeCurrent(),pe.init()},multi:!0},{provide:T.K0,useFactory:function(){return(0,U.RDi)(document),document},deps:[]}]),Jr=[[],{provide:U.zSh,useValue:"root"},{provide:U.qLn,useFactory:function(){return new U.qLn},deps:[]},{provide:ot,useClass:an,multi:!0,deps:[T.K0,U.R0b,U.Lbi]},{provide:ot,useClass:In,multi:!0,deps:[T.K0]},[],{provide:yr,useClass:yr,deps:[Pt,fr,U.AFp]},{provide:U.FYo,useExisting:yr},{provide:It,useExisting:fr},{provide:fr,useClass:fr,deps:[T.K0]},{provide:U.dDg,useClass:U.dDg,deps:[U.R0b]},{provide:Pt,useClass:Pt,deps:[ot,U.R0b]},{provide:T.JF,useClass:Be,deps:[]},[]];let Pi=(()=>{class c{constructor(l){if(l)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(l){return{ngModule:c,providers:[{provide:U.AFp,useValue:l.appId},{provide:we,useExisting:U.AFp},ce]}}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(c,12))},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({providers:Jr,imports:[T.ez,U.hGG]}),c})();"undefined"!=typeof window&&window;var Rr=z(5002);const vi=[{path:"",name:"Inicio"},{path:"about-me",name:"Acerca de m\xed"},{path:"projects",name:"Proyectos"},{path:"contact-me",name:"Contacto"}];function vs(c,o){if(1&c){const l=U.EpF();U.TgZ(0,"a",7),U.NdJ("click",function(){const D=U.CHM(l).$implicit;return U.oxw().redirect(D.path)}),U._uU(1),U.qZA()}if(2&c){const l=o.$implicit;U.xp6(1),U.Oqu(l.name)}}function ki(c,o){if(1&c){const l=U.EpF();U.TgZ(0,"a",7),U.NdJ("click",function(){const D=U.CHM(l).$implicit;return U.oxw(2).redirect(D.path)}),U._uU(1),U.qZA()}if(2&c){const l=o.$implicit;U.xp6(1),U.Oqu(l.name)}}function Es(c,o){if(1&c&&(U.TgZ(0,"nav",8),U.YNc(1,ki,2,1,"a",5),U.qZA()),2&c){const l=U.oxw();U.xp6(1),U.Q6J("ngForOf",l.navItems)}}let Fi=(()=>{class c{constructor(l){this.router=l,this.isNavbarActive=!1}get navItems(){return vi}toggleNavbar(){this.isNavbarActive=!this.isNavbarActive}redirect(l){this.isNavbarActive=!1,this.router.navigate([`/${l}`])}}return c.\u0275fac=function(l){return new(l||c)(U.Y36(Rr.F0))},c.\u0275cmp=U.Xpm({type:c,selectors:[["layout-header"]],decls:9,vars:2,consts:[[1,"title"],[1,"dev-name"],[1,"burger-btn",3,"click"],["src","./assets/burger-button.png","alt","burger-button"],[1,"navbar-web"],[3,"click",4,"ngFor","ngForOf"],["class","navbar-mb",4,"ngIf"],[3,"click"],[1,"navbar-mb"]],template:function(l,f){1&l&&(U.TgZ(0,"header"),U.TgZ(1,"div",0),U.TgZ(2,"p",1),U._uU(3,"Juan Eneque"),U.qZA(),U.qZA(),U.TgZ(4,"div",2),U.NdJ("click",function(){return f.toggleNavbar()}),U._UZ(5,"img",3),U.qZA(),U.TgZ(6,"nav",4),U.YNc(7,vs,2,1,"a",5),U.qZA(),U.qZA(),U.YNc(8,Es,2,1,"nav",6)),2&l&&(U.xp6(7),U.Q6J("ngForOf",f.navItems),U.xp6(1),U.Q6J("ngIf",f.isNavbarActive))},directives:[T.sg,T.O5],styles:["header[_ngcontent-%COMP%]{padding:5px;display:grid;align-items:center;grid-template-columns:1fr 30px}@media (min-width: 600px){header[_ngcontent-%COMP%]{grid-template-columns:auto 1fr}}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .dev-icon[_ngcontent-%COMP%]{height:40px;margin:0 5px}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .dev-name[_ngcontent-%COMP%]{margin-left:10px}header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]{display:none;justify-self:right}@media (min-width: 600px){header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]{display:flex}}header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;color:#fff;text-decoration:none;padding:14px 16px}header[_ngcontent-%COMP%]   .navbar-web[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-bottom:1px solid #3c9d93}header[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]{display:block;cursor:pointer;margin:auto}@media (min-width: 600px){header[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]{display:none}}.navbar-mb[_ngcontent-%COMP%]{background-color:#12293d;position:absolute;z-index:1;width:calc(100% - 18px);border-bottom-left-radius:12px;border-bottom-right-radius:12px}.navbar-mb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-size:14px;color:#fff;text-decoration:none;padding:14px 16px;border-bottom:1px solid #19443b}"]}),c})();const hi_socialNetwork={linkedin:"https://www.linkedin.com/in/juan-rolando-eneque-pisfil/",github:"https://github.com/JuanSW18"},hi_firebase={projectId:"portafolio-6640d",appId:"1:428134195571:web:36ccccffbe1d27b246a506",storageBucket:"portafolio-6640d.appspot.com",locationId:"us-central",apiKey:"AIzaSyCRCZ6gmGDAcmHk_j-jG-oxNWOLynrVrH0",authDomain:"portafolio-6640d.firebaseapp.com",messagingSenderId:"428134195571"};let Mn=(()=>{class c{constructor(){}openSocialNetwork(l){const y=Object.create(hi_socialNetwork)[l];window.open(y,"_blank")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=U.Xpm({type:c,selectors:[["layout-footer"]],decls:9,vars:0,consts:[[1,"logo-box",3,"click"],["src","./assets/linkedin-logoz.png","alt","linkedin-logo",1,"logo-img"],[1,"logo-name"],["src","./assets/github-logoz.png","alt","github-logo",1,"logo-img"]],template:function(l,f){1&l&&(U.TgZ(0,"footer"),U.TgZ(1,"div",0),U.NdJ("click",function(){return f.openSocialNetwork("linkedin")}),U._UZ(2,"img",1),U.TgZ(3,"p",2),U._uU(4,"LinkedIn"),U.qZA(),U.qZA(),U.TgZ(5,"div",0),U.NdJ("click",function(){return f.openSocialNetwork("github")}),U._UZ(6,"img",3),U.TgZ(7,"p",2),U._uU(8,"Github"),U.qZA(),U.qZA(),U.qZA())},styles:["footer[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px}footer[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]{cursor:pointer;display:block;text-align:center;margin:20px}footer[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]   .logo-name[_ngcontent-%COMP%]{font-size:12px;margin:2px 0 0;color:#fff}footer[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:24px;margin:0 5px}"]}),c})();const io=[{path:"",component:(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=U.Xpm({type:c,selectors:[["layout-main-container"]],decls:4,vars:0,consts:[[1,"main-container"]],template:function(l,f){1&l&&(U._UZ(0,"layout-header"),U.TgZ(1,"div",0),U._UZ(2,"router-outlet"),U.qZA(),U._UZ(3,"layout-footer"))},directives:[Fi,Rr.lC,Mn],styles:[".main-container[_ngcontent-%COMP%]{display:block;min-height:calc(90vh - 20vh);border-top:1px solid #19443b;border-bottom:1px solid #19443b}@media (min-width: 600px){.main-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;min-height:calc(90vh - 20vh)}}"]}),c})(),children:[{path:"",pathMatch:"full",loadChildren:()=>z.e(257).then(z.bind(z,4257)).then(c=>c.WelcomeModule)},{path:"about-me",loadChildren:()=>z.e(347).then(z.bind(z,347)).then(c=>c.AboutMeModule)},{path:"projects",loadChildren:()=>z.e(560).then(z.bind(z,9560)).then(c=>c.ProjectsModule)},{path:"contact-me",loadChildren:()=>z.e(273).then(z.bind(z,9273)).then(c=>c.ContactMeModule)}]}];let Ei=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({imports:[[Rr.Bz.forRoot(io,{useHash:!0})],Rr.Bz]}),c})(),so=(()=>{class c{constructor(){this.title="portafolio"}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=U.Xpm({type:c,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(l,f){1&l&&(U.TgZ(0,"div",0),U._UZ(1,"router-outlet"),U.qZA())},directives:[Rr.lC],styles:[".container[_ngcontent-%COMP%]{min-height:90vh;background-image:url(background-blurs.519a47ec5aee2c1446f0.png);background-position:center;background-repeat:no-repeat;background-size:cover;border-radius:12px;border:1px solid #19443b}"]}),c})();var wi=z(665);let Wi=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({imports:[[T.ez,wi.u5,wi.UX]]}),c})();var Er=z(8939),Vr=z(7574),Os=z(5917),Xi=z(4402),oi=z(7393),sr=z(3637);class So{constructor(o,l){this.dueTime=o,this.scheduler=l}call(o,l){return l.subscribe(new Hr(o,this.dueTime,this.scheduler))}}class Hr extends oi.L{constructor(o,l,f){super(o),this.dueTime=l,this.scheduler=f,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(o){this.clearDebounce(),this.lastValue=o,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Li,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:o}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(o)}}clearDebounce(){const o=this.debouncedSubscription;null!==o&&(this.remove(o),o.unsubscribe(),this.debouncedSubscription=null)}}function Li(c){c.debouncedNext()}var es=z(8002),Re=z(3190),be=z(6913),Ge=z(3394),Xe=z(8239),yt=z(8026),te=z(3854),dn=z(3910);const Gr="firebasestorage.googleapis.com",Xn="storageBucket";class er extends te.ZR{constructor(o,l){super(ao(o),`Firebase Storage: ${l} (${ao(o)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,er.prototype)}_codeEquals(o){return ao(o)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(o){this.customData.serverResponse=o,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ao(c){return"storage/"+c}function ns(){return new er("unknown","An unknown error occurred, please check the error payload for server response.")}function ks(){return new er("canceled","User canceled the upload/download.")}function ws(){return new er("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ei(c){return new er("invalid-argument",c)}function Ci(){return new er("app-deleted","The Firebase app was deleted.")}function co(c){return new er("invalid-root-operation","The operation '"+c+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fi(c,o){return new er("invalid-format","String does not match format '"+c+"': "+o)}function zi(c){throw new er("internal-error","Internal error: "+c)}class pr{constructor(o,l){this.bucket=o,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const o=encodeURIComponent;return"/b/"+o(this.bucket)+"/o/"+o(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(o,l){let f;try{f=pr.makeFromUrl(o,l)}catch(y){return new pr(o,"")}if(""===f.path)return f;throw new er("invalid-default-bucket","Invalid default bucket '"+o+"'.")}static makeFromUrl(o,l){let f=null;const y="([A-Za-z0-9.\\-_]+)",K=new RegExp("^gs://"+y+"(/(.*))?$","i");function ue(Ns){Ns.path_=decodeURIComponent(Ns.path)}const Le=l.replace(/[.]/g,"\\."),Qi=[{regex:K,indices:{bucket:1,path:3},postModify:function(Ns){"/"===Ns.path.charAt(Ns.path.length-1)&&(Ns.path_=Ns.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Le}/v[A-Za-z0-9_]+/b/${y}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ue},{regex:new RegExp(`^https?://${l===Gr?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${y}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ue}];for(let Ns=0;Ns<Qi.length;Ns++){const hl=Qi[Ns],Oa=hl.regex.exec(o);if(Oa){let sf=Oa[hl.indices.path];sf||(sf=""),f=new pr(Oa[hl.indices.bucket],sf),hl.postModify(f);break}}if(null==f)throw new er("invalid-url","Invalid URL '"+o+"'.");return f}}class hs{constructor(o){this.promise_=Promise.reject(o)}getPromise(){return this.promise_}cancel(o=!1){}}function F(c){return"string"==typeof c||c instanceof String}function Q(c){return B()&&c instanceof Blob}function B(){return"undefined"!=typeof Blob}function ne(c,o,l,f){if(f<o)throw ei(`Invalid value for '${c}'. Expected ${o} or greater.`);if(f>l)throw ei(`Invalid value for '${c}'. Expected ${l} or less.`)}function me(c,o,l){let f=o;return null==l&&(f=`https://${o}`),`${l}://${f}/v0${c}`}function Qe(c){const o=encodeURIComponent;let l="?";for(const f in c)c.hasOwnProperty(f)&&(l=l+(o(f)+"=")+o(c[f])+"&");return l=l.slice(0,-1),l}var Ke=(()=>{return(c=Ke||(Ke={}))[c.NO_ERROR=0]="NO_ERROR",c[c.NETWORK_ERROR=1]="NETWORK_ERROR",c[c.ABORT=2]="ABORT",Ke;var c})();class L{constructor(o,l,f,y,D,M,K,X,ue,Oe,Le){this.url_=o,this.method_=l,this.headers_=f,this.body_=y,this.successCodes_=D,this.additionalRetryCodes_=M,this.callback_=K,this.errorCallback_=X,this.timeout_=ue,this.progressCallback_=Oe,this.connectionFactory_=Le,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((rt,Ft)=>{this.resolve_=rt,this.reject_=Ft,this.start_()})}start_(){const l=(f,y)=>{const D=this.resolve_,M=this.reject_,K=y.connection;if(y.wasSuccessCode)try{const X=this.callback_(K,K.getResponse());void 0!==X?D(X):D()}catch(X){M(X)}else if(null!==K){const X=ns();X.serverResponse=K.getErrorText(),M(this.errorCallback_?this.errorCallback_(K,X):X)}else M(y.canceled?this.appDelete_?Ci():ks():new er("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?l(0,new O(!1,null,!0)):this.backoffId_=function(c,o,l){let f=1,y=null,D=null,M=!1,K=0;function X(){return 2===K}let ue=!1;function Oe(...Jn){ue||(ue=!0,o.apply(null,Jn))}function Le(Jn){y=setTimeout(()=>{y=null,c(Ft,X())},Jn)}function rt(){D&&clearTimeout(D)}function Ft(Jn,...Ai){if(ue)return void rt();if(Jn)return rt(),void Oe.call(null,Jn,...Ai);if(X()||M)return rt(),void Oe.call(null,Jn,...Ai);let Qi;f<64&&(f*=2),1===K?(K=2,Qi=0):Qi=1e3*(f+Math.random()),Le(Qi)}let jt=!1;function Tn(Jn){jt||(jt=!0,rt(),!ue&&(null!==y?(Jn||(K=2),clearTimeout(y),Le(0)):Jn||(K=1)))}return Le(0),D=setTimeout(()=>{M=!0,Tn(!0)},l),Tn}((f,y)=>{if(y)return void f(!1,new O(!1,null,!0));const D=this.connectionFactory_();this.pendingConnection_=D;const M=K=>{null!==this.progressCallback_&&this.progressCallback_(K.loaded,K.lengthComputable?K.total:-1)};null!==this.progressCallback_&&D.addUploadProgressListener(M),D.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&D.removeUploadProgressListener(M),this.pendingConnection_=null;const K=D.getErrorCode()===Ke.NO_ERROR,X=D.getStatus();if(!K||this.isRetryStatusCode_(X)){const Oe=D.getErrorCode()===Ke.ABORT;return void f(!1,new O(!1,null,Oe))}const ue=-1!==this.successCodes_.indexOf(X);f(!0,new O(ue,D))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(o){this.canceled_=!0,this.appDelete_=o||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(o){const l=o>=500&&o<600,y=-1!==[408,429].indexOf(o),D=-1!==this.additionalRetryCodes_.indexOf(o);return l||y||D}}class O{constructor(o,l,f){this.wasSuccessCode=o,this.connection=l,this.canceled=!!f}}function Vi(...c){const o="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==o){const l=new o;for(let f=0;f<c.length;f++)l.append(c[f]);return l.getBlob()}if(B())return new Blob(c);throw new er("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kt{constructor(o,l){this.data=o,this.contentType=l||null}}function Ho(c,o){switch(c){case Sn.RAW:return new Kt(sa(o));case Sn.BASE64:case Sn.BASE64URL:return new Kt(oa(c,o));case Sn.DATA_URL:return new Kt(function(c){const o=new fu(c);return o.base64?oa(Sn.BASE64,o.rest):function(c){let o;try{o=decodeURIComponent(c)}catch(l){throw fi(Sn.DATA_URL,"Malformed data URL.")}return sa(o)}(o.rest)}(o),function(c){return new fu(c).contentType}(o))}throw ns()}function sa(c){const o=[];for(let l=0;l<c.length;l++){let f=c.charCodeAt(l);f<=127?o.push(f):f<=2047?o.push(192|f>>6,128|63&f):55296==(64512&f)?l<c.length-1&&56320==(64512&c.charCodeAt(l+1))?(f=65536|(1023&f)<<10|1023&c.charCodeAt(++l),o.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|63&f)):o.push(239,191,189):56320==(64512&f)?o.push(239,191,189):o.push(224|f>>12,128|f>>6&63,128|63&f)}return new Uint8Array(o)}function oa(c,o){switch(c){case Sn.BASE64:{const y=-1!==o.indexOf("-"),D=-1!==o.indexOf("_");if(y||D)throw fi(c,"Invalid character '"+(y?"-":"_")+"' found: is it base64url encoded?");break}case Sn.BASE64URL:{const y=-1!==o.indexOf("+"),D=-1!==o.indexOf("/");if(y||D)throw fi(c,"Invalid character '"+(y?"+":"/")+"' found: is it base64 encoded?");o=o.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function(c){return atob(c)}(o)}catch(y){throw fi(c,"Invalid character found")}const f=new Uint8Array(l.length);for(let y=0;y<l.length;y++)f[y]=l.charCodeAt(y);return f}class fu{constructor(o){this.base64=!1,this.contentType=null;const l=o.match(/^data:([^,]+)?,/);if(null===l)throw fi(Sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const f=l[1]||null;null!=f&&(this.base64=function(c,o){return c.length>=o.length&&c.substring(c.length-o.length)===o}(f,";base64"),this.contentType=this.base64?f.substring(0,f.length-";base64".length):f),this.rest=o.substring(o.indexOf(",")+1)}}class bn{constructor(o,l){let f=0,y="";Q(o)?(this.data_=o,f=o.size,y=o.type):o instanceof ArrayBuffer?(l?this.data_=new Uint8Array(o):(this.data_=new Uint8Array(o.byteLength),this.data_.set(new Uint8Array(o))),f=this.data_.length):o instanceof Uint8Array&&(l?this.data_=o:(this.data_=new Uint8Array(o.length),this.data_.set(o)),f=o.length),this.size_=f,this.type_=y}size(){return this.size_}type(){return this.type_}slice(o,l){if(Q(this.data_)){const y=function(c,o,l){return c.webkitSlice?c.webkitSlice(o,l):c.mozSlice?c.mozSlice(o,l):c.slice?c.slice(o,l):null}(this.data_,o,l);return null===y?null:new bn(y)}{const f=new Uint8Array(this.data_.buffer,o,l-o);return new bn(f,!0)}}static getBlob(...o){if(B()){const l=o.map(f=>f instanceof bn?f.data_:f);return new bn(Vi.apply(null,l))}{const l=o.map(M=>F(M)?Ho(Sn.RAW,M).data:M.data_);let f=0;l.forEach(M=>{f+=M.byteLength});const y=new Uint8Array(f);let D=0;return l.forEach(M=>{for(let K=0;K<M.length;K++)y[D++]=M[K]}),new bn(y,!0)}}uploadData(){return this.data_}}function aa(c){let o;try{o=JSON.parse(c)}catch(l){return null}return function(c){return"object"==typeof c&&!Array.isArray(c)}(o)?o:null}function Go(c){const o=c.lastIndexOf("/",c.length-2);return-1===o?c:c.slice(o+1)}function bs(c,o){return o}class pi{constructor(o,l,f,y){this.server=o,this.local=l||o,this.writable=!!f,this.xform=y||bs}}let Gs=null;function Ba(){if(Gs)return Gs;const c=[];c.push(new pi("bucket")),c.push(new pi("generation")),c.push(new pi("metageneration")),c.push(new pi("name","fullPath",!0));const l=new pi("name");l.xform=function(D,M){return function(c){return!F(c)||c.length<2?c:Go(c)}(M)},c.push(l);const y=new pi("size");return y.xform=function(D,M){return void 0!==M?Number(M):M},c.push(y),c.push(new pi("timeCreated")),c.push(new pi("updated")),c.push(new pi("md5Hash",null,!0)),c.push(new pi("cacheControl",null,!0)),c.push(new pi("contentDisposition",null,!0)),c.push(new pi("contentEncoding",null,!0)),c.push(new pi("contentLanguage",null,!0)),c.push(new pi("contentType",null,!0)),c.push(new pi("metadata","customMetadata",!0)),Gs=c,Gs}function gi(c,o,l){const f=aa(o);return null===f?null:function(c,o,l){const f={type:"file"},y=l.length;for(let D=0;D<y;D++){const M=l[D];f[M.local]=M.xform(f,o[M.server])}return function(c,o){Object.defineProperty(c,"ref",{get:function(){const D=new pr(c.bucket,c.fullPath);return o._makeStorageReference(D)}})}(f,c),f}(c,f,l)}function ua(c,o){const l={},f=o.length;for(let y=0;y<f;y++){const D=o[y];D.writable&&(l[D.server]=c[D.local])}return JSON.stringify(l)}const Ro="prefixes";class Is{constructor(o,l,f,y){this.url=o,this.method=l,this.handler=f,this.timeout=y,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qs(c){if(!c)throw ns()}function ba(c,o){return function(f,y){const D=gi(c,y,o);return qs(null!==D),D}}function la(c){return function(l,f){let y;return y=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?new er("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new er("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===l.getStatus()?function(c){return new er("quota-exceeded","Quota for bucket '"+c+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(c.bucket):403===l.getStatus()?function(c){return new er("unauthorized","User does not have permission to access '"+c+"'.")}(c.path):f,y.serverResponse=f.serverResponse,y}}function Wo(c){const o=la(c);return function(f,y){let D=o(f,y);return 404===f.getStatus()&&(D=function(c){return new er("object-not-found","Object '"+c+"' does not exist.")}(c.path)),D.serverResponse=y.serverResponse,D}}function ja(c,o,l){const y=me(o.fullServerUrl(),c.host,c._protocol),M=c.maxOperationRetryTime,K=new Is(y,"GET",ba(c,l),M);return K.errorHandler=Wo(o),K}function ca(c,o,l,f,y){const D={};D.prefix=o.isRoot?"":o.path+"/",l&&l.length>0&&(D.delimiter=l),f&&(D.pageToken=f),y&&(D.maxResults=y);const K=me(o.bucketOnlyServerUrl(),c.host,c._protocol),ue=c.maxOperationRetryTime,Oe=new Is(K,"GET",function(c,o){return function(f,y){const D=function(c,o,l){const f=aa(l);return null===f?null:function(c,o,l){const f={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Ro])for(const y of l[Ro]){const D=y.replace(/\/$/,""),M=c._makeStorageReference(new pr(o,D));f.prefixes.push(M)}if(l.items)for(const y of l.items){const D=c._makeStorageReference(new pr(o,y.name));f.items.push(D)}return f}(c,o,f)}(c,o,y);return qs(null!==D),D}}(c,o.bucket),ue);return Oe.urlParams=D,Oe.errorHandler=la(o),Oe}function mu(c,o,l){const f=Object.assign({},l);return f.fullPath=c.path,f.size=o.size(),f.contentType||(f.contentType=function(c,o){return o&&o.type()||"application/octet-stream"}(0,o)),f}class bi{constructor(o,l,f,y){this.current=o,this.total=l,this.finalized=!!f,this.metadata=y||null}}function fo(c,o){let l=null;try{l=c.getResponseHeader("X-Goog-Upload-Status")}catch(y){qs(!1)}return qs(!!l&&-1!==(o||["active"]).indexOf(l)),l}const da={STATE_CHANGED:"state_changed"},Ii={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yu(c){switch(c){case"running":case"pausing":case"canceling":return Ii.RUNNING;case"paused":return Ii.PAUSED;case"success":return Ii.SUCCESS;case"canceled":return Ii.CANCELED;default:return Ii.ERROR}}class zo{constructor(o,l,f){if("function"==typeof o||null!=l||null!=f)this.next=o,this.error=null!=l?l:void 0,this.complete=null!=f?f:void 0;else{const D=o;this.next=D.next,this.error=D.error,this.complete=D.complete}}}function Zs(c){return(...o)=>{Promise.resolve().then(()=>c(...o))}}class vu extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ke.NO_ERROR,this.sendPromise_=new Promise(o=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ke.ABORT,o()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ke.NETWORK_ERROR,o()}),this.xhr_.addEventListener("load",()=>{o()})})}send(o,l,f,y){if(this.sent_)throw zi("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,o,!0),void 0!==y)for(const D in y)y.hasOwnProperty(D)&&this.xhr_.setRequestHeader(D,y[D].toString());return void 0!==f?this.xhr_.send(f):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zi("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zi("cannot .getStatus() before sending");try{return this.xhr_.status}catch(o){return-1}}getResponse(){if(!this.sent_)throw zi("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zi("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(o){return this.xhr_.getResponseHeader(o)}addUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",o)}removeUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",o)}}{initXhr(){this.xhr_.responseType="text"}}function Ds(){return new vu}class po{constructor(o,l,f=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=o,this._blob=l,this._metadata=f,this._mappings=Ba(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=y=>{this._request=void 0,this._chunkMultiplier=1,y._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=y,this._transition("error"))},this._metadataErrorHandler=y=>{this._request=void 0,y._codeEquals("canceled")?this.completeTransitions_():(this._error=y,this._transition("error"))},this._promise=new Promise((y,D)=>{this._resolve=y,this._reject=D,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const o=this._transferred;return l=>this._updateProgress(o+l)}_shouldDoResumable(o){return o.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(o){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,f])=>{switch(this._state){case"running":o(l,f);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((o,l)=>{const f=function(c,o,l,f,y){const D=o.bucketOnlyServerUrl(),M=mu(o,f,y),K={name:M.fullPath},X=me(D,c.host,c._protocol),Oe={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${f.size()}`,"X-Goog-Upload-Header-Content-Type":M.contentType,"Content-Type":"application/json; charset=utf-8"},Le=ua(M,l),jt=new Is(X,"POST",function(Tn){let Jn;fo(Tn);try{Jn=Tn.getResponseHeader("X-Goog-Upload-URL")}catch(Ai){qs(!1)}return qs(F(Jn)),Jn},c.maxUploadRetryTime);return jt.urlParams=K,jt.headers=Oe,jt.body=Le,jt.errorHandler=la(o),jt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(f,Ds,o,l);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._uploadUrl=D,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const o=this._uploadUrl;this._resolveToken((l,f)=>{const y=function(c,o,l,f){const X=new Is(l,"POST",function(ue){const Oe=fo(ue,["active","final"]);let Le=null;try{Le=ue.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ft){qs(!1)}Le||qs(!1);const rt=Number(Le);return qs(!isNaN(rt)),new bi(rt,f.size(),"final"===Oe)},c.maxUploadRetryTime);return X.headers={"X-Goog-Upload-Command":"query"},X.errorHandler=la(o),X}(this._ref.storage,this._ref._location,o,this._blob),D=this._ref.storage._makeRequest(y,Ds,l,f);this._request=D,D.getPromise().then(M=>{this._request=void 0,this._updateProgress(M.current),this._needToFetchStatus=!1,M.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const o=262144*this._chunkMultiplier,l=new bi(this._transferred,this._blob.size()),f=this._uploadUrl;this._resolveToken((y,D)=>{let M;try{M=function(c,o,l,f,y,D,M,K){const X=new bi(0,0);if(M?(X.current=M.current,X.total=M.total):(X.current=0,X.total=f.size()),f.size()!==X.total)throw new er("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const ue=X.total-X.current;let Oe=ue;y>0&&(Oe=Math.min(Oe,y));const Le=X.current,jt={"X-Goog-Upload-Command":Oe===ue?"upload, finalize":"upload","X-Goog-Upload-Offset":`${X.current}`},Tn=f.slice(Le,Le+Oe);if(null===Tn)throw ws();const Qi=new Is(l,"POST",function(Ns,hl){const Oa=fo(Ns,["active","final"]),hp=X.current+Oe,sf=f.size();let hg;return hg="final"===Oa?ba(o,D)(Ns,hl):null,new bi(hp,sf,"final"===Oa,hg)},o.maxUploadRetryTime);return Qi.headers=jt,Qi.body=Tn.uploadData(),Qi.progressCallback=K||null,Qi.errorHandler=la(c),Qi}(this._ref._location,this._ref.storage,f,this._blob,o,this._mappings,l,this._makeProgressCallback())}catch(X){return this._error=X,void this._transition("error")}const K=this._ref.storage._makeRequest(M,Ds,y,D);this._request=K,K.getPromise().then(X=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(X.current),X.finalized?(this._metadata=X.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((o,l)=>{const f=ja(this._ref.storage,this._ref._location,this._mappings),y=this._ref.storage._makeRequest(f,Ds,o,l);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._metadata=D,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((o,l)=>{const f=function(c,o,l,f,y){const D=o.bucketOnlyServerUrl(),M={"X-Goog-Upload-Protocol":"multipart"},X=function(){let Qi="";for(let Ns=0;Ns<2;Ns++)Qi+=Math.random().toString().slice(2);return Qi}();M["Content-Type"]="multipart/related; boundary="+X;const ue=mu(o,f,y),Oe=ua(ue,l),Ft=bn.getBlob("--"+X+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Oe+"\r\n--"+X+"\r\nContent-Type: "+ue.contentType+"\r\n\r\n",f,"\r\n--"+X+"--");if(null===Ft)throw ws();const jt={name:ue.fullPath},Tn=me(D,c.host,c._protocol),Ai=c.maxUploadRetryTime,js=new Is(Tn,"POST",ba(c,l),Ai);return js.urlParams=jt,js.headers=M,js.body=Ft.uploadData(),js.errorHandler=la(o),js}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(f,Ds,o,l);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._metadata=D,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(o){const l=this._transferred;this._transferred=o,this._transferred!==l&&this._notifyObservers()}_transition(o){if(this._state!==o)switch(o){case"canceling":case"pausing":this._state=o,void 0!==this._request&&this._request.cancel();break;case"running":const l="paused"===this._state;this._state=o,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=o,this._notifyObservers();break;case"canceled":this._error=ks(),this._state=o,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const o=yu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:o,metadata:this._metadata,task:this,ref:this._ref}}on(o,l,f,y){const D=new zo(l||void 0,f||void 0,y||void 0);return this._addObserver(D),()=>{this._removeObserver(D)}}then(o,l){return this._promise.then(o,l)}catch(o){return this.then(null,o)}_addObserver(o){this._observers.push(o),this._notifyObserver(o)}_removeObserver(o){const l=this._observers.indexOf(o);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let o=!0;switch(yu(this._state)){case Ii.SUCCESS:Zs(this._resolve.bind(null,this.snapshot))();break;case Ii.CANCELED:case Ii.ERROR:Zs(this._reject.bind(null,this._error))();break;default:o=!1}o&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(o){switch(yu(this._state)){case Ii.RUNNING:case Ii.PAUSED:o.next&&Zs(o.next.bind(o,this.snapshot))();break;case Ii.SUCCESS:o.complete&&Zs(o.complete.bind(o))();break;default:o.error&&Zs(o.error.bind(o,this._error))()}}resume(){const o="paused"===this._state||"pausing"===this._state;return o&&this._transition("running"),o}pause(){const o="running"===this._state;return o&&this._transition("pausing"),o}cancel(){const o="running"===this._state||"pausing"===this._state;return o&&this._transition("canceling"),o}}class rs{constructor(o,l){this._service=o,this._location=l instanceof pr?l:pr.makeFromUrl(l,o.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(o,l){return new rs(o,l)}get root(){const o=new pr(this._location.bucket,"");return this._newRef(this._service,o)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Go(this._location.path)}get storage(){return this._service}get parent(){const o=function(c){if(0===c.length)return null;const o=c.lastIndexOf("/");return-1===o?"":c.slice(0,o)}(this._location.path);if(null===o)return null;const l=new pr(this._location.bucket,o);return new rs(this._service,l)}_throwIfRoot(o){if(""===this._location.path)throw co(o)}}function Cl(c,o,l){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,Xe.Z)(function*(c,o,l){const y=yield Zl(c,{pageToken:l});o.prefixes.push(...y.prefixes),o.items.push(...y.items),null!=y.nextPageToken&&(yield Cl(c,o,y.nextPageToken))})).apply(this,arguments)}function Zl(c,o){null!=o&&"number"==typeof o.maxResults&&ne("options.maxResults",1,1e3,o.maxResults);const l=o||{},f=ca(c.storage,c._location,"/",l.pageToken,l.maxResults);return c.storage.makeRequestWithTokens(f,Ds)}function hf(c){c._throwIfRoot("getDownloadURL");const o=function(c,o,l){const y=me(o.fullServerUrl(),c.host,c._protocol),M=c.maxOperationRetryTime,K=new Is(y,"GET",function(c,o){return function(f,y){const D=gi(c,y,o);return qs(null!==D),function(c,o,l,f){const y=aa(o);if(null===y||!F(y.downloadTokens))return null;const D=y.downloadTokens;if(0===D.length)return null;const M=encodeURIComponent;return D.split(",").map(ue=>{const Le=c.fullPath;return me("/b/"+M(c.bucket)+"/o/"+M(Le),l,f)+Qe({alt:"media",token:ue})})[0]}(D,y,c.host,c._protocol)}}(c,l),M);return K.errorHandler=Wo(o),K}(c.storage,c._location,Ba());return c.storage.makeRequestWithTokens(o,Ds).then(l=>{if(null===l)throw new er("no-download-url","The given file does not have any download URLs.");return l})}function zu(c,o){const l=function(c,o){const l=o.split("/").filter(f=>f.length>0).join("/");return 0===c.length?l:c+"/"+l}(c._location.path,o),f=new pr(c._location.bucket,l);return new rs(c.storage,f)}function Ko(c,o){if(c instanceof ft){const l=c;if(null==l._bucket)throw new er("no-default-bucket","No default bucket found. Did you set the '"+Xn+"' property when initializing the app?");const f=new rs(l,l._bucket);return null!=o?Ko(f,o):f}return void 0!==o?zu(c,o):c}function pa(c,o){if(o&&function(c){return/^[A-Za-z]+:\/\//.test(c)}(o)){if(c instanceof ft)return function(c,o){return new rs(c,o)}(c,o);throw ei("To use ref(service, url), the first argument must be a Storage instance.")}return Ko(c,o)}function Eu(c,o){const l=null==o?void 0:o[Xn];return null==l?null:pr.makeFromBucketSpec(l,c)}class ft{constructor(o,l,f,y,D){this.app=o,this._authProvider=l,this._appCheckProvider=f,this._url=y,this._firebaseVersion=D,this._bucket=null,this._host=Gr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=y?pr.makeFromBucketSpec(y,this._host):Eu(this._host,this.app.options)}get host(){return this._host}set host(o){this._host=o,this._bucket=null!=this._url?pr.makeFromBucketSpec(this._url,o):Eu(o,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(o){ne("time",0,Number.POSITIVE_INFINITY,o),this._maxUploadRetryTime=o}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(o){ne("time",0,Number.POSITIVE_INFINITY,o),this._maxOperationRetryTime=o}_getAuthToken(){var o=this;return(0,Xe.Z)(function*(){if(o._overrideAuthToken)return o._overrideAuthToken;const l=o._authProvider.getImmediate({optional:!0});if(l){const f=yield l.getToken();if(null!==f)return f.accessToken}return null})()}_getAppCheckToken(){var o=this;return(0,Xe.Z)(function*(){const l=o._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(o=>o.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(o){return new rs(this,o)}_makeRequest(o,l,f,y){if(this._deleted)return new hs(Ci());{const D=function(c,o,l,f,y,D){const M=Qe(c.urlParams),K=c.url+M,X=Object.assign({},c.headers);return function(c,o){o&&(c["X-Firebase-GMPID"]=o)}(X,o),function(c,o){null!==o&&o.length>0&&(c.Authorization="Firebase "+o)}(X,l),function(c,o){c["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager")}(X,D),function(c,o){null!==o&&(c["X-Firebase-AppCheck"]=o)}(X,f),new L(K,c.method,X,c.body,c.successCodes,c.additionalRetryCodes,c.handler,c.errorHandler,c.timeout,c.progressCallback,y)}(o,this._appId,f,y,l,this._firebaseVersion);return this._requests.add(D),D.getPromise().then(()=>this._requests.delete(D),()=>this._requests.delete(D)),D}}makeRequestWithTokens(o,l){var f=this;return(0,Xe.Z)(function*(){const[y,D]=yield Promise.all([f._getAuthToken(),f._getAppCheckToken()]);return f._makeRequest(o,l,y,D).getPromise()})()}}const Br="@firebase/storage";function V(c,o){return pa(c=(0,te.m9)(c),o)}(0,yt._registerComponent)(new dn.wA("storage",function(c,{instanceIdentifier:o}){const l=c.getProvider("app").getImmediate(),f=c.getProvider("auth-internal"),y=c.getProvider("app-check-internal");return new ft(l,f,y,o,yt.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,yt.registerVersion)(Br,"0.9.9",""),(0,yt.registerVersion)(Br,"0.9.9","esm2017");class gt{constructor(o,l,f){this._delegate=o,this.task=l,this.ref=f}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class An{constructor(o,l){this._delegate=o,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new gt(this._delegate.snapshot,this,this._ref)}then(o,l){return this._delegate.then(f=>{if(o)return o(new gt(f,this,this._ref))},l)}on(o,l,f,y){let D;return l&&(D="function"==typeof l?M=>l(new gt(M,this,this._ref)):{next:l.next?M=>l.next(new gt(M,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(o,D,f||void 0,y||void 0)}}class Pn{constructor(o,l){this._delegate=o,this._service=l}get prefixes(){return this._delegate.prefixes.map(o=>new Gn(o,this._service))}get items(){return this._delegate.items.map(o=>new Gn(o,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gn{constructor(o,l){this._delegate=o,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(o){const l=function(c,o){return zu(c,o)}(this._delegate,o);return new Gn(l,this.storage)}get root(){return new Gn(this._delegate.root,this.storage)}get parent(){const o=this._delegate.parent;return null==o?null:new Gn(o,this.storage)}put(o,l){return this._throwIfRoot("put"),new An(function(c,o,l){return function(c,o,l){return c._throwIfRoot("uploadBytesResumable"),new po(c,new bn(o),l)}(c=(0,te.m9)(c),o,l)}(this._delegate,o,l),this)}putString(o,l=Sn.RAW,f){this._throwIfRoot("putString");const y=Ho(l,o),D=Object.assign({},f);return null==D.contentType&&null!=y.contentType&&(D.contentType=y.contentType),new An(new po(this._delegate,new bn(y.data,!0),D),this)}listAll(){return(c=this._delegate,function(c){const o={prefixes:[],items:[]};return Cl(c,o).then(()=>o)}(c=(0,te.m9)(c))).then(o=>new Pn(o,this.storage));var c}list(o){return function(c,o){return Zl(c=(0,te.m9)(c),o)}(this._delegate,o||void 0).then(l=>new Pn(l,this.storage))}getMetadata(){return function(c){c._throwIfRoot("getMetadata");const o=ja(c.storage,c._location,Ba());return c.storage.makeRequestWithTokens(o,Ds)}((0,te.m9)(this._delegate))}updateMetadata(o){return function(c,o){return function(c,o){c._throwIfRoot("updateMetadata");const l=function(c,o,l,f){const D=me(o.fullServerUrl(),c.host,c._protocol),K=ua(l,f),ue=c.maxOperationRetryTime,Oe=new Is(D,"PATCH",ba(c,f),ue);return Oe.headers={"Content-Type":"application/json; charset=utf-8"},Oe.body=K,Oe.errorHandler=Wo(o),Oe}(c.storage,c._location,o,Ba());return c.storage.makeRequestWithTokens(l,Ds)}(c=(0,te.m9)(c),o)}(this._delegate,o)}getDownloadURL(){return hf((0,te.m9)(this._delegate))}delete(){return this._throwIfRoot("delete"),function(c){c._throwIfRoot("deleteObject");const o=function(c,o){const f=me(o.fullServerUrl(),c.host,c._protocol),K=new Is(f,"DELETE",function(X,ue){},c.maxOperationRetryTime);return K.successCodes=[200,204],K.errorHandler=Wo(o),K}(c.storage,c._location);return c.storage.makeRequestWithTokens(o,Ds)}((0,te.m9)(this._delegate))}_throwIfRoot(o){if(""===this._delegate._location.path)throw co(o)}}class Ht{constructor(o,l){this.app=o,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(o){if(Ts(o))throw ei("ref() expected a child path but got a URL, use refFromURL instead.");return new Gn(V(this._delegate,o),this)}refFromURL(o){if(!Ts(o))throw ei("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pr.makeFromUrl(o,this._delegate.host)}catch(l){throw ei("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gn(V(this._delegate,o),this)}setMaxUploadRetryTime(o){this._delegate.maxUploadRetryTime=o}setMaxOperationRetryTime(o){this._delegate.maxOperationRetryTime=o}useEmulator(o,l,f={}){!function(c,o,l,f={}){!function(c,o,l,f={}){c.host=`${o}:${l}`,c._protocol="http";const{mockUserToken:y}=f;y&&(c._overrideAuthToken="string"==typeof y?y:(0,te.Sg)(y,c.app.options.projectId))}(c,o,l,f)}(this._delegate,o,l,f)}}function Ts(c){return/^[A-Za-z]+:\/\//.test(c)}function Mt(c,{instanceIdentifier:o}){const l=c.getProvider("app-compat").getImmediate(),f=c.getProvider("storage").getImmediate({identifier:o});return new Ht(l,f)}!function(c){const o={TaskState:Ii,TaskEvent:da,StringFormat:Sn,Storage:Ht,Reference:Gn};c.INTERNAL.registerComponent(new dn.wA("storage-compat",Mt,"PUBLIC").setServiceProps(o).setMultipleInstances(!0)),c.registerVersion("@firebase/storage-compat","0.1.17")}(Ge.Z);var Ql=z(905),wu=z(7841);function Jl(c){const o=function(c){return new Vr.y(o=>{const l=M=>o.next(M);l(c.snapshot);const D=c.on("state_changed",l);return c.then(M=>{l(M),o.complete()},M=>{l(c.snapshot),(M=>{o.error(M)})(M)}),function(){D()}}).pipe(function(c,o=sr.P){return l=>l.lift(new So(c,o))}(0))}(c);return{task:c,then:c.then.bind(c),catch:c.catch.bind(c),pause:c.pause.bind(c),cancel:c.cancel.bind(c),resume:c.resume.bind(c),snapshotChanges:()=>o,percentageChanges:()=>o.pipe((0,es.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function xc(c){return{getDownloadURL:()=>(0,Os.of)(void 0).pipe(be.fc,(0,Re.w)(()=>c.getDownloadURL()),be.iC),getMetadata:()=>(0,Os.of)(void 0).pipe(be.fc,(0,Re.w)(()=>c.getMetadata()),be.iC),delete:()=>(0,Xi.D)(c.delete()),child:o=>xc(c.child(o)),updateMetadata:o=>(0,Xi.D)(c.updateMetadata(o)),put:(o,l)=>Jl(c.put(o,l)),putString:(o,l,f)=>Jl(c.putString(o,l,f)),list:o=>(0,Xi.D)(c.list(o)),listAll:()=>(0,Xi.D)(c.listAll())}}const yp=new U.OlP("angularfire2.storageBucket"),Zo=new U.OlP("angularfire2.storage.maxUploadRetryTime"),Cu=new U.OlP("angularfire2.storage.maxOperationRetryTime"),ff=new U.OlP("angularfire2.storage.use-emulator");let pf=(()=>{class c{constructor(l,f,y,D,M,K,X,ue,Oe,Le){const rt=(0,Er.on)(l,M,f);this.storage=(0,Er.cc)(`${rt.name}.storage.${y}`,"AngularFireStorage",rt.name,()=>{const Ft=M.runOutsideAngular(()=>rt.storage(y||void 0)),jt=Oe;return jt&&Ft.useEmulator(...jt),X&&Ft.setMaxUploadRetryTime(X),ue&&Ft.setMaxOperationRetryTime(ue),Ft},[X,ue])}ref(l){return xc(this.storage.ref(l))}refFromURL(l){return xc(this.storage.refFromURL(l))}upload(l,f,y){return xc(this.storage.ref(l)).put(f,y)}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(Er.Dh),U.LFG(Er.xv,8),U.LFG(yp,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(be.HU),U.LFG(Zo,8),U.LFG(Cu,8),U.LFG(ff,8),U.LFG(Ql.nm,8))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Wa=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({}),c})(),Ze=(()=>{class c{constructor(){wu.Z.registerVersion("angularfire",be.q4.full,"gcs-compat")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({providers:[pf],imports:[Wa]}),c})();var _i=z(2278),Vs=z(6682),Il=z(8819),qu=z(2145),Oo=z(7519),mo=z(5197),ps=z(509);class ko{constructor(o,l){this.observables=o,this.project=l}call(o,l){return l.subscribe(new Zu(o,this.observables,this.project))}}class Zu extends mo.L{constructor(o,l,f){super(o),this.observables=l,this.project=f,this.toRespond=[];const y=l.length;this.values=new Array(y);for(let D=0;D<y;D++)this.toRespond.push(D);for(let D=0;D<y;D++)this.add((0,ps.D)(this,l[D],void 0,D))}notifyNext(o,l,f){this.values[f]=l;const y=this.toRespond;if(y.length>0){const D=y.indexOf(f);-1!==D&&y.splice(D,1)}}notifyComplete(){}_next(o){if(0===this.toRespond.length){const l=[o,...this.values];this.project?this._tryProject(l):this.destination.next(l)}}_tryProject(o){let l;try{l=this.project.apply(this,o)}catch(f){return void this.destination.error(f)}this.destination.next(l)}}class Fo{constructor(o){this.predicate=o}call(o,l){return l.subscribe(new ph(o,this.predicate))}}class ph extends oi.L{constructor(o,l){super(o),this.predicate=l,this.skipping=!0,this.index=0}_next(o){const l=this.destination;this.skipping&&this.tryCallPredicate(o),this.skipping||l.next(o)}tryCallPredicate(o){try{const l=this.predicate(o,this.index++);this.skipping=Boolean(l)}catch(l){this.destination.error(l)}}}z(1530);var za=z(5422);const ri="@firebase/database";let ji="";function zn(c){ji=c}class mf{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,l){null==l?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,te.Pz)(l))}get(o){const l=this.domStorage_.getItem(this.prefixedName_(o));return null==l?null:(0,te.cI)(l)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Qs{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,l){null==l?delete this.cache_[o]:this.cache_[o]=l}get(o){return(0,te.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const _o=function(c){try{if("undefined"!=typeof window&&void 0!==window[c]){const o=window[c];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new mf(o)}}catch(o){}return new Qs},bu=_o("localStorage"),Di=_o("sessionStorage"),Iu=new za.Yd("@firebase/database"),Yo=function(){let c=1;return function(){return c++}}(),jr=function(c){const o=(0,te.dS)(c),l=new te.gQ;l.update(o);const f=l.digest();return te.US.encodeByteArray(f)},P=function(...c){let o="";for(let l=0;l<c.length;l++){const f=c[l];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?o+=P.apply(null,f):o+="object"==typeof f?(0,te.Pz)(f):f,o+=" "}return o};let $=null,J=!0;const fe=function(c,o){(0,te.hu)(!o||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(Iu.logLevel=za.in.VERBOSE,$=Iu.log.bind(Iu),o&&Di.set("logging_enabled",!0)):"function"==typeof c?$=c:($=null,Di.remove("logging_enabled"))},xe=function(...c){if(!0===J&&(J=!1,null===$&&!0===Di.get("logging_enabled")&&fe(!0)),$){const o=P.apply(null,c);$(o)}},He=function(c){return function(...o){xe(c,...o)}},dt=function(...c){const o="FIREBASE INTERNAL ERROR: "+P(...c);Iu.error(o)},Rt=function(...c){const o=`FIREBASE FATAL ERROR: ${P(...c)}`;throw Iu.error(o),new Error(o)},Gt=function(...c){const o="FIREBASE WARNING: "+P(...c);Iu.warn(o)},Ln=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},tr="[MIN_NAME]",Dr="[MAX_NAME]",is=function(c,o){if(c===o)return 0;if(c===tr||o===Dr)return-1;if(o===tr||c===Dr)return 1;{const l=Aa(c),f=Aa(o);return null!==l?null!==f?l-f==0?c.length-o.length:l-f:-1:null!==f?1:c<o?-1:1}},ii=function(c,o){return c===o?0:c<o?-1:1},gs=function(c,o){if(o&&c in o)return o[c];throw new Error("Missing required key ("+c+") in object: "+(0,te.Pz)(o))},Dl=function(c){if("object"!=typeof c||null===c)return(0,te.Pz)(c);const o=[];for(const f in c)o.push(f);o.sort();let l="{";for(let f=0;f<o.length;f++)0!==f&&(l+=","),l+=(0,te.Pz)(o[f]),l+=":",l+=Dl(c[o[f]]);return l+="}",l},Us=function(c,o){const l=c.length;if(l<=o)return[c];const f=[];for(let y=0;y<l;y+=o)f.push(c.substring(y,y+o>l?l:y+o));return f};function Cr(c,o){for(const l in c)c.hasOwnProperty(l)&&o(l,c[l])}const Qo=function(c){(0,te.hu)(!Ln(c),"Invalid JSON number");const f=1023;let y,D,M,K,X;0===c?(D=0,M=0,y=1/c==-1/0?1:0):(y=c<0,(c=Math.abs(c))>=Math.pow(2,1-f)?(K=Math.min(Math.floor(Math.log(c)/Math.LN2),f),D=K+f,M=Math.round(c*Math.pow(2,52-K)-Math.pow(2,52))):(D=0,M=Math.round(c/Math.pow(2,-1074))));const ue=[];for(X=52;X;X-=1)ue.push(M%2?1:0),M=Math.floor(M/2);for(X=11;X;X-=1)ue.push(D%2?1:0),D=Math.floor(D/2);ue.push(y?1:0),ue.reverse();const Oe=ue.join("");let Le="";for(X=0;X<64;X+=8){let rt=parseInt(Oe.substr(X,8),2).toString(16);1===rt.length&&(rt="0"+rt),Le+=rt}return Le.toLowerCase()},Sa=new RegExp("^-?(0*)\\d{1,10}$"),qa=-2147483648,Sl=2147483647,Aa=function(c){if(Sa.test(c)){const o=Number(c);if(o>=qa&&o<=Sl)return o}return null},Al=function(c){try{c()}catch(o){setTimeout(()=>{throw Gt("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},$i=function(c,o){const l=setTimeout(c,o);return"object"==typeof l&&l.unref&&l.unref(),l};class ec{constructor(o,l){this.appName_=o,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(f=>this.appCheck=f)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((l,f)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(l,f):l(null)},0)})}addTokenChangeListener(o){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(f=>f.addTokenListener(o))}notifyForInvalidToken(){Gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class si{constructor(o,l,f){this.appName_=o,this.firebaseOptions_=l,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(y=>this.auth_=y)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(l=>l&&"auth/token-not-initialized"===l.code?(xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,f)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(l,f):l(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(l=>l.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(l=>l.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gt(o)}}let _d=(()=>{class c{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return c.OWNER="owner",c})();const Rl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_h="websocket",vp="long_polling";class nc{constructor(o,l,f,y,D=!1,M="",K=!1){this.secure=l,this.namespace=f,this.webSocketOnly=y,this.nodeAdmin=D,this.persistenceKey=M,this.includeNamespaceInQueryParams=K,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bu.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&bu.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Nl(c,o,l){let f;if((0,te.hu)("string"==typeof o,"typeof type must == string"),(0,te.hu)("object"==typeof l,"typeof params must == object"),o===_h)f=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(o!==vp)throw new Error("Unknown connection type: "+o);f=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(l.ns=c.namespace);const y=[];return Cr(l,(D,M)=>{y.push(D+"="+M)}),f+y.join("&")}class yg{constructor(){this.counters_={}}incrementCounter(o,l=1){(0,te.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=l}get(){return(0,te.p$)(this.counters_)}}const yh={},vh={};function ma(c){const o=c.toString();return yh[o]||(yh[o]=new yg),yh[o]}class Ep{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,l){this.closeAfterResponse=o,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,l){for(this.pendingResponses[o]=l;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let y=0;y<f.length;++y)f[y]&&Al(()=>{this.onMessage_(f[y])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Yu{constructor(o,l,f,y,D,M,K){this.connId=o,this.repoInfo=l,this.applicationId=f,this.appCheckToken=y,this.authToken=D,this.transportSessionId=M,this.lastSessionId=K,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=He(o),this.stats_=ma(l),this.urlFn=X=>(this.appCheckToken&&(X.ac=this.appCheckToken),Nl(l,vp,X))}open(o,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Ep(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,te.Yr)()||"complete"===document.readyState)c();else{let o=!1;const l=function(){document.body?o||(o=!0,c()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new If((...D)=>{const[M,K,X,ue,Oe]=D;if(this.incrementIncomingBytes_(D),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===M)this.id=K,this.password=X;else{if("close"!==M)throw new Error("Unrecognized command received: "+M);K?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(K,()=>{this.onClosed_()})):this.onClosed_()}},(...D)=>{const[M,K]=D;this.incrementIncomingBytes_(D),this.myPacketOrderer.handleResponse(M,K)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Rl.test(location.hostname)&&(f.r="f");const y=this.urlFn(f);this.log_("Connecting via long-poll to "+y),this.scriptTagHolder.addTag(y,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yu.forceAllow_=!0}static forceDisallow(){Yu.forceDisallow_=!0}static isAvailable(){return!((0,te.Yr)()||!Yu.forceAllow_&&(Yu.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const l=(0,te.Pz)(o);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const f=(0,te.h$)(l),y=Us(f,1840);for(let D=0;D<y.length;D++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,y.length,y[D]),this.curSegmentNum++}addDisconnectPingFrame(o,l){if((0,te.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=o,f.pw=l,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const l=(0,te.Pz)(o).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class If{constructor(o,l,f,y){if(this.onDisconnect=f,this.urlFn=y,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,te.Yr)())this.commandCB=o,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Yo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=If.createIFrame_();let D="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(D='<script>document.domain="'+document.domain+'";<\/script>');const M="<html><body>"+D+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(M),this.myIFrame.doc.close()}catch(K){xe("frame writing exception"),K.stack&&xe(K.stack),xe(K)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||xe("No IE domain setting required")}catch(l){const f=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,l){for(this.myID=o,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let l=this.urlFn(o),f="",y=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const M=this.pendingSegs.shift();f=f+"&seg"+y+"="+M.seg+"&ts"+y+"="+M.ts+"&d"+y+"="+M.d,y++}return l+=f,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(o,l,f){this.pendingSegs.push({seg:o,ts:l,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(o,l){this.outstandingRequests.add(l);const f=()=>{this.outstandingRequests.delete(l),this.newRequest_()},y=setTimeout(f,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(y),f()})}addTag(o,l){(0,te.Yr)()?this.doNodeLongPoll(o,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=o,f.onload=f.onreadystatechange=function(){const y=f.readyState;(!y||"loaded"===y||"complete"===y)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),l())},f.onerror=()=>{xe("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch(f){}},Math.floor(1))}}let wh=null;"undefined"!=typeof MozWebSocket?wh=MozWebSocket:"undefined"!=typeof WebSocket&&(wh=WebSocket);let Qu=(()=>{class c{constructor(l,f,y,D,M,K,X){this.connId=l,this.applicationId=y,this.appCheckToken=D,this.authToken=M,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=He(this.connId),this.stats_=ma(f),this.connURL=c.connectionURL_(f,K,X,D,y),this.nodeAdmin=f.nodeAdmin}static connectionURL_(l,f,y,D,M){const K={v:"5"};return!(0,te.Yr)()&&"undefined"!=typeof location&&location.hostname&&Rl.test(location.hostname)&&(K.r="f"),f&&(K.s=f),y&&(K.ls=y),D&&(K.ac=D),M&&(K.p=M),Nl(l,_h,K)}open(l,f){this.onDisconnect=f,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bu.set("previous_websocket_failure",!0);try{let y;if((0,te.Yr)()){y={headers:{"User-Agent":`Firebase/5/${ji}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(y.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(y.headers["X-Firebase-AppCheck"]=this.appCheckToken);const M=process.env,K=0===this.connURL.indexOf("wss://")?M.HTTPS_PROXY||M.https_proxy:M.HTTP_PROXY||M.http_proxy;K&&(y.proxy={origin:K})}this.mySock=new wh(this.connURL,[],y)}catch(y){this.log_("Error instantiating WebSocket.");const D=y.message||y.data;return D&&this.log_(D),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=y=>{this.handleIncomingFrame(y)},this.mySock.onerror=y=>{this.log_("WebSocket error.  Closing connection.");const D=y.message||y.data;D&&this.log_(D),this.onClosed_()}}start(){}static forceDisallow(){c.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(l=!0)}return!l&&null!==wh&&!c.forceDisallow_}static previouslyFailed(){return bu.isInMemoryStorage||!0===bu.get("previous_websocket_failure")}markConnectionHealthy(){bu.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const y=(0,te.cI)(f);this.onMessage(y)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,te.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const f=Number(l);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const f=l.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const y=this.extractFrameCount_(f);null!==y&&this.appendFrame_(y)}}send(l){this.resetKeepAlive();const f=(0,te.Pz)(l);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const y=Us(f,16384);y.length>1&&this.sendString_(String(y.length));for(let D=0;D<y.length;D++)this.sendString_(y[D])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c})(),Oc=(()=>{class c{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Yu,Qu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const f=Qu&&Qu.isAvailable();let y=f&&!Qu.previouslyFailed();if(l.webSocketOnly&&(f||Gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),y=!0),y)this.transports_=[Qu];else{const D=this.transports_=[];for(const M of c.ALL_TRANSPORTS)M&&M.isAvailable()&&D.push(M);c.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return c.globalTransportInitialized_=!1,c})();class Cd{constructor(o,l,f,y,D,M,K,X,ue,Oe){this.id=o,this.repoInfo_=l,this.applicationId_=f,this.appCheckToken_=y,this.authToken_=D,this.onMessage_=M,this.onReady_=K,this.onDisconnect_=X,this.onKill_=ue,this.lastSessionId=Oe,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=He("c:"+this.id+":"),this.transportManager_=new Oc(l),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,f)},Math.floor(0));const y=o.healthyTimeout||0;y>0&&(this.healthyTimeout_=$i(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(y)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return l=>{o===this.conn_?this.onConnectionLost_(l):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return l=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(l):o===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const l=o.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const l=gs("t",o),f=gs("d",o);if("c"===l)this.onSecondaryControl_(f);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const l=gs("t",o),f=gs("d",o);"c"===l?this.onControl_(f):"d"===l&&this.onDataMessage_(f)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const l=gs("t",o);if("d"in o){const f=o.d;if("h"===l)this.onHandshake_(f);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let y=0;y<this.pendingDataMessages.length;++y)this.onDataMessage_(this.pendingDataMessages[y]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(f):"r"===l?this.onReset_(f):"e"===l?dt("Server Error: "+f):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dt("Unknown control packet command: "+l)}}onHandshake_(o){const l=o.ts,f=o.v,y=o.h;this.sessionId=o.s,this.repoInfo_.host=y,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==f&&Gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,f),$i(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,l){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$i(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ya{put(o,l,f,y){}merge(o,l,f,y){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,l,f){}onDisconnectMerge(o,l,f){}onDisconnectCancel(o,l){}reportStats(o){}}class Tf{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,te.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...l){if(Array.isArray(this.listeners_[o])){const f=[...this.listeners_[o]];for(let y=0;y<f.length;y++)f[y].callback.apply(f[y].context,l)}}on(o,l,f){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:l,context:f});const y=this.getInitialEvent(o);y&&l.apply(f,y)}off(o,l,f){this.validateEventType_(o);const y=this.listeners_[o]||[];for(let D=0;D<y.length;D++)if(y[D].callback===l&&(!f||f===y[D].context))return void y.splice(D,1)}validateEventType_(o){(0,te.hu)(this.allowedEvents_.find(l=>l===o),"Unknown event: "+o)}}class bh extends Tf{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,te.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bh}getInitialEvent(o){return(0,te.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class mr{constructor(o,l){if(void 0===l){this.pieces_=o.split("/");let f=0;for(let y=0;y<this.pieces_.length;y++)this.pieces_[y].length>0&&(this.pieces_[f]=this.pieces_[y],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=l}toString(){let o="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(o+="/"+this.pieces_[l]);return o||"/"}}function hr(){return new mr("")}function xn(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function Qa(c){return c.pieces_.length-c.pieceNum_}function Rn(c){let o=c.pieceNum_;return o<c.pieces_.length&&o++,new mr(c.pieces_,o)}function Ih(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function Xu(c,o=0){return c.pieces_.slice(c.pieceNum_+o)}function Af(c){if(c.pieceNum_>=c.pieces_.length)return null;const o=[];for(let l=c.pieceNum_;l<c.pieces_.length-1;l++)o.push(c.pieces_[l]);return new mr(o,0)}function Kn(c,o){const l=[];for(let f=c.pieceNum_;f<c.pieces_.length;f++)l.push(c.pieces_[f]);if(o instanceof mr)for(let f=o.pieceNum_;f<o.pieces_.length;f++)l.push(o.pieces_[f]);else{const f=o.split("/");for(let y=0;y<f.length;y++)f[y].length>0&&l.push(f[y])}return new mr(l,0)}function $t(c){return c.pieceNum_>=c.pieces_.length}function yo(c,o){const l=xn(c),f=xn(o);if(null===l)return o;if(l===f)return yo(Rn(c),Rn(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+c+")")}function xf(c,o){const l=Xu(c,0),f=Xu(o,0);for(let y=0;y<l.length&&y<f.length;y++){const D=is(l[y],f[y]);if(0!==D)return D}return l.length===f.length?0:l.length<f.length?-1:1}function xa(c,o){if(Qa(c)!==Qa(o))return!1;for(let l=c.pieceNum_,f=o.pieceNum_;l<=c.pieces_.length;l++,f++)if(c.pieces_[l]!==o.pieces_[f])return!1;return!0}function Ja(c,o){let l=c.pieceNum_,f=o.pieceNum_;if(Qa(c)>Qa(o))return!1;for(;l<c.pieces_.length;){if(c.pieces_[l]!==o.pieces_[f])return!1;++l,++f}return!0}class va{constructor(o,l){this.errorPrefix_=l,this.parts_=Xu(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,te.ug)(this.parts_[f]);bd(this)}}function bd(c){if(c.byteLength_>768)throw new Error(c.errorPrefix_+"has a key path longer than 768 bytes ("+c.byteLength_+").");if(c.parts_.length>32)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Js(c))}function Js(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}class Ll extends Tf{constructor(){let o,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",o="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const f=!document[o];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}static getInstance(){return new Ll}getInitialEvent(o){return(0,te.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const Ti=1e3;let Vc,Ra=(()=>{class c extends Ya{constructor(l,f,y,D,M,K,X,ue){if(super(),this.repoInfo_=l,this.applicationId_=f,this.onDataUpdate_=y,this.onConnectStatus_=D,this.onServerInfoUpdate_=M,this.authTokenProvider_=K,this.appCheckTokenProvider_=X,this.authOverride_=ue,this.id=c.nextPersistentConnectionId_++,this.log_=He("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ti,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ue&&!(0,te.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ll.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&bh.getInstance().on("online",this.onOnline_,this)}sendRequest(l,f,y){const D=++this.requestNumber_,M={r:D,a:l,b:f};this.log_((0,te.Pz)(M)),(0,te.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(M),y&&(this.requestCBHash_[D]=y)}get(l){this.initConnection_();const f=new te.BH,y={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:y,onComplete:K=>{const X=K.d;"ok"===K.s?f.resolve(X):f.reject(X)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),f.promise}listen(l,f,y,D){this.initConnection_();const M=l._queryIdentifier,K=l._path.toString();this.log_("Listen called for "+K+" "+M),this.listens.has(K)||this.listens.set(K,new Map),(0,te.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,te.hu)(!this.listens.get(K).has(M),"listen() called twice for same path/queryId.");const X={onComplete:D,hashFn:f,query:l,tag:y};this.listens.get(K).set(M,X),this.connected_&&this.sendListen_(X)}sendGet_(l){const f=this.outstandingGets_[l];this.sendRequest("g",f.request,y=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(y)})}sendListen_(l){const f=l.query,y=f._path.toString(),D=f._queryIdentifier;this.log_("Listen on "+y+" for "+D);const M={p:y};l.tag&&(M.q=f._queryObject,M.t=l.tag),M.h=l.hashFn(),this.sendRequest("q",M,X=>{const ue=X.d,Oe=X.s;c.warnOnListenWarnings_(ue,f),(this.listens.get(y)&&this.listens.get(y).get(D))===l&&(this.log_("listen response",X),"ok"!==Oe&&this.removeListen_(y,D),l.onComplete&&l.onComplete(Oe,ue))})}static warnOnListenWarnings_(l,f){if(l&&"object"==typeof l&&(0,te.r3)(l,"w")){const y=(0,te.DV)(l,"w");if(Array.isArray(y)&&~y.indexOf("no_index")){const D='".indexOn": "'+f._queryParams.getIndex().toString()+'"',M=f._path.toString();Gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${D} at ${M} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,te.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,f=(0,te.w9)(l)?"auth":"gauth",y={cred:l};null===this.authOverride_?y.noauth=!0:"object"==typeof this.authOverride_&&(y.authvar=this.authOverride_),this.sendRequest(f,y,D=>{const M=D.s,K=D.d||"error";this.authToken_===l&&("ok"===M?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(M,K))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const f=l.s,y=l.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,y)})}unlisten(l,f){const y=l._path.toString(),D=l._queryIdentifier;this.log_("Unlisten called for "+y+" "+D),(0,te.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(y,D)&&this.connected_&&this.sendUnlisten_(y,D,l._queryObject,f)}sendUnlisten_(l,f,y,D){this.log_("Unlisten on "+l+" for "+f);const M={p:l};D&&(M.q=y,M.t=D),this.sendRequest("n",M)}onDisconnectPut(l,f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,f,y):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:f,onComplete:y})}onDisconnectMerge(l,f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,f,y):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:f,onComplete:y})}onDisconnectCancel(l,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,f):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(l,f,y,D){const M={p:f,d:y};this.log_("onDisconnect "+l,M),this.sendRequest(l,M,K=>{D&&setTimeout(()=>{D(K.s,K.d)},Math.floor(0))})}put(l,f,y,D){this.putInternal("p",l,f,y,D)}merge(l,f,y,D){this.putInternal("m",l,f,y,D)}putInternal(l,f,y,D,M){this.initConnection_();const K={p:f,d:y};void 0!==M&&(K.h=M),this.outstandingPuts_.push({action:l,request:K,onComplete:D}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(l){const f=this.outstandingPuts_[l].action,y=this.outstandingPuts_[l].request,D=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(f,y,M=>{this.log_(f+" response",M),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),D&&D(M.s,M.d)})}reportStats(l){if(this.connected_){const f={c:l};this.log_("reportStats",f),this.sendRequest("s",f,y=>{"ok"!==y.s&&this.log_("reportStats","Error sending stats: "+y.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,te.Pz)(l));const f=l.r,y=this.requestCBHash_[f];y&&(delete this.requestCBHash_[f],y(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,f){this.log_("handleServerMessage",l,f),"d"===l?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===l?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===l?this.onListenRevoked_(f.p,f.q):"ac"===l?this.onAuthRevoked_(f.s,f.d):"apc"===l?this.onAppCheckRevoked_(f.s,f.d):"sd"===l?this.onSecurityDebugPacket_(f):dt("Unrecognized action received from server: "+(0,te.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,te.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ti,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Ti,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ti),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let f=Math.max(0,this.reconnectDelay_-l);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Xe.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const f=l.onDataMessage_.bind(l),y=l.onReady_.bind(l),D=l.onRealtimeDisconnect_.bind(l),M=l.id+":"+c.nextConnectionId_++,K=l.lastSessionId;let X=!1,ue=null;const Oe=function(){ue?ue.close():(X=!0,D())};l.realtime_={close:Oe,sendRequest:function(Ft){(0,te.hu)(ue,"sendRequest call when we're not connected not allowed."),ue.sendRequest(Ft)}};const rt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Ft,jt]=yield Promise.all([l.authTokenProvider_.getToken(rt),l.appCheckTokenProvider_.getToken(rt)]);X?xe("getToken() completed but was canceled"):(xe("getToken() completed. Creating connection."),l.authToken_=Ft&&Ft.accessToken,l.appCheckToken_=jt&&jt.token,ue=new Cd(M,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,f,y,D,Tn=>{Gt(Tn+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},K))}catch(Ft){l.log_("Failed to get token: "+Ft),X||(l.repoInfo_.nodeAdmin&&Gt(Ft),Oe())}}})()}interrupt(l){xe("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){xe("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,te.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ti,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const f=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const f=this.outstandingPuts_[l];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,f){let y;y=f?f.map(M=>Dl(M)).join("$"):"default";const D=this.removeListen_(l,y);D&&D.onComplete&&D.onComplete("permission_denied")}removeListen_(l,f){const y=new mr(l).toString();let D;if(this.listens.has(y)){const M=this.listens.get(y);D=M.get(f),M.delete(f),0===M.size&&this.listens.delete(y)}else D=void 0;return D}onAuthRevoked_(l,f){xe("Auth token revoked: "+l+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,f){xe("App check token revoked: "+l+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const f of l.values())this.sendListen_(f);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let f="js";(0,te.Yr)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+f+"."+ji.replace(/\./g,"-")]=1,(0,te.uI)()?l["framework.cordova"]=1:(0,te.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=bh.getInstance().currentlyOnline();return(0,te.xb)(this.interruptReasons_)&&l}}return c.nextPersistentConnectionId_=0,c.nextConnectionId_=0,c})();class jn{constructor(o,l){this.name=o,this.node=l}static Wrap(o,l){return new jn(o,l)}}class Lc{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,l){const f=new jn(tr,o),y=new jn(tr,l);return 0!==this.compare(f,y)}minPost(){return jn.MIN}}class Rf extends Lc{static get __EMPTY_NODE(){return Vc}static set __EMPTY_NODE(o){Vc=o}compare(o,l){return is(o.name,l.name)}isDefinedOn(o){throw(0,te.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,l){return!1}minPost(){return jn.MIN}maxPost(){return new jn(Dr,Vc)}makePost(o,l){return(0,te.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new jn(o,Vc)}toString(){return".key"}}const xu=new Rf;class Uc{constructor(o,l,f,y,D=null){this.isReverse_=y,this.resultGenerator_=D,this.nodeStack_=[];let M=1;for(;!o.isEmpty();)if(M=l?f(o.key,l):1,y&&(M*=-1),M<0)o=this.isReverse_?o.left:o.right;else{if(0===M){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,o=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let ic,Jo=(()=>{class c{constructor(l,f,y,D,M){this.key=l,this.value=f,this.color=null!=y?y:c.RED,this.left=null!=D?D:vo.EMPTY_NODE,this.right=null!=M?M:vo.EMPTY_NODE}copy(l,f,y,D,M){return new c(null!=l?l:this.key,null!=f?f:this.value,null!=y?y:this.color,null!=D?D:this.left,null!=M?M:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,f,y){let D=this;const M=y(l,D.key);return D=M<0?D.copy(null,null,null,D.left.insert(l,f,y),null):0===M?D.copy(null,f,null,null,null):D.copy(null,null,null,null,D.right.insert(l,f,y)),D.fixUp_()}removeMin_(){if(this.left.isEmpty())return vo.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,f){let y,D;if(y=this,f(l,y.key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(l,f),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===f(l,y.key)){if(y.right.isEmpty())return vo.EMPTY_NODE;D=y.right.min_(),y=y.copy(D.key,D.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(l,f))}return y.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,f)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return c.RED=!0,c.BLACK=!1,c})();class vo{constructor(o,l=vo.EMPTY_NODE){this.comparator_=o,this.root_=l}insert(o,l){return new vo(this.comparator_,this.root_.insert(o,l,this.comparator_).copy(null,null,Jo.BLACK,null,null))}remove(o){return new vo(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,Jo.BLACK,null,null))}get(o){let l,f=this.root_;for(;!f.isEmpty();){if(l=this.comparator_(o,f.key),0===l)return f.value;l<0?f=f.left:l>0&&(f=f.right)}return null}getPredecessorKey(o){let l,f=this.root_,y=null;for(;!f.isEmpty();){if(l=this.comparator_(o,f.key),0===l){if(f.left.isEmpty())return y?y.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}l<0?f=f.left:l>0&&(y=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new Uc(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,l){return new Uc(this.root_,o,this.comparator_,!1,l)}getReverseIteratorFrom(o,l){return new Uc(this.root_,o,this.comparator_,!0,l)}getReverseIterator(o){return new Uc(this.root_,null,this.comparator_,!0,o)}}function Ip(c,o){return is(c.name,o.name)}function el(c,o){return is(c,o)}vo.EMPTY_NODE=new class{copy(o,l,f,y,D){return this}insert(o,l,f){return new Jo(o,l,null)}remove(o,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const As=function(c){return"number"==typeof c?"number:"+Qo(c):"string:"+c},os=function(c){if(c.isLeafNode()){const o=c.val();(0,te.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,te.r3)(o,".sv"),"Priority must be a string or number.")}else(0,te.hu)(c===ic||c.isEmpty(),"priority of unexpected type.");(0,te.hu)(c===ic||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sc,eu,Bc,Xa=(()=>{class c{constructor(l,f=c.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=f,this.lazyHash_=null,(0,te.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),os(this.priorityNode_)}static set __childrenNodeConstructor(l){sc=l}static get __childrenNodeConstructor(){return sc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new c(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return $t(l)?this:".priority"===xn(l)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,f){return null}updateImmediateChild(l,f){return".priority"===l?this.updatePriority(f):f.isEmpty()&&".priority"!==l?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,f).updatePriority(this.priorityNode_)}updateChild(l,f){const y=xn(l);return null===y?f:f.isEmpty()&&".priority"!==y?this:((0,te.hu)(".priority"!==y||1===Qa(l),".priority must be the last token in a path"),this.updateImmediateChild(y,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(l),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,f){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+As(this.priorityNode_.val())+":");const f=typeof this.value_;l+=f+":",l+="number"===f?Qo(this.value_):this.value_,this.lazyHash_=jr(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===c.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof c.__childrenNodeConstructor?-1:((0,te.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const f=typeof l.value_,y=typeof this.value_,D=c.VALUE_TYPE_ORDER.indexOf(f),M=c.VALUE_TYPE_ORDER.indexOf(y);return(0,te.hu)(D>=0,"Unknown leaf type: "+f),(0,te.hu)(M>=0,"Unknown leaf type: "+y),D===M?"object"===y?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:M-D}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const f=l;return this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_)}return!1}}return c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c})();const Kr=new class extends Lc{compare(o,l){const f=o.node.getPriority(),y=l.node.getPriority(),D=f.compareTo(y);return 0===D?is(o.name,l.name):D}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,l){return!o.getPriority().equals(l.getPriority())}minPost(){return jn.MIN}maxPost(){return new jn(Dr,new Xa("[PRIORITY-POST]",Bc))}makePost(o,l){const f=eu(o);return new jn(l,new Xa("[PRIORITY-POST]",f))}toString(){return".priority"}},tl=Math.log(2);class Dp{constructor(o){this.count=parseInt(Math.log(o+1)/tl,10),this.current_=this.count-1;const y=(D=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&y}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const Td=function(c,o,l,f){c.sort(o);const y=function(X,ue){const Oe=ue-X;let Le,rt;if(0===Oe)return null;if(1===Oe)return Le=c[X],rt=l?l(Le):Le,new Jo(rt,Le.node,Jo.BLACK,null,null);{const Ft=parseInt(Oe/2,10)+X,jt=y(X,Ft),Tn=y(Ft+1,ue);return Le=c[Ft],rt=l?l(Le):Le,new Jo(rt,Le.node,Jo.BLACK,jt,Tn)}},K=function(X){let ue=null,Oe=null,Le=c.length;const rt=function(jt,Tn){const Jn=Le-jt,Ai=Le;Le-=jt;const js=y(Jn+1,Ai),Qi=c[Jn],Ns=l?l(Qi):Qi;Ft(new Jo(Ns,Qi.node,Tn,null,js))},Ft=function(jt){ue?(ue.left=jt,ue=jt):(Oe=jt,ue=jt)};for(let jt=0;jt<X.count;++jt){const Tn=X.nextBitIsOne(),Jn=Math.pow(2,X.count-(jt+1));Tn?rt(Jn,Jo.BLACK):(rt(Jn,Jo.BLACK),rt(Jn,Jo.RED))}return Oe}(new Dp(c.length));return new vo(f||o,K)};let jc;const nl={};class Ru{constructor(o,l){this.indexes_=o,this.indexSet_=l}static get Default(){return(0,te.hu)(nl&&Kr,"ChildrenNode.ts has not been loaded"),jc=jc||new Ru({".priority":nl},{".priority":Kr}),jc}get(o){const l=(0,te.DV)(this.indexes_,o);if(!l)throw new Error("No index defined for "+o);return l instanceof vo?l:null}hasIndex(o){return(0,te.r3)(this.indexSet_,o.toString())}addIndex(o,l){(0,te.hu)(o!==xu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let y=!1;const D=l.getIterator(jn.Wrap);let K,M=D.getNext();for(;M;)y=y||o.isDefinedOn(M.node),f.push(M),M=D.getNext();K=y?Td(f,o.getCompare()):nl;const X=o.toString(),ue=Object.assign({},this.indexSet_);ue[X]=o;const Oe=Object.assign({},this.indexes_);return Oe[X]=K,new Ru(Oe,ue)}addToIndexes(o,l){const f=(0,te.UI)(this.indexes_,(y,D)=>{const M=(0,te.DV)(this.indexSet_,D);if((0,te.hu)(M,"Missing index implementation for "+D),y===nl){if(M.isDefinedOn(o.node)){const K=[],X=l.getIterator(jn.Wrap);let ue=X.getNext();for(;ue;)ue.name!==o.name&&K.push(ue),ue=X.getNext();return K.push(o),Td(K,M.getCompare())}return nl}{const K=l.get(o.name);let X=y;return K&&(X=X.remove(new jn(o.name,K))),X.insert(o,o.node)}});return new Ru(f,this.indexSet_)}removeFromIndexes(o,l){const f=(0,te.UI)(this.indexes_,y=>{if(y===nl)return y;{const D=l.get(o.name);return D?y.remove(new jn(o.name,D)):y}});return new Ru(f,this.indexSet_)}}let xs,Vn=(()=>{class c{constructor(l,f,y){this.children_=l,this.priorityNode_=f,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&os(this.priorityNode_),this.children_.isEmpty()&&(0,te.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xs||(xs=new c(new vo(el),null,Ru.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xs}updatePriority(l){return this.children_.isEmpty()?this:new c(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const f=this.children_.get(l);return null===f?xs:f}}getChild(l){const f=xn(l);return null===f?this:this.getImmediateChild(f).getChild(Rn(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,f){if((0,te.hu)(f,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(f);{const y=new jn(l,f);let D,M;f.isEmpty()?(D=this.children_.remove(l),M=this.indexMap_.removeFromIndexes(y,this.children_)):(D=this.children_.insert(l,f),M=this.indexMap_.addToIndexes(y,this.children_));const K=D.isEmpty()?xs:this.priorityNode_;return new c(D,K,M)}}updateChild(l,f){const y=xn(l);if(null===y)return f;{(0,te.hu)(".priority"!==xn(l)||1===Qa(l),".priority must be the last token in a path");const D=this.getImmediateChild(y).updateChild(Rn(l),f);return this.updateImmediateChild(y,D)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const f={};let y=0,D=0,M=!0;if(this.forEachChild(Kr,(K,X)=>{f[K]=X.val(l),y++,M&&c.INTEGER_REGEXP_.test(K)?D=Math.max(D,Number(K)):M=!1}),!l&&M&&D<2*y){const K=[];for(const X in f)K[X]=f[X];return K}return l&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+As(this.getPriority().val())+":"),this.forEachChild(Kr,(f,y)=>{const D=y.hash();""!==D&&(l+=":"+f+":"+D)}),this.lazyHash_=""===l?"":jr(l)}return this.lazyHash_}getPredecessorChildName(l,f,y){const D=this.resolveIndex_(y);if(D){const M=D.getPredecessorKey(new jn(l,f));return M?M.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const f=this.resolveIndex_(l);if(f){const y=f.minKey();return y&&y.name}return this.children_.minKey()}getFirstChild(l){const f=this.getFirstChildName(l);return f?new jn(f,this.children_.get(f)):null}getLastChildName(l){const f=this.resolveIndex_(l);if(f){const y=f.maxKey();return y&&y.name}return this.children_.maxKey()}getLastChild(l){const f=this.getLastChildName(l);return f?new jn(f,this.children_.get(f)):null}forEachChild(l,f){const y=this.resolveIndex_(l);return y?y.inorderTraversal(D=>f(D.name,D.node)):this.children_.inorderTraversal(f)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,f){const y=this.resolveIndex_(f);if(y)return y.getIteratorFrom(l,D=>D);{const D=this.children_.getIteratorFrom(l.name,jn.Wrap);let M=D.peek();for(;null!=M&&f.compare(M,l)<0;)D.getNext(),M=D.peek();return D}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,f){const y=this.resolveIndex_(f);if(y)return y.getReverseIteratorFrom(l,D=>D);{const D=this.children_.getReverseIteratorFrom(l.name,jn.Wrap);let M=D.peek();for(;null!=M&&f.compare(M,l)>0;)D.getNext(),M=D.peek();return D}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===ea?-1:0}withIndex(l){if(l===xu||this.indexMap_.hasIndex(l))return this;{const f=this.indexMap_.addIndex(l,this.children_);return new c(this.children_,this.priorityNode_,f)}}isIndexed(l){return l===xu||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const f=l;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const y=this.getIterator(Kr),D=f.getIterator(Kr);let M=y.getNext(),K=D.getNext();for(;M&&K;){if(M.name!==K.name||!M.node.equals(K.node))return!1;M=y.getNext(),K=D.getNext()}return null===M&&null===K}return!1}return!1}}resolveIndex_(l){return l===xu?null:this.indexMap_.get(l.toString())}}return c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c})();const ea=new class extends Vn{constructor(){super(new vo(el),Vn.EMPTY_NODE,Ru.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return Vn.EMPTY_NODE}isEmpty(){return!1}};function li(c,o=null){if(null===c)return Vn.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(o=c[".priority"]),(0,te.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new Xa(c,li(o));if(c instanceof Array){let l=Vn.EMPTY_NODE;return Cr(c,(f,y)=>{if((0,te.r3)(c,f)&&"."!==f.substring(0,1)){const D=li(y);(D.isLeafNode()||!D.isEmpty())&&(l=l.updateImmediateChild(f,D))}}),l.updatePriority(li(o))}{const l=[];let f=!1;if(Cr(c,(M,K)=>{if("."!==M.substring(0,1)){const X=li(K);X.isEmpty()||(f=f||!X.getPriority().isEmpty(),l.push(new jn(M,X)))}}),0===l.length)return Vn.EMPTY_NODE;const D=Td(l,Ip,M=>M.name,el);if(f){const M=Td(l,Kr.getCompare());return new Vn(D,li(o),new Ru({".priority":M},{".priority":Kr}))}return new Vn(D,li(o),Ru.Default)}}Object.defineProperties(jn,{MIN:{value:new jn(tr,Vn.EMPTY_NODE)},MAX:{value:new jn(Dr,ea)}}),Rf.__EMPTY_NODE=Vn.EMPTY_NODE,Xa.__childrenNodeConstructor=Vn,ic=ea,Bc=ea,function(c){eu=c}(li);class Sd extends Lc{constructor(o){super(),this.indexPath_=o,(0,te.hu)(!$t(o)&&".priority"!==xn(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,l){const f=this.extractChild(o.node),y=this.extractChild(l.node),D=f.compareTo(y);return 0===D?is(o.name,l.name):D}makePost(o,l){const f=li(o),y=Vn.EMPTY_NODE.updateChild(this.indexPath_,f);return new jn(l,y)}maxPost(){const o=Vn.EMPTY_NODE.updateChild(this.indexPath_,ea);return new jn(Dr,o)}toString(){return Xu(this.indexPath_,0).join("/")}}const Xs=new class extends Lc{compare(o,l){const f=o.node.compareTo(l.node);return 0===f?is(o.name,l.name):f}isDefinedOn(o){return!0}indexedValueChanged(o,l){return!o.equals(l)}minPost(){return jn.MIN}maxPost(){return jn.MAX}makePost(o,l){const f=li(o);return new jn(l,f)}toString(){return".value"}},Nu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Rs=function(){let c=0;const o=[];return function(l){const f=l===c;let y;c=l;const D=new Array(8);for(y=7;y>=0;y--)D[y]=Nu.charAt(l%64),l=Math.floor(l/64);(0,te.hu)(0===l,"Cannot push at time == 0");let M=D.join("");if(f){for(y=11;y>=0&&63===o[y];y--)o[y]=0;o[y]++}else for(y=0;y<12;y++)o[y]=Math.floor(64*Math.random());for(y=0;y<12;y++)M+=Nu.charAt(o[y]);return(0,te.hu)(20===M.length,"nextPushId: Length should be 20."),M}}(),E=function(c){if(c===""+Sl)return"-";const o=Aa(c);if(null!=o)return""+(o+1);const l=new Array(c.length);for(let M=0;M<l.length;M++)l[M]=c.charAt(M);if(l.length<786)return l.push("-"),l.join("");let f=l.length-1;for(;f>=0&&"z"===l[f];)f--;if(-1===f)return Dr;const D=Nu.charAt(Nu.indexOf(l[f])+1);return l[f]=D,l.slice(0,f+1).join("")},g=function(c){if(c===""+qa)return tr;const o=Aa(c);if(null!=o)return""+(o-1);const l=new Array(c.length);for(let f=0;f<l.length;f++)l[f]=c.charAt(f);return"-"===l[l.length-1]?1===l.length?""+Sl:(delete l[l.length-1],l.join("")):(l[l.length-1]=Nu.charAt(Nu.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function m(c){return{type:"value",snapshotNode:c}}function b(c,o){return{type:"child_added",snapshotNode:o,childName:c}}function j(c,o){return{type:"child_removed",snapshotNode:o,childName:c}}function Z(c,o,l){return{type:"child_changed",snapshotNode:o,childName:c,oldSnap:l}}class Ue{constructor(o){this.index_=o}updateChild(o,l,f,y,D,M){(0,te.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const K=o.getImmediateChild(l);return K.getChild(y).equals(f.getChild(y))&&K.isEmpty()===f.isEmpty()||(null!=M&&(f.isEmpty()?o.hasChild(l)?M.trackChildChange(j(l,K)):(0,te.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):K.isEmpty()?M.trackChildChange(b(l,f)):M.trackChildChange(Z(l,f,K))),o.isLeafNode()&&f.isEmpty())?o:o.updateImmediateChild(l,f).withIndex(this.index_)}updateFullNode(o,l,f){return null!=f&&(o.isLeafNode()||o.forEachChild(Kr,(y,D)=>{l.hasChild(y)||f.trackChildChange(j(y,D))}),l.isLeafNode()||l.forEachChild(Kr,(y,D)=>{if(o.hasChild(y)){const M=o.getImmediateChild(y);M.equals(D)||f.trackChildChange(Z(y,D,M))}else f.trackChildChange(b(y,D))})),l.withIndex(this.index_)}updatePriority(o,l){return o.isEmpty()?Vn.EMPTY_NODE:o.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wt{constructor(o){this.indexedFilter_=new Ue(o.getIndex()),this.index_=o.getIndex(),this.startPost_=wt.getStartPost_(o),this.endPost_=wt.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,l,f,y,D,M){return this.matches(new jn(l,f))||(f=Vn.EMPTY_NODE),this.indexedFilter_.updateChild(o,l,f,y,D,M)}updateFullNode(o,l,f){l.isLeafNode()&&(l=Vn.EMPTY_NODE);let y=l.withIndex(this.index_);y=y.updatePriority(Vn.EMPTY_NODE);const D=this;return l.forEachChild(Kr,(M,K)=>{D.matches(new jn(M,K))||(y=y.updateImmediateChild(M,Vn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,y,f)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const l=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),l)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const l=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),l)}return o.getIndex().maxPost()}}class mt{constructor(o){this.rangedFilter_=new wt(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,l,f,y,D,M){return this.rangedFilter_.matches(new jn(l,f))||(f=Vn.EMPTY_NODE),o.getImmediateChild(l).equals(f)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,l,f,y,D,M):this.fullLimitUpdateChild_(o,l,f,D,M)}updateFullNode(o,l,f){let y;if(l.isLeafNode()||l.isEmpty())y=Vn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let D;y=Vn.EMPTY_NODE.withIndex(this.index_),D=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let M=0;for(;D.hasNext()&&M<this.limit_;){const K=D.getNext();let X;if(X=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),K)<=0:this.index_.compare(K,this.rangedFilter_.getEndPost())<=0,!X)break;y=y.updateImmediateChild(K.name,K.node),M++}}else{let D,M,K,X;if(y=l.withIndex(this.index_),y=y.updatePriority(Vn.EMPTY_NODE),this.reverse_){X=y.getReverseIterator(this.index_),D=this.rangedFilter_.getEndPost(),M=this.rangedFilter_.getStartPost();const Le=this.index_.getCompare();K=(rt,Ft)=>Le(Ft,rt)}else X=y.getIterator(this.index_),D=this.rangedFilter_.getStartPost(),M=this.rangedFilter_.getEndPost(),K=this.index_.getCompare();let ue=0,Oe=!1;for(;X.hasNext();){const Le=X.getNext();!Oe&&K(D,Le)<=0&&(Oe=!0),Oe&&ue<this.limit_&&K(Le,M)<=0?ue++:y=y.updateImmediateChild(Le.name,Vn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,y,f)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,l,f,y,D){let M;if(this.reverse_){const Le=this.index_.getCompare();M=(rt,Ft)=>Le(Ft,rt)}else M=this.index_.getCompare();const K=o;(0,te.hu)(K.numChildren()===this.limit_,"");const X=new jn(l,f),ue=this.reverse_?K.getFirstChild(this.index_):K.getLastChild(this.index_),Oe=this.rangedFilter_.matches(X);if(K.hasChild(l)){const Le=K.getImmediateChild(l);let rt=y.getChildAfterChild(this.index_,ue,this.reverse_);for(;null!=rt&&(rt.name===l||K.hasChild(rt.name));)rt=y.getChildAfterChild(this.index_,rt,this.reverse_);const Ft=null==rt?1:M(rt,X);if(Oe&&!f.isEmpty()&&Ft>=0)return null!=D&&D.trackChildChange(Z(l,f,Le)),K.updateImmediateChild(l,f);{null!=D&&D.trackChildChange(j(l,Le));const Tn=K.updateImmediateChild(l,Vn.EMPTY_NODE);return null!=rt&&this.rangedFilter_.matches(rt)?(null!=D&&D.trackChildChange(b(rt.name,rt.node)),Tn.updateImmediateChild(rt.name,rt.node)):Tn}}return f.isEmpty()?o:Oe&&M(ue,X)>=0?(null!=D&&(D.trackChildChange(j(ue.name,ue.node)),D.trackChildChange(b(l,f))),K.updateImmediateChild(l,f).updateImmediateChild(ue.name,Vn.EMPTY_NODE)):o}}class zt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,te.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kr}copy(){const o=new zt;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function Mu(c,o,l){const f=c.copy();return f.startSet_=!0,void 0===o&&(o=null),f.indexStartValue_=o,null!=l?(f.startNameSet_=!0,f.indexStartName_=l):(f.startNameSet_=!1,f.indexStartName_=""),f}function xd(c,o,l){const f=c.copy();return f.endSet_=!0,void 0===o&&(o=null),f.indexEndValue_=o,void 0!==l?(f.endNameSet_=!0,f.indexEndName_=l):(f.endNameSet_=!1,f.indexEndName_=""),f}function oc(c,o){const l=c.copy();return l.index_=o,l}function Rd(c){const o={};if(c.isDefault())return o;let l;return c.index_===Kr?l="$priority":c.index_===Xs?l="$value":c.index_===xu?l="$key":((0,te.hu)(c.index_ instanceof Sd,"Unrecognized index type!"),l=c.index_.toString()),o.orderBy=(0,te.Pz)(l),c.startSet_&&(o.startAt=(0,te.Pz)(c.indexStartValue_),c.startNameSet_&&(o.startAt+=","+(0,te.Pz)(c.indexStartName_))),c.endSet_&&(o.endAt=(0,te.Pz)(c.indexEndValue_),c.endNameSet_&&(o.endAt+=","+(0,te.Pz)(c.indexEndName_))),c.limitSet_&&(c.isViewFromLeft()?o.limitToFirst=c.limit_:o.limitToLast=c.limit_),o}function Nd(c){const o={};if(c.startSet_&&(o.sp=c.indexStartValue_,c.startNameSet_&&(o.sn=c.indexStartName_)),c.endSet_&&(o.ep=c.indexEndValue_,c.endNameSet_&&(o.en=c.indexEndName_)),c.limitSet_){o.l=c.limit_;let l=c.viewFrom_;""===l&&(l=c.isViewFromLeft()?"l":"r"),o.vf=l}return c.index_!==Kr&&(o.i=c.index_.toString()),o}class Hc extends Ya{constructor(o,l,f,y){super(),this.repoInfo_=o,this.onDataUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.log_=He("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,l){return void 0!==l?"tag$"+l:((0,te.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,l,f,y){const D=o._path.toString();this.log_("Listen called for "+D+" "+o._queryIdentifier);const M=Hc.getListenId_(o,f),K={};this.listens_[M]=K;const X=Rd(o._queryParams);this.restRequest_(D+".json",X,(ue,Oe)=>{let Le=Oe;if(404===ue&&(Le=null,ue=null),null===ue&&this.onDataUpdate_(D,Le,!1,f),(0,te.DV)(this.listens_,M)===K){let rt;rt=ue?401===ue?"permission_denied":"rest_error:"+ue:"ok",y(rt,null)}})}unlisten(o,l){const f=Hc.getListenId_(o,l);delete this.listens_[f]}get(o){const l=Rd(o._queryParams),f=o._path.toString(),y=new te.BH;return this.restRequest_(f+".json",l,(D,M)=>{let K=M;404===D&&(K=null,D=null),null===D?(this.onDataUpdate_(f,K,!1,null),y.resolve(K)):y.reject(new Error(K))}),y.promise}refreshAuthToken(o){}restRequest_(o,l={},f){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([y,D])=>{y&&y.accessToken&&(l.auth=y.accessToken),D&&D.token&&(l.ac=D.token);const M=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,te.xO)(l);this.log_("Sending REST request for "+M);const K=new XMLHttpRequest;K.onreadystatechange=()=>{if(f&&4===K.readyState){this.log_("REST Response for "+M+" received. status:",K.status,"response:",K.responseText);let X=null;if(K.status>=200&&K.status<300){try{X=(0,te.cI)(K.responseText)}catch(ue){Gt("Failed to parse JSON response for "+M+": "+K.responseText)}f(null,X)}else 401!==K.status&&404!==K.status&&Gt("Got unsuccessful REST response for "+M+" Status: "+K.status),f(K.status);f=null}},K.open("GET",M,!0),K.send()})}}class Of{constructor(){this.rootNode_=Vn.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,l){this.rootNode_=this.rootNode_.updateChild(o,l)}}function ac(){return{value:null,children:new Map}}function Ul(c,o,l){if($t(o))c.value=l,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(o,l);else{const f=xn(o);c.children.has(f)||c.children.set(f,ac()),Ul(c.children.get(f),o=Rn(o),l)}}function tu(c,o){if($t(o))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;{const l=c.value;return c.value=null,l.forEachChild(Kr,(f,y)=>{Ul(c,new mr(f),y)}),tu(c,o)}}if(c.children.size>0){const l=xn(o);return o=Rn(o),c.children.has(l)&&tu(c.children.get(l),o)&&c.children.delete(l),0===c.children.size}return!0}function Gc(c,o,l){null!==c.value?l(o,c.value):function(c,o){c.children.forEach((l,f)=>{o(f,l)})}(c,(f,y)=>{Gc(y,new mr(o.toString()+"/"+f),l)})}class bg{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),l=Object.assign({},o);return this.last_&&Cr(this.last_,(f,y)=>{l[f]=l[f]-y}),this.last_=o,l}}class Dg{constructor(o,l){this.server_=l,this.statsToReport_={},this.statsListener_=new bg(o);const f=1e4+2e4*Math.random();$i(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const o=this.statsListener_.get(),l={};let f=!1;Cr(o,(y,D)=>{D>0&&(0,te.r3)(this.statsToReport_,y)&&(l[y]=D,f=!0)}),f&&this.server_.reportStats(l),$i(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nu=(()=>(function(c){c[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(nu||(nu={})),nu))();function Pu(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}class ru{constructor(o,l,f){this.path=o,this.affectedTree=l,this.revert=f,this.type=nu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if($t(this.path)){if(null!=this.affectedTree.value)return(0,te.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new mr(o));return new ru(hr(),l,this.revert)}}return(0,te.hu)(xn(this.path)===o,"operationForChild called for unrelated child."),new ru(Rn(this.path),this.affectedTree,this.revert)}}class Ou{constructor(o,l){this.source=o,this.path=l,this.type=nu.LISTEN_COMPLETE}operationForChild(o){return $t(this.path)?new Ou(this.source,hr()):new Ou(this.source,Rn(this.path))}}class iu{constructor(o,l,f){this.source=o,this.path=l,this.snap=f,this.type=nu.OVERWRITE}operationForChild(o){return $t(this.path)?new iu(this.source,hr(),this.snap.getImmediateChild(o)):new iu(this.source,Rn(this.path),this.snap)}}class Wc{constructor(o,l,f){this.source=o,this.path=l,this.children=f,this.type=nu.MERGE}operationForChild(o){if($t(this.path)){const l=this.children.subtree(new mr(o));return l.isEmpty()?null:l.value?new iu(this.source,hr(),l.value):new Wc(this.source,hr(),l)}return(0,te.hu)(xn(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Wc(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ku{constructor(o,l,f){this.node_=o,this.fullyInitialized_=l,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if($t(o))return this.isFullyInitialized()&&!this.filtered_;const l=xn(o);return this.isCompleteForChild(l)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Od{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function kd(c,o,l,f,y,D){const M=f.filter(K=>K.type===l);M.sort((K,X)=>function(c,o,l){if(null==o.childName||null==l.childName)throw(0,te.g5)("Should only compare child_ events.");const f=new jn(o.childName,o.snapshotNode),y=new jn(l.childName,l.snapshotNode);return c.index_.compare(f,y)}(c,K,X)),M.forEach(K=>{const X=function(c,o,l){return"value"===o.type||"child_removed"===o.type||(o.prevName=l.getPredecessorChildName(o.childName,o.snapshotNode,c.index_)),o}(c,K,D);y.forEach(ue=>{ue.respondsTo(K.type)&&o.push(ue.createEvent(X,c.query_))})})}function Rh(c,o){return{eventCache:c,serverCache:o}}function Bl(c,o,l,f){return Rh(new ku(o,l,f),c.serverCache)}function Fd(c,o,l,f){return Rh(c.eventCache,new ku(o,l,f))}function lc(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function zc(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}let Sp;class Si{constructor(o,l=(()=>(Sp||(Sp=new vo(ii)),Sp))()){this.value=o,this.children=l}static fromObject(o){let l=new Si(null);return Cr(o,(f,y)=>{l=l.set(new mr(f),y)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,l){if(null!=this.value&&l(this.value))return{path:hr(),value:this.value};if($t(o))return null;{const f=xn(o),y=this.children.get(f);if(null!==y){const D=y.findRootMostMatchingPathAndValue(Rn(o),l);return null!=D?{path:Kn(new mr(f),D.path),value:D.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if($t(o))return this;{const l=xn(o),f=this.children.get(l);return null!==f?f.subtree(Rn(o)):new Si(null)}}set(o,l){if($t(o))return new Si(l,this.children);{const f=xn(o),D=(this.children.get(f)||new Si(null)).set(Rn(o),l),M=this.children.insert(f,D);return new Si(this.value,M)}}remove(o){if($t(o))return this.children.isEmpty()?new Si(null):new Si(null,this.children);{const l=xn(o),f=this.children.get(l);if(f){const y=f.remove(Rn(o));let D;return D=y.isEmpty()?this.children.remove(l):this.children.insert(l,y),null===this.value&&D.isEmpty()?new Si(null):new Si(this.value,D)}return this}}get(o){if($t(o))return this.value;{const l=xn(o),f=this.children.get(l);return f?f.get(Rn(o)):null}}setTree(o,l){if($t(o))return l;{const f=xn(o),D=(this.children.get(f)||new Si(null)).setTree(Rn(o),l);let M;return M=D.isEmpty()?this.children.remove(f):this.children.insert(f,D),new Si(this.value,M)}}fold(o){return this.fold_(hr(),o)}fold_(o,l){const f={};return this.children.inorderTraversal((y,D)=>{f[y]=D.fold_(Kn(o,y),l)}),l(o,this.value,f)}findOnPath(o,l){return this.findOnPath_(o,hr(),l)}findOnPath_(o,l,f){const y=!!this.value&&f(l,this.value);if(y)return y;if($t(o))return null;{const D=xn(o),M=this.children.get(D);return M?M.findOnPath_(Rn(o),Kn(l,D),f):null}}foreachOnPath(o,l){return this.foreachOnPath_(o,hr(),l)}foreachOnPath_(o,l,f){if($t(o))return this;{this.value&&f(l,this.value);const y=xn(o),D=this.children.get(y);return D?D.foreachOnPath_(Rn(o),Kn(l,y),f):new Si(null)}}foreach(o){this.foreach_(hr(),o)}foreach_(o,l){this.children.inorderTraversal((f,y)=>{y.foreach_(Kn(o,f),l)}),this.value&&l(o,this.value)}foreachChild(o){this.children.inorderTraversal((l,f)=>{f.value&&o(l,f.value)})}}class sl{constructor(o){this.writeTree_=o}static empty(){return new sl(new Si(null))}}function to(c,o,l){if($t(o))return new sl(new Si(l));{const f=c.writeTree_.findRootMostValueAndPath(o);if(null!=f){const y=f.path;let D=f.value;const M=yo(y,o);return D=D.updateChild(M,l),new sl(c.writeTree_.set(y,D))}{const y=new Si(l),D=c.writeTree_.setTree(o,y);return new sl(D)}}}function cc(c,o,l){let f=c;return Cr(l,(y,D)=>{f=to(f,Kn(o,y),D)}),f}function dc(c,o){if($t(o))return sl.empty();{const l=c.writeTree_.setTree(o,new Si(null));return new sl(l)}}function Ap(c,o){return null!=Ld(c,o)}function Ld(c,o){const l=c.writeTree_.findRootMostValueAndPath(o);return null!=l?c.writeTree_.get(l.path).getChild(yo(l.path,o)):null}function Lm(c){const o=[],l=c.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Kr,(f,y)=>{o.push(new jn(f,y))}):c.writeTree_.children.inorderTraversal((f,y)=>{null!=y.value&&o.push(new jn(f,y.value))}),o}function jl(c,o){if($t(o))return c;{const l=Ld(c,o);return new sl(null!=l?new Si(l):c.writeTree_.subtree(o))}}function Vd(c){return c.writeTree_.isEmpty()}function Nh(c,o){return Tg(hr(),c.writeTree_,o)}function Tg(c,o,l){if(null!=o.value)return l.updateChild(c,o.value);{let f=null;return o.children.inorderTraversal((y,D)=>{".priority"===y?((0,te.hu)(null!==D.value,"Priority writes must always be leaf nodes"),f=D.value):l=Tg(Kn(c,y),D,l)}),!l.getChild(c).isEmpty()&&null!==f&&(l=l.updateChild(Kn(c,".priority"),f)),l}}function qc(c,o){return Np(o,c)}function Yi(c,o){if(c.snap)return Ja(c.path,o);for(const l in c.children)if(c.children.hasOwnProperty(l)&&Ja(Kn(c.path,l),o))return!0;return!1}function xp(c){return c.visible}function Ud(c,o,l){let f=sl.empty();for(let y=0;y<c.length;++y){const D=c[y];if(o(D)){const M=D.path;let K;if(D.snap)Ja(l,M)?(K=yo(l,M),f=to(f,K,D.snap)):Ja(M,l)&&(K=yo(M,l),f=to(f,hr(),D.snap.getChild(K)));else{if(!D.children)throw(0,te.g5)("WriteRecord should have .snap or .children");if(Ja(l,M))K=yo(l,M),f=cc(f,K,D.children);else if(Ja(M,l))if(K=yo(M,l),$t(K))f=cc(f,hr(),D.children);else{const X=(0,te.DV)(D.children,xn(K));if(X){const ue=X.getChild(Rn(K));f=to(f,hr(),ue)}}}}}return f}function ol(c,o,l,f,y){if(f||y){const D=jl(c.visibleWrites,o);return!y&&Vd(D)?l:y||null!=l||Ap(D,hr())?Nh(Ud(c.allWrites,function(ue){return(ue.visible||y)&&(!f||!~f.indexOf(ue.writeId))&&(Ja(ue.path,o)||Ja(o,ue.path))},o),l||Vn.EMPTY_NODE):null}{const D=Ld(c.visibleWrites,o);if(null!=D)return D;{const M=jl(c.visibleWrites,o);return Vd(M)?l:null!=l||Ap(M,hr())?Nh(M,l||Vn.EMPTY_NODE):null}}}function su(c,o,l,f){return ol(c.writeTree,c.treePath,o,l,f)}function ou(c,o){return function(c,o,l){let f=Vn.EMPTY_NODE;const y=Ld(c.visibleWrites,o);if(y)return y.isLeafNode()||y.forEachChild(Kr,(D,M)=>{f=f.updateImmediateChild(D,M)}),f;if(l){const D=jl(c.visibleWrites,o);return l.forEachChild(Kr,(M,K)=>{const X=Nh(jl(D,new mr(M)),K);f=f.updateImmediateChild(M,X)}),Lm(D).forEach(M=>{f=f.updateImmediateChild(M.name,M.node)}),f}return Lm(jl(c.visibleWrites,o)).forEach(M=>{f=f.updateImmediateChild(M.name,M.node)}),f}(c.writeTree,c.treePath,o)}function Oh(c,o,l,f){return function(c,o,l,f,y){(0,te.hu)(f||y,"Either existingEventSnap or existingServerSnap must exist");const D=Kn(o,l);if(Ap(c.visibleWrites,D))return null;{const M=jl(c.visibleWrites,D);return Vd(M)?y.getChild(l):Nh(M,y.getChild(l))}}(c.writeTree,c.treePath,o,l,f)}function kh(c,o){return function(c,o){return Ld(c.visibleWrites,o)}(c.writeTree,Kn(c.treePath,o))}function xg(c,o,l){return function(c,o,l,f){const y=Kn(o,l),D=Ld(c.visibleWrites,y);return null!=D?D:f.isCompleteForChild(l)?Nh(jl(c.visibleWrites,y),f.getNode().getImmediateChild(l)):null}(c.writeTree,c.treePath,o,l)}function Rg(c,o){return Np(Kn(c.treePath,o),c.writeTree)}function Np(c,o){return{treePath:c,writeTree:o}}class Um{constructor(){this.changeMap=new Map}trackChildChange(o){const l=o.type,f=o.childName;(0,te.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,te.hu)(".priority"!==f,"Only non-priority child changes can be tracked.");const y=this.changeMap.get(f);if(y){const D=y.type;if("child_added"===l&&"child_removed"===D)this.changeMap.set(f,Z(f,o.snapshotNode,y.snapshotNode));else if("child_removed"===l&&"child_added"===D)this.changeMap.delete(f);else if("child_removed"===l&&"child_changed"===D)this.changeMap.set(f,j(f,y.oldSnap));else if("child_changed"===l&&"child_added"===D)this.changeMap.set(f,b(f,o.snapshotNode));else{if("child_changed"!==l||"child_changed"!==D)throw(0,te.g5)("Illegal combination of changes: "+o+" occurred after "+y);this.changeMap.set(f,Z(f,o.snapshotNode,y.oldSnap))}}else this.changeMap.set(f,o)}getChanges(){return Array.from(this.changeMap.values())}}const Mp=new class{getCompleteChild(o){return null}getChildAfterChild(o,l,f){return null}};class Pp{constructor(o,l,f=null){this.writes_=o,this.viewCache_=l,this.optCompleteServerCache_=f}getCompleteChild(o){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(o))return l.getNode().getImmediateChild(o);{const f=null!=this.optCompleteServerCache_?new ku(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xg(this.writes_,o,f)}}getChildAfterChild(o,l,f){const y=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zc(this.viewCache_),D=function(c,o,l,f,y,D){return function(c,o,l,f,y,D,M){let K;const X=jl(c.visibleWrites,o),ue=Ld(X,hr());if(null!=ue)K=ue;else{if(null==l)return[];K=Nh(X,l)}if(K=K.withIndex(M),K.isEmpty()||K.isLeafNode())return[];{const Oe=[],Le=M.getCompare(),rt=D?K.getReverseIteratorFrom(f,M):K.getIteratorFrom(f,M);let Ft=rt.getNext();for(;Ft&&Oe.length<y;)0!==Le(Ft,f)&&Oe.push(Ft),Ft=rt.getNext();return Oe}}(c.writeTree,c.treePath,o,l,f,y,D)}(this.writes_,y,l,1,f,o);return 0===D.length?null:D[0]}}function jm(c,o,l,f,y,D){const M=o.eventCache;if(null!=kh(f,l))return o;{let K,X;if($t(l))if((0,te.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const ue=zc(o),Le=ou(f,ue instanceof Vn?ue:Vn.EMPTY_NODE);K=c.filter.updateFullNode(o.eventCache.getNode(),Le,D)}else{const ue=su(f,zc(o));K=c.filter.updateFullNode(o.eventCache.getNode(),ue,D)}else{const ue=xn(l);if(".priority"===ue){(0,te.hu)(1===Qa(l),"Can't have a priority with additional path components");const Oe=M.getNode();X=o.serverCache.getNode();const Le=Oh(f,l,Oe,X);K=null!=Le?c.filter.updatePriority(Oe,Le):M.getNode()}else{const Oe=Rn(l);let Le;if(M.isCompleteForChild(ue)){X=o.serverCache.getNode();const rt=Oh(f,l,M.getNode(),X);Le=null!=rt?M.getNode().getImmediateChild(ue).updateChild(Oe,rt):M.getNode().getImmediateChild(ue)}else Le=xg(f,ue,o.serverCache);K=null!=Le?c.filter.updateChild(M.getNode(),ue,Le,Oe,y,D):M.getNode()}}return Bl(o,K,M.isFullyInitialized()||$t(l),c.filter.filtersNodes())}}function Ng(c,o,l,f,y,D,M,K){const X=o.serverCache;let ue;const Oe=M?c.filter:c.filter.getIndexedFilter();if($t(l))ue=Oe.updateFullNode(X.getNode(),f,null);else if(Oe.filtersNodes()&&!X.isFiltered()){const Ft=X.getNode().updateChild(l,f);ue=Oe.updateFullNode(X.getNode(),Ft,null)}else{const Ft=xn(l);if(!X.isCompleteForPath(l)&&Qa(l)>1)return o;const jt=Rn(l),Jn=X.getNode().getImmediateChild(Ft).updateChild(jt,f);ue=".priority"===Ft?Oe.updatePriority(X.getNode(),Jn):Oe.updateChild(X.getNode(),Ft,Jn,jt,Mp,null)}const Le=Fd(o,ue,X.isFullyInitialized()||$t(l),Oe.filtersNodes());return jm(c,Le,l,y,new Pp(y,Le,D),K)}function Mg(c,o,l,f,y,D,M){const K=o.eventCache;let X,ue;const Oe=new Pp(y,o,D);if($t(l))ue=c.filter.updateFullNode(o.eventCache.getNode(),f,M),X=Bl(o,ue,!0,c.filter.filtersNodes());else{const Le=xn(l);if(".priority"===Le)ue=c.filter.updatePriority(o.eventCache.getNode(),f),X=Bl(o,ue,K.isFullyInitialized(),K.isFiltered());else{const rt=Rn(l),Ft=K.getNode().getImmediateChild(Le);let jt;if($t(rt))jt=f;else{const Tn=Oe.getCompleteChild(Le);jt=null!=Tn?".priority"===Ih(rt)&&Tn.getChild(Af(rt)).isEmpty()?Tn:Tn.updateChild(rt,f):Vn.EMPTY_NODE}X=Ft.equals(jt)?o:Bl(o,c.filter.updateChild(K.getNode(),Le,jt,rt,Oe,M),K.isFullyInitialized(),c.filter.filtersNodes())}}return X}function W_(c,o){return c.eventCache.isCompleteForChild(o)}function Pg(c,o,l){return l.foreach((f,y)=>{o=o.updateChild(f,y)}),o}function no(c,o,l,f,y,D,M,K){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let ue,X=o;ue=$t(l)?f:new Si(null).setTree(l,f);const Oe=o.serverCache.getNode();return ue.children.inorderTraversal((Le,rt)=>{if(Oe.hasChild(Le)){const jt=Pg(0,o.serverCache.getNode().getImmediateChild(Le),rt);X=Ng(c,X,new mr(Le),jt,y,D,M,K)}}),ue.children.inorderTraversal((Le,rt)=>{const Ft=!o.serverCache.isCompleteForChild(Le)&&void 0===rt.value;if(!Oe.hasChild(Le)&&!Ft){const Tn=Pg(0,o.serverCache.getNode().getImmediateChild(Le),rt);X=Ng(c,X,new mr(Le),Tn,y,D,M,K)}}),X}class Og{constructor(o,l){this.query_=o,this.eventRegistrations_=[];const f=this.query_._queryParams,y=new Ue(f.getIndex()),D=function(c){return c.loadsAllData()?new Ue(c.getIndex()):c.hasLimit()?new mt(c):new wt(c)}(f);this.processor_=function(c){return{filter:c}}(D);const M=l.serverCache,K=l.eventCache,X=y.updateFullNode(Vn.EMPTY_NODE,M.getNode(),null),ue=D.updateFullNode(Vn.EMPTY_NODE,K.getNode(),null),Oe=new ku(X,M.isFullyInitialized(),y.filtersNodes()),Le=new ku(ue,K.isFullyInitialized(),D.filtersNodes());this.viewCache_=Rh(Le,Oe),this.eventGenerator_=new Od(this.query_)}get query(){return this.query_}}function Fh(c,o){const l=zc(c.viewCache_);return l&&(c.query._queryParams.loadsAllData()||!$t(o)&&!l.getImmediateChild(xn(o)).isEmpty())?l.getChild(o):null}function kg(c){return 0===c.eventRegistrations_.length}function Fp(c,o,l){const f=[];if(l){(0,te.hu)(null==o,"A cancel should cancel all event registrations.");const y=c.query._path;c.eventRegistrations_.forEach(D=>{const M=D.createCancelEvent(l,y);M&&f.push(M)})}if(o){let y=[];for(let D=0;D<c.eventRegistrations_.length;++D){const M=c.eventRegistrations_[D];if(M.matches(o)){if(o.hasAnyCallback()){y=y.concat(c.eventRegistrations_.slice(D+1));break}}else y.push(M)}c.eventRegistrations_=y}else c.eventRegistrations_=[];return f}function al(c,o,l,f){o.type===nu.MERGE&&null!==o.source.queryId&&((0,te.hu)(zc(c.viewCache_),"We should always have a full cache before handling merges"),(0,te.hu)(lc(c.viewCache_),"Missing event cache, even though we have a server cache"));const y=c.viewCache_,D=function(c,o,l,f,y){const D=new Um;let M,K;if(l.type===nu.OVERWRITE){const ue=l;ue.source.fromUser?M=Mg(c,o,ue.path,ue.snap,f,y,D):((0,te.hu)(ue.source.fromServer,"Unknown source."),K=ue.source.tagged||o.serverCache.isFiltered()&&!$t(ue.path),M=Ng(c,o,ue.path,ue.snap,f,y,K,D))}else if(l.type===nu.MERGE){const ue=l;ue.source.fromUser?M=function(c,o,l,f,y,D,M){let K=o;return f.foreach((X,ue)=>{const Oe=Kn(l,X);W_(o,xn(Oe))&&(K=Mg(c,K,Oe,ue,y,D,M))}),f.foreach((X,ue)=>{const Oe=Kn(l,X);W_(o,xn(Oe))||(K=Mg(c,K,Oe,ue,y,D,M))}),K}(c,o,ue.path,ue.children,f,y,D):((0,te.hu)(ue.source.fromServer,"Unknown source."),K=ue.source.tagged||o.serverCache.isFiltered(),M=no(c,o,ue.path,ue.children,f,y,K,D))}else if(l.type===nu.ACK_USER_WRITE){const ue=l;M=ue.revert?function(c,o,l,f,y,D){let M;if(null!=kh(f,l))return o;{const K=new Pp(f,o,y),X=o.eventCache.getNode();let ue;if($t(l)||".priority"===xn(l)){let Oe;if(o.serverCache.isFullyInitialized())Oe=su(f,zc(o));else{const Le=o.serverCache.getNode();(0,te.hu)(Le instanceof Vn,"serverChildren would be complete if leaf node"),Oe=ou(f,Le)}ue=c.filter.updateFullNode(X,Oe,D)}else{const Oe=xn(l);let Le=xg(f,Oe,o.serverCache);null==Le&&o.serverCache.isCompleteForChild(Oe)&&(Le=X.getImmediateChild(Oe)),ue=null!=Le?c.filter.updateChild(X,Oe,Le,Rn(l),K,D):o.eventCache.getNode().hasChild(Oe)?c.filter.updateChild(X,Oe,Vn.EMPTY_NODE,Rn(l),K,D):X,ue.isEmpty()&&o.serverCache.isFullyInitialized()&&(M=su(f,zc(o)),M.isLeafNode()&&(ue=c.filter.updateFullNode(ue,M,D)))}return M=o.serverCache.isFullyInitialized()||null!=kh(f,hr()),Bl(o,ue,M,c.filter.filtersNodes())}}(c,o,ue.path,f,y,D):function(c,o,l,f,y,D,M){if(null!=kh(y,l))return o;const K=o.serverCache.isFiltered(),X=o.serverCache;if(null!=f.value){if($t(l)&&X.isFullyInitialized()||X.isCompleteForPath(l))return Ng(c,o,l,X.getNode().getChild(l),y,D,K,M);if($t(l)){let ue=new Si(null);return X.getNode().forEachChild(xu,(Oe,Le)=>{ue=ue.set(new mr(Oe),Le)}),no(c,o,l,ue,y,D,K,M)}return o}{let ue=new Si(null);return f.foreach((Oe,Le)=>{const rt=Kn(l,Oe);X.isCompleteForPath(rt)&&(ue=ue.set(Oe,X.getNode().getChild(rt)))}),no(c,o,l,ue,y,D,K,M)}}(c,o,ue.path,ue.affectedTree,f,y,D)}else{if(l.type!==nu.LISTEN_COMPLETE)throw(0,te.g5)("Unknown operation type: "+l.type);M=function(c,o,l,f,y){const D=o.serverCache;return jm(c,Fd(o,D.getNode(),D.isFullyInitialized()||$t(l),D.isFiltered()),l,f,Mp,y)}(c,o,l.path,f,D)}const X=D.getChanges();return function(c,o,l){const f=o.eventCache;if(f.isFullyInitialized()){const y=f.getNode().isLeafNode()||f.getNode().isEmpty(),D=lc(c);(l.length>0||!c.eventCache.isFullyInitialized()||y&&!f.getNode().equals(D)||!f.getNode().getPriority().equals(D.getPriority()))&&l.push(m(lc(o)))}}(o,M,X),{viewCache:M,changes:X}}(c.processor_,y,o,l,f);return function(c,o){(0,te.hu)(o.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,te.hu)(o.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,D.viewCache),(0,te.hu)(D.viewCache.serverCache.isFullyInitialized()||!y.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=D.viewCache,Lf(c,D.changes,D.viewCache.eventCache.getNode(),null)}function Lf(c,o,l,f){return function(c,o,l,f){const y=[],D=[];return o.forEach(M=>{"child_changed"===M.type&&c.index_.indexedValueChanged(M.oldSnap,M.snapshotNode)&&D.push(function(c,o){return{type:"child_moved",snapshotNode:o,childName:c}}(M.childName,M.snapshotNode))}),kd(c,y,"child_removed",o,f,l),kd(c,y,"child_added",o,f,l),kd(c,y,"child_moved",D,f,l),kd(c,y,"child_changed",o,f,l),kd(c,y,"value",o,f,l),y}(c.eventGenerator_,o,l,f?[f]:c.eventRegistrations_)}let Vf,pc;class Vh{constructor(){this.views=new Map}}function Lp(c,o,l,f){const y=o.source.queryId;if(null!==y){const D=c.views.get(y);return(0,te.hu)(null!=D,"SyncTree gave us an op for an invalid query."),al(D,o,l,f)}{let D=[];for(const M of c.views.values())D=D.concat(al(M,o,l,f));return D}}function fc(c,o,l,f,y){const M=c.views.get(o._queryIdentifier);if(!M){let K=su(l,y?f:null),X=!1;K?X=!0:f instanceof Vn?(K=ou(l,f),X=!1):(K=Vn.EMPTY_NODE,X=!1);const ue=Rh(new ku(K,X,!1),new ku(f,y,!1));return new Og(o,ue)}return M}function jd(c){const o=[];for(const l of c.views.values())l.query._queryParams.loadsAllData()||o.push(l);return o}function au(c,o){let l=null;for(const f of c.views.values())l=l||Fh(f,o);return l}function $d(c,o){return o._queryParams.loadsAllData()?Gd(c):c.views.get(o._queryIdentifier)}function Hd(c,o){return null!=$d(c,o)}function Na(c){return null!=Gd(c)}function Gd(c){for(const o of c.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let Uf=1;class qm{constructor(o){this.listenProvider_=o,this.syncPointTree_=new Si(null),this.pendingWriteTree_={visibleWrites:sl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bh(c,o,l,f,y){return function(c,o,l,f,y){(0,te.hu)(f>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===y&&(y=!0),c.allWrites.push({path:o,snap:l,writeId:f,visible:y}),y&&(c.visibleWrites=to(c.visibleWrites,o,l)),c.lastWriteId=f}(c.pendingWriteTree_,o,l,f,y),y?jh(c,new iu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,l)):[]}function ul(c,o,l=!1){const f=function(c,o){for(let l=0;l<c.allWrites.length;l++){const f=c.allWrites[l];if(f.writeId===o)return f}return null}(c.pendingWriteTree_,o);if(function(c,o){const l=c.allWrites.findIndex(K=>K.writeId===o);(0,te.hu)(l>=0,"removeWrite called with nonexistent writeId.");const f=c.allWrites[l];c.allWrites.splice(l,1);let y=f.visible,D=!1,M=c.allWrites.length-1;for(;y&&M>=0;){const K=c.allWrites[M];K.visible&&(M>=l&&Yi(K,f.path)?y=!1:Ja(f.path,K.path)&&(D=!0)),M--}return!!y&&(D?(function(c){c.visibleWrites=Ud(c.allWrites,xp,hr()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(f.snap?c.visibleWrites=dc(c.visibleWrites,f.path):Cr(f.children,X=>{c.visibleWrites=dc(c.visibleWrites,Kn(f.path,X))}),!0))}(c.pendingWriteTree_,o)){let D=new Si(null);return null!=f.snap?D=D.set(hr(),!0):Cr(f.children,M=>{D=D.set(new mr(M),!0)}),jh(c,new ru(f.path,D,l))}return[]}function Wd(c,o,l){return jh(c,new iu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,l))}function Zc(c,o,l,f){const y=o._path,D=c.syncPointTree_.get(y);let M=[];if(D&&("default"===o._queryIdentifier||Hd(D,o))){const K=function(c,o,l,f){const y=o._queryIdentifier,D=[];let M=[];const K=Na(c);if("default"===y)for(const[X,ue]of c.views.entries())M=M.concat(Fp(ue,l,f)),kg(ue)&&(c.views.delete(X),ue.query._queryParams.loadsAllData()||D.push(ue.query));else{const X=c.views.get(y);X&&(M=M.concat(Fp(X,l,f)),kg(X)&&(c.views.delete(y),X.query._queryParams.loadsAllData()||D.push(X.query)))}return K&&!Na(c)&&D.push(new((0,te.hu)(Vf,"Reference.ts has not been loaded"),Vf)(o._repo,o._path)),{removed:D,events:M}}(D,o,l,f);(function(c){return 0===c.views.size})(D)&&(c.syncPointTree_=c.syncPointTree_.remove(y));const X=K.removed;M=K.events;const ue=-1!==X.findIndex(Le=>Le._queryParams.loadsAllData()),Oe=c.syncPointTree_.findOnPath(y,(Le,rt)=>Na(rt));if(ue&&!Oe){const Le=c.syncPointTree_.subtree(y);if(!Le.isEmpty()){const rt=function(c){return c.fold((o,l,f)=>{if(l&&Na(l))return[Gd(l)];{let y=[];return l&&(y=jd(l)),Cr(f,(D,M)=>{y=y.concat(M)}),y}})}(Le);for(let Ft=0;Ft<rt.length;++Ft){const jt=rt[Ft],Tn=jt.query,Jn=Bg(c,jt);c.listenProvider_.startListening(jf(Tn),Yc(c,Tn),Jn.hashFn,Jn.onComplete)}}}if(!Oe&&X.length>0&&!f)if(ue){const Le=null;c.listenProvider_.stopListening(jf(o),Le)}else X.forEach(Le=>{const rt=c.queryToTagMap.get(Qc(Le));c.listenProvider_.stopListening(jf(Le),rt)});!function(c,o){for(let l=0;l<o.length;++l){const f=o[l];if(!f._queryParams.loadsAllData()){const y=Qc(f),D=c.queryToTagMap.get(y);c.queryToTagMap.delete(y),c.tagToQueryMap.delete(D)}}}(c,X)}return M}function $p(c,o,l,f){const y=$h(c,f);if(null!=y){const D=Gp(y),M=D.path,K=D.queryId,X=yo(M,o);return Wp(c,M,new iu(Pu(K),X,l))}return[]}function Vg(c,o){const l=c._path;let f=null,y=!1;o.syncPointTree_.foreachOnPath(l,(ue,Oe)=>{const Le=yo(ue,l);f=f||au(Oe,Le),y=y||Na(Oe)});let M,D=o.syncPointTree_.get(l);D?(y=y||Na(D),f=f||au(D,hr())):(D=new Vh,o.syncPointTree_=o.syncPointTree_.set(l,D)),null!=f?M=!0:(M=!1,f=Vn.EMPTY_NODE,o.syncPointTree_.subtree(l).foreachChild((Oe,Le)=>{const rt=au(Le,hr());rt&&(f=f.updateImmediateChild(Oe,rt))}));const K=Hd(D,c);if(!K&&!c._queryParams.loadsAllData()){const ue=Qc(c);(0,te.hu)(!o.queryToTagMap.has(ue),"View does not exist, but we have a tag");const Oe=Uf++;o.queryToTagMap.set(ue,Oe),o.tagToQueryMap.set(Oe,ue)}return{syncPoint:D,writesCache:qc(o.pendingWriteTree_,l),serverCache:f,serverCacheComplete:M,foundAncestorDefaultView:y,viewAlreadyExists:K}}function Zm(c,o,l){const{syncPoint:f,serverCache:y,writesCache:D,serverCacheComplete:M,viewAlreadyExists:K,foundAncestorDefaultView:X}=Vg(o,c);let ue=function(c,o,l,f,y,D){const M=fc(c,o,f,y,D);return c.views.has(o._queryIdentifier)||c.views.set(o._queryIdentifier,M),function(c,o){c.eventRegistrations_.push(o)}(M,l),function(c,o){const l=c.viewCache_.eventCache,f=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Kr,(D,M)=>{f.push(b(D,M))}),l.isFullyInitialized()&&f.push(m(l.getNode())),Lf(c,f,l.getNode(),o)}(M,l)}(f,o,l,D,y,M);if(!K&&!X){const Oe=$d(f,o);ue=ue.concat(function(c,o,l){const f=o._path,y=Yc(c,o),D=Bg(c,l),M=c.listenProvider_.startListening(jf(o),y,D.hashFn,D.onComplete),K=c.syncPointTree_.subtree(f);if(y)(0,te.hu)(!Na(K.value),"If we're adding a query, it shouldn't be shadowed");else{const X=K.fold((ue,Oe,Le)=>{if(!$t(ue)&&Oe&&Na(Oe))return[Gd(Oe).query];{let rt=[];return Oe&&(rt=rt.concat(jd(Oe).map(Ft=>Ft.query))),Cr(Le,(Ft,jt)=>{rt=rt.concat(jt)}),rt}});for(let ue=0;ue<X.length;++ue){const Oe=X[ue];c.listenProvider_.stopListening(jf(Oe),Yc(c,Oe))}}return M}(c,o,Oe))}return ue}function Bf(c,o,l){const y=c.pendingWriteTree_,D=c.syncPointTree_.findOnPath(o,(M,K)=>{const ue=au(K,yo(M,o));if(ue)return ue});return ol(y,o,D,l,!0)}function jh(c,o){return Hp(o,c.syncPointTree_,null,qc(c.pendingWriteTree_,hr()))}function Hp(c,o,l,f){if($t(c.path))return Ug(c,o,l,f);{const y=o.get(hr());null==l&&null!=y&&(l=au(y,hr()));let D=[];const M=xn(c.path),K=c.operationForChild(M),X=o.children.get(M);if(X&&K){const ue=l?l.getImmediateChild(M):null,Oe=Rg(f,M);D=D.concat(Hp(K,X,ue,Oe))}return y&&(D=D.concat(Lp(y,c,f,l))),D}}function Ug(c,o,l,f){const y=o.get(hr());null==l&&null!=y&&(l=au(y,hr()));let D=[];return o.children.inorderTraversal((M,K)=>{const X=l?l.getImmediateChild(M):null,ue=Rg(f,M),Oe=c.operationForChild(M);Oe&&(D=D.concat(Ug(Oe,K,X,ue)))}),y&&(D=D.concat(Lp(y,c,f,l))),D}function Bg(c,o){const l=o.query,f=Yc(c,l);return{hashFn:()=>(function(c){return c.viewCache_.serverCache.getNode()}(o)||Vn.EMPTY_NODE).hash(),onComplete:y=>{if("ok"===y)return f?function(c,o,l){const f=$h(c,l);if(f){const y=Gp(f),D=y.path,M=y.queryId,K=yo(D,o);return Wp(c,D,new Ou(Pu(M),K))}return[]}(c,l._path,f):function(c,o){return jh(c,new Ou({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(c,l._path);{const D=function(c,o){let l="Unknown Error";"too_big"===c?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?l="Client doesn't have permission to access the desired data.":"unavailable"===c&&(l="The service is unavailable");const f=new Error(c+" at "+o._path.toString()+": "+l);return f.code=c.toUpperCase(),f}(y,l);return Zc(c,l,null,D)}}}}function Yc(c,o){const l=Qc(o);return c.queryToTagMap.get(l)}function Qc(c){return c._path.toString()+"$"+c._queryIdentifier}function $h(c,o){return c.tagToQueryMap.get(o)}function Gp(c){const o=c.indexOf("$");return(0,te.hu)(-1!==o&&o<c.length-1,"Bad queryKey."),{queryId:c.substr(o+1),path:new mr(c.substr(0,o))}}function Wp(c,o,l){const f=c.syncPointTree_.get(o);return(0,te.hu)(f,"Missing sync point for query tag that we're tracking"),Lp(f,l,qc(c.pendingWriteTree_,o),null)}function jf(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new((0,te.hu)(pc,"Reference.ts has not been loaded"),pc)(c._repo,c._path):c}class Ma{constructor(o){this.node_=o}getImmediateChild(o){const l=this.node_.getImmediateChild(o);return new Ma(l)}node(){return this.node_}}class Hl{constructor(o,l){this.syncTree_=o,this.path_=l}getImmediateChild(o){const l=Kn(this.path_,o);return new Hl(this.syncTree_,l)}node(){return Bf(this.syncTree_,this.path_)}}const Hf=function(c,o,l){return c&&"object"==typeof c?((0,te.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?zp(c[".sv"],o,l):"object"==typeof c[".sv"]?qp(c[".sv"],o):void(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},zp=function(c,o,l){if("timestamp"===c)return l.timestamp;(0,te.hu)(!1,"Unexpected server value: "+c)},qp=function(c,o,l){c.hasOwnProperty("increment")||(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));const f=c.increment;"number"!=typeof f&&(0,te.hu)(!1,"Unexpected increment value: "+f);const y=o.node();if((0,te.hu)(null!=y,"Expected ChildrenNode.EMPTY_NODE for nulls"),!y.isLeafNode())return f;const M=y.getValue();return"number"!=typeof M?f:M+f},$g=function(c,o,l,f){return Wf(o,new Hl(l,c),f)},Gf=function(c,o,l){return Wf(c,new Ma(o),l)};function Wf(c,o,l){const f=c.getPriority().val(),y=Hf(f,o.getImmediateChild(".priority"),l);let D;if(c.isLeafNode()){const M=c,K=Hf(M.getValue(),o,l);return K!==M.getValue()||y!==M.getPriority().val()?new Xa(K,li(y)):c}{const M=c;return D=M,y!==M.getPriority().val()&&(D=D.updatePriority(new Xa(y))),M.forEachChild(Kr,(K,X)=>{const ue=Wf(X,o.getImmediateChild(K),l);ue!==X&&(D=D.updateImmediateChild(K,ue))}),D}}class Fu{constructor(o="",l=null,f={children:{},childCount:0}){this.name=o,this.parent=l,this.node=f}}function zf(c,o){let l=o instanceof mr?o:new mr(o),f=c,y=xn(l);for(;null!==y;){const D=(0,te.DV)(f.node.children,y)||{children:{},childCount:0};f=new Fu(y,f,D),l=Rn(l),y=xn(l)}return f}function zd(c){return c.node.value}function Jc(c,o){c.node.value=o,Zp(c)}function Kp(c){return c.node.childCount>0}function Hh(c,o){Cr(c.node.children,(l,f)=>{o(new Fu(l,c,f))})}function Gh(c,o,l,f){l&&!f&&o(c),Hh(c,y=>{Gh(y,o,!0,f)}),l&&f&&o(c)}function qd(c){return new mr(null===c.parent?c.name:qd(c.parent)+"/"+c.name)}function Zp(c){null!==c.parent&&function(c,o,l){const f=function(c){return void 0===zd(c)&&!Kp(c)}(l),y=(0,te.r3)(c.node.children,o);f&&y?(delete c.node.children[o],c.node.childCount--,Zp(c)):!f&&!y&&(c.node.children[o]=l.node,c.node.childCount++,Zp(c))}(c.parent,c.name,c)}const Jm=/[\[\].#$\/\u0000-\u001F\u007F]/,K_=/[\[\].#$\u0000-\u001F\u007F]/,Yp=10485760,Wh=function(c){return"string"==typeof c&&0!==c.length&&!Jm.test(c)},Qp=function(c){return"string"==typeof c&&0!==c.length&&!K_.test(c)},ed=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!Ln(c)||c&&"object"==typeof c&&(0,te.r3)(c,".sv")},Eo=function(c,o,l,f){f&&void 0===o||Gl((0,te.gK)(c,"value"),o,l)},Gl=function(c,o,l){const f=l instanceof mr?new va(l,c):l;if(void 0===o)throw new Error(c+"contains undefined "+Js(f));if("function"==typeof o)throw new Error(c+"contains a function "+Js(f)+" with contents = "+o.toString());if(Ln(o))throw new Error(c+"contains "+o.toString()+" "+Js(f));if("string"==typeof o&&o.length>Yp/3&&(0,te.ug)(o)>Yp)throw new Error(c+"contains a string greater than "+Yp+" utf8 bytes "+Js(f)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let y=!1,D=!1;if(Cr(o,(M,K)=>{if(".value"===M)y=!0;else if(".priority"!==M&&".sv"!==M&&(D=!0,!Wh(M)))throw new Error(c+" contains an invalid key ("+M+") "+Js(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(c,o){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(o),c.byteLength_+=(0,te.ug)(o),bd(c)})(f,M),Gl(c,K,f),function(c){const o=c.parts_.pop();c.byteLength_-=(0,te.ug)(o),c.parts_.length>0&&(c.byteLength_-=1)}(f)}),y&&D)throw new Error(c+' contains ".value" child '+Js(f)+" in addition to actual children.")}},Jp=function(c,o,l,f){if(f&&void 0===o)return;const y=(0,te.gK)(c,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(y+" must be an object containing the children to replace.");const D=[];Cr(o,(M,K)=>{const X=new mr(M);if(Gl(y,K,Kn(l,X)),".priority"===Ih(X)&&!ed(K))throw new Error(y+"contains an invalid value for '"+X.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");D.push(X)}),function(c,o){let l,f;for(l=0;l<o.length;l++){f=o[l];const D=Xu(f);for(let M=0;M<D.length;M++)if((".priority"!==D[M]||M!==D.length-1)&&!Wh(D[M]))throw new Error(c+"contains an invalid key ("+D[M]+") in path "+f.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(xf);let y=null;for(l=0;l<o.length;l++){if(f=o[l],null!==y&&Ja(y,f))throw new Error(c+"contains a path "+y.toString()+" that is ancestor of another path "+f.toString());y=f}}(y,D)},e_=function(c,o,l){if(!l||void 0!==o){if(Ln(o))throw new Error((0,te.gK)(c,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ed(o))throw new Error((0,te.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lu=function(c,o,l,f){if(!(f&&void 0===l||Wh(l)))throw new Error((0,te.gK)(c,o)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Kd=function(c,o,l,f){if(!(f&&void 0===l||Qp(l)))throw new Error((0,te.gK)(c,o)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wo=function(c,o){if(".info"===xn(o))throw new Error(c+" failed = Can't modify data under /.info/")},Xp=function(c,o){const l=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!Wh(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==l.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Qp(c)}(l))throw new Error((0,te.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class td{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vu(c,o){let l=null;for(let f=0;f<o.length;f++){const y=o[f],D=y.getPath();null!==l&&!xa(D,l.path)&&(c.eventLists_.push(l),l=null),null===l&&(l={events:[],path:D}),l.events.push(y)}l&&c.eventLists_.push(l)}function eg(c,o,l){Vu(c,l),Yd(c,f=>xa(f,o))}function Co(c,o,l){Vu(c,l),Yd(c,f=>Ja(f,o)||Ja(o,f))}function Yd(c,o){c.recursionDepth_++;let l=!0;for(let f=0;f<c.eventLists_.length;f++){const y=c.eventLists_[f];y&&(o(y.path)?(tg(c.eventLists_[f]),c.eventLists_[f]=null):l=!1)}l&&(c.eventLists_=[]),c.recursionDepth_--}function tg(c){for(let o=0;o<c.events.length;o++){const l=c.events[o];if(null!==l){c.events[o]=null;const f=l.getEventRunner();$&&xe("event: "+l.toString()),Al(f)}}}const Qd="repo_interrupt";class t_{constructor(o,l,f,y){this.repoInfo_=o,this.forceRestClient_=l,this.authTokenProvider_=f,this.appCheckProvider_=y,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new td,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ac(),this.transactionQueueTree_=new Fu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Kf(c){const l=c.infoData_.getNode(new mr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Jd(c){return function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c}({timestamp:Kf(c)})}function ng(c,o,l,f,y){c.dataUpdateCount++;const D=new mr(o);l=c.interceptServerDataCallback_?c.interceptServerDataCallback_(o,l):l;let M=[];if(y)if(f){const X=(0,te.UI)(l,ue=>li(ue));M=function(c,o,l,f){const y=$h(c,f);if(y){const D=Gp(y),M=D.path,K=D.queryId,X=yo(M,o),ue=Si.fromObject(l);return Wp(c,M,new Wc(Pu(K),X,ue))}return[]}(c.serverSyncTree_,D,X,y)}else{const X=li(l);M=$p(c.serverSyncTree_,D,X,y)}else if(f){const X=(0,te.UI)(l,ue=>li(ue));M=function(c,o,l){const f=Si.fromObject(l);return jh(c,new Wc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,f))}(c.serverSyncTree_,D,X)}else{const X=li(l);M=Wd(c.serverSyncTree_,D,X)}let K=D;M.length>0&&(K=eh(c,D)),Co(c.eventQueue_,K,M)}function Xd(c,o){Zf(c,"connected",o),!1===o&&function(c){mc(c,"onDisconnectEvents");const o=Jd(c),l=ac();Gc(c.onDisconnect_,hr(),(y,D)=>{const M=$g(y,D,c.serverSyncTree_,o);Ul(l,y,M)});let f=[];Gc(l,hr(),(y,D)=>{f=f.concat(Wd(c.serverSyncTree_,y,D));const M=Kh(c,y);eh(c,M)}),c.onDisconnect_=ac(),Co(c.eventQueue_,hr(),f)}(c)}function Zf(c,o,l){const f=new mr("/.info/"+o),y=li(l);c.infoData_.updateSnapshot(f,y);const D=Wd(c.infoSyncTree_,f,y);Co(c.eventQueue_,f,D)}function zh(c){return c.nextWriteId_++}function J_(c,o){const l=function(c,o){const l=o._path;let f=null;c.syncPointTree_.foreachOnPath(l,(ue,Oe)=>{const Le=yo(ue,l);f=f||au(Oe,Le)});let y=c.syncPointTree_.get(l);y?f=f||au(y,hr()):(y=new Vh,c.syncPointTree_=c.syncPointTree_.set(l,y));const D=null!=f,M=D?new ku(f,!0,!1):null;return function(c){return lc(c.viewCache_)}(fc(y,o,qc(c.pendingWriteTree_,o._path),D?M.getNode():Vn.EMPTY_NODE,D))}(c.serverSyncTree_,o);return null!=l?Promise.resolve(l):c.server_.get(o).then(f=>{const y=li(f).withIndex(o._queryParams.getIndex());if(o._queryParams.loadsAllData())Wd(c.serverSyncTree_,o._path,y);else{const M=function(c,o){const{syncPoint:l,serverCache:f,writesCache:y,serverCacheComplete:D}=Vg(o,c),M=fc(l,o,y,f,D);return l.views.has(o._queryIdentifier)||l.views.set(o._queryIdentifier,M),o._queryParams.loadsAllData()?null:Yc(c,o)}(c.serverSyncTree_,o);$p(c.serverSyncTree_,o._path,y,M)}return Zc(c.serverSyncTree_,o,null).length>0&&mc(c,"unexpected cancel events in repoGetValue"),y},f=>(mc(c,"get for query "+(0,te.Pz)(o)+" failed: "+f),Promise.reject(new Error(f))))}function Gg(c,o,l,f,y){mc(c,"set",{path:o.toString(),value:l,priority:f});const D=Jd(c),M=li(l,f),K=Bf(c.serverSyncTree_,o),X=Gf(M,K,D),ue=zh(c),Oe=Bh(c.serverSyncTree_,o,X,ue,!0);Vu(c.eventQueue_,Oe),c.server_.put(o.toString(),M.val(!0),(rt,Ft)=>{const jt="ok"===rt;jt||Gt("set at "+o+" failed: "+rt);const Tn=ul(c.serverSyncTree_,ue,!jt);Co(c.eventQueue_,o,Tn),ll(0,y,rt,Ft)});const Le=Kh(c,o);eh(c,Le),Co(c.eventQueue_,Le,[])}function Hi(c,o,l){c.server_.onDisconnectCancel(o.toString(),(f,y)=>{"ok"===f&&tu(c.onDisconnect_,o),ll(0,l,f,y)})}function Yf(c,o,l,f){const y=li(l);c.server_.onDisconnectPut(o.toString(),y.val(!0),(D,M)=>{"ok"===D&&Ul(c.onDisconnect_,o,y),ll(0,f,D,M)})}function Qf(c,o,l){let f;f=".info"===xn(o._path)?Zc(c.infoSyncTree_,o,l):Zc(c.serverSyncTree_,o,l),eg(c.eventQueue_,o._path,f)}function ty(c){c.persistentConnection_&&c.persistentConnection_.interrupt(Qd)}function mc(c,...o){let l="";c.persistentConnection_&&(l=c.persistentConnection_.id+":"),xe(l,...o)}function ll(c,o,l,f){o&&Al(()=>{if("ok"===l)o(null);else{const y=(l||"error").toUpperCase();let D=y;f&&(D+=": "+f);const M=new Error(D);M.code=y,o(M)}})}function qh(c,o,l){return Bf(c.serverSyncTree_,o,l)||Vn.EMPTY_NODE}function Jf(c,o=c.transactionQueueTree_){if(o||tp(c,o),zd(o)){const l=Zg(c,o);(0,te.hu)(l.length>0,"Sending zero length transaction queue"),l.every(y=>0===y.status)&&function(c,o,l){const f=l.map(ue=>ue.currentWriteId),y=qh(c,o,f);let D=y;const M=y.hash();for(let ue=0;ue<l.length;ue++){const Oe=l[ue];(0,te.hu)(0===Oe.status,"tryToSendTransactionQueue_: items in queue should all be run."),Oe.status=1,Oe.retryCount++;const Le=yo(o,Oe.path);D=D.updateChild(Le,Oe.currentOutputSnapshotRaw)}const K=D.val(!0),X=o;c.server_.put(X.toString(),K,ue=>{mc(c,"transaction put response",{path:X.toString(),status:ue});let Oe=[];if("ok"===ue){const Le=[];for(let rt=0;rt<l.length;rt++)l[rt].status=2,Oe=Oe.concat(ul(c.serverSyncTree_,l[rt].currentWriteId)),l[rt].onComplete&&Le.push(()=>l[rt].onComplete(null,!0,l[rt].currentOutputSnapshotResolved)),l[rt].unwatcher();tp(c,zf(c.transactionQueueTree_,o)),Jf(c,c.transactionQueueTree_),Co(c.eventQueue_,o,Oe);for(let rt=0;rt<Le.length;rt++)Al(Le[rt])}else{if("datastale"===ue)for(let Le=0;Le<l.length;Le++)l[Le].status=3===l[Le].status?4:0;else{Gt("transaction at "+X.toString()+" failed: "+ue);for(let Le=0;Le<l.length;Le++)l[Le].status=4,l[Le].abortReason=ue}eh(c,o)}},M)}(c,qd(o),l)}else Kp(o)&&Hh(o,l=>{Jf(c,l)})}function eh(c,o){const l=Xf(c,o),f=qd(l);return function(c,o,l){if(0===o.length)return;const f=[];let y=[];const M=o.filter(K=>0===K.status).map(K=>K.currentWriteId);for(let K=0;K<o.length;K++){const X=o[K],ue=yo(l,X.path);let Le,Oe=!1;if((0,te.hu)(null!==ue,"rerunTransactionsUnderNode_: relativePath should not be null."),4===X.status)Oe=!0,Le=X.abortReason,y=y.concat(ul(c.serverSyncTree_,X.currentWriteId,!0));else if(0===X.status)if(X.retryCount>=25)Oe=!0,Le="maxretry",y=y.concat(ul(c.serverSyncTree_,X.currentWriteId,!0));else{const rt=qh(c,X.path,M);X.currentInputSnapshot=rt;const Ft=o[K].update(rt.val());if(void 0!==Ft){Gl("transaction failed: Data returned ",Ft,X.path);let jt=li(Ft);"object"==typeof Ft&&null!=Ft&&(0,te.r3)(Ft,".priority")||(jt=jt.updatePriority(rt.getPriority()));const Jn=X.currentWriteId,Ai=Jd(c),js=Gf(jt,rt,Ai);X.currentOutputSnapshotRaw=jt,X.currentOutputSnapshotResolved=js,X.currentWriteId=zh(c),M.splice(M.indexOf(Jn),1),y=y.concat(Bh(c.serverSyncTree_,X.path,js,X.currentWriteId,X.applyLocally)),y=y.concat(ul(c.serverSyncTree_,Jn,!0))}else Oe=!0,Le="nodata",y=y.concat(ul(c.serverSyncTree_,X.currentWriteId,!0))}Co(c.eventQueue_,l,y),y=[],Oe&&(o[K].status=2,setTimeout(o[K].unwatcher,Math.floor(0)),o[K].onComplete&&f.push("nodata"===Le?()=>o[K].onComplete(null,!1,o[K].currentInputSnapshot):()=>o[K].onComplete(new Error(Le),!1,null)))}tp(c,c.transactionQueueTree_);for(let K=0;K<f.length;K++)Al(f[K]);Jf(c,c.transactionQueueTree_)}(c,Zg(c,l),f),f}function Xf(c,o){let l,f=c.transactionQueueTree_;for(l=xn(o);null!==l&&void 0===zd(f);)f=zf(f,l),l=xn(o=Rn(o));return f}function Zg(c,o){const l=[];return ep(c,o,l),l.sort((f,y)=>f.order-y.order),l}function ep(c,o,l){const f=zd(o);if(f)for(let y=0;y<f.length;y++)l.push(f[y]);Hh(o,y=>{ep(c,y,l)})}function tp(c,o){const l=zd(o);if(l){let f=0;for(let y=0;y<l.length;y++)2!==l[y].status&&(l[f]=l[y],f++);l.length=f,Jc(o,l.length>0?l:void 0)}Hh(o,f=>{tp(c,f)})}function Kh(c,o){const l=qd(Xf(c,o)),f=zf(c.transactionQueueTree_,o);return function(c,o,l){let f=c.parent;for(;null!==f;){if(o(f))return!0;f=f.parent}}(f,y=>{Yg(c,y)}),Yg(c,f),Gh(f,y=>{Yg(c,y)}),l}function Yg(c,o){const l=zd(o);if(l){const f=[];let y=[],D=-1;for(let M=0;M<l.length;M++)3===l[M].status||(1===l[M].status?((0,te.hu)(D===M-1,"All SENT items should be at beginning of queue."),D=M,l[M].status=3,l[M].abortReason="set"):((0,te.hu)(0===l[M].status,"Unexpected transaction status in abort"),l[M].unwatcher(),y=y.concat(ul(c.serverSyncTree_,l[M].currentWriteId,!0)),l[M].onComplete&&f.push(l[M].onComplete.bind(null,new Error("set"),!1,null))));-1===D?Jc(o,void 0):l.length=D+1,Co(c.eventQueue_,qd(o),y);for(let M=0;M<f.length;M++)Al(f[M])}}const np=function(c,o){const l=rg(c),f=l.namespace;return"firebase.com"===l.domain&&Rt(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==l.domain&&Rt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nc(l.host,l.secure,f,"ws"===l.scheme||"wss"===l.scheme,o,"",f!==l.subdomain),path:new mr(l.pathString)}},rg=function(c){let o="",l="",f="",y="",D="",M=!0,K="https",X=443;if("string"==typeof c){let ue=c.indexOf("//");ue>=0&&(K=c.substring(0,ue-1),c=c.substring(ue+2));let Oe=c.indexOf("/");-1===Oe&&(Oe=c.length);let Le=c.indexOf("?");-1===Le&&(Le=c.length),o=c.substring(0,Math.min(Oe,Le)),Oe<Le&&(y=function(c){let o="";const l=c.split("/");for(let f=0;f<l.length;f++)if(l[f].length>0){let y=l[f];try{y=decodeURIComponent(y.replace(/\+/g," "))}catch(D){}o+="/"+y}return o}(c.substring(Oe,Le)));const rt=function(c){const o={};"?"===c.charAt(0)&&(c=c.substring(1));for(const l of c.split("&")){if(0===l.length)continue;const f=l.split("=");2===f.length?o[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):Gt(`Invalid query segment '${l}' in query '${c}'`)}return o}(c.substring(Math.min(c.length,Le)));ue=o.indexOf(":"),ue>=0?(M="https"===K||"wss"===K,X=parseInt(o.substring(ue+1),10)):ue=o.length;const Ft=o.slice(0,ue);if("localhost"===Ft.toLowerCase())l="localhost";else if(Ft.split(".").length<=2)l=Ft;else{const jt=o.indexOf(".");f=o.substring(0,jt).toLowerCase(),l=o.substring(jt+1),D=f}"ns"in rt&&(D=rt.ns)}return{host:o,port:X,domain:l,subdomain:f,secure:M,scheme:K,pathString:y,namespace:D}};class Jg{constructor(o,l,f,y){this.eventType=o,this.eventRegistration=l,this.snapshot=f,this.prevName=y}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,te.Pz)(this.snapshot.exportVal())}}class rd{constructor(o,l,f){this.eventRegistration=o,this.error=l,this.path=f}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xg{constructor(o,l){this.snapshotCallback=o,this.cancelCallback=l}onValue(o,l){this.snapshotCallback.call(null,o,l)}onCancel(o){return(0,te.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class ig{constructor(o,l){this._repo=o,this._path=l}cancel(){const o=new te.BH;return Hi(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){wo("OnDisconnect.remove",this._path);const o=new te.BH;return Yf(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){wo("OnDisconnect.set",this._path),Eo("OnDisconnect.set",o,this._path,!1);const l=new te.BH;return Yf(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}setWithPriority(o,l){wo("OnDisconnect.setWithPriority",this._path),Eo("OnDisconnect.setWithPriority",o,this._path,!1),e_("OnDisconnect.setWithPriority",l,!1);const f=new te.BH;return function(c,o,l,f,y){const D=li(l,f);c.server_.onDisconnectPut(o.toString(),D.val(!0),(M,K)=>{"ok"===M&&Ul(c.onDisconnect_,o,D),ll(0,y,M,K)})}(this._repo,this._path,o,l,f.wrapCallback(()=>{})),f.promise}update(o){wo("OnDisconnect.update",this._path),Jp("OnDisconnect.update",o,this._path,!1);const l=new te.BH;return function(c,o,l,f){if((0,te.xb)(l))return xe("onDisconnect().update() called with empty data.  Don't do anything."),void ll(0,f,"ok",void 0);c.server_.onDisconnectMerge(o.toString(),l,(y,D)=>{"ok"===y&&Cr(l,(M,K)=>{const X=li(K);Ul(c.onDisconnect_,Kn(o,M),X)}),ll(0,f,y,D)})}(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}}class uu{constructor(o,l,f,y){this._repo=o,this._path=l,this._queryParams=f,this._orderByCalled=y}get key(){return $t(this._path)?null:Ih(this._path)}get ref(){return new lu(this._repo,this._path)}get _queryIdentifier(){const o=Nd(this._queryParams),l=Dl(o);return"{}"===l?"default":l}get _queryObject(){return Nd(this._queryParams)}isEqual(o){if(!((o=(0,te.m9)(o))instanceof uu))return!1;const l=this._repo===o._repo,f=xa(this._path,o._path);return l&&f&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(c){let o="";for(let l=c.pieceNum_;l<c.pieces_.length;l++)""!==c.pieces_[l]&&(o+="/"+encodeURIComponent(String(c.pieces_[l])));return o||"/"}(this._path)}}function rp(c,o){if(!0===c._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function bo(c){let o=null,l=null;if(c.hasStart()&&(o=c.getIndexStartValue()),c.hasEnd()&&(l=c.getIndexEndValue()),c.getIndex()===xu){const f="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",y="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==tr)throw new Error(f);if("string"!=typeof o)throw new Error(y)}if(c.hasEnd()){if(c.getIndexEndName()!==Dr)throw new Error(f);if("string"!=typeof l)throw new Error(y)}}else if(c.getIndex()===Kr){if(null!=o&&!ed(o)||null!=l&&!ed(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,te.hu)(c.getIndex()instanceof Sd||c.getIndex()===Xs,"unknown index type."),null!=o&&"object"==typeof o||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Zh(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class lu extends uu{constructor(o,l){super(o,l,new zt,!1)}get parent(){const o=Af(this._path);return null===o?null:new lu(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class Wl{constructor(o,l,f){this._node=o,this.ref=l,this._index=f}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const l=new mr(o),f=id(this.ref,o);return new Wl(this._node.getChild(l),f,Kr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(f,y)=>o(new Wl(y,id(this.ref,f),Kr)))}hasChild(o){const l=new mr(o);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ry(c,o){return(c=(0,te.m9)(c))._checkNotDeleted("ref"),void 0!==o?id(c._root,o):c._root}function Uu(c,o){(c=(0,te.m9)(c))._checkNotDeleted("refFromURL");const l=np(o,c._repo.repoInfo_.nodeAdmin);Xp("refFromURL",l);const f=l.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&f.host!==c._repo.repoInfo_.host&&Rt("refFromURL: Host name does not match the current database: (found "+f.host+" but expected "+c._repo.repoInfo_.host+")"),ry(c,l.path.toString())}function id(c,o){return null===xn((c=(0,te.m9)(c))._path)?(l=o,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Kd("child","path",l,!1)):Kd("child","path",o,!1),new lu(c._repo,Kn(c._path,o));var l}function Yh(c,o){c=(0,te.m9)(c),wo("set",c._path),Eo("set",o,c._path,!1);const l=new te.BH;return Gg(c._repo,c._path,o,null,l.wrapCallback(()=>{})),l.promise}function iy(c,o){Jp("update",o,c._path,!1);const l=new te.BH;return function(c,o,l,f){mc(c,"update",{path:o.toString(),value:l});let y=!0;const D=Jd(c),M={};if(Cr(l,(K,X)=>{y=!1,M[K]=$g(Kn(o,K),li(X),c.serverSyncTree_,D)}),y)xe("update() called with empty data.  Don't do anything."),ll(0,f,"ok",void 0);else{const K=zh(c),X=function(c,o,l,f){!function(c,o,l,f){(0,te.hu)(f>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:o,children:l,writeId:f,visible:!0}),c.visibleWrites=cc(c.visibleWrites,o,l),c.lastWriteId=f}(c.pendingWriteTree_,o,l,f);const y=Si.fromObject(l);return jh(c,new Wc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,y))}(c.serverSyncTree_,o,M,K);Vu(c.eventQueue_,X),c.server_.merge(o.toString(),l,(ue,Oe)=>{const Le="ok"===ue;Le||Gt("update at "+o+" failed: "+ue);const rt=ul(c.serverSyncTree_,K,!Le),Ft=rt.length>0?eh(c,o):o;Co(c.eventQueue_,Ft,rt),ll(0,f,ue,Oe)}),Cr(l,ue=>{const Oe=Kh(c,Kn(o,ue));eh(c,Oe)}),Co(c.eventQueue_,o,[])}}(c._repo,c._path,o,l.wrapCallback(()=>{})),l.promise}class nh{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,l){const f=l._queryParams.getIndex();return new Jg("value",this,new Wl(o.snapshotNode,new lu(l._repo,l._path),f))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new rd(this,o,l):null}matches(o){return o instanceof nh&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class og{constructor(o,l){this.eventType=o,this.callbackContext=l}respondsTo(o){let l="children_added"===o?"child_added":o;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new rd(this,o,l):null}createEvent(o,l){(0,te.hu)(null!=o.childName,"Child events should have a childName.");const f=id(new lu(l._repo,l._path),o.childName),y=l._queryParams.getIndex();return new Jg(o.type,this,new Wl(o.snapshotNode,f,y),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof og&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function rh(c,o,l,f,y){let D;if("object"==typeof f&&(D=void 0,y=f),"function"==typeof f&&(D=f),y&&y.onlyOnce){const X=l,ue=(Oe,Le)=>{Qf(c._repo,c,K),X(Oe,Le)};ue.userCallback=l.userCallback,ue.context=l.context,l=ue}const M=new Xg(l,D||void 0),K="value"===o?new nh(M):new og(o,M);return function(c,o,l){let f;f=".info"===xn(o._path)?Zm(c.infoSyncTree_,o,l):Zm(c.serverSyncTree_,o,l),eg(c.eventQueue_,o._path,f)}(c._repo,c,K),()=>Qf(c._repo,c,K)}function ip(c,o,l,f){return rh(c,"value",o,l,f)}function o_(c,o,l,f){return rh(c,"child_added",o,l,f)}function ag(c,o,l,f){return rh(c,"child_changed",o,l,f)}function ug(c,o,l,f){return rh(c,"child_moved",o,l,f)}function lg(c,o,l,f){return rh(c,"child_removed",o,l,f)}function a_(c,o,l){let f=null;const y=l?new Xg(l):null;"value"===o?f=new nh(y):o&&(f=new og(o,y)),Qf(c._repo,c,f)}class Ea{}class sd extends Ea{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){Eo("endAt",this._value,o._path,!0);const l=xd(o._queryParams,this._value,this._key);if(Zh(l),bo(l),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new uu(o._repo,o._path,l,o._orderByCalled)}}class cu extends Ea{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){Eo("endBefore",this._value,o._path,!1);const l=function(c,o,l){let f,y;return c.index_===xu?("string"==typeof o&&(o=g(o)),y=xd(c,o,l)):(f=null==l?tr:g(l),y=xd(c,o,f)),y.endBeforeSet_=!0,y}(o._queryParams,this._value,this._key);if(Zh(l),bo(l),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new uu(o._repo,o._path,l,o._orderByCalled)}}class sp extends Ea{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){Eo("startAt",this._value,o._path,!0);const l=Mu(o._queryParams,this._value,this._key);if(Zh(l),bo(l),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new uu(o._repo,o._path,l,o._orderByCalled)}}class tm extends Ea{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){Eo("startAfter",this._value,o._path,!1);const l=function(c,o,l){let f;if(c.index_===xu)"string"==typeof o&&(o=E(o)),f=Mu(c,o,l);else{let y;y=null==l?Dr:E(l),f=Mu(c,o,y)}return f.startAfterSet_=!0,f}(o._queryParams,this._value,this._key);if(Zh(l),bo(l),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new uu(o._repo,o._path,l,o._orderByCalled)}}class op extends Ea{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new uu(o._repo,o._path,function(c,o){const l=c.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="l",l}(o._queryParams,this._limit),o._orderByCalled)}}class _c extends Ea{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new uu(o._repo,o._path,function(c,o){const l=c.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="r",l}(o._queryParams,this._limit),o._orderByCalled)}}class Pa extends Ea{constructor(o){super(),this._path=o}_apply(o){rp(o,"orderByChild");const l=new mr(this._path);if($t(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const f=new Sd(l),y=oc(o._queryParams,f);return bo(y),new uu(o._repo,o._path,y,!0)}}class od extends Ea{_apply(o){rp(o,"orderByKey");const l=oc(o._queryParams,xu);return bo(l),new uu(o._repo,o._path,l,!0)}}class ad extends Ea{_apply(o){rp(o,"orderByPriority");const l=oc(o._queryParams,Kr);return bo(l),new uu(o._repo,o._path,l,!0)}}class ud extends Ea{_apply(o){rp(o,"orderByValue");const l=oc(o._queryParams,Xs);return bo(l),new uu(o._repo,o._path,l,!0)}}class ld extends Ea{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){if(Eo("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sd(this._value,this._key)._apply(new sp(this._value,this._key)._apply(o))}}function Io(c,...o){let l=(0,te.m9)(c);for(const f of o)l=f._apply(l);return l}(function(c){(0,te.hu)(!Vf,"__referenceConstructor has already been defined"),Vf=c})(lu),function(c){(0,te.hu)(!pc,"__referenceConstructor has already been defined"),pc=c}(lu);const cg={};function im(c,o,l,f,y){let D=f||c.options.databaseURL;void 0===D&&(c.options.projectId||Rt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xe("Using default host for project ",c.options.projectId),D=`${c.options.projectId}-default-rtdb.firebaseio.com`);let X,ue,M=np(D,y),K=M.repoInfo;"undefined"!=typeof process&&process.env&&(ue=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ue?(X=!0,D=`http://${ue}?ns=${K.namespace}`,M=np(D,y),K=M.repoInfo):X=!M.repoInfo.secure;const Oe=y&&X?new _d(_d.OWNER):new si(c.name,c.options,o);Xp("Invalid Firebase Database URL",M),$t(M.path)||Rt("Database URL must point to the root of a Firebase Database (not including a child path).");const Le=function(c,o,l,f){let y=cg[o.name];y||(y={},cg[o.name]=y);let D=y[c.toURLString()];return D&&Rt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),D=new t_(c,false,l,f),y[c.toURLString()]=D,D}(K,c,Oe,new ec(c.name,l));return new h_(Le,c)}class h_{constructor(o,l){this._repoInternal=o,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(c,o,l){if(c.stats_=ma(c.repoInfo_),c.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)c.server_=new Hc(c.repoInfo_,(f,y,D,M)=>{ng(c,f,y,D,M)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(()=>Xd(c,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,te.Pz)(l)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}c.persistentConnection_=new Ra(c.repoInfo_,o,(f,y,D,M)=>{ng(c,f,y,D,M)},f=>{Xd(c,f)},f=>{!function(c,o){Cr(o,(l,f)=>{Zf(c,l,f)})}(c,f)},c.authTokenProvider_,c.appCheckProvider_,l),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(f=>{c.server_.refreshAuthToken(f)}),c.appCheckProvider_.addTokenChangeListener(f=>{c.server_.refreshAppCheckToken(f.token)}),c.statsReporter_=function(c,o){const l=c.toString();return vh[l]||(vh[l]=o()),vh[l]}(c.repoInfo_,()=>new Dg(c.stats_,c.server_)),c.infoData_=new Of,c.infoSyncTree_=new qm({startListening:(f,y,D,M)=>{let K=[];const X=c.infoData_.getNode(f._path);return X.isEmpty()||(K=Wd(c.infoSyncTree_,f._path,X),setTimeout(()=>{M("ok")},0)),K},stopListening:()=>{}}),Zf(c,"connected",!1),c.serverSyncTree_=new qm({startListening:(f,y,D,M)=>(c.server_.listen(f,D,y,(K,X)=>{const ue=M(K,X);Co(c.eventQueue_,f._path,ue)}),[]),stopListening:(f,y)=>{c.server_.unlisten(f,y)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lu(this._repo,hr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(c,o){const l=cg[o];(!l||l[c.key]!==c)&&Rt(`Database ${o}(${c.repoInfo_}) has already been deleted.`),ty(c),delete l[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&Rt("Cannot call "+o+" on a deleted database.")}}function f_(){Oc.IS_TRANSPORT_INITIALIZED&&Gt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function om(){f_(),Yu.forceDisallow()}function am(){f_(),Qu.forceDisallow(),Yu.forceAllow()}function Tr(c,o){fe(c,o)}class Gi{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ra.prototype.simpleListen=function(c,o){this.sendRequest("q",{p:c},o)},Ra.prototype.echo=function(c,o){this.sendRequest("echo",{d:c},o)},zn(yt.SDK_VERSION),(0,yt._registerComponent)(new dn.wA("database",(o,{instanceIdentifier:l})=>im(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,yt.registerVersion)(ri,"0.13.3",void 0),(0,yt.registerVersion)(ri,"0.13.3","esm2017");const uy=new za.Yd("@firebase/database-compat"),hm=function(c){uy.warn("FIREBASE WARNING: "+c)};class ly{constructor(o){this._delegate=o}cancel(o){(0,te.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,te.Wj)("OnDisconnect.cancel","onComplete",o,!0);const l=this._delegate.cancel();return o&&l.then(()=>o(null),f=>o(f)),l}remove(o){(0,te.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,te.Wj)("OnDisconnect.remove","onComplete",o,!0);const l=this._delegate.remove();return o&&l.then(()=>o(null),f=>o(f)),l}set(o,l){(0,te.Dv)("OnDisconnect.set",1,2,arguments.length),(0,te.Wj)("OnDisconnect.set","onComplete",l,!0);const f=this._delegate.set(o);return l&&f.then(()=>l(null),y=>l(y)),f}setWithPriority(o,l,f){(0,te.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,te.Wj)("OnDisconnect.setWithPriority","onComplete",f,!0);const y=this._delegate.setWithPriority(o,l);return f&&y.then(()=>f(null),D=>f(D)),y}update(o,l){if((0,te.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let D=0;D<o.length;++D)y[""+D]=o[D];o=y,hm("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,te.Wj)("OnDisconnect.update","onComplete",l,!0);const f=this._delegate.update(o);return l&&f.then(()=>l(null),y=>l(y)),f}}class pm{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return(0,te.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Or{constructor(o,l){this._database=o,this._delegate=l}val(){return(0,te.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,te.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,te.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,te.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,te.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),Kd("DataSnapshot.child","path",o,!1),new Or(this._database,this._delegate.child(o))}hasChild(o){return(0,te.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Kd("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,te.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,te.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,te.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(l=>o(new Or(this._database,l)))}hasChildren(){return(0,te.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,te.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,te.Dv)("DataSnapshot.ref",0,0,arguments.length),new dl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class na{constructor(o,l){this.database=o,this._delegate=l}on(o,l,f,y){var D;(0,te.Dv)("Query.on",2,4,arguments.length),(0,te.Wj)("Query.on","callback",l,!1);const M=na.getCancelAndContextArgs_("Query.on",f,y),K=(ue,Oe)=>{l.call(M.context,new Or(this.database,ue),Oe)};K.userCallback=l,K.context=M.context;const X=null===(D=M.cancel)||void 0===D?void 0:D.bind(M.context);switch(o){case"value":return ip(this._delegate,K,X),l;case"child_added":return o_(this._delegate,K,X),l;case"child_removed":return lg(this._delegate,K,X),l;case"child_changed":return ag(this._delegate,K,X),l;case"child_moved":return ug(this._delegate,K,X),l;default:throw new Error((0,te.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,l,f){if((0,te.Dv)("Query.off",0,3,arguments.length),function(c,o,l){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,te.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,te.Wj)("Query.off","callback",l,!0),(0,te.lb)("Query.off","context",f,!0),l){const y=()=>{};y.userCallback=l,y.context=f,a_(this._delegate,o,y)}else a_(this._delegate,o)}get(){return function(c){return J_((c=(0,te.m9)(c))._repo,c).then(o=>new Wl(o,new lu(c._repo,c._path),c._queryParams.getIndex()))}(this._delegate).then(o=>new Or(this.database,o))}once(o,l,f,y){(0,te.Dv)("Query.once",1,4,arguments.length),(0,te.Wj)("Query.once","callback",l,!0);const D=na.getCancelAndContextArgs_("Query.once",f,y),M=new te.BH,K=(ue,Oe)=>{const Le=new Or(this.database,ue);l&&l.call(D.context,Le,Oe),M.resolve(Le)};K.userCallback=l,K.context=D.context;const X=ue=>{D.cancel&&D.cancel.call(D.context,ue),M.reject(ue)};switch(o){case"value":ip(this._delegate,K,X,{onlyOnce:!0});break;case"child_added":o_(this._delegate,K,X,{onlyOnce:!0});break;case"child_removed":lg(this._delegate,K,X,{onlyOnce:!0});break;case"child_changed":ag(this._delegate,K,X,{onlyOnce:!0});break;case"child_moved":ug(this._delegate,K,X,{onlyOnce:!0});break;default:throw new Error((0,te.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return M.promise}limitToFirst(o){return(0,te.Dv)("Query.limitToFirst",1,1,arguments.length),new na(this.database,Io(this._delegate,function(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new op(c)}(o)))}limitToLast(o){return(0,te.Dv)("Query.limitToLast",1,1,arguments.length),new na(this.database,Io(this._delegate,function(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _c(c)}(o)))}orderByChild(o){return(0,te.Dv)("Query.orderByChild",1,1,arguments.length),new na(this.database,Io(this._delegate,function(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Kd("orderByChild","path",c,!1),new Pa(c)}(o)))}orderByKey(){return(0,te.Dv)("Query.orderByKey",0,0,arguments.length),new na(this.database,Io(this._delegate,new od))}orderByPriority(){return(0,te.Dv)("Query.orderByPriority",0,0,arguments.length),new na(this.database,Io(this._delegate,new ad))}orderByValue(){return(0,te.Dv)("Query.orderByValue",0,0,arguments.length),new na(this.database,Io(this._delegate,new ud))}startAt(o=null,l){return(0,te.Dv)("Query.startAt",0,2,arguments.length),new na(this.database,Io(this._delegate,function(c=null,o){return Lu("startAt","key",o,!0),new sp(c,o)}(o,l)))}startAfter(o=null,l){return(0,te.Dv)("Query.startAfter",0,2,arguments.length),new na(this.database,Io(this._delegate,function(c,o){return Lu("startAfter","key",o,!0),new tm(c,o)}(o,l)))}endAt(o=null,l){return(0,te.Dv)("Query.endAt",0,2,arguments.length),new na(this.database,Io(this._delegate,function(c,o){return Lu("endAt","key",o,!0),new sd(c,o)}(o,l)))}endBefore(o=null,l){return(0,te.Dv)("Query.endBefore",0,2,arguments.length),new na(this.database,Io(this._delegate,function(c,o){return Lu("endBefore","key",o,!0),new cu(c,o)}(o,l)))}equalTo(o,l){return(0,te.Dv)("Query.equalTo",1,2,arguments.length),new na(this.database,Io(this._delegate,function(c,o){return Lu("equalTo","key",o,!0),new ld(c,o)}(o,l)))}toString(){return(0,te.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,te.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,te.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof na))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,l,f){const y={cancel:void 0,context:void 0};if(l&&f)y.cancel=l,(0,te.Wj)(o,"cancel",y.cancel,!0),y.context=f,(0,te.lb)(o,"context",y.context,!0);else if(l)if("object"==typeof l&&null!==l)y.context=l;else{if("function"!=typeof l)throw new Error((0,te.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");y.cancel=l}return y}get ref(){return new dl(this.database,new lu(this._delegate._repo,this._delegate._path))}}class dl extends na{constructor(o,l){super(o,new uu(l._repo,l._path,new zt,!1)),this.database=o,this._delegate=l}getKey(){return(0,te.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,te.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new dl(this.database,id(this._delegate,o))}getParent(){(0,te.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new dl(this.database,o):null}getRoot(){return(0,te.Dv)("Reference.root",0,0,arguments.length),new dl(this.database,this._delegate.root)}set(o,l){(0,te.Dv)("Reference.set",1,2,arguments.length),(0,te.Wj)("Reference.set","onComplete",l,!0);const f=Yh(this._delegate,o);return l&&f.then(()=>l(null),y=>l(y)),f}update(o,l){if((0,te.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let D=0;D<o.length;++D)y[""+D]=o[D];o=y,hm("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wo("Reference.update",this._delegate._path),(0,te.Wj)("Reference.update","onComplete",l,!0);const f=iy(this._delegate,o);return l&&f.then(()=>l(null),y=>l(y)),f}setWithPriority(o,l,f){(0,te.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,te.Wj)("Reference.setWithPriority","onComplete",f,!0);const y=function(c,o,l){if(wo("setWithPriority",c._path),Eo("setWithPriority",o,c._path,!1),e_("setWithPriority",l,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";const f=new te.BH;return Gg(c._repo,c._path,o,l,f.wrapCallback(()=>{})),f.promise}(this._delegate,o,l);return f&&y.then(()=>f(null),D=>f(D)),y}remove(o){(0,te.Dv)("Reference.remove",0,1,arguments.length),(0,te.Wj)("Reference.remove","onComplete",o,!0);const l=function(c){return wo("remove",c._path),Yh(c,null)}(this._delegate);return o&&l.then(()=>o(null),f=>o(f)),l}transaction(o,l,f){(0,te.Dv)("Reference.transaction",1,3,arguments.length),(0,te.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,te.Wj)("Reference.transaction","onComplete",l,!0),function(c,o,l,f){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,te.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,f);const y=function(c,o,l){var f;if(c=(0,te.m9)(c),wo("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";const y=null===(f=null==l?void 0:l.applyLocally)||void 0===f||f,D=new te.BH,K=ip(c,()=>{});return function(c,o,l,f,y,D){mc(c,"transaction on "+o);const M={path:o,update:l,onComplete:f,status:null,order:Yo(),applyLocally:D,retryCount:0,unwatcher:y,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},K=qh(c,o,void 0);M.currentInputSnapshot=K;const X=M.update(K.val());if(void 0===X)M.unwatcher(),M.currentOutputSnapshotRaw=null,M.currentOutputSnapshotResolved=null,M.onComplete&&M.onComplete(null,!1,M.currentInputSnapshot);else{Gl("transaction failed: Data returned ",X,M.path),M.status=0;const ue=zf(c.transactionQueueTree_,o),Oe=zd(ue)||[];let Le;Oe.push(M),Jc(ue,Oe),"object"==typeof X&&null!==X&&(0,te.r3)(X,".priority")?(Le=(0,te.DV)(X,".priority"),(0,te.hu)(ed(Le),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Le=(Bf(c.serverSyncTree_,o)||Vn.EMPTY_NODE).getPriority().val();const rt=Jd(c),Ft=li(X,Le),jt=Gf(Ft,K,rt);M.currentOutputSnapshotRaw=Ft,M.currentOutputSnapshotResolved=jt,M.currentWriteId=zh(c);const Tn=Bh(c.serverSyncTree_,o,jt,M.currentWriteId,M.applyLocally);Co(c.eventQueue_,o,Tn),Jf(c,c.transactionQueueTree_)}}(c._repo,c._path,o,(X,ue,Oe)=>{let Le=null;X?D.reject(X):(Le=new Wl(Oe,new lu(c._repo,c._path),Kr),D.resolve(new Gi(ue,Le)))},K,y),D.promise}(this._delegate,o,{applyLocally:f}).then(D=>new pm(D.committed,new Or(this.database,D.snapshot)));return l&&y.then(D=>l(null,D.committed,D.snapshot),D=>l(D,!1,null)),y}setPriority(o,l){(0,te.Dv)("Reference.setPriority",1,2,arguments.length),(0,te.Wj)("Reference.setPriority","onComplete",l,!0);const f=function(c,o){c=(0,te.m9)(c),wo("setPriority",c._path),e_("setPriority",o,!1);const l=new te.BH;return Gg(c._repo,Kn(c._path,".priority"),o,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,o);return l&&f.then(()=>l(null),y=>l(y)),f}push(o,l){(0,te.Dv)("Reference.push",0,2,arguments.length),(0,te.Wj)("Reference.push","onComplete",l,!0);const f=function(c,o){c=(0,te.m9)(c),wo("push",c._path),Eo("push",o,c._path,!0);const l=Kf(c._repo),f=Rs(l),y=id(c,f),D=id(c,f);let M;return M=null!=o?Yh(D,o).then(()=>D):Promise.resolve(D),y.then=M.then.bind(M),y.catch=M.then.bind(M,void 0),y}(this._delegate,o),y=f.then(M=>new dl(this.database,M));l&&y.then(()=>l(null),M=>l(M));const D=new dl(this.database,f);return D.then=y.then.bind(y),D.catch=y.catch.bind(y,void 0),D}onDisconnect(){return wo("Reference.onDisconnect",this._delegate._path),new ly(new ig(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class as{constructor(o,l){this._delegate=o,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:om,forceLongPolling:am}}useEmulator(o,l,f={}){!function(c,o,l,f={}){(c=(0,te.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&Rt("Cannot call useEmulator() after instance has already been initialized.");const y=c._repoInternal;let D;if(y.repoInfo_.nodeAdmin)f.mockUserToken&&Rt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),D=new _d(_d.OWNER);else if(f.mockUserToken){const M="string"==typeof f.mockUserToken?f.mockUserToken:(0,te.Sg)(f.mockUserToken,c.app.options.projectId);D=new _d(M)}!function(c,o,l,f){c.repoInfo_=new nc(`${o}:${l}`,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams),f&&(c.authTokenProvider_=f)}(y,o,l,D)}(this._delegate,o,l,f)}ref(o){if((0,te.Dv)("database.ref",0,1,arguments.length),o instanceof dl){const l=Uu(this._delegate,o.toString());return new dl(this,l)}{const l=ry(this._delegate,o);return new dl(this,l)}}refFromURL(o){(0,te.Dv)("database.refFromURL",1,1,arguments.length);const f=Uu(this._delegate,o);return new dl(this,f)}goOffline(){return(0,te.Dv)("database.goOffline",0,0,arguments.length),function(c){(c=(0,te.m9)(c))._checkNotDeleted("goOffline"),ty(c._repo)}(this._delegate)}goOnline(){return(0,te.Dv)("database.goOnline",0,0,arguments.length),function(c){(c=(0,te.m9)(c))._checkNotDeleted("goOnline"),function(c){c.persistentConnection_&&c.persistentConnection_.resume(Qd)}(c._repo)}(this._delegate)}}as.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:c=>function(c){return{".sv":{increment:c}}}(c)};var dy=Object.freeze({__proto__:null,initStandalone:function({app:c,url:o,version:l,customAuthImpl:f,namespace:y,nodeAdmin:D=!1}){zn(l);const M=new dn.zt("auth-internal",new dn.H0("database-standalone"));return M.setComponent(new dn.wA("auth-internal",()=>f,"PRIVATE")),{instance:new as(im(c,M,void 0,o,D),c),namespace:y}}});const __=as.ServerValue;!function(c){c.INTERNAL.registerComponent(new dn.wA("database-compat",(o,{instanceIdentifier:l})=>{const f=o.getProvider("app-compat").getImmediate(),y=o.getProvider("database").getImmediate({identifier:l});return new as(y,f)},"PUBLIC").setServiceProps({Reference:dl,Query:na,Database:as,DataSnapshot:Or,enableLogging:Tr,INTERNAL:dy,ServerValue:__}).setMultipleInstances(!0)),c.registerVersion("@firebase/database-compat","0.2.3")}(Ge.Z);var cd=z(8006);function gm(c){return null==c}function py(c){return"function"==typeof c.set}function mm(c,o){return py(o)?o:c.ref(o)}function lp(c,o){if(function(c){return"string"==typeof c}(c))return o.stringCase();if(py(c))return o.firebaseCase();if(function(c){return"function"==typeof c.exportVal}(c))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof c)}function ef(c,o,l="on",f=sr.z){return new Vr.y(y=>{let D=null;return D=c[l](o,(M,K)=>{f.schedule(()=>{y.next({snapshot:M,prevKey:K})}),"once"===l&&f.schedule(()=>y.complete())},M=>{f.schedule(()=>y.error(M))}),"on"===l?{unsubscribe(){null!=D&&c.off(o,D)}}:{unsubscribe(){}}}).pipe((0,es.U)(y=>{const{snapshot:D,prevKey:M}=y;let K=null;return D.exists()&&(K=D.key),{type:o,payload:D,prevKey:M,key:K}}),(0,Il.B)())}function gy(c,o){const l=c.length;for(let f=0;f<l;f++)if(c[f].payload.key===o)return f;return-1}function oh(c,o){const{payload:l,prevKey:f,key:y}=o,D=gy(c,y),M=function(c,o){if(gm(o))return 0;{const l=gy(c,o);return-1===l?c.length:l+1}}(c,f);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let K=null;o.payload.forEach(X=>{const ue={payload:X,type:"value",prevKey:K,key:X.key};return K=X.key,c=[...c,ue],!1})}return c;case"child_added":if(D>-1){const K=c[D-1];(K&&K.key||null)!==f&&(c=c.filter(X=>X.payload.key!==l.key)).splice(M,0,o)}else{if(null==f)return[o,...c];(c=c.slice()).splice(M,0,o)}return c;case"child_removed":return c.filter(K=>K.payload.key!==l.key);case"child_changed":return c.map(K=>K.payload.key===y?o:K);case"child_moved":if(D>-1){const K=c.splice(D,1)[0];return(c=c.slice()).splice(M,0,K),c}return c;default:return c}}function cp(c){return(gm(c)||0===c.length)&&(c=["child_added","child_removed","child_changed","child_moved"]),c}function y_(c,o,l){return function(c,o,l){return ef(c,"value","once",l).pipe((0,Re.w)(f=>{const y=[(0,Os.of)(f)];return o.forEach(D=>y.push(ef(c,D,"on",l))),(0,Vs.T)(...y).pipe((0,qu.R)(oh,[]))}),(0,Oo.x)())}(c,o=cp(o),l)}function _m(c,o,l){const f=(o=cp(o)).map(y=>ef(c,y,"on",l));return(0,Vs.T)(...f)}function dg(c,o){return function(f,y){return lp(f,{stringCase:()=>c.child(f)[o](y),firebaseCase:()=>f[o](y),snapshotCase:()=>f.ref[o](y)})}}function tf(c){return function(l){return l?lp(l,{stringCase:()=>c.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):c.remove()}}function rf(c,o){return function(){return ef(c,"value","on",o)}}const ah=new U.OlP("angularfire2.realtimeDatabaseURL"),_y=new U.OlP("angularfire2.database.use-emulator");let vm=(()=>{class c{constructor(l,f,y,D,M,K,X,ue,Oe,Le,rt,Ft,jt,Tn,Jn){this.schedulers=K;const Ai=X,js=(0,Er.on)(l,M,f);ue&&(0,cd.nw)(js,M,Oe,rt,Ft,jt,Le,Tn),this.database=(0,Er.cc)(`${js.name}.database.${y}`,"AngularFireDatabase",js.name,()=>{const Qi=M.runOutsideAngular(()=>js.database(y||void 0));return Ai&&Qi.useEmulator(...Ai),Qi},[Ai])}list(l,f){const y=this.schedulers.ngZone.runOutsideAngular(()=>mm(this.database,l));let D=y;return f&&(D=f(y)),function(c,o){const l=o.schedulers.outsideAngular,f=o.schedulers.ngZone.run(()=>c.ref);return{query:c,update:dg(f,"update"),set:dg(f,"set"),push:y=>f.push(y),remove:tf(f),snapshotChanges:y=>y_(c,y,l).pipe(be.iC),stateChanges:y=>_m(c,y,l).pipe(be.iC),auditTrail:y=>function(c,o,l){return function(c,o,l){return function(c,o){return ef(c,"value","on",o).pipe((0,es.U)(l=>{let f;return l.payload.forEach(y=>(f=y.key,!1)),{data:l,lastKeyToLoad:f}}))}(c,l).pipe(function(...c){return o=>{let l;return"function"==typeof c[c.length-1]&&(l=c.pop()),o.lift(new ko(c,l))}}(o),(0,es.U)(([y,D])=>{const M=y.lastKeyToLoad,K=D.map(X=>X.key);return{actions:D,lastKeyToLoad:M,loadedKeys:K}}),function(c){return o=>o.lift(new Fo(c))}(y=>-1===y.loadedKeys.indexOf(y.lastKeyToLoad)),(0,es.U)(y=>y.actions))}(c,_m(c,o).pipe((0,qu.R)((y,D)=>[...y,D],[])),l)}(c,y,l).pipe(be.iC),valueChanges:(y,D)=>y_(c,y,l).pipe((0,es.U)(K=>K.map(X=>D&&D.idField?Object.assign(Object.assign({},X.payload.val()),{[D.idField]:X.key}):X.payload.val())),be.iC)}}(D,this)}object(l){return function(c,o){return{query:c,snapshotChanges:()=>rf(c,o.schedulers.outsideAngular)().pipe(be.iC),update:l=>c.ref.update(l),set:l=>c.ref.set(l),remove:()=>c.ref.remove(),valueChanges:()=>rf(c,o.schedulers.outsideAngular)().pipe(be.iC,(0,es.U)(f=>f.payload.exists()?f.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>mm(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return c.\u0275fac=function(l){return new(l||c)(U.LFG(Er.Dh),U.LFG(Er.xv,8),U.LFG(ah,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(be.HU),U.LFG(_y,8),U.LFG(cd.zQ,8),U.LFG(cd.Qv,8),U.LFG(cd.L6,8),U.LFG(cd._Q,8),U.LFG(cd.rT,8),U.LFG(cd.lh,8),U.LFG(cd.f7,8),U.LFG(Ql.nm,8))},c.\u0275prov=U.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Em=(()=>{class c{constructor(){wu.Z.registerVersion("angularfire",be.q4.full,"rtdb-compat")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c}),c.\u0275inj=U.cJS({providers:[vm]}),c})(),wm=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=U.oAB({type:c,bootstrap:[so]}),c.\u0275inj=U.cJS({providers:[],imports:[[Pi,Ei,Wi,wi.u5,wi.UX,Er.hO.initializeApp(hi_firebase),_i.yb,Ze,Em]]}),c})();(0,U.G48)(),Cn().bootstrapModule(wm).catch(c=>console.error(c))},3394:(kt,$e,z)=>{"use strict";z.d($e,{Z:()=>it});var T=z(3854),U=z(3910),ie=z(8026),Ne=z(5422);class Se{constructor(Ct,We){this._delegate=Ct,this.firebase=We,(0,ie._addComponent)(Ct,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=Ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ct){this._delegate.automaticDataCollectionEnabled=Ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ct=>{this._delegate.checkDestroyed(),Ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ie.deleteApp)(this._delegate)))}_getService(Ct,We=ie._DEFAULT_ENTRY_NAME){var Ve;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(Ct);return!Ce.isInitialized()&&"EXPLICIT"===(null===(Ve=Ce.getComponent())||void 0===Ve?void 0:Ve.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:We})}_removeServiceInstance(Ct,We=ie._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ct).clearInstance(We)}_addComponent(Ct){(0,ie._addComponent)(this._delegate,Ct)}_addOrOverwriteComponent(Ct){(0,ie._addOrOverwriteComponent)(this._delegate,Ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),se=function we(){const ze=function(ze){const Ct={},We={__esModule:!0,initializeApp:function(hn,lt={}){const Fe=ie.initializeApp(hn,lt);if((0,T.r3)(Ct,Fe.name))return Ct[Fe.name];const bt=new ze(Fe,We);return Ct[Fe.name]=bt,bt},app:Ce,registerVersion:ie.registerVersion,setLogLevel:ie.setLogLevel,onLog:ie.onLog,apps:null,SDK_VERSION:ie.SDK_VERSION,INTERNAL:{registerComponent:function(hn){const lt=hn.name,Fe=lt.replace("-compat","");if(ie._registerComponent(hn)&&"PUBLIC"===hn.type){const bt=(ot=Ce())=>{if("function"!=typeof ot[Fe])throw Pe.create("invalid-app-argument",{appName:lt});return ot[Fe]()};void 0!==hn.serviceProps&&(0,T.ZB)(bt,hn.serviceProps),We[Fe]=bt,ze.prototype[Fe]=function(...ot){return this._getService.bind(this,lt).apply(this,hn.multipleInstances?ot:[])}}return"PUBLIC"===hn.type?We[Fe]:null},removeApp:function(hn){delete Ct[hn]},useAsService:function(hn,lt){return"serverAuth"===lt?null:lt},modularAPIs:ie}};function Ce(hn){if(!(0,T.r3)(Ct,hn=hn||ie._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:hn});return Ct[hn]}return We.default=We,Object.defineProperty(We,"apps",{get:function(){return Object.keys(Ct).map(hn=>Ct[hn])}}),Ce.App=ze,We}(Se);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function(We){(0,T.ZB)(ze,We)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),ze}(),ce=new Ne.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const it=se;(0,ie.registerVersion)("@firebase/app-compat","0.1.30",undefined)},8026:(kt,$e,z)=>{"use strict";z.r($e),z.d($e,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>ur,_DEFAULT_ENTRY_NAME:()=>Yr,_addComponent:()=>ln,_addOrOverwriteComponent:()=>Zt,_apps:()=>pt,_clearComponents:()=>Bn,_components:()=>gn,_getProvider:()=>Vt,_registerComponent:()=>Qt,_removeServiceInstance:()=>on,deleteApp:()=>an,getApp:()=>kn,getApps:()=>tt,initializeApp:()=>Qr,onLog:()=>cr,registerVersion:()=>qn,setLogLevel:()=>Nn});var T=z(8239),U=z(3910),ie=z(5422),Ne=z(3854),Se=z(3173);class de{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(Te=>{if(function(ge){const ve=ge.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(Te)){const nt=Te.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(Te=>Te).join(" ")}}const he="@firebase/app",se=new ie.Yd("@firebase/app"),Yr="[DEFAULT]",pn={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pt=new Map,gn=new Map;function ln(ge,ve){try{ge.container.addComponent(ve)}catch(Te){se.debug(`Component ${ve.name} failed to register with FirebaseApp ${ge.name}`,Te)}}function Zt(ge,ve){ge.container.addOrOverwriteComponent(ve)}function Qt(ge){const ve=ge.name;if(gn.has(ve))return se.debug(`There were multiple attempts to register component ${ve}.`),!1;gn.set(ve,ge);for(const Te of pt.values())ln(Te,ge);return!0}function Vt(ge,ve){const Te=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Te&&Te.triggerHeartbeat(),ge.container.getProvider(ve)}function on(ge,ve,Te=Yr){Vt(ge,ve).clearInstance(Te)}function Bn(){gn.clear()}const mn=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class On{constructor(ve,Te,nt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Te),this._name=Te.name,this._automaticDataCollectionEnabled=Te.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}const ur="9.9.1";function Qr(ge,ve={}){"object"!=typeof ve&&(ve={name:ve});const Te=Object.assign({name:Yr,automaticDataCollectionEnabled:!1},ve),nt=Te.name;if("string"!=typeof nt||!nt)throw mn.create("bad-app-name",{appName:String(nt)});const Tt=pt.get(nt);if(Tt){if((0,Ne.vZ)(ge,Tt.options)&&(0,Ne.vZ)(Te,Tt.config))return Tt;throw mn.create("duplicate-app",{appName:nt})}const sn=new U.H0(nt);for(const $n of gn.values())sn.addComponent($n);const Jt=new On(ge,Te,sn);return pt.set(nt,Jt),Jt}function kn(ge=Yr){const ve=pt.get(ge);if(!ve)throw mn.create("no-app",{appName:ge});return ve}function tt(){return Array.from(pt.values())}function an(ge){return xt.apply(this,arguments)}function xt(){return(xt=(0,T.Z)(function*(ge){const ve=ge.name;pt.has(ve)&&(pt.delete(ve),yield Promise.all(ge.container.getProviders().map(Te=>Te.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function qn(ge,ve,Te){var nt;let Tt=null!==(nt=pn[ge])&&void 0!==nt?nt:ge;Te&&(Tt+=`-${Te}`);const sn=Tt.match(/\s|\//),Jt=ve.match(/\s|\//);if(sn||Jt){const $n=[`Unable to register library "${Tt}" with version "${ve}":`];return sn&&$n.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),sn&&Jt&&$n.push("and"),Jt&&$n.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void se.warn($n.join(" "))}Qt(new U.wA(`${Tt}-version`,()=>({library:Tt,version:ve}),"VERSION"))}function cr(ge,ve){if(null!==ge&&"function"!=typeof ge)throw mn.create("invalid-log-argument");(0,ie.Am)(ge,ve)}function Nn(ge){(0,ie.Ub)(ge)}const br="firebase-heartbeat-store";let gr=null;function _s(){return gr||(gr=(0,Se.X3)("firebase-heartbeat-database",1,{upgrade:(ge,ve)=>{0===ve&&ge.createObjectStore(br)}}).catch(ge=>{throw mn.create("storage-open",{originalErrorMessage:ge.message})})),gr}function Ot(){return(Ot=(0,T.Z)(function*(ge){var ve;try{return(yield _s()).transaction(br).objectStore(br).get(ys(ge))}catch(Te){throw mn.create("storage-get",{originalErrorMessage:null===(ve=Te)||void 0===ve?void 0:ve.message})}})).apply(this,arguments)}function tn(ge,ve){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,T.Z)(function*(ge,ve){var Te;try{const Tt=(yield _s()).transaction(br,"readwrite");return yield Tt.objectStore(br).put(ve,ys(ge)),Tt.done}catch(nt){throw mn.create("storage-set",{originalErrorMessage:null===(Te=nt)||void 0===Te?void 0:Te.message})}})).apply(this,arguments)}function ys(ge){return`${ge.name}!${ge.options.appId}`}class Yn{constructor(ve){this.container=ve,this._heartbeatsCache=null;const Te=this.container.getProvider("app").getImmediate();this._storage=new Dn(Te),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var ve=this;return(0,T.Z)(function*(){const nt=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=zr();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!ve._heartbeatsCache.heartbeats.some(sn=>sn.date===Tt))return ve._heartbeatsCache.heartbeats.push({date:Tt,agent:nt}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(sn=>{const Jt=new Date(sn.date).valueOf();return Date.now()-Jt<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,T.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const Te=zr(),{heartbeatsToSend:nt,unsentEntries:Tt}=function(ge,ve=1024){const Te=[];let nt=ge.slice();for(const Tt of ge){const sn=Te.find(Jt=>Jt.agent===Tt.agent);if(sn){if(sn.dates.push(Tt.date),_e(Te)>ve){sn.dates.pop();break}}else if(Te.push({agent:Tt.agent,dates:[Tt.date]}),_e(Te)>ve){Te.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:Te,unsentEntries:nt}}(ve._heartbeatsCache.heartbeats),sn=(0,Ne.L)(JSON.stringify({version:2,heartbeats:nt}));return ve._heartbeatsCache.lastSentHeartbeatDate=Te,Tt.length>0?(ve._heartbeatsCache.heartbeats=Tt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),sn})()}}function zr(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,T.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function(ge){return Ot.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var Te=this;return(0,T.Z)(function*(){var nt;if(yield Te._canUseIndexedDBPromise){const sn=yield Te.read();return tn(Te.app,{lastSentHeartbeatDate:null!==(nt=ve.lastSentHeartbeatDate)&&void 0!==nt?nt:sn.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var Te=this;return(0,T.Z)(function*(){var nt;if(yield Te._canUseIndexedDBPromise){const sn=yield Te.read();return tn(Te.app,{lastSentHeartbeatDate:null!==(nt=ve.lastSentHeartbeatDate)&&void 0!==nt?nt:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...ve.heartbeats]})}})()}}function _e(ge){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:ge})).length}Qt(new U.wA("platform-logger",ve=>new de(ve),"PRIVATE")),Qt(new U.wA("heartbeat",ve=>new Yn(ve),"PRIVATE")),qn(he,"0.7.29",""),qn(he,"0.7.29","esm2017"),qn("fire-js","")},3910:(kt,$e,z)=>{"use strict";z.d($e,{wA:()=>ie,H0:()=>he,zt:()=>Se});var T=z(8239),U=z(3854);class ie{constructor(se,ce,pe){this.name=se,this.instanceFactory=ce,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(se){return this.instantiationMode=se,this}setMultipleInstances(se){return this.multipleInstances=se,this}setServiceProps(se){return this.serviceProps=se,this}setInstanceCreatedCallback(se){return this.onInstanceCreated=se,this}}const Ne="[DEFAULT]";class Se{constructor(se,ce){this.name=se,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(se){const ce=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(ce)){const pe=new U.BH;if(this.instancesDeferred.set(ce,pe),this.isInitialized(ce)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:ce});Be&&pe.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(ce).promise}getImmediate(se){var ce;const pe=this.normalizeInstanceIdentifier(null==se?void 0:se.identifier),Be=null!==(ce=null==se?void 0:se.optional)&&void 0!==ce&&ce;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(Ye){if(Be)return null;throw Ye}}getComponent(){return this.component}setComponent(se){if(se.name!==this.name)throw Error(`Mismatching Component ${se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=se,this.shouldAutoInitialize()){if("EAGER"===se.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Ne})}catch(ce){}for(const[ce,pe]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(ce);try{const Ye=this.getOrInitializeService({instanceIdentifier:Be});pe.resolve(Ye)}catch(Ye){}}}}clearInstance(se=Ne){this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)}delete(){var se=this;return(0,T.Z)(function*(){const ce=Array.from(se.instances.values());yield Promise.all([...ce.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...ce.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(se=Ne){return this.instances.has(se)}getOptions(se=Ne){return this.instancesOptions.get(se)||{}}initialize(se={}){const{options:ce={}}=se,pe=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:pe,options:ce});for(const[Ye,it]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(Ye)&&it.resolve(Be);return Be}onInit(se,ce){var pe;const Be=this.normalizeInstanceIdentifier(ce),Ye=null!==(pe=this.onInitCallbacks.get(Be))&&void 0!==pe?pe:new Set;Ye.add(se),this.onInitCallbacks.set(Be,Ye);const it=this.instances.get(Be);return it&&se(it,Be),()=>{Ye.delete(se)}}invokeOnInitCallbacks(se,ce){const pe=this.onInitCallbacks.get(ce);if(pe)for(const Be of pe)try{Be(se,ce)}catch(Ye){}}getOrInitializeService({instanceIdentifier:se,options:ce={}}){let pe=this.instances.get(se);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(we=se,we===Ne?void 0:we),options:ce}),this.instances.set(se,pe),this.instancesOptions.set(se,ce),this.invokeOnInitCallbacks(pe,se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,se,pe)}catch(Be){}var we;return pe||null}normalizeInstanceIdentifier(se=Ne){return this.component?this.component.multipleInstances?se:Ne:se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(se){this.name=se,this.providers=new Map}addComponent(se){const ce=this.getProvider(se.name);if(ce.isComponentSet())throw new Error(`Component ${se.name} has already been registered with ${this.name}`);ce.setComponent(se)}addOrOverwriteComponent(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)}getProvider(se){if(this.providers.has(se))return this.providers.get(se);const ce=new Se(se,this);return this.providers.set(se,ce),ce}getProviders(){return Array.from(this.providers.values())}}},5422:(kt,$e,z)=>{"use strict";z.d($e,{in:()=>U,Yd:()=>Pe,Ub:()=>he,Am:()=>we});const T=[];var U=(()=>{return(se=U||(U={}))[se.DEBUG=0]="DEBUG",se[se.VERBOSE=1]="VERBOSE",se[se.INFO=2]="INFO",se[se.WARN=3]="WARN",se[se.ERROR=4]="ERROR",se[se.SILENT=5]="SILENT",U;var se})();const ie={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},Ne=U.INFO,Se={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},de=(se,ce,...pe)=>{if(ce<se.logLevel)return;const Be=(new Date).toISOString(),Ye=Se[ce];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[Ye](`[${Be}]  ${se.name}:`,...pe)};class Pe{constructor(ce){this.name=ce,this._logLevel=Ne,this._logHandler=de,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in U))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?ie[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...ce),this._logHandler(this,U.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...ce),this._logHandler(this,U.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,U.INFO,...ce),this._logHandler(this,U.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,U.WARN,...ce),this._logHandler(this,U.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...ce),this._logHandler(this,U.ERROR,...ce)}}function he(se){T.forEach(ce=>{ce.setLogLevel(se)})}function we(se,ce){for(const pe of T){let Be=null;ce&&ce.level&&(Be=ie[ce.level]),pe.userLogHandler=null===se?null:(Ye,it,...ze)=>{const Ct=ze.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch(Ve){return null}}).filter(We=>We).join(" ");it>=(null!=Be?Be:Ye.logLevel)&&se({level:U[it].toLowerCase(),message:Ct,args:ze,type:Ye.name})}}}},3173:(kt,$e,z)=>{"use strict";z.d($e,{Lj:()=>vt,X3:()=>Ce});var T=z(8239);let ie,Ne;const Pe=new WeakMap,he=new WeakMap,we=new WeakMap,se=new WeakMap,ce=new WeakMap;let Ye={get(lt,Fe,bt){if(lt instanceof IDBTransaction){if("done"===Fe)return he.get(lt);if("objectStoreNames"===Fe)return lt.objectStoreNames||we.get(lt);if("store"===Fe)return bt.objectStoreNames[1]?void 0:bt.objectStore(bt.objectStoreNames[0])}return We(lt[Fe])},set:(lt,Fe,bt)=>(lt[Fe]=bt,!0),has:(lt,Fe)=>lt instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in lt};function Ct(lt){return"function"==typeof lt?function(lt){return lt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ne||(Ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(lt)?function(...Fe){return lt.apply(Ve(this),Fe),We(Pe.get(this))}:function(...Fe){return We(lt.apply(Ve(this),Fe))}:function(Fe,...bt){const ot=lt.call(Ve(this),Fe,...bt);return we.set(ot,Fe.sort?Fe.sort():[Fe]),We(ot)}}(lt):(lt instanceof IDBTransaction&&function(lt){if(he.has(lt))return;const Fe=new Promise((bt,ot)=>{const Pt=()=>{lt.removeEventListener("complete",Yt),lt.removeEventListener("error",It),lt.removeEventListener("abort",It)},Yt=()=>{bt(),Pt()},It=()=>{ot(lt.error||new DOMException("AbortError","AbortError")),Pt()};lt.addEventListener("complete",Yt),lt.addEventListener("error",It),lt.addEventListener("abort",It)});he.set(lt,Fe)}(lt),((lt,Fe)=>Fe.some(bt=>lt instanceof bt))(lt,ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(lt,Ye):lt)}function We(lt){if(lt instanceof IDBRequest)return function(lt){const Fe=new Promise((bt,ot)=>{const Pt=()=>{lt.removeEventListener("success",Yt),lt.removeEventListener("error",It)},Yt=()=>{bt(We(lt.result)),Pt()},It=()=>{ot(lt.error),Pt()};lt.addEventListener("success",Yt),lt.addEventListener("error",It)});return Fe.then(bt=>{bt instanceof IDBCursor&&Pe.set(bt,lt)}).catch(()=>{}),ce.set(Fe,lt),Fe}(lt);if(se.has(lt))return se.get(lt);const Fe=Ct(lt);return Fe!==lt&&(se.set(lt,Fe),ce.set(Fe,lt)),Fe}const Ve=lt=>ce.get(lt);function Ce(lt,Fe,{blocked:bt,upgrade:ot,blocking:Pt,terminated:Yt}={}){const It=indexedDB.open(lt,Fe),fr=We(It);return ot&&It.addEventListener("upgradeneeded",Fr=>{ot(We(It.result),Fr.oldVersion,Fr.newVersion,We(It.transaction))}),bt&&It.addEventListener("blocked",()=>bt()),fr.then(Fr=>{Yt&&Fr.addEventListener("close",()=>Yt()),Pt&&Fr.addEventListener("versionchange",()=>Pt())}).catch(()=>{}),fr}function vt(lt,{blocked:Fe}={}){const bt=indexedDB.deleteDatabase(lt);return Fe&&bt.addEventListener("blocked",()=>Fe()),We(bt).then(()=>{})}const Wt=["get","getKey","getAll","getAllKeys","count"],en=["put","add","delete","clear"],St=new Map;function hn(lt,Fe){if(!(lt instanceof IDBDatabase)||Fe in lt||"string"!=typeof Fe)return;if(St.get(Fe))return St.get(Fe);const bt=Fe.replace(/FromIndex$/,""),ot=Fe!==bt,Pt=en.includes(bt);if(!(bt in(ot?IDBIndex:IDBObjectStore).prototype)||!Pt&&!Wt.includes(bt))return;const Yt=function(){var It=(0,T.Z)(function*(fr,...Fr){const Lr=this.transaction(fr,Pt?"readwrite":"readonly");let Yr=Lr.store;return ot&&(Yr=Yr.index(Fr.shift())),(yield Promise.all([Yr[bt](...Fr),Pt&&Lr.done]))[0]});return function(Fr){return It.apply(this,arguments)}}();return St.set(Fe,Yt),Yt}var lt;Ye=Cb(wb({},lt=Ye),{get:(Fe,bt,ot)=>hn(Fe,bt)||lt.get(Fe,bt,ot),has:(Fe,bt)=>!!hn(Fe,bt)||lt.has(Fe,bt)})},8239:(kt,$e,z)=>{"use strict";function T(ie,Ne,Se,de,Pe,he,we){try{var se=ie[he](we),ce=se.value}catch(pe){return void Se(pe)}se.done?Ne(ce):Promise.resolve(ce).then(de,Pe)}function U(ie){return function(){var Ne=this,Se=arguments;return new Promise(function(de,Pe){var he=ie.apply(Ne,Se);function we(ce){T(he,de,Pe,we,se,"next",ce)}function se(ce){T(he,de,Pe,we,se,"throw",ce)}we(void 0)})}}z.d($e,{Z:()=>U})}},kt=>{kt(kt.s=5160)}]);